try{window.performance.mark("async-comment-item.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-comment-item"],{"./node_modules/@atlaskit/comment/dist/es2019/components/ActionItem.js":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),o=n.n(s),i=n("./node_modules/@atlaskit/analytics-next/dist/es2019/utils/createAndFireEvent.js"),a=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsContext.js"),r=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),c=n("./node_modules/@atlaskit/button/dist/es2019/custom-theme-button/custom-theme-button.js"),l=n("./node_modules/@atlaskit/comment/dist/es2019/version.json");class d extends s.Component{render(){const{children:e,onClick:t,onFocus:n,onMouseOver:s,isDisabled:i}=this.props;return o.a.createElement("span",{onClick:t,onFocus:n,onMouseOver:s},o.a.createElement(c.a,{appearance:"subtle-link",spacing:"none",type:"button",isDisabled:i},e))}}
d.displayName="ActionItem";const m=Object(i.a)("atlaskit");t.a=Object(a.a)({componentName:"commentAction",packageName:l.a,packageVersion:l.b})(Object(r.a)({onClick:m({action:"clicked",actionSubject:"commentAction",attributes:{componentName:"commentAction",packageName:l.a,packageVersion:l.b}})})(d))},"./node_modules/@atlaskit/comment/dist/es2019/components/Author.js":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),o=n.n(s),i=n("./node_modules/@atlaskit/analytics-next/dist/es2019/utils/createAndFireEvent.js"),a=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsContext.js"),r=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),c=n("./node_modules/@atlaskit/comment/dist/es2019/version.json"),l=n("./node_modules/@atlaskit/comment/dist/es2019/components/Field.js");class d extends s.Component{render(){const{children:e,href:t,onClick:n,onFocus:s,onMouseOver:i}=this.props;return o.a.createElement(l.a,{hasAuthor:!0,
href:t,onClick:n,onFocus:s,onMouseOver:i},e)}}d.displayName="Author";const m=Object(i.a)("atlaskit");t.a=Object(a.a)({componentName:"commentAuthor",packageName:c.a,packageVersion:c.b})(Object(r.a)({onClick:m({action:"clicked",actionSubject:"commentAuthor",attributes:{componentName:"commentAuthor",packageName:c.a,packageVersion:c.b}})})(d))},"./node_modules/@atlaskit/comment/dist/es2019/components/Comment.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),o=n.n(s),i=n("./node_modules/react/index.js"),a=n.n(i),r=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=n("./node_modules/@atlaskit/theme/dist/es2019/constants.js");const l={default:"#172B4D",disabled:"rgba(9, 30, 66, 0.54)"},d=r.default.div(["color:",";margin-top:","px;"],(e=>e.isDisabled?l.disabled:l.default),Object(c.gridSize)()/2)
;var m=n("./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/glyph/warning.js"),u=n.n(m);const p=3.5*Object(c.gridSize)(),h=2*Object(c.gridSize)(),g={default:"#42526E",error:"#FF8B00"},f=r.default.div(["display:flex;& + &::before{color:",";content:'\xb7';display:inline-block;text-align:center;vertical-align:middle;width:","px;}"],g.default,h),b=r.default.span(["color:",";padding-right:","px;"],g.error,Object(c.gridSize)()),y=r.default.div(["align-items:center;display:flex;flex-wrap:wrap;margin-top:","px;"],.75*Object(c.gridSize)()),v=e=>e.map(((e,t)=>a.a.createElement(f,{key:t},e)));var j=({actions:e,errorActions:t,errorIconLabel:n,isError:s,isSaving:o})=>{if(o||!e&&!t)return null;const i=s?t&&v(t):e&&v(e);return a.a.createElement(y,null,s?a.a.createElement(b,null,a.a.createElement(u.a,{label:n||""})):null,i)},E=n("./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/glyph/lock-filled.js"),k=n.n(E),C=n("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js")
;const O=r.default.span(["padding-right:","px;"],Object(c.gridSize)()/2),x=r.default.div(["color:",";display:flex;"],"rgba(9, 30, 66, 0.54)"),w=r.default.span(["margin-right:","px;"],Object(c.gridSize)()/2);w.displayName="RestrictedIconWrapper";const S=r.default.div(["display:inline-block;margin-left:","px;[dir='rtl'] &{margin-left:0;margin-right:","px;}&:first-child{margin-left:0;[dir='rtl'] &{margin-right:0;}}"],Object(c.gridSize)(),Object(c.gridSize)()),_=r.default.div(["display:flex;"]);var A=({author:e,edited:t,isError:n,isSaving:s,restrictedTo:o,savingText:i,time:r,type:c})=>{const l=o?a.a.createElement(x,null,a.a.createElement(O,null,"\u2022"),a.a.createElement(w,null,a.a.createElement(k.a,{label:"",size:"small"}))," ",o):null,d=[e||null,c?a.a.createElement(C.a,null,c):null,!r||s||n?null:r,t||null,s?i:null,l].filter((e=>!!e)).map(((e,t)=>a.a.createElement(S,{key:t},e)));return d.length?a.a.createElement(_,null,d):null}
;const M=r.default.div(["grid-area:avatar-area;"]),N=e=>e.shouldRenderNestedCommentsInline?"nested-comments-area":".",T=r.default.div(["display:grid;gap:","px;grid-template:'avatar-area comment-area' '"," nested-comments-area' / auto 1fr;padding-top:","px;position:relative;&:first-child,&:first-of-type{padding-top:0;}"],Object(c.gridSize)(),N,p),I=r.default.div(["grid-area:comment-area;margin-top:","px;min-width:0;word-wrap:break-word;"],.25*Object(c.gridSize)()),P=r.default.div(["background:",";grid-area:1 / 1 / 2 / 3;height:100%;padding:","px ","px ","px;transform:translate(-","px,-","px);width:100%;[dir='rtl'] &{transform:translate(","px,-","px);}pointer-events:none;"],"rgba(9, 30, 66, 0.04)",Object(c.gridSize)(),Object(c.gridSize)(),Object(c.gridSize)()/2,Object(c.gridSize)(),Object(c.gridSize)(),Object(c.gridSize)(),Object(c.gridSize)()),D=r.default.div(["grid-area:nested-comments-area;margin-top:","px;"],p);class F extends i.Component{renderAvatar(){const{avatar:e}=this.props
;return e?a.a.createElement(M,null,e):null}renderNestedComments(){const{children:e}=this.props;return e?a.a.createElement(D,null,e):null}render(){const{content:e,highlighted:t,id:n,shouldRenderNestedCommentsInline:s}=this.props;return a.a.createElement(T,{id:n,shouldRenderNestedCommentsInline:s},this.renderAvatar(),a.a.createElement(I,null,e),this.renderNestedComments(),t&&a.a.createElement(P,null))}}F.displayName="Layout";class V extends i.Component{render(){const{actions:e,author:t,avatar:n,children:s,content:o,edited:i,errorActions:r,errorIconLabel:c,highlighted:l,isError:m,isSaving:u,restrictedTo:p,savingText:h,time:g,type:f,id:b,afterContent:y,shouldRenderNestedCommentsInline:v}=this.props,E={author:t,edited:i,isError:m,isSaving:u,restrictedTo:p,savingText:h,time:g,type:f},k={actions:e,errorActions:r,errorIconLabel:c,isError:m,isSaving:u},C=a.a.createElement("div",null,a.a.createElement(A,E),a.a.createElement(d,{isDisabled:u||m},o),a.a.createElement(j,k),y)
;return a.a.createElement(F,{shouldRenderNestedCommentsInline:v,id:b,avatar:n,content:C,highlighted:l},s)}}V.displayName="Comment",o()(V,"defaultProps",{actions:[],restrictedTo:"",highlighted:!1,isSaving:!1,savingText:"Sending...",isError:!1,errorActions:[],errorIconLabel:""})},"./node_modules/@atlaskit/comment/dist/es2019/components/Edited.js":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),o=n.n(s),i=n("./node_modules/@atlaskit/analytics-next/dist/es2019/utils/createAndFireEvent.js"),a=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsContext.js"),r=n("./node_modules/@atlaskit/analytics-next/dist/es2019/hocs/withAnalyticsEvents.js"),c=n("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.span(["color:",";"],"#6B778C"),l=n("./node_modules/@atlaskit/comment/dist/es2019/version.json");class d extends s.Component{render(){const{children:e,onFocus:t,onMouseOver:n}=this.props;return o.a.createElement(c,{onFocus:t,
onMouseOver:n},e)}}d.displayName="Edited";const m=Object(i.a)("atlaskit");t.a=Object(a.a)({componentName:"commentEdited",packageName:l.a,packageVersion:l.b})(Object(r.a)({onClick:m({action:"clicked",actionSubject:"commentEdited",attributes:{componentName:"commentEdited",packageName:l.a,packageVersion:l.b}})})(d))},"./node_modules/@atlaskit/comment/dist/es2019/components/Field.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n("./node_modules/react/index.js"),o=n.n(s),i=n("./node_modules/styled-components/dist/styled-components.browser.esm.js");const a="#42526E",r=({hasAuthor:e})=>Object(i.css)(["&:not(:hover):not(:active){color:",";}font-weight:",";"],a,e?500:"inherit"),c=i.default.a(["",";"],(e=>r(e))),l=i.default.span(["",";"],(e=>r(e)));class d extends s.Component{render(){const{children:e,hasAuthor:t,href:n,onClick:s,onFocus:i,onMouseOver:a}=this.props;return n?o.a.createElement(c,{href:n,hasAuthor:t,onClick:s,onFocus:i,onMouseOver:a
},e):o.a.createElement(l,{hasAuthor:t,onClick:s,onFocus:i,onMouseOver:a},e)}}d.displayName="CommentField"},"./node_modules/@atlaskit/comment/dist/es2019/version.json":function(e){e.exports=JSON.parse('{"a":"@atlaskit/comment","b":"10.0.6"}')},"./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/dist/es2019/entry-points/base.js":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));var s=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(s),i=n("./node_modules/react/index.js"),a=n("./node_modules/@emotion/css/dist/css.browser.esm.js"),r=n("./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),c=n("./node_modules/@emotion/cache/dist/cache.browser.esm.js"),l=(n("./node_modules/@babel/runtime/helpers/inheritsLoose.js"),
n("./node_modules/@emotion/utils/dist/utils.browser.esm.js")),d=n("./node_modules/@emotion/serialize/dist/serialize.browser.esm.js"),m=Object.prototype.hasOwnProperty,u=Object(i.createContext)("undefined"!=typeof HTMLElement?Object(c.a)():null),p=Object(i.createContext)({}),h=(u.Provider,function(e){var t=function(t,n){return Object(i.createElement)(u.Consumer,null,(function(s){return e(t,s,n)}))};return Object(i.forwardRef)(t)}),g="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",f=function(e,t){var n={};for(var s in t)m.call(t,s)&&(n[s]=t[s]);return n[g]=e,n},b=function(e,t,n,s){var o=null===n?t.css:t.css(n);"string"==typeof o&&void 0!==e.registered[o]&&(o=e.registered[o]);var a=t[g],r=[o],c="";"string"==typeof t.className?c=Object(l.a)(e.registered,r,t.className):null!=t.className&&(c=t.className+" ");var u=Object(d.a)(r);Object(l.b)(e,u,"string"==typeof a);c+=e.key+"-"+u.name;var p={};for(var h in t)m.call(t,h)&&"css"!==h&&h!==g&&(p[h]=t[h]);return p.ref=s,p.className=c,
Object(i.createElement)(a,p)},y=h((function(e,t,n){return"function"==typeof e.css?Object(i.createElement)(p.Consumer,null,(function(s){return b(t,e,s,n)})):b(t,e,null,n)}));var v=n("./node_modules/@emotion/sheet/dist/sheet.browser.esm.js"),j=function(e,t){var n=arguments;if(null==t||!m.call(t,"css"))return i.createElement.apply(void 0,n);var s=n.length,o=new Array(s);o[0]=y,o[1]=f(e,t);for(var a=2;a<s;a++)o[a]=n[a];return i.createElement.apply(null,o)},E=(i.Component,function e(t){for(var n=t.length,s=0,o="";s<n;s++){var i=t[s];if(null!=i){var a=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))a=e(i);else for(var r in a="",i)i[r]&&r&&(a&&(a+=" "),a+=r);break;default:a=i}a&&(o&&(o+=" "),o+=a)}}return o});function k(e,t,n){var s=[],o=Object(l.a)(e,s,n);return s.length<2?n:o+t(s)}h((function(e,t){return Object(i.createElement)(p.Consumer,null,(function(n){var s=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s]
;var o=Object(d.a)(n,t.registered);return Object(l.b)(t,o,!1),t.key+"-"+o.name},o={css:s,cx:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return k(t.registered,s,E(n))},theme:n},i=e.children(o);return!0,i}))}));var C=n("./node_modules/@atlaskit/theme/dist/es2019/components/Theme.js");const O={small:"16px",medium:"24px",large:"32px",xlarge:"48px"},x={light:"#FFFFFF",dark:"#1B2638"},w=(e="light")=>x[e];function S(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const _=Object(i.memo)((function(e){let{primaryColor:t,secondaryColor:n,size:s,mode:i}=e,r=S(e,["primaryColor","secondaryColor","size","mode"]);return j("span",o()({
css:Object(a.a)(s&&`height: ${O[s]}`,";",s&&`width: ${O[s]}`,";color:",t||"currentColor",";display:inline-block;fill:",n||w(i),";flex-shrink:0;line-height:1;> svg{",s&&`height: ${O[s]}`,";",s&&`width: ${O[s]}`,";max-height:100%;max-width:100%;overflow:hidden;pointer-events:none;vertical-align:bottom;}stop{stop-color:currentColor;}")},r))}));var A=Object(i.memo)((function(e){const{glyph:t,dangerouslySetGlyph:n,primaryColor:s,secondaryColor:i,size:a,testId:r,label:c}=e,l=n?{dangerouslySetInnerHTML:{__html:n}}:{children:t?j(t,{role:"presentation"}):null};return j(C.a.Consumer,null,(({mode:e})=>j(_,o()({mode:e,primaryColor:s,secondaryColor:i,size:a,"data-testid":r,role:c?"img":"presentation","aria-label":c||void 0},l))))}))},"./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/glyph/lock-filled.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
;var s=i(n("./node_modules/react/index.js")),o=i(n("./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/dist/es2019/entry-points/base.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a=e=>s.default.createElement(o.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e));a.displayName="LockFilledIcon";var r=a;t.default=r},"./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/glyph/warning.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0
;var s=i(n("./node_modules/react/index.js")),o=i(n("./node_modules/@atlaskit/comment/node_modules/@atlaskit/icon/dist/es2019/entry-points/base.js"));function i(e){return e&&e.__esModule?e:{default:e}}const a=e=>s.default.createElement(o.default,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><g fill-rule="evenodd"><path d="M12.938 4.967c-.518-.978-1.36-.974-1.876 0L3.938 18.425c-.518.978-.045 1.771 1.057 1.771h14.01c1.102 0 1.573-.797 1.057-1.771L12.938 4.967z" fill="currentColor"/><path d="M12 15a1 1 0 01-1-1V9a1 1 0 012 0v5a1 1 0 01-1 1m0 3a1 1 0 010-2 1 1 0 010 2" fill="inherit"/></g></svg>'},e));a.displayName="WarningIcon";var r=a;t.default=r},"./src/packages/issue/issue-actions/issue-comment-base/src/index.js":function(e,t,n){"use strict";n.r(t),n.d(t,"Comment",(function(){return me})),n.d(t,"IssueComment",(function(){return ue}))
;var s=n("./node_modules/react/index.js"),o=n.n(s),i=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),n("./src/packages/platform/ui/error-boundary/src/index.js")),a=n("./src/packages/issue/issue-actions/issue-comment-base/src/state/context.js")
;var r=n("./node_modules/react-intl/lib/index.es.js"),c=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),l=n("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),d=n("./node_modules/@atlaskit/comment/dist/es2019/components/ActionItem.js"),m=n("./node_modules/@atlaskit/comment/dist/es2019/components/Edited.js"),u=n("./node_modules/@atlaskit/comment/dist/es2019/components/Comment.js"),p=n("./node_modules/@atlaskit/comment/dist/es2019/components/Author.js"),h=n("./node_modules/@atlaskit/theme/dist/es2019/index.js"),g=n("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),f=n("./src/packages/platform/observability/browser-metrics/src/index.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),y=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),v=n("./src/packages/platform/ui/error-boundary/src/main.js"),j=n("./src/packages/issue/fields/components/timestamp/src/index.js"),E=n("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),k=n("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),C=n("./src/packages/issue/issue-view/src/common/messages/drafts.js"),O=n("./src/packages/issue/issue-view/src/common/model/comment-type.js"),x=n("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),w=n("./src/packages/issue/issue-view/src/feature-flags.js"),S=n("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js"),_=n("./src/packages/issue/issue-view/src/views/constants.js"),A=n("./src/packages/platform/utils/shallow-equal/src/index.js"),M=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),N=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),T=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js")
;const I=()=>Object(T.b)("issue.details.timezone-refactoring",!1),P=({children:e,fallback:t,packageName:n})=>o.a.createElement(v.a,{id:"issue-comment-reactions",packageName:n,render:()=>t},o.a.createElement(c.a,{fallback:t},e));P.displayName="IssueCommentReactionsBoundary"
;var D=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js"),F=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js"),V=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/index.js"),z=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),R=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),L=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),B=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),H=L.default.div(["line-height:","px;pre{overflow:auto;}a{color:",";}a:hover{color:",";}:first-child{margin-top:0;}:last-child{margin-bottom:0;}overflow:hidden;"],3*B.e,h.a.B400,h.a.B300);class U extends s.PureComponent{constructor(...e){super(...e),this.onContentClick=e=>{Object(R.a)(e.target,e.currentTarget)&&e.stopPropagation()}}render(){
return o.a.createElement(H,null,o.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.html},onClick:this.onContentClick,role:"presentation"}))}}U.displayName="HtmlView",U.defaultProps={html:""};var $=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js");const G=({bodyHtml:e})=>o.a.createElement($.a,null,o.a.createElement(U,{html:e}));G.displayName="PreviewCommentContent";var W=Object(z.a)()(Object(r.i)(G));const Z=({bodyHtml:e})=>o.a.createElement(W,{bodyHtml:e});Z.displayName="IssueCommentEditorReadonly";var J=Object(r.h)({editedBy:{id:"issue-comment-base.comment.edited-by",defaultMessage:"{timestamp} by {author}"},anonymous:{id:"issue-comment-base.comment.anonymous",defaultMessage:"Anonymous"},edit:{id:"issue-comment-base.comment.edit",defaultMessage:"Edit"},delete:{id:"issue-comment-base.comment.delete",defaultMessage:"Delete"},edited:{id:"issue-comment-base.comment.edited",defaultMessage:"Edited"},retrySave:{
id:"issue-comment-base.comment.retry-save",defaultMessage:"Retry"},cancelSave:{id:"issue-comment-base.comment.cancel-save",defaultMessage:"Cancel"},saving:{id:"issue-comment-base.comment.saving",defaultMessage:"Saving..."},confirmationHeader:{id:"issue-comment-base.comment.confirmation-header",defaultMessage:"Delete this comment?"},confirmationContent:{id:"issue-comment-base.comment.confirmation-content",defaultMessage:"Once you delete, it's gone for good."},confirmationActionText:{id:"issue-comment-base.comment.confirmation-action-text",defaultMessage:"Delete"},internalNote:{id:"issue-comment-base.comment.internal-note",defaultMessage:"Internal note"},copy:{id:"issue-comment-base.comment.copy",defaultMessage:"Copy link to comment"}});const Y=L.default.span(["grid-row:1;margin-left:","px;white-space:nowrap;"],.5*B.e);Y.displayName="GridContainer";const q=L.default.span(["display:grid;"]);q.displayName="GridContentContainer";const K={always:Object(L.css)(["color:",";"],h.a.N500),
whenDisplaySettingSwitchable:Object(L.css)([":hover{color:inherit;}"])},Q={inner:{paddingTop:B.e,paddingBottom:B.e/2,paddingLeft:B.e},outer:{paddingTop:28}},X=L.default.div(["border-radius:","px;padding:","px 0 ","px ","px;margin:","px 0 -","px -","px;",";"],B.e/2,Q.inner.paddingTop,Q.inner.paddingBottom,Q.inner.paddingLeft,Q.outer.paddingTop-Q.inner.paddingTop,Q.inner.paddingBottom,Q.inner.paddingLeft,(e=>e.isEditing?"":`background-color: ${e.highlightColor};`)),ee=L.default.div(["height:","px;margin-left:-7px;margin-bottom:4px;"],2.5*B.e),te=L.default.div(["margin-top:","px;&:first-child,&:first-of-type{padding:0;}"],B.e),ne=L.default.div(["padding-top:","px;&:first-child,&:first-of-type{padding:0;}"],3.5*B.e);B.e;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function oe(e){for(var t=1;t<arguments.length;t++){
var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}const re=Object(c.f)((()=>n.e("async-comment-reactions").then(n.bind(null,"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-reactions/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-reactions/index.js"
}),ce=(Object(c.f)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/index.js"}),Object(y.a)(w.isAllActivityEnabled,te,ne));class le extends s.Component{constructor(...e){super(...e),this.onDeleteConfirm=()=>{const{createAnalyticsEvent:e,getOnDeleteConfirm:t}=this.props;return t(e({action:"deleted"}))},this.onEditClick=(e,t)=>{const{getOnEditClick:n,isInternal:s,hasDraft:o}=this.props;n(s),Object(M.b)(t,"editCommentEditor expanded",{hasDraft:o})},this.onEditSave=e=>{if(!Object(N.g)(e)){const{author:t,commentId:n,createdDate:s,bodyHtml:o,shouldShowCommentVisibility:i,visibility:a,visibilityEdited:r,getOnEditSave:c,createAnalyticsEvent:l}=this.props,d=t?t.id:null,m=l({action:"updated"});i&&m.update({isVisibilityUpdated:!Object(F.a)(a,r)}),c({authorId:d,createdDate:s,bodyAdf:e,bodyHtml:o,
isNewComment:n.includes("NEW_OPTIMISTIC_COMMENT"),visibility:r},m)}},this.getAuthorDisplayName=e=>e?e.displayName:this.props.intl.formatMessage(J.anonymous),this.getCommentReactions=()=>o.a.createElement(ee,null,o.a.createElement(P,{packageName:"issue",fallback:o.a.createElement(o.a.Fragment,null)},o.a.createElement(re,null))),this.getCommentActions=()=>[this.props.canEdit&&o.a.createElement(d.a,{key:"edit",onClick:this.onEditClick},this.props.intl.formatMessage(J.edit),this.props.hasDraft?` (${this.props.intl.formatMessage(C.a.draftIndicator)})`:""),this.props.canDelete&&o.a.createElement(d.a,{key:"delete",onClick:this.props.onDeleteClick},this.props.intl.formatMessage(J.delete)),this.props.showReactions&&this.getCommentReactions()].filter((e=>!!e)),this.getCommentSaveFailedActions=()=>[o.a.createElement(d.a,{key:"retry",onClick:this.props.onSaveRetry},this.props.intl.formatMessage(J.retrySave)),o.a.createElement(d.a,{key:"edit",onClick:this.props.onSaveEdit
},this.props.intl.formatMessage(J.edit)),o.a.createElement(d.a,{key:"cancel",onClick:this.props.onSaveCancel},this.props.intl.formatMessage(J.cancelSave))].filter((e=>!!e)),this.renderAdfRendererFallback=()=>o.a.createElement(Z,{bodyHtml:this.props.bodyHtml}),this.getCommentContent=()=>{const{bodyAdf:e,commentId:t,isEditing:n,onEditCancel:s,onEditUpdate:i,onEditPaste:a,onBlur:r,visibilityEdited:c,onCommentVisibilityChange:l,shouldShowCommentVisibility:d}=this.props,m={commentId:t,isEditing:n,secondaryToolbarComponents:d?[o.a.createElement(D.a,{key:"commentVisibilitySelector",initialValue:c,onChange:l})]:void 0,onCancel:s,onChange:i,onSave:this.onEditSave,onPaste:a,onBlur:r};return o.a.createElement(v.a,{id:"issue-comment-editor",packageName:"issue",render:this.renderAdfRendererFallback},o.a.createElement(V.default,ae({},m,{bodyAdf:e})))},this.getCommentTime=()=>o.a.createElement(j.a,{value:this.props.createdDate,timeZone:I()?void 0:this.props.timeZone,tooltipPosition:"top",
extraStyles:K}),this.getCommentEditedToolTip=()=>{const{intl:e}=this.props,t=o.a.createElement(r.c,ae({},J.editedBy,{values:{author:this.getAuthorDisplayName(this.props.updateAuthor),timestamp:o.a.createElement(j.a,{value:this.props.updatedDate||"",timeZone:this.props.timeZone})}}));return o.a.createElement(g.a,{content:t,position:"top"},o.a.createElement(m.a,null,e.formatMessage(J.edited)))},this.getFormattedGridContainer=(e,t)=>o.a.createElement(q,null,o.a.createElement(Y,null,e),null!=t?o.a.createElement(Y,null,t):null),this.getPermalinkIcon=e=>{const{commentId:t,fullIssueUrl:n,onCopyClick:s,intl:{formatMessage:i}}=this.props;return o.a.createElement(E.a,{id:t,fullIssueUrl:`${n}?focusedCommentId=${t}`,label:i(J.copy),onCopyClick:s,isVisible:e.isVisible})},this.renderEditedOld=()=>this.props.edited?this.getCommentEditedToolTip():null,this.getEditingAndRestrictedTo=(e,t)=>{const{isEditing:n,hasSaveFailed:s,isOptimistic:o}=this.props,i=this.getPermalinkIcon(t),a=e.length>0
;if(o&&!s)return{restrictedTo:null,edited:null};const r=a?this.getFormattedGridContainer(e,i):null,c=a?null:i,l=this.getCommentEditedToolTip();return n?{restrictedTo:null,edited:this.props.edited?l:null}:this.props.edited?{restrictedTo:r,edited:this.getFormattedGridContainer(l,c)}:{restrictedTo:r,edited:c}},this.optimisticCommentContainerRef=void 0,this.renderComment=e=>{const{author:t,isOptimistic:n,hasSaveFailed:s,hasDeleteModal:i,onDeleteCancel:a,isEditing:r,isHighlighted:c,isInternal:d,commentId:m}=this.props;return o.a.createElement(k.a,null,(h=>{const{restrictedTo:g,edited:f}=n?{}:this.getEditingAndRestrictedTo(e,h),y=o.a.createElement(u.a,{avatar:o.a.createElement(S.a,{userAccount:t,analyticsData:{trigger:"comment-avatar"}},o.a.createElement(l.a,{borderColor:"transparent",src:t&&t.avatarUrl||void 0,size:"medium"})),author:o.a.createElement(S.a,{userAccount:t,analyticsData:{trigger:"comment-author"}},o.a.createElement(p.a,null,this.getAuthorDisplayName(t))),
time:this.getCommentTime(),edited:n?this.renderEditedOld():f,content:o.a.createElement("div",null,this.getCommentContent(),i&&o.a.createElement(b.b,{appearance:"danger",headerMessage:this.props.intl.formatMessage(J.confirmationHeader),contentMessage:this.props.intl.formatMessage(J.confirmationContent),confirmActionText:this.props.intl.formatMessage(J.confirmationActionText),onConfirm:this.onDeleteConfirm,onCancel:a,externalId:"issue.comment.delete"})),restrictedTo:n?e:g,actions:n||r?[]:this.getCommentActions(),isError:s&&!r,errorActions:this.getCommentSaveFailedActions(),isSaving:n&&!s,savingText:this.props.intl.formatMessage(J.saving),highlighted:!d&&!r&&c});return n?o.a.createElement("div",{ref:e=>{this.optimisticCommentContainerRef=e}},y):o.a.createElement(ce,{onMouseEnter:h.show,onMouseLeave:h.hide,onFocus:h.show,onBlur:h.hide},o.a.createElement("span",{"data-testid":`comment-base-item-${m}`,ref:this.setCommentPermalinkContainer},y))}))},this.renderInternalComment=()=>{
const{visibility:e,intl:t,isEditing:n,isHighlighted:s}=this.props,i=s?h.a.Y75:h.a.Y50,a="public"===e.type?`${t.formatMessage(J.internalNote)}`:`${e.value} \u2022 ${t.formatMessage(J.internalNote)}`;return o.a.createElement(X,{isEditing:n,highlightColor:i},this.renderComment(a))},this.setCommentPermalinkContainer=e=>{this.commentPermalinkContainer=e},this.commentPermalinkContainer=void 0,this.scrollCommentIntoView=()=>{const{hasScrolledPermalink:e,shouldScrollAfterAsyncComponentsLoaded:t,setScrollStatus:n,createAnalyticsEvent:s}=this.props;if(!e&&t){Object(x.b)(this.commentPermalinkContainer,{scrollMode:"always",behavior:"smooth"}),n(!0);const e=s({action:"scrolled"});Object(M.h)(e,"permalink comment",{name:"comment"})}}}componentDidMount(){if(Object(w.isActivitySortingEnabled)()){const{props:{isOptimistic:e,commentId:t},optimisticCommentContainerRef:n}=this;e&&t.includes("NEW_OPTIMISTIC_COMMENT")&&n&&Object(x.b)(n,{scrollMode:"always",behavior:"smooth"})}
this.props.isOptimistic?Object(f.c)().markTimeToFeedback({key:_.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT}):Object(f.c)().markTimeToFinishTask({key:_.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT}),this.scrollCommentIntoView()}shouldComponentUpdate(e){if(!this.props.shouldScrollAfterAsyncComponentsLoaded&&e.shouldScrollAfterAsyncComponentsLoaded||!this.props.hasScrolledPermalink&&e.hasScrolledPermalink){const t=oe(oe({},this.props),{},{shouldScrollAfterAsyncComponentsLoaded:e.shouldScrollAfterAsyncComponentsLoaded,hasScrolledPermalink:e.hasScrolledPermalink});if(Object(A.a)(t,e))return e.isHighlighted&&!e.hasScrolledPermalink}return!0}componentDidUpdate(){this.scrollCommentIntoView()}render(){const{visibility:e,isInternal:t}=this.props;return t?this.renderInternalComment():this.renderComment(e.value)}}function de(e,t){if(null==e)return{};var n,s,o=function(e,t){if(null==e)return{};var n,s,o={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}le.displayName="Comment",le.displayName="Comment",le.defaultProps={isEditing:!1,visibility:O.a,updatedDate:null,edited:!1};const me=e=>{const{baseUrl:t,issueAri:n,commentAri:r,isReactionsFeatureActive:c,mediaContext:l,mentionProvider:d,contextIdentifier:m,getEncodedMention:u,projectType:p,activityProvider:h,sharedAtTimestamp:g,sharedValue:f,onEditorExpandedFailure:b,onEditorSaveFailure:y,onEditorClearSharedValues:v}=e,j=de(e,["baseUrl","issueAri","commentAri","isReactionsFeatureActive","mediaContext","mentionProvider","contextIdentifier","getEncodedMention","projectType","activityProvider","sharedAtTimestamp","sharedValue","onEditorExpandedFailure","onEditorSaveFailure","onEditorClearSharedValues"]),[,{setContextState:E,setEditorState:k,setReactionsState:C}]=(()=>{const[,e]=Object(a.b)()
;return[null,Object(s.useMemo)((()=>({setContextState:t=>{e.setContextState(t)},setEditorState:t=>{e.setEditorState(t)},setReactionsState:t=>{e.setReactionsState(t)}})),[e])]})();return Object(s.useEffect)((()=>{E({baseUrl:t,issueAri:n,commentAri:r,projectType:p})}),[t,r,n,p,E]),Object(s.useEffect)((()=>{k({contextIdentifier:m,mentionProvider:d,getEncodedMention:u,activityProvider:h,mediaContext:l,sharedAtTimestamp:g,sharedValue:f,onEditorExpandedFailure:b,onEditorSaveFailure:y,onEditorClearSharedValues:v})}),[h,m,u,l,d,v,b,y,k,g,f]),Object(s.useEffect)((()=>{C({isActive:c})}),[c,C]),o.a.createElement(i.b,{id:`issue-comment-${e.commentId}`},o.a.createElement(le,j))};me.displayName="Comment";const ue=e=>o.a.createElement(a.a,{scope:`comment-${e.commentId}`},o.a.createElement(me,e));ue.displayName="IssueComment";t.default=ue},"./src/packages/issue/issue-actions/issue-comment-base/src/state/context.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){
return g})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y}));var s=n("./node_modules/lodash/noop.js"),o=n.n(s),i=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=n("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=n("./node_modules/react-sweet-state/lib/esm/components/container.js");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){
return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m={setContextState:e=>({setState:t,getState:n})=>{t(l(l({},n()),{},{context:e}))},setEditorState:e=>({setState:t,getState:n})=>{t(l(l({},n()),{},{editor:e}))},setReactionsState:e=>({setState:t,getState:n})=>{t(l(l({},n()),{},{reactions:e}))}},u={context:{baseUrl:null,issueAri:null,commentAri:null,projectType:null},editor:{contextIdentifier:null,mentionProvider:null,getEncodedMention:()=>"",activityProvider:null,mediaContext:null,sharedAtTimestamp:null,sharedValue:void 0,onEditorExpandedFailure:o.a,onEditorSaveFailure:o.a,onEditorClearSharedValues:o.a},reactions:{isActive:!1}},p=Object(i.a)({name:"issue-comment",initialState:u,actions:m}),h=Object(a.a)(p,{selector:e=>e.context}),g=Object(a.a)(p,{selector:e=>e.editor}),f=Object(a.a)(p,{selector:e=>e.reactions}),b=Object(a.a)(p,{selector:null}),y=Object(r.a)(p)},
"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/index.js":function(e,t,n){"use strict";n.r(t);var s=n("./node_modules/react/index.js"),o=n.n(s),i=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),n("./src/packages/issue/issue-actions/issue-comment-base/src/state/context.js")),a=n("./node_modules/lodash/noop.js"),r=n.n(a),c=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),l=n("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js"),d=n("./src/packages/issue/issue-view/src/common/component/editor/async.js"),m=n("./src/packages/issue/issue-view/src/common/component/renderer/index.js");const u=({adf:e})=>{const[{baseUrl:t}]=Object(i.c)(),[{mentionProvider:n,contextIdentifier:s,mediaContext:a,getEncodedMention:r}]=Object(i.d)();return null!==t&&n&&s&&a?o.a.createElement(m.a,{adf:e,baseUrl:t,mentionProvider:n,contextIdentifier:s,mediaContext:a,mentionEncoder:r}):null};u.displayName="ConnectedRenderer"
;var p=u,h=n("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js");const g=Object(c.f)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/comment-editor/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/comment-editor/index.js"});class f extends s.Component{constructor(...e){super(...e),this.getEditValue=()=>this.props.draftValue||this.props.bodyAdf,this.renderEditor=()=>{const e=o.a.createElement(p,{adf:this.props.bodyAdf}),t={isExpanded:!0,isExpandedByDefault:!0,shouldFocus:!0,defaultValue:this.getEditValue(),secondaryToolbarComponents:this.props.secondaryToolbarComponents,onBlur:this.props.onBlur,onSave:this.props.onSave,onCancel:this.props.onCancel,onChange:this.props.onChange,onPaste:this.props.onPaste},n=o.a.createElement(d.a,{packageName:"issue",fallback:e},o.a.createElement(g,t))
;return this.props.isServiceDesk?o.a.createElement(l.a,{isExpanded:!0,commentId:this.props.commentId},n):n}}render(){return o.a.createElement(h.a,null,this.props.isEditing?this.renderEditor():o.a.createElement(p,{adf:this.props.bodyAdf}))}}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}f.displayName="CommentContent",f.displayName="CommentContent",f.defaultProps={isServiceDesk:!1,onBlur:r.a,onSave:r.a,onCancel:r.a,onChange:r.a,onPaste:r.a};const y=e=>{const[{projectType:t}]=Object(i.c)();return i.c?o.a.createElement(f,b({},e,{isServiceDesk:"service_desk"===t})):null};y.displayName="ConnectedCommentContent";t.default=y}}]);try{window.__jsEvalStop("async-comment-item.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-comment-item.4fcced3a402e5fdeafc3.8.js.map