try{window.performance.mark("async-issue-app~issue.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-issue-app~issue"],{"./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o}));const n="issue",a={comment:"comment",worklog:"worklog",description:"description",environment:"environment",customfield:"customfield",issue:n},i="DESC",r={FILENAME:"FILENAME",CREATED:"CREATED",FILESIZE:"FILESIZE",MIMETYPE:"MIMETYPE"},o=r.CREATED},"./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}))
;var n=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),a=s("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={isDownloading:!1,isFetching:!1,error:null,totalCount:void 0,deletableCount:void 0,visibleAttachments:[]
},l=()=>"\n  query attachmentsQuery($issueKey: String, $startAt: Long, $maxResults: Long, $orderField: AttachmentsOrderField, $orderDirection: OrderDirection) {\n    viewIssue(issueKey: $issueKey) {\n        attachments(startAt: $startAt, maxResults: $maxResults, orderField: $orderField, orderDirection: $orderDirection) {\n            nodes {\n                id\n                filename\n                mimetype\n                mediaApiFileId\n                createdDate\n                filesize\n                parentName\n                parentId\n                author {\n                    accountId\n                }\n                isParentCommentJsdInternal\n            }\n            totalCount\n            deletableCount\n        }\n    }\n  }",u={startAt:0,maxResults:6,orderField:a.d,orderDirection:a.c},d=async(e,t,s)=>{var a,i;const o=r(r({},u),s),c=await Object(n.d)(`${t}/rest/gira/1/`,{body:JSON.stringify({query:l(),variables:r({issueKey:e},o)})
}),d=null==c||null===(a=c.data)||void 0===a||null===(i=a.viewIssue)||void 0===i?void 0:i.attachments;return d&&d.nodes&&void 0!==d.totalCount?c.data.viewIssue.attachments:null},p=async(e,t)=>Object(n.a)(`${e}/rest/api/2/attachment/${t}`)},"./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return v}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/ui/flags/src/services/index.js"),i=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),r=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js"),l=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js")
;const u=(e,t)=>e.issueAttachments[t]||c.c,d=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).isFetching}),p=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).error}),m=Object(o.a)(l.a,{selector:e=>e.meta.orderDirection}),b=Object(o.a)(l.a,{selector:e=>e.meta.orderField}),f=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).totalCount}),g=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).deletableCount}),h=Object(o.a)(l.a,{selector:e=>e.meta.startAt}),y=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).visibleAttachments}),O=Object(o.a)(l.a,{selector:null}),j=()=>{const[,e]=O(),t=Object(i.a)(),{showFlag:s}=Object(a.f)(),{setOrderDirection:o,setOrderField:c,setTotalCount:l,setDeletableCount:u,setVisibleAttachments:d,addNewAttachments:p,deleteAttachment:m,getAttachments:b,refreshAttachments:f}=e,g=Object(n.useCallback)((async(e,n,a)=>{try{await m(e,n,t,a)}catch{s({type:"error",title:r.a.deleteFailedTitle,description:r.a.deleteFailedDescription})}}),[m,t,s]);return[null,{setOrderDirection:o,setOrderField:c,setTotalCount:l,
setDeletableCount:u,setVisibleAttachments:d,addNewAttachments:p,getAttachments:Object(n.useCallback)((async(e,s)=>{await b(e,t,s)}),[t,b]),deleteAttachment:g,refreshAttachments:Object(n.useCallback)((async(e,s)=>{await f(e,t,s)}),[t,f])}]},v=(e,t)=>{const[,s]=j(),[a]=d(e),[i]=p(e),[r]=m(),[o]=b(),[c]=h(),[l]=f(e),[u]=g(e),[O]=y(e),{getAttachments:v}=s;Object(n.useEffect)((()=>{void 0!==l||a||i||v(e,t)}),[i,v,e,a,t,l]);return[{error:i,meta:{orderDirection:r,orderField:o,startAt:c},value:{attachments:O,totalCount:l||0,deletableCount:u||0},loading:a},s]}},"./src/packages/issue/attachments/issue-attachments-base/src/services/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return D}));var a={};n.r(a),n.d(a,"setIsDownloading",(function(){return x})),n.d(a,"setDeleteAllDialogOpen",(function(){return I})),n.d(a,"setIsFetching",(function(){return p})),n.d(a,"setOrderDirection",(function(){return b})),n.d(a,"setOrderField",(function(){return f})),n.d(a,"setStartAt",(function(){
return y})),n.d(a,"setTotalCount",(function(){return g})),n.d(a,"setDeletableCount",(function(){return h})),n.d(a,"setVisibleAttachments",(function(){return O})),n.d(a,"addNewAttachments",(function(){return j})),n.d(a,"getAttachments",(function(){return v})),n.d(a,"deleteAttachment",(function(){return E})),n.d(a,"refreshAttachments",(function(){return k}));var i=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=n("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),c=n("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{isFetching:t})})})},m=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{error:t})})})},b=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:u(u({},n),{},{orderDirection:e})})},f=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:u(u({},n),{},{orderField:e})})},g=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{
[e]:u(u({},a.issueAttachments[e]||c.c),{},{totalCount:t})})})},h=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{deletableCount:t})})})},y=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:u(u({},n),{},{startAt:e})})},O=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{visibleAttachments:t})})})},j=(e,t)=>({setState:s,getState:n})=>{const a=n(),i=a.issueAttachments[e]?a.issueAttachments[e].visibleAttachments:[],r=a.issueAttachments[e]&&a.issueAttachments[e].totalCount||0,o=t.concat(i),l=r+t.length;s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{visibleAttachments:o,totalCount:l})})})},v=(t,s,n)=>async({dispatch:a})=>{a(p(t,!0)),a(m(t,null));try{const e=await Object(c.b)(t,s,n);if(e)a(g(t,e.totalCount)),
"number"==typeof e.deletableCount&&a(h(t,e.deletableCount)),a(O(t,e.nodes)),a(b((null==n?void 0:n.orderDirection)||r.c)),a(f((null==n?void 0:n.orderField)||r.d)),a(y((null==n?void 0:n.startAt)||0));else{const e="Failed to fetch issue attachments";a(m(t,new Error(e))),o.a.safeErrorWithoutCustomerData("issue.attachments.fetch-attachments",e)}}catch(e){a(m(t,e)),o.a.safeErrorWithoutCustomerData("issue.attachments.fetch-attachments",e.toString())}a(p(t,!1))},E=(e,t,s,n)=>async({dispatch:a,getState:i})=>{const r=i().issueAttachments[e],{totalCount:o,visibleAttachments:l}=r;if(void 0!==o){a(O(e,l.filter((e=>e.id!==t)))),a(g(e,o-1));try{await Object(c.a)(s,t),a(v(e,s,n))}catch(u){throw a(v(e,s,n)),u}}},k=(e,t,s)=>({dispatch:n,getState:a})=>{const i=a(),r=i.issueAttachments[e],{startAt:o}=i.meta,{isFetching:c}=r;(!c||s&&s.startAt!==o)&&n(v(e,t,s))};function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){C(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:S(S({},n),{},{isDeleteAllDialogOpen:e})})};function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?T(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:P(P({},a.issueAttachments),{},{[e]:P(P({},a.issueAttachments[e]),{},{isDownloading:t})})})},D=Object(i.a)({name:"issue-attachments",initialState:{issueAttachments:{},meta:{orderDirection:r.c,orderField:r.d,startAt:0,isDeleteAllDialogOpen:!1}},actions:a})},"./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({gotIt:{id:"issue-attachments-base.services.got-it",defaultMessage:"Got it"},tryAgain:{
id:"issue-attachments-base.services.try-again",defaultMessage:"Try again"},downloadStartTitle:{id:"issue-attachments-base.services.download-start-title",defaultMessage:"Downloading attachments"},downloadStartDescription:{id:"issue-attachments-base.services.download-start-description",defaultMessage:"This might take a while. When we\u2019re done, your attachments will be in a zip file on your device."},downloadFailedTitle:{id:"issue-attachments-base.services.download-failed-title",defaultMessage:"We couldn\u2019t download your attachments"},downloadFailedDescription:{id:"issue-attachments-base.services.download-failed-description",defaultMessage:"We didn\u2019t finish downloading your attachments for {issueKey}. Check your connection and then try again."},downloadFailedExceedFileSizeDescription:{id:"issue-attachments-base.services.download-failed-exceed-file-size-description",
defaultMessage:"The total size of {issueKey}'s attachments is too large to download. Try downloading each attachment individually."},deleteFailedTitle:{id:"issue-attachments-base.services.delete-failed-title",defaultMessage:"Attachment could not be deleted"},deleteFailedDescription:{id:"issue-attachments-base.services.delete-failed-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}})},"./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg":function(e,t,s){e.exports=s.p+"assets/cloud.45c69da8a128cc239c19035695bab30d.8.svg"},"./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg":function(e,t,s){e.exports=s.p+"assets/search.1cc781b7e8848ea0f1d2dc40004f854f.8.svg"},"./src/packages/issue/base-components/base-select/src/ui/format-option-label/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/constants.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const u=r.default.div(["display:flex;align-items:center;"]),d=r.default.div(["flex-direction:column;display:flex;width:100%;"]),p=r.default.div(["margin-right:","px;display:flex;"],l.e),m=r.default.div([""]),b=r.default.div(["font-size:","px;color:",";"],o.fontSizeSmall,c.a.N300),f=e=>{const{option:{label:t,iconUrl:s,description:n},optionContext:r}=e;return a.a.createElement(u,null,Boolean(s)&&a.a.createElement(p,null,a.a.createElement(i.a,{appearance:"square",size:"xsmall",src:s,borderColor:"transparent"
})),a.a.createElement(d,null,a.a.createElement(m,null,t),"menu"===r&&Boolean(n)&&a.a.createElement(b,null,n)))};f.displayName="SelectOptionWithAvatarAndDescription";const g=(e,{context:t})=>a.a.createElement(f,{option:e,optionContext:t});g.displayName="formatOptionLabel"},"./src/packages/issue/base-components/base-select/src/ui/styled.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=(s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"));function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=n.default.span(["display:flex;align-items:center;"]),l=n.default.span(["display:flex;padding-right:","px;"],a.e),u=n.default.span(["display:flex;"]),d=Object(n.default)(c)(["justify-content:center;"]),p={menuPortal:e=>r(r({},e),{},{zIndex:a.f.modal})},m=n.default.div(["",";"],(e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*a.e}px;`:""))},"./src/packages/issue/base-components/base-select/src/ui/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const i=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),r=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!("string"!=typeof e.label||!i(e.label,s))||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some((e=>i(e,s)))},o=(e,...t)=>{const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach((e=>{e&&Object.keys(e).forEach((t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n}))})),i}},"./src/packages/issue/ecosystem-service/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),s.d(n,"setEcosystem",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{e&&t(e)},o=Object(a.a)({name:"issue-view-layout-ecosystem-service",initialState:{activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]},actions:n}),c=Object(i.a)(o),l=Object(i.a)(o,{selector:null}),u=()=>{const[e]=c();return[e.glances]},d=()=>{const[,{setEcosystem:e}]=l();return[void 0,{setEcosystem:e}]}},
"./src/packages/issue/epic-color/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"k",(function(){return o})),s.d(t,"j",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const r={PURPLE:i.a.P200,BLUE:i.a.B200,GREEN:i.a.G200,TEAL:i.a.T200,YELLOW:i.a.Y200,ORANGE:i.a.R200,GREY:i.a.N200,DARK_PURPLE:i.a.P400,DARK_BLUE:i.a.B400,DARK_GREEN:i.a.G400,DARK_TEAL:i.a.T400,DARK_YELLOW:i.a.Y400,DARK_ORANGE:i.a.R400,DARK_GREY:i.a.N700},o=a()(r),c={purple:"PURPLE",dark_purple:"DARK_PURPLE",blue:"BLUE",dark_blue:"DARK_BLUE",green:"GREEN",dark_green:"DARK_GREEN",teal:"TEAL",dark_teal:"DARK_TEAL",
yellow:"YELLOW",dark_yellow:"DARK_YELLOW",orange:"ORANGE",dark_orange:"DARK_ORANGE",grey:"GREY",dark_grey:"DARK_GREY"},l=a()(c),u={"ghx-label-1":"DARK_GREY","ghx-label-2":"DARK_YELLOW","ghx-label-3":"YELLOW","ghx-label-4":"DARK_BLUE","ghx-label-5":"DARK_TEAL","ghx-label-6":"GREEN","ghx-label-7":"PURPLE","ghx-label-8":"DARK_PURPLE","ghx-label-9":"ORANGE","ghx-label-10":"BLUE","ghx-label-11":"TEAL","ghx-label-12":"GREY","ghx-label-13":"DARK_GREEN","ghx-label-14":"DARK_ORANGE"},d=a()(u),p={color_1:"DARK_GREY",color_2:"DARK_YELLOW",color_3:"YELLOW",color_4:"DARK_BLUE",color_5:"DARK_TEAL",color_6:"GREEN",color_7:"PURPLE",color_8:"DARK_PURPLE",color_9:"ORANGE",color_10:"BLUE",color_11:"TEAL",color_12:"GREY",color_13:"DARK_GREEN",color_14:"DARK_ORANGE"},m=a()(p),b={"ghx-label-1":"color_1","ghx-label-2":"color_2","ghx-label-3":"color_3","ghx-label-4":"color_4","ghx-label-5":"color_5","ghx-label-6":"color_6","ghx-label-7":"color_7","ghx-label-8":"color_8","ghx-label-9":"color_9",
"ghx-label-10":"color_10","ghx-label-11":"color_11","ghx-label-12":"color_12","ghx-label-13":"color_13","ghx-label-14":"color_14"},f={color_1:"grey",color_2:"yellow",color_3:"yellowLight",color_4:"blue",color_5:"teal",color_6:"greenLight",color_7:"purpleLight",color_8:"purple",color_9:"redLight",color_10:"blueLight",color_11:"tealLight",color_12:"greyLight",color_13:"green",color_14:"red"},g={PURPLE:{primary:i.a.P200,secondary:i.a.P500,text:i.a.P500,textBackground:i.a.P50,border:i.a.P400,line:i.a.P300,primaryGradient:i.a.P75,hasContrastSecondaryGradient:!0},BLUE:{primary:i.a.B200,secondary:i.a.B500,text:i.a.B500,textBackground:i.a.B50,border:i.a.B400,line:i.a.B300,primaryGradient:i.a.B75,hasContrastSecondaryGradient:!0},GREEN:{primary:i.a.G200,secondary:i.a.G500,text:i.a.G500,textBackground:i.a.G50,border:i.a.G400,line:i.a.G300,primaryGradient:i.a.G75,hasContrastSecondaryGradient:!0},TEAL:{primary:i.a.T200,secondary:i.a.T500,text:i.a.T500,textBackground:i.a.T50,border:i.a.T400,
line:i.a.T300,primaryGradient:i.a.T75,hasContrastSecondaryGradient:!0},YELLOW:{primary:i.a.Y200,secondary:i.a.Y500,text:i.a.Y500,textBackground:i.a.Y50,border:i.a.Y400,line:i.a.Y300,primaryGradient:i.a.Y75,hasContrastSecondaryGradient:!0},ORANGE:{primary:i.a.R200,secondary:i.a.R500,text:i.a.R500,textBackground:i.a.R50,border:i.a.R400,line:i.a.R300,primaryGradient:i.a.R75,hasContrastSecondaryGradient:!0},GREY:{primary:i.a.N200,secondary:i.a.N500,text:i.a.N500,textBackground:i.a.N30,border:i.a.N700,line:i.a.N500,primaryGradient:i.a.N50,hasContrastSecondaryGradient:!0},DARK_PURPLE:{primary:i.a.P400,secondary:i.a.P200,text:i.a.N0,textBackground:i.a.P400,border:i.a.P100,line:i.a.P300,primaryGradient:i.a.P100,hasContrastSecondaryGradient:!1},DARK_BLUE:{primary:i.a.B400,secondary:i.a.B200,text:i.a.N0,textBackground:i.a.B400,border:i.a.B200,line:i.a.B100,primaryGradient:i.a.B100,hasContrastSecondaryGradient:!1},DARK_GREEN:{primary:i.a.G400,secondary:i.a.G200,text:i.a.N0,
textBackground:i.a.G400,border:i.a.G200,line:i.a.G300,primaryGradient:i.a.G200,hasContrastSecondaryGradient:!1},DARK_TEAL:{primary:i.a.T400,secondary:i.a.T200,text:i.a.N0,textBackground:i.a.T400,border:i.a.T200,line:i.a.T300,primaryGradient:i.a.T100,hasContrastSecondaryGradient:!1},DARK_YELLOW:{primary:i.a.Y400,secondary:i.a.Y200,text:i.a.N0,textBackground:i.a.Y400,border:i.a.Y200,line:i.a.Y300,primaryGradient:i.a.Y100,hasContrastSecondaryGradient:!1},DARK_ORANGE:{primary:i.a.R400,secondary:i.a.R200,text:i.a.N0,textBackground:i.a.R400,border:i.a.R100,line:i.a.R300,primaryGradient:i.a.R100,hasContrastSecondaryGradient:!1},DARK_GREY:{primary:i.a.N700,secondary:i.a.N300,text:i.a.N0,textBackground:i.a.N500,border:i.a.N100,line:i.a.N500,primaryGradient:i.a.N100,hasContrastSecondaryGradient:!1}}},"./src/packages/issue/epic-color/src/common/types.js":function(e,t,s){"use strict";s.d(t,"g",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),
s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return u}));const n="PURPLE",a="BLUE",i="GREEN",r="GREY",o={PURPLE:n,DARK_PURPLE:"DARK_PURPLE",BLUE:a,DARK_BLUE:"DARK_BLUE",GREEN:i,DARK_GREEN:"DARK_GREEN",TEAL:"TEAL",DARK_TEAL:"DARK_TEAL",YELLOW:"YELLOW",DARK_YELLOW:"DARK_YELLOW",ORANGE:"ORANGE",DARK_ORANGE:"DARK_ORANGE",GREY:r,DARK_GREY:"DARK_GREY"},c={SERVER_PURPLE:"purple",SERVER_DARK_PURPLE:"dark_purple",SERVER_BLUE:"blue",SERVER_DARK_BLUE:"dark_blue",SERVER_GREEN:"green",SERVER_DARK_GREEN:"dark_green",SERVER_TEAL:"teal",SERVER_DARK_TEAL:"dark_teal",SERVER_YELLOW:"yellow",SERVER_DARK_YELLOW:"dark_yellow",SERVER_ORANGE:"orange",SERVER_DARK_ORANGE:"dark_orange",SERVER_GREY:"grey",SERVER_DARK_GREY:"dark_grey"},l={GHX_LABEL_1:"ghx-label-1",GHX_LABEL_2:"ghx-label-2",GHX_LABEL_3:"ghx-label-3",GHX_LABEL_4:"ghx-label-4",GHX_LABEL_5:"ghx-label-5",GHX_LABEL_6:"ghx-label-6",
GHX_LABEL_7:"ghx-label-7",GHX_LABEL_8:"ghx-label-8",GHX_LABEL_9:"ghx-label-9",GHX_LABEL_10:"ghx-label-10",GHX_LABEL_11:"ghx-label-11",GHX_LABEL_12:"ghx-label-12",GHX_LABEL_13:"ghx-label-13",GHX_LABEL_14:"ghx-label-14"},u={AGILE_COLOR_1:"color_1",AGILE_COLOR_2:"color_2",AGILE_COLOR_3:"color_3",AGILE_COLOR_4:"color_4",AGILE_COLOR_5:"color_5",AGILE_COLOR_6:"color_6",AGILE_COLOR_7:"color_7",AGILE_COLOR_8:"color_8",AGILE_COLOR_9:"color_9",AGILE_COLOR_10:"color_10",AGILE_COLOR_11:"color_11",AGILE_COLOR_12:"color_12",AGILE_COLOR_13:"color_13",AGILE_COLOR_14:"color_14"}},"./src/packages/issue/epic-color/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return p})),s.d(t,"k",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"i",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"d",(function(){return O})),
s.d(t,"g",(function(){return v}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./src/packages/issue/epic-color/src/common/constants.js"),r=s("./src/packages/issue/epic-color/src/common/types.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=e=>{if(null==e)return r.d.PURPLE;if(e in r.d)return e;const t=i.j[e];if(t)return t
;const s=i.e[e];if(s)return s;const n=i.i[e];return n||r.d.PURPLE},d=e=>{if(null==e)return r.h.SERVER_PURPLE;if(e in r.h)return e;const t=i.h[e];if(t)return t;const s=i.h[i.e[e]];if(s)return s;const n=i.h[i.i[e]];return n||r.h.SERVER_PURPLE},p=e=>{if(null===e)return i.g[r.d.PURPLE];if(e in r.c)return e;const t=i.g[e];if(t)return t;const s=i.g[i.j[e]];if(s)return s;const n=i.g[i.e[e]];return n||i.g[r.d.PURPLE]},m=(e,t)=>{const s=c(c({},i.a),t);return(t?Object.keys(t).concat(Object.keys(r.d)):Object.keys(r.d)).reduce(((t,n)=>c(c({},t),{},{[n]:e(s[n])})),{})},b=e=>i.d[e]||i.d.PURPLE,f=e=>a()(i.d)[e]||"PURPLE",g=e=>""!==e&&null!=e&&i.j[e]?i.j[e]:"PURPLE",h=e=>i.h[e],y=e=>""!==e&&null!=e&&i.i[e]?i.i[e]:"PURPLE",O=e=>i.g[e],j=m((e=>e.primary)),v=()=>[{label:"purple",value:j[r.d.PURPLE]},{label:"blue",value:j[r.d.BLUE]},{label:"green",value:j[r.d.GREEN]},{label:"teal",value:j[r.d.TEAL]},{label:"yellow",value:j[r.d.YELLOW]},{label:"orange",value:j[r.d.ORANGE]},{label:"grey",value:j[r.d.GREY]
},{label:"darkPurple",value:j[r.d.DARK_PURPLE]},{label:"darkBlue",value:j[r.d.DARK_BLUE]},{label:"darkGreen",value:j[r.d.DARK_GREEN]},{label:"darkTeal",value:j[r.d.DARK_TEAL]},{label:"darkYellow",value:j[r.d.DARK_YELLOW]},{label:"darkOrange",value:j[r.d.DARK_ORANGE]},{label:"darkGrey",value:j[r.d.DARK_GREY]}]},"./src/packages/issue/fields/assignee/src/common/assets/add.png":function(e,t,s){e.exports=s.p+"assets/add.cb4b04e861ca3b9ce2a2c8032dde1c45.8.png"},"./src/packages/issue/fields/assignee/src/common/ui/read-view/popover/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),r=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=s("./node_modules/react-intl/lib/index.es.js"),u=Object(l.h)({assigneeTooltip:{
id:"issue-field-assignee.common.read-view.popover.assignee-tooltip",defaultMessage:"Assignee: {name}"}}),d=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const m=d.default.div(["width:","px;height:","px;padding:0;box-sizing:border-box;cursor:default;"],3.5*p.e,3.5*p.e),b=({value:e})=>{const t=Object(o.c)(),s=Object(c.c)(t),n=e||s,l="__UNASSIGNED_ID__"===n.accountId?n.displayName:t.formatMessage(u.assigneeTooltip,{name:n.displayName}),d=Object(c.d)(n);return a.a.createElement(m,null,a.a.createElement(r.a,{content:l},a.a.createElement(i.a,{size:"small",src:d,name:l,borderColor:"transparent"})))};b.displayName="AssigneePickerView";t.a=b},"./src/packages/issue/fields/assignee/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){
return u})),s.d(t,"d",(function(){return d})),s.d(t,"g",(function(){return p}));var n=s("./src/packages/issue/fields/assignee/src/messages.js"),a=s("./src/packages/issue/fields/assignee/src/common/assets/add.png"),i=s.n(a);const r=({formatMessage:e})=>({accountId:"__UNASSIGNED_ID__",displayName:e(n.a.unassignedOption),avatarUrls:{}}),o=({formatMessage:e})=>({accountId:"__AUTOMATIC_ID__",displayName:e(n.a.automaticOption),avatarUrls:{}}),c=({formatMessage:e},t)=>({accountId:"__INVITE_PEOPLE_ID__",displayName:e(t?n.a.invitePeopleOptionAdmin:n.a.invitePeopleOption),avatarUrls:{"48x48":i.a}}),l=({accountId:e,displayName:t,avatarUrls:s})=>({id:e||"",name:t,avatarUrl:s["48x48"]}),u=({id:e,name:t,avatarUrl:s})=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}}),d=({avatarUrls:e})=>e["48x48"],p=(e,t,s)=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}})},"./src/packages/issue/fields/assignee/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),
s.d(t,"b",(function(){return i}));s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const a=()=>Object(n.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["not-enrolled","control","variation"],shouldTrackExposureEvent:!1}),i=()=>"variation"===a()},"./src/packages/issue/fields/assignee/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({unassignedOption:{id:"issue-field-assignee.unassigned-option",defaultMessage:"Unassigned"},automaticOption:{id:"issue-field-assignee.automatic-option",defaultMessage:"Automatic"},assignToMe:{id:"issue-field-assignee.assign-to-me",defaultMessage:"Assign to me"},searchForAssignee:{id:"issue-field-assignee.search-for-assignee",defaultMessage:"Search for assignee"},invitePeopleOption:{id:"issue-field-assignee.invite-people-option",
defaultMessage:"Add teammate to Jira"},invitePeopleOptionAdmin:{id:"issue-field-assignee.invite-people-option-admin",defaultMessage:"Invite teammate to Jira"}})},"./src/packages/issue/fields/assignee/src/services/assignee-options/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),i=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/is-admin/index.js"),o=s("./src/packages/platform/services/user/src/main.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=s("./src/packages/issue/fields/assignee/src/feature-flags.js"),u=s("./src/packages/issue/fields/assignee/src/messages.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=(e,t,s,d,m,b,f)=>{const[g,h]=Object(n.useState)(!1),y=Object(r.a)(),O=Object(c.c)(s),j=Object(c.a)(s),v=Object(c.f)(e||O),[{data:E}]=Object(o.b)(),{createAnalyticsEvent:k}=Object(i.a)(),w=E?p(p({},Object(c.f)(E)),{},{publicName:s.formatMessage(u.a.assignToMe)}):null,S=void 0===m||""===m,C=S?Boolean(null==e?void 0:e.accountId):O.displayName.toLowerCase().startsWith((m||"").toLowerCase());let I=!1
;!0===f&&(I=S?Boolean("__AUTOMATIC_ID__"!==(null==e?void 0:e.accountId)):j.displayName.toLowerCase().startsWith((m||"").toLowerCase()));const T=null!==w&&v.id===w.id,P=t.some((e=>null!==w&&e.accountId===w.id)),_=S?!T&&(d||P):P,x=t.filter((e=>!(S&&e.accountId===v.id||null!==w&&e.accountId===w.id))).map(c.f),D=[];!0===b&&!S&&x.length<3&&(g||(h(!0),((e,t,s)=>{if(null==e)return;const n=e({action:"exposed",actionSubject:"feature"}),i={fieldId:"assignee",flagKey:"invite.from.assign",value:Object(l.a)(),userRole:s?"admin":"basic",suggestionsCount:t,source:"assigneeField"};Object(a.b)(n,"feature exposed",i)})(k,x.length,y)),Object(l.b)()&&(((e,t,s)=>{if(null==e)return;const n=e({action:"rendered",actionSubject:"inviteItem"}),i={fieldId:"assignee",userRole:s?"admin":"basic",suggestionsCount:t,source:"assigneeField"};Object(a.h)(n,"inviteItem rendered",i)})(k,x.length,y),D.push(Object(c.f)(Object(c.b)(s,y)))))
;const A=[...C?[Object(c.f)(O)]:[],...I?[Object(c.f)(j)]:[],..._&&null!==w?[w]:[],...x,...D];return[v,A]}},"./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");t.a=({issueKey:e,onSuccess:t})=>{const s=o.c,[n]=Object(i.a)(e,s),c=a()(n,"schema.type","user"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:s,issueKey:e,fieldType:c,initialValue:null,onSuccess:t});return[{value:l,error:u,fieldConfig:n},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/assignee/src/services/users-query/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");t.a=e=>{const[t,s]=Object(n.useState)([]),[r,o]=Object(n.useState)(void 0),[c,l]=Object(n.useState)(!1),u=Object(n.useRef)(""),d=Object(n.useCallback)(((t="")=>{if(["",null,void 0].includes(e))return Promise.resolve([]);const n=`${e||""}${t}`;return l(!0),u.current=t,r&&o(void 0),Object(i.a)(n).then((e=>{t===u.current&&s(e)})).catch((e=>{t===u.current&&o(e),a.h.safeErrorWithoutCustomerData("issue.fields.assigne","Failed to fetch users",e)})).finally((()=>l(!1)))}),[e,r]);return[{data:t,error:r,loading:c},d]}},"./src/packages/issue/fields/assignee/src/ui/popover/main.js":function(e,t,s){"use strict";s.r(t)
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/fields/assignee/src/common/ui/read-view/popover/main.js"),l=s("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),u=s("./node_modules/lodash/debounce.js"),d=s.n(u),p=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/PopupUserPicker.js"),m=s("./src/packages/platform/controllers/intl/src/index.js"),b=s("./src/packages/invite-people-drawer/src/controllers/index.js"),f=s("./src/packages/issue/fields/assignee/src/common/utils.js"),g=s("./src/packages/issue/fields/assignee/src/feature-flags.js"),h=s("./src/packages/issue/fields/assignee/src/messages.js"),y=s("./src/packages/issue/fields/assignee/src/services/assignee-options/index.js"),O=s("./src/packages/issue/fields/assignee/src/services/users-query/index.js"),j=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const E="rgba(9, 30, 66, 0.36)",k=j.default.button(["display:block;background:transparent;border:0;outline:0;padding:0;margin:0;border-radius:50%;box-shadow:0 0 0 2px transparent;& > div{cursor:pointer;}span:first-of-type::after{opacity:",";background-color:",";}&:active{box-shadow:0 0 0 2px transparent !important;}&:focus,&:focus-within{box-shadow:0 0 0 2px ",";}&:hover span:first-of-type::after{opacity:1;background-color:",";}"],(({active:e})=>e?1:0),(({active:e})=>e?E:"transparent"),v.a.B100,E),w=({shouldPreloadAssignToMe:e=!1,autoCompleteUrl:t,value:s=null,onFocus:i,onBlur:r,onChange:o,searchDebounceTimeout:l=300,enablePeopleInvite:u=!0})=>{const j=Object(m.c)(),v=Object(n.useRef)({previousQuery:void 0}).current,[{data:E,loading:w},S]=Object(O.a)(t||""),[C,I]=Object(y.a)(s,E,j,e,v.previousQuery,u),[,{openDrawer:T}]=Object(b.c)(),P=Object(n.useMemo)((()=>d()((e=>{e!==v.previousQuery&&S(e),v.previousQuery=e}),l)),[S,l,v.previousQuery]),_=Object(n.useCallback)((e=>{null==i||i(e),
E&&E.length||S()}),[i,E,S]),x=Object(n.useCallback)((e=>{null==r||r(e),v.previousQuery=void 0}),[r,v]),D=Object(n.useCallback)(((e,t)=>{if(!e||Array.isArray(e))return;if(Object(g.b)()&&u&&"__INVITE_PEOPLE_ID__"===e.id)return T("assignee"),void(null==o||o(s,t));const n="__UNASSIGNED_ID__"===e.id?null:E.find((({accountId:t})=>t===e.id))||Object(f.e)(e);null==o||o(n,t)}),[u,o,T,E,s]);return a.a.createElement(p.a,{fieldId:null,placeholder:j.formatMessage(h.a.searchForAssignee),isLoading:w,options:I,target:({ref:e,isOpen:t})=>a.a.createElement(k,{innerRef:e,active:t},a.a.createElement(c.a,{value:s})),value:C,onFocus:_,onBlur:x,onChange:D,onInputChange:P})};w.displayName="AssigneePickerEdit";var S=w;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const T=Object(r.a)("assigneePickerEdit",{onChange:"changed"})(S);t.default=e=>{let{issueKey:t,onChange:s,initialValue:r}=e,u=I(e,["issueKey","onChange","initialValue"]);const[d]=Object(i.a)(t,o.c),[{value:p},{saveValue:m}]=Object(l.a)({issueKey:t}),{autoCompleteUrl:b,isEditable:f=!1}=d||{},g=Object(n.useCallback)(((e,t,n)=>{null==s||s(e,t),m(e,null,n)}),[s,m]);return f?a.a.createElement(T,C({autoCompleteUrl:b,value:p,onChange:g},u)):a.a.createElement(c.a,{value:p})}},"./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){
return d})),s.d(t,"e",(function(){return p})),s.d(t,"f",(function(){return m}));var n=s("./node_modules/lodash/memoize.js"),a=s.n(n);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=e=>{if(!e)return null;const{id:t,value:s,child:n}=e;return{value:t,label:s,child:n&&{value:n.id,label:n.value}}},l=a()((e=>e.map((({id:e,value:t})=>({value:e,
label:t}))))),u=e=>e.map((({id:e,value:t})=>({value:e,label:t}))),d=a()((e=>e.reduce(((e,{id:t,children:s})=>(e[t]=s?l(s):[],e)),{}))),p=e=>e.reduce(((e,{id:t,children:s})=>r(r({},e),{},{[t]:s?u(s):[]})),{}),m=e=>{if(!e)return null;const{label:t,value:s}=e,n=e.child||void 0;return{id:s,value:t,child:n&&{id:n.value,value:n.label}}}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/form/dist/es2019/Messages.js"),o=s("./node_modules/@atlaskit/select/dist/es2019/Select.js"),c=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),l=Object(i.h)({noOptionsSelected:{id:"issue-field-cascading-select.cascading-select-view.no-options-selected",defaultMessage:"None"},errorMessage:{id:"issue-field-cascading-select.cascading-select-view.error-message",
defaultMessage:"The value could not be saved"}}),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const p=u.default.div(["display:flex;flex-direction:",";"],(e=>e.areOptionsOnSameRow?"row":"column")),m=u.default.div(["flex-basis:0;flex-grow:1;"]),b=Object(u.default)(m)(["margin-top:",";margin-left:",";"],(e=>e.areOptionsOnSameRow?0:d.e/2+"px"),(e=>e.areOptionsOnSameRow?d.e/2+"px":0)),f=(e,t)=>!e||0===t.length;function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){y(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=Object(i.i)((e=>{const{value:t,allowedValues:s,allowedChildValues:i,onChange:u,isInvalid:d=!1,areOptionsOnSameRow:g=!1,intl:y,autoFocus:O=!0,onCloseMenuOnScroll:j,isDropdownMenuFixedAndLayered:v}=e,[E,k]=(e=>{if(!e)return[null,null];const{label:t,value:s}=e;return[{label:t,value:s},e.child||null]})(t),[w,S]=Object(n.useState)(E),[C,I]=Object(n.useState)(k),[T,P]=Object(n.useState)(E&&i[E.value]||[]),[_,x]=Object(n.useState)(f(t,T)),D=Object(n.useRef)(null);return a.a.createElement(a.a.Fragment,null,d&&a.a.createElement(r.a,null,y.formatMessage(l.errorMessage)),a.a.createElement(p,{areOptionsOnSameRow:g},a.a.createElement(m,null,a.a.createElement(o.a,{
defaultValue:E,value:w,options:s,onChange:(e,{action:s},n)=>{switch(I(null),s){case"select-option":u(e,null,n),S(e),P(i[e.value]||[]),x(f(t,T)),D&&D.current&&D.current.focus();break;case"clear":u(null,null,n),S(null),P([])}},isClearable:!0,autoFocus:O,openMenuOnFocus:!0,placeholder:y.formatMessage(l.noOptionsSelected),closeMenuOnScroll:j,menuPosition:!0===v?"fixed":void 0,styles:!0===v?c.f:void 0})),T.length>0&&a.a.createElement(b,{areOptionsOnSameRow:g},a.a.createElement(o.a,{defaultValue:k,value:C,options:T,onChange:(e,{action:t},s)=>{switch(t){case"select-option":u(h(h({},w),{},{child:e}),null,s),I(e);break;case"clear":u(w,null,s),I(null)}},isClearable:!0,autoFocus:_,openMenuOnFocus:!0,placeholder:y.formatMessage(l.noOptionsSelected),ref:D,closeMenuOnScroll:j,menuPosition:!0===v?"fixed":void 0,styles:!0===v?c.f:void 0}))))}))},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),c=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),l=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),u=s("./src/packages/issue/fields/components/field-pin/src/index.js"),d=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),p=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),m=s("./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const f=()=>Object(b.b)("issue.details.custom-cascading-select-render-optimisation",!1)
;var g=s("./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js"),h=Object(i.h)({noOptionsSelected:{id:"issue-field-cascading-select.no-options-selected",defaultMessage:"None"}});const y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["z-index:300;position:relative;"]);function O(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const j=(e,t)=>e&&e.child?`${e.label} - ${e.child.label}`:e?e.label:t.formatMessage(h.noOptionsSelected),v=e=>{
const{label:t,isEditable:s,isMobile:i,allowedValues:b,areOptionsOnSameRow:h,showPinButton:v,intl:E,onCloseMenuOnScroll:k,isDropdownMenuFixedAndLayered:w}=e,S=O(e,["label","isEditable","isMobile","allowedValues","areOptionsOnSameRow","showPinButton","intl","onCloseMenuOnScroll","isDropdownMenuFixedAndLayered"]),[{value:C,error:I},{saveValue:T}]=Object(c.a)(S),[P,_]=Object(n.useState)(Object(m.a)(C)),[x,D]=Object(n.useState)(Object(m.a)(C)),[A,L]=Object(n.useState)(!1),[M,R]=Object(n.useState)(j(P,E)),[N,F]=Object(n.useState)([]),[U,V]=Object(n.useState)({}),K=Object(n.useCallback)((e=>{R(j(e,E))}),[E]),W=()=>{L(!1),_(x)},B=async e=>{_(e)};return Object(n.useEffect)((()=>{K(P)}),[P,K]),Object(n.useEffect)((()=>{I&&L(!0)}),[I]),Object(n.useEffect)((()=>{_(Object(m.a)(C))}),[C]),a.a.createElement(l.d,null,a.a.createElement(l.b,null,a.a.createElement(l.c,null,t),!0===v&&a.a.createElement(u.a,{fieldId:S.fieldKey,label:t})),a.a.createElement(l.g,{isEditing:A},a.a.createElement(o.a,{onEscape:W
},a.a.createElement(r.a,{isLabelHidden:!0,label:t,readView:(()=>P?a.a.createElement("div",null,M):a.a.createElement(d.b,null,M))(),editView:s?(()=>a.a.createElement(y,null,a.a.createElement(g.a,{value:P,onCloseMenuOnScroll:k,isDropdownMenuFixedAndLayered:w,allowedValues:f()?N:Object(m.c)(b),allowedChildValues:f()?U:Object(m.e)(b),onChange:B,isInvalid:!!I,areOptionsOnSameRow:h,isEditable:s})))():null,onConfirm:e=>{T(Object(m.f)(P),null,e),L(!1),K(P),Object(p.h)(e,"cascadingSelect",{hasChild:!(!P||!P.child||null==P.child),isEmpty:!P}),D(P)},onCancel:W,onEditRequested:()=>{f()&&(F(Object(m.b)(b)),V(Object(m.d)(b))),L(!0)},isEditing:A,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!i}))))};v.displayName="CascadingSelectInlineEditView",v.defaultProps={initialValue:null,isMobile:!1,areOptionsOnSameRow:!1,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"};t.a=Object(i.i)(v)},"./src/packages/issue/fields/components/error-flag/src/main.js":function(e,t,s){
"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),r=s("./src/packages/platform/ui/flags/src/ui/index.js");const o=({error:e,title:t,description:s})=>{if(!e)return null;if(e instanceof i.a){const n=e.message||e.errors&&e.errors[0]&&e.errors[0].error||s;return a.a.createElement(r.a,{flag:{type:"warning",title:t,description:n}})}return a.a.createElement(r.a,{flag:{type:"error",title:t,description:s}})};o.displayName="ErrorFlag"},"./src/packages/issue/fields/components/field-heading/src/styled.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return o})),s.d(t,"d",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"i",(function(){return m})),s.d(t,"c",(function(){return f})),s.d(t,"f",(function(){return g})),s.d(t,"e",(function(){return h})),s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),r=s("./src/packages/issue/fields/components/field-pin/src/styled.js")
;const o=Object(n.keyframes)(["from{opacity:0;}to{opacity:1;}"]),c=Object(n.keyframes)(["from{opacity:1;}to{opacity:0;}"]),l=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),u=n.default.div(["display:flex;flex-wrap:wrap;margin-bottom:","px;word-break:break-word;"],2*i.e),d=n.default.div(["& > div > div > div > div > div > div{min-height:","px;}& > div > div > div > div > div > div > div{"," ","}flex-grow:1;width:","%;box-sizing:border-box;"],4*i.e,(e=>e.isEditing?"":`padding: 0 0 0 ${.75*i.e}px;`),(e=>!e.isEditing&&e.fixedHeight?`height: ${4*i.e}px`:""),66.67),p=Object(n.css)(["","{visibility:hidden;animation:"," 0.15s linear forwards;}:hover ","{visibility:visible;animation:"," 0.15s linear forwards;}"],r.a,c,r.a,o),m=Object(n.css)([""," position:relative;flex-grow:1;box-sizing:border-box;padding-right:","px;min-width:","px;width:","%;padding-top:","px;max-width:","px;line-height:1;"],p,3*i.e,15*i.e,33.33,i.e,22.5*i.e),b=Object(n.css)([""," margin-bottom:","px !important;display:flex;align-items:center;"],p,.5*i.e),f=n.default.h2(["box-sizing:border-box;font-weight:500;",";color:",";"],a.d.h200(),a.a.N800),g=n.default.h2(["font-weight:500;",";",";color:",";"],l,a.d.h200(),a.a.N800),h=n.default.div(["",""],b),y=Object(n.css)(["","{display:inline;}","{display:inline;position:absolute;}"],f,r.a),O=n.default.div([""," ",""],m,y),j=n.default.div(["height:","px;margin-left:","px;margin-right:-","px;margin-top:-","px;position:relative;"],3*i.e,.25*i.e,.25*i.e,.5*i.e)
;i.e,i.e},"./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=e=>a.a.createElement("svg",i({},e,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),a.a.createElement("path",{fill:"currentColor",
d:"M3.58176938,7.87928392 L8.11122851,12.4014141 L8.25734637,12.2555315 L8.18428744,12.1825901 C7.49835823,11.4978426 7.49835823,10.387565 8.18428744,9.70273982 L10.299184,7.5911928 C10.8579797,7.03331193 11.6995968,6.9299201 12.363196,7.28100178 L12.563933,7.08062671 L8.9111421,3.43373045 L8.71048291,3.63410553 C9.06208387,4.29665994 8.95852537,5.13692246 8.39972959,5.6948111 L6.28483307,7.80634258 C5.59890386,8.4911678 4.48684425,8.4911678 3.80093838,7.80634258 L3.72787945,7.73340123 L3.58176938,7.87928392 Z M5.48118484,7.00402665 L7.59615917,4.8924874 C7.83821064,4.65079444 7.83821064,4.25893086 7.59615917,4.01723789 L7.45004131,3.87135521 C7.28867366,3.71023174 7.28867366,3.44898677 7.45004131,3.28785554 L8.61890638,2.12084842 C8.78035183,1.95971719 9.04201017,1.95971719 9.20337782,2.12084842 L13.8789159,6.78887687 C14.0403614,6.9500081 14.0403614,7.21125308 13.8789159,7.37238431 L12.7100508,8.53940696 C12.5486832,8.70051489 12.2870249,8.70051489 12.1255794,8.53940696 L11.9794615,8.39352427 C11.7374101,8.1517847 11.3448837,8.1517847 11.1028322,8.39352427 L8.98785786,10.5050169 C8.74580639,10.7467565 8.74580639,11.1385735 8.98785786,11.380313 L9.5723293,11.9638438 C9.73369695,12.1249517 9.73369695,12.3861889 9.5723293,12.5472968 L8.40346423,13.7143583 C8.24201878,13.8754662 7.98036044,13.8754662 7.81899279,13.7143583 L5.48655339,11.3856729 L2.99050556,13.8776413 C2.91355638,13.9544666 2.80936765,13.9978896 2.70054953,13.9985111 L2.4264735,14 C2.20319639,14.0012299 2.01931974,13.8252074 2.01121246,13.6024217 L2.00027307,13.3019562 C1.99610272,13.1873785 2.03985249,13.0762963 2.12104205,12.9951986 L4.60988514,10.5103768 L2.26677088,8.17104929 C2.10537989,8.00994136 2.10537989,7.74862648 2.26677088,7.58752632 L3.4356593,6.42051921 C3.59705028,6.25938797 3.85870862,6.25938797 4.02009961,6.42051921 L4.60454771,7.00402665 C4.8466303,7.24571961 5.23912559,7.24571961 5.48118484,7.00402665 Z"
}));r.displayName="PinUnfilled",t.a=r},"./src/packages/issue/fields/components/field-pin/src/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k})),s.d(t,"a",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./node_modules/@atlaskit/icon/cjs/index.js"),u=s.n(l),d=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),p=s("./src/packages/platform/controllers/intl/src/index.js");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const b=e=>a.a.createElement("svg",m({},e,{
xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),a.a.createElement("path",{fill:"currentColor",
d:"M5.48121736,7.00404408 L7.59617451,4.89248498 C7.83826329,4.65078605 7.83826329,4.2589269 7.59617451,4.01722797 L7.45004745,3.8713518 C7.28862892,3.71022438 7.28862892,3.44898234 7.45004745,3.28784713 L8.61890792,2.12084557 C8.78032645,1.95971814 9.04199766,1.95971814 9.20333816,2.12084557 L13.8789361,6.78886738 C14.0403546,6.94999481 14.0403546,7.21123684 13.8789361,7.37239542 L12.7100756,8.53937361 C12.5486571,8.70053219 12.2869859,8.70053219 12.1255674,8.53937361 L11.9795183,8.39348187 C11.7374295,8.15178294 11.3449227,8.15178294 11.102834,8.39348187 L8.9878534,10.5050565 C8.74576463,10.7467555 8.74576463,11.1385523 8.9878534,11.3802512 L9.57236166,11.9638182 C9.73370217,12.1248989 9.73370217,12.3861487 9.57236166,12.5473073 L8.40342317,13.7142855 C8.24208266,13.8754441 7.98041145,13.8754441 7.81899293,13.7142855 L5.48655377,11.3856258 L2.99050379,13.8776251 C2.91356278,13.9544266 2.8093702,13.9978903 2.70055118,13.9985135 L2.42647516,14 C2.20319644,14.0012397 2.01932444,13.8251258 2.0112106,13.6023547 L2.00027253,13.3019252 C1.99610639,13.187346 2.03985869,13.076272 2.12104386,12.9951864 L4.60989281,10.5103532 L2.26677303,8.17102227 C2.10538571,8.00986368 2.10538571,7.74861386 2.26677303,7.58753317 L3.43565691,6.42050825 C3.59705203,6.25938082 3.85871544,6.25938082 4.02010275,6.42050825 L4.6045486,7.00404408 C4.84663737,7.245743 5.23912858,7.245743 5.48121736,7.00404408 Z"
}));b.displayName="PinFilled";var f=b,g=s("./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js"),h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.h)({pinField:{id:"issue-field-pin.pin-field",defaultMessage:"Pin to top"},unpinField:{id:"issue-field-pin.unpin-field",defaultMessage:"Unpin"},fieldPinned:{id:"issue-field-pin.field-pinned",defaultMessage:"{fieldLabel} pinned to top."},errorTooManyPinnedTitle:{id:"issue-field-pin.error-too-many-pinned-title",defaultMessage:"Too many pinned fields"},errorTooManyPinnedText:{id:"issue-field-pin.error-too-many-pinned-text",defaultMessage:"You've reached the maximum number of fields you can pin in this project. Please unpin a field first, to pin this field to the top"}}),O=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const j=Object(n.memo)((e=>{const{isPinned:t=!1,onClick:s}=e,{formatMessage:n}=Object(p.c)(),i=n(t?y.unpinField:y.pinField),r=t?f:g.a,o=t?O.b:O.c;return a.a.createElement(O.a,{
"data-test-id":"issue-field-pin.field-pin",onClick:s},a.a.createElement(d.a,{content:i},a.a.createElement(o,{className:"issue-details-pin-icon-wrapper"},a.a.createElement(u.a,{label:i,glyph:r}))))}));j.displayName="FieldPin";var v=j,E=s("./src/packages/issue/fields/components/field-pin/src/utils.js");const k=e=>{const{issueKey:t,fieldId:s,label:n="",contextItemCategories:i}=e,[l,u]=Object(E.e)(t),{createAnalyticsEvent:d}=Object(o.a)(),{showFlag:p}=Object(r.f)();if(!t)return null;const m=Object(E.c)(l,s);return a.a.createElement(v,{onClick:()=>{const e=[...l];let t=-1;m?(t=e.indexOf(s),e.splice(t,1)):e.push(s);const a=u(e);(({isPinned:e,newPinnedFieldLength:t,pinnedFieldPosition:n,setPinSuccess:a,savedFieldIdLength:r})=>{if(void 0===i)return;const{primary:o,secondary:l}=i,u=o.concat(l).findIndex((({id:e})=>e===s)),p=u>=o.length,m={isPinned:e,newPinnedFieldCount:t,totalFieldCount:o.length+l.length,originalPinnedFieldPosition:u,pinnedFieldPosition:n,isUnderShowMore:p,setPinSuccess:a,
savedFieldIdLength:r},b=d({action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldButton"});Object(c.h)(b,"pinnedFields",m)})({isPinned:!m,newPinnedFieldLength:e.length,pinnedFieldPosition:m?t:e.indexOf(s),setPinSuccess:a,savedFieldIdLength:Object(E.b)(e).length}),m||p(a?{type:"success",title:[y.fieldPinned,{fieldLabel:n}]}:{title:y.errorTooManyPinnedTitle,description:y.errorTooManyPinnedText,type:"error"})},isPinned:m})};k.displayName="UnconnectedFieldPin";const w=Object(i.b)((e=>({issueKey:Object(E.d)(e),contextItemCategories:Object(E.a)(e)})),{})(k)},"./src/packages/issue/fields/components/field-pin/src/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=n.default.div(["cursor:pointer;margin-left:","px;flex-shrink:0;"],.25*i.e),o=n.default.div(["color:",";&:hover{color:",";}"],a.a.Y300,a.a.Y200),c=n.default.div(["color:",";&:hover{color:",";}"],a.a.N80,a.a.N800)},"./src/packages/issue/fields/components/field-pin/src/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"f",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/user-preferences-services/src/main.js");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const l="jira.user.issue.details.pinned-fields",u=e=>{const t=e.context.issueKey;return Object(i.l)(null!=t?t:"")},d=e=>e.context.contextItemCategories,p=(e,t)=>!(!e||!Array.isArray(e||!t))&&e.includes(t),m=e=>0===e.filter((e=>"string"==typeof e&&""!==e)).length?"null":e.join(","),b=e=>{const t=(e=>e?`${l}.${e}`:l)((e=>Object(i.q)((e||"").split("-")[0]))(e)),[s,n]=Object(r.b)(t);return[(e=>null==e||""===e||"null"===e?[]:e.trim().split(","))(s),e=>{const t=m(e);return e.length>0?!(t.length>255)&&(n.setValue(t),!0):(n.deleteValue(),!0)}]},f=e=>t=>{const{issueKey:s}=t,n=c(t,["issueKey"]),[i]=b(s);return a.a.createElement(e,o({},n,{pinnedFields:i}))}},
"./src/packages/issue/fields/components/inline-edit/src/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const u=Object(o.a)("EnterEscapeHandler",{onEnter:"entered",onEscape:"escaped"})(r.a),d=Object(o.a)("EscapeHandler",{onEscape:"escaped"})(r.a),p=e=>{const{actionSubject:t,isEditable:s,isEditing:r=!1,readView:o=null,editView:p=null,onEnter:m,onEscape:b,onConfirm:f,onCancel:g,onEdit:h}=e,y=l(e,["actionSubject","isEditable","isEditing","readView","editView","onEnter","onEscape","onConfirm","onCancel","onEdit"]),O=Object(n.useCallback)(((e,s)=>e.update({action:s,actionSubject:t})),[t]),j=Object(n.useCallback)(((e,t)=>{m&&m(O(t,"entered"))}),[m,O]),v=Object(n.useCallback)(((e,t)=>{b&&b(O(t,"escaped"))}),[b,O]),E=Object(n.useCallback)((e=>{h&&h(O(e,"focused"))}),[h,O]),k=Object(n.useCallback)((e=>{f&&f(O(e,"confirmed"))}),[f,O]),w=Object(n.useCallback)((e=>{g&&g(O(e,"canceled"))}),[g,O]),S=Object(n.useCallback)((()=>null===p?null:m?a.a.createElement(u,{onEnter:j,onEscape:v},p):a.a.createElement(d,{
onEscape:v},p)),[p,m,j,v]);return a.a.createElement("div",null,a.a.createElement(i.a,c({label:"",isEditing:r,readView:o,editView:!0===s?S():null,onConfirm:k,onCancel:w,onEditRequested:E},y)))};p.displayName="FieldInlineEditStateLess",p.defaultProps={actionSubject:"fieldInlineEdit",disableEditViewFieldBase:!0,isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,isCompact:!0,isLabelHidden:!0,shouldConfirmOnEnter:!0},t.a=Object(n.memo)(p)},"./src/packages/issue/fields/components/timestamp/src/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),u=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js")),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=s("./src/packages/platform/controllers/intl/src/index.js")
;var m=s("./src/packages/issue/user-preferences-services/src/main.js"),b=s("./src/packages/platform/utils/datetime/src/index.js"),f=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./src/packages/platform/services/user/src/main.js");const y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.span(["cursor:",";",";",";"],(({canSwitchDisplaySetting:e})=>e?"pointer":"default"),(({extraStyles:e})=>e.always),(({canSwitchDisplaySetting:e,extraStyles:{whenDisplaySettingSwitchable:t}})=>e?t:""));y.displayName="TimestampWrapper";const O=e=>(e=>(Date.now()-new Date(e))/864e5)(e)<8?"RELATIVE":"ABSOLUTE",j=e=>{
const{value:t,extraStyles:s={},timeZone:r,tooltipPosition:c="top"}=e,[{data:j}]=Object(h.b)(),v=j?j.timeZone:void 0,E=(()=>Object(d.b)("issue.details.timezone-refactoring",!1))()?v||Object(b.a)():null!=r?r:Object(b.a)(),k="RELATIVE"===O(t),{createAnalyticsEvent:w}=Object(f.a)(),{formatDate:S}=Object(p.c)(),[C,{setValue:I}]=Object(m.b)("jira.user.issue.details.timestamp-display-setting"),T=o()(C)||""===C?"RELATIVE":C,P=Object(n.useMemo)((()=>S(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:E})),[S,E,t]),_=Object(n.useCallback)((()=>{const e=w({action:"clicked",actionSubject:"button"});Object(g.h)(e,"absoluteTimeButton"),I("RELATIVE").catch((e=>{d.h.safeErrorWithoutCustomerData("issue.fields.components.timestamp","Failed to set timestamp display to RELATIVE",e)}))}),[w,I]),x=Object(n.useCallback)((()=>{const e=w({action:"clicked",actionSubject:"button"});Object(g.h)(e,"relativeTimeButton"),I("ABSOLUTE").catch((e=>{
d.h.safeErrorWithoutCustomerData("issue.fields.components.timestamp","Failed to set timestamp display to ABSOLUTE",e)}))}),[w,I]),D=Object(n.useCallback)((e=>a.a.createElement(y,{canSwitchDisplaySetting:e,onClick:e?_:l.a,extraStyles:s},P)),[s,P,_]),A=Object(n.useCallback)((()=>a.a.createElement(y,{canSwitchDisplaySetting:!0,onClick:x,extraStyles:s},a.a.createElement(u.a,{tag:"span",content:P,position:c},a.a.createElement(i.e,{value:t})))),[s,P,x,c,t]);return k&&"RELATIVE"===T?A():D(k)};j.displayName="TimestampView";var v=j;t.a=v},"./src/packages/issue/fields/components/user-picker/src/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),u=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/UserPicker.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=s("./src/packages/invite-people-drawer/src/controllers/index.js"),m=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const f=()=>Object(b.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),g=()=>"variation"===f();function h(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v={id:"USER_PICKER_EMPTY",name:""
},E=(e,t)=>null!=e&&(null==t||""===t||e.toLowerCase().includes(t.toLowerCase()));class k extends n.Component{constructor(...e){super(...e),this.state={suggestions:[],isDropdownVisible:!0,wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1,query:null},this.wasUnmounted=!1,this.invitePeopleExposeEventFired=!1,this.onChange=e=>{if(!e||Array.isArray(e)||this.isCurrentValue(e))return;const t=e.id,s=this.props.initialOptions.find((e=>e.id===t));s?this.props.onChange(s.id?s:null):"USER_PICKER_EMPTY"===t?this.props.onChange(null):g()&&!0===this.props.enablePeopleInvite&&"__INVITE_PEOPLE_ID__"===t?Object(p.b)("assignee",{createAnalyticsEvent:this.props.createAnalyticsEvent}):this.props.onChange(e)},this.onSuggestionSelect=(e,t)=>{this.setState({suggestions:[],wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1}),this.onChange(Array.isArray(e)?null:e),this.props.onSelection(t)},this.onBlur=()=>{this.setState({suggestions:[],isDropdownVisible:!1,wasFocused:!1,isLoading:!1,
wasQueryCleared:!1}),this.state.wasCleared?this.onSuggestionSelect(v):this.props.onCancel()},this.onFocus=e=>{this.setState({isDropdownVisible:!0,isLoading:!0,wasFocused:!0,wasCleared:!1}),this.requestSuggestions(e)},this.onQueryChange=(e,t)=>{this.setState({wasFocused:!1,isLoading:!0,query:e||"",wasQueryCleared:!e}),this.debouncedRequestSuggestion(t)},this.onClear=()=>{this.setState({wasCleared:!0}),this.onChange(v)},this.getEmptyValue=()=>this.props.emptyOption?O(O({},this.props.emptyOption),{},{id:"USER_PICKER_EMPTY"}):null,this.getInvitePeopleValue=()=>this.props.invitePeopleOption?O(O({},this.props.invitePeopleOption),{},{id:"__INVITE_PEOPLE_ID__"}):null,this.getInitialAndEmptyOptionSuggestions=()=>{const{initialOptions:e,emptyOption:t}=this.props,{wasFocused:s,wasQueryCleared:n}=this.state,a=s&&e.length>0,i=t&&!a&&n,r=this.getEmptyValue();return[...a?e:[],...!0===i&&r?[r]:[]]},this.debouncedRequestSuggestion=r()((e=>this.requestSuggestions(e)),300),this.requestSuggestions=e=>{
const{onDataRequest:t,fetchSuggestions:s}=this.props,{query:n}=this.state;t(null===n);const a=n||"";return s(a,e).then((e=>this.handleSuggestions(e,a))).catch((()=>[]))},this.isMatchingQuery=e=>{const{query:t,isLoading:s}=this.state,{displayName:n,name:a}=e;return!s||E(n,t)||E(a,t)},this.getSuggestions=()=>{const{createAnalyticsEvent:e,enablePeopleInvite:t,fieldId:s}=this.props,{query:n,isLoading:a}=this.state,i=n||"",r=this.getInitialAndEmptyOptionSuggestions(),o=r.map((e=>e.id)),c=this.state.suggestions.filter((e=>!o.includes(e.id)&&this.isMatchingQuery(e))),l=[...r,...c],u=this.getInvitePeopleValue(),p=[];return!a&&!0===t&&u&&i&&l.length<=2&&(this.invitePeopleExposeEventFired||(((e,t,s)=>{if(null==e)return;const n=e({action:"exposed",actionSubject:"feature"}),a={fieldId:t,flagKey:"invite.from.assign",value:f(),userRole:"true"===Object(d.d)("ajs-is-admin")?"admin":"basic",suggestionsCount:s,source:"assigneeField"};Object(m.b)(n,"feature exposed",a)})(e,s,l.length),
this.invitePeopleExposeEventFired=!0),g()&&(((e,t,s)=>{if(null==e)return;const n=e({action:"rendered",actionSubject:"inviteItem"}),a={fieldId:t,userRole:"true"===Object(d.d)("ajs-is-admin")?"admin":"basic",suggestionsCount:s,source:"assigneeField"};Object(m.h)(n,"inviteItem rendered",a)})(e,s,l.length),p.push(u))),[...l,...p].map((e=>{const{displayName:t}=e,s=h(e,["displayName"]);return t?O(O({},s),{},{publicName:t}):s}))},this.handleSuggestions=(e,t)=>{const{isDropdownVisible:s,query:n}=this.state,a=t===(n||"");if(this.wasUnmounted||!s||!a)return;const i=this.state.wasFocused?e.filter((e=>!this.isCurrentValue(e))):e;this.setState({isLoading:!1,suggestions:i}),this.props.onDataLoaded(null===n,i.length)}}componentWillUnmount(){this.wasUnmounted=!0,this.debouncedRequestSuggestion.cancel()}isCurrentValue(e){return e?this.props.value?e.id===this.props.value.id:"USER_PICKER_EMPTY"===e.id:null===this.props.value}render(){const e=this.getSuggestions(),t=this.props.value||this.getEmptyValue()
;return a.a.createElement(u.a,{value:t,options:e,open:this.state.isDropdownVisible,fieldId:this.props.fieldId,menuMinWidth:this.props.menuMinWidth,menuPortalTarget:this.props.portalElement,width:this.props.width,appearance:"compact",isClearable:!!this.props.value,isDisabled:this.props.isDisabled,placeholder:this.props.placeholder,isLoading:this.state.isLoading&&this.state.isDropdownVisible,onBlur:this.onBlur,onClear:this.onClear,onFocus:this.onFocus,onInputChange:this.onQueryChange,onSelection:this.onSuggestionSelect})}}k.displayName="UserPickerView",k.displayName="UserPickerView",k.defaultProps={isDisabled:!1,value:null,initialOptions:[],emptyOption:null,invitePeopleOption:null,enablePeopleInvite:!1,width:void 0,menuMinWidth:void 0,portalElement:void 0,fetchSuggestions:()=>Promise.resolve([]),onChange:c.a,onCancel:c.a,onSelection:c.a,onDataRequest:c.a,onDataLoaded:c.a};t.a=Object(l.a)()(k)},
"./src/packages/issue/fields/date-time-custom-field/src/services/use-date-time-field/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("./node_modules/react/index.js"),s("./node_modules/react-magnetic-di/lib/esm/index.js");var n=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),a=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const i=({issueKey:e,fieldKey:t,onSuccess:s})=>{var i;const[r]=Object(n.a)(e,t),o=null!==(i=null==r?void 0:r.schema.type)&&void 0!==i?i:"datetime",[{loading:c,value:l,error:u},{saveValue:d,resetError:p}]=Object(a.a)({fieldKey:t,issueKey:e,fieldType:o,initialValue:null,onSuccess:s});return[{loading:c,value:l,error:u,fieldConfig:r},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/date-time-custom-field/src/ui/edit/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,"DateTimeFieldEditView",(function(){return g}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isNaN.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js")),c=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),l=s("./src/packages/compatibility/src/main.js"),u=s("./src/packages/issue/format-date/src/common/utils.js"),d=s("./src/packages/platform/services/user-current/src/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js"),m=s("./node_modules/moment-timezone/index.js"),b=s.n(m);const f=(e,t,s,n)=>{const a=b.a.tz(e,n);return a.isValid()&&null!=e&&""!==e?{dateValue:a.format("YYYY-MM-DD"),timeValue:a.format("HH:mm"),zoneValue:a.format("ZZ")}:{dateValue:t,timeValue:s,zoneValue:b()().tz(n).format("ZZ")}},g=({autoFocus:e,isDisabled:t,isInvalid:s,timeZone:i,onParseValue:m=f,value:b,onChange:g})=>{
const h=Object(p.a)(),{data:{user:{timeZone:y=null}}}=Object(d.b)(),O=void 0!==i?i:y,j=Object(n.useCallback)((e=>{const t=Object(l.a)(null!=e?e:"");r()(Date.parse(t))?null==g||g(null):null==g||g(t)}),[g]),v=Object(n.useCallback)(((e,t,s,n)=>m(e,t,s,null!=O?O:n)),[m,O]),E=Object(u.a)(h);return a.a.createElement(o.a,{locale:E,autoFocus:e,defaultIsOpen:!1,isDisabled:t,isInvalid:s,value:b||"",onChange:j,timeIsEditable:!0,parseValue:null!=O?v:void 0,timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:c.a})};g.displayName="DateTimeFieldEditView"},"./src/packages/issue/fields/date-time-custom-field/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"ACTION_SUBJECT",(function(){return g})),s.d(t,"DateTimeField",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/types/src/general.js")),r=s("./src/packages/issue/fields/components/error-flag/src/main.js"),o=s("./src/packages/issue/fields/components/inline-edit/src/main.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./src/packages/issue/fields/date-time-custom-field/src/services/use-date-time-field/index.js"),u=s("./src/packages/issue/fields/date-time-custom-field/src/ui/edit/index.js"),d=s("./node_modules/react-intl/lib/index.es.js"),p=Object(d.h)({errorTitle:{id:"issue-field-date-time.error-title",defaultMessage:"We couldn't set the date"},errorMessage:{id:"issue-field-date-time.error-message",defaultMessage:"Check your connection, then give it another try."}}),m=s("./src/packages/issue/fields/date-time-custom-field/src/ui/view/index.js");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const g="dateTimeFieldInlineEdit",h=e=>{var t;let{fieldKey:s,issueKey:d,timeZone:h,isEditing:y,onFormatDateTime:O,onParseValue:j,onCancel:v,onEdit:E,onEscape:k,onConfirm:w,onEnter:S,onUpdate:C,readView:I,editView:T,noValueText:P}=e,_=f(e,["fieldKey","issueKey","timeZone","isEditing","onFormatDateTime","onParseValue","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]);const[x,D]=Object(n.useState)(!1),A=Object(n.useCallback)((e=>{null==C||C(e),D(!1)
}),[C]),[{value:L,error:M,fieldConfig:R},{saveValue:N,resetError:F}]=Object(l.a)({issueKey:Object(i.l)(d),fieldKey:s,onSuccess:A}),[U,V]=Object(n.useState)(L),K=null!==(t=null==R?void 0:R.isEditable)&&void 0!==t&&t;Object(n.useEffect)((()=>{M&&D(!0),x||V(L)}),[M,x,L]);const W=Object(n.useCallback)((e=>{U!==L?N(U,null,e):D(!1),Object(c.h)(e)}),[N,U,L]),B=Object(n.useCallback)((e=>{F(),D(!1),V(L),Object(c.h)(e)}),[F,L]),H=Object(n.useCallback)((e=>{B(e),null==v||v(e)}),[v,B]),$=Object(n.useCallback)((e=>{W(e),null==w||w(e)}),[w,W]),G=Object(n.useCallback)((e=>{D(!0),Object(c.h)(e),null==E||E(e)}),[E]),q=Object(n.useCallback)((e=>{B(e),null==k||k(e)}),[k,B]),z=Object(n.useCallback)((e=>{W(e),null==S||S(e)}),[S,W]),Y=Object(n.useCallback)((e=>{F(),V(e)}),[F,V]);return a.a.createElement(a.a.Fragment,null,null!=M&&a.a.createElement(r.a,{error:M,title:p.errorTitle,description:p.errorMessage}),a.a.createElement(o.a,b({actionSubject:g,isEditable:K,isEditing:null!=y?y:x,
readView:(()=>void 0!==I?I:a.a.createElement(m.DateTimeFieldReadView,{timeZone:h,value:L,noValueText:P,onFormatDateTime:O}))(),editView:K?(()=>void 0!==T?T:a.a.createElement(u.DateTimeFieldEditView,{value:U,onChange:Y,isInvalid:!!M,onParseValue:j,timeZone:h}))():null,onCancel:H,onConfirm:$,onEdit:G,onEscape:q,onEnter:z},_)))}},"./src/packages/issue/fields/date-time-custom-field/src/ui/view/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,"DateTimeFieldReadView",(function(){return O}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/controllers/intl/src/index.js")),r=s("./src/packages/platform/services/user-current/src/main.js"),o=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js");const c={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0};var l=s("./src/packages/issue/format-date/src/common/utils.js");function u(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{DateTimeFormat:m}=Intl;var b=s("./node_modules/react-intl/lib/index.es.js"),f=Object(b.h)({defaultNoValueText:{id:"issue-field-date-time.default-no-value-text",defaultMessage:"None"}
}),g=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),h=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const y=g.default.span(["color:",";"],h.a.N200),O=({timeZone:e,value:t,noValueText:s,onFormatDateTime:u})=>{const{formatMessage:p}=Object(i.c)(),{formatDateTime:b}=(e=>{const{data:{user:{timeZone:t}}}=Object(r.b)(),s=null!=e?e:t,a=Object(o.a)(),i=Object(l.a)(a),u=Object(l.b)(s),p=Object(n.useMemo)((()=>new m(i,d(d({},c),{},{timeZone:u}))),[i,u]);return{formatDateTime:Object(n.useCallback)((e=>{const t="string"==typeof e?new Date(e):e;return p.format(t)}),[p])}})(e);return null==t||""===t?a.a.createElement(y,null,null!=s?s:p(f.defaultNoValueText)):u?u(t):b(t)}},"./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return y}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),u=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js");const d=()=>Object(o.b)("jsw.nextgen.search-field.changeboarding-board",!1),p=()=>Object(o.b)("jsw.nextgen.search-field.changeboarding",!1);var m=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),b=s("./src/packages/platform/observability/browser-metrics/src/index.js"),f=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const g=(e,t)=>({fields:{[e]:t}}),h=async(e,t,s,n)=>Object(f.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(g(t,s))}),y=e=>{
const t=Object(u.a)(),{issueKey:s,fieldKey:a,fieldType:f,initialValue:g,saveField:y=h,onSubmit:O=i.a,onSuccess:j=i.a,onFailure:v=i.a}=e,[E,{setFieldValue:k}]=Object(m.b)({issueKey:s,fieldKey:a}),w=void 0!==E?E:g,[S,C]=Object(n.useState)(null),[I,T]=Object(n.useState)(!1),P=Object(n.useCallback)((()=>C(null)),[C]),_=Object(n.useCallback)((async(e,n,i)=>{const u={fieldKey:a,fieldType:f,isBoardSearchFieldChangeboardingEnabled:d(),isBacklogSearchFieldChangeboardingEnabled:p()},m=((e,t)=>{const s=Object(b.b)(),n={key:"issue-field.save-value",reporters:[()=>({fieldKey:e,fieldType:t})]};return s.start(n),{stop:()=>s.stop(n),cancel:()=>s.cancel(n.key)}})(Object(o.i)(a)(a),Object(o.i)(f)(f));T(!0),C(null);try{O(w,e,n,i),k(s,a,e),await y(s,a,e,t),j(e),m.stop(),Object(l.f)(i,"field updated",u),Object(l.b)(i,"field updateSucceeded",u)}catch(g){v(g,e),k(s,a,w),C(g);const t=g instanceof c.a
;t||o.h.safeErrorWithoutCustomerData("issue-field.save-value",`Failed to update field ${a} of type ${f}`,new r.a({event:g,type:"update",category:"issue",app:"issue-field",eventNameSuffix:"issue.error"})),m.cancel(),Object(l.b)(i,"field updateFailed",{fieldKey:a,fieldType:f,isValidationError:t})}T(!1)}),[a,f,O,w,k,s,y,t,j,v]);return[{value:w,loading:I,error:S},{saveValue:_,resetError:P}]}},"./src/packages/issue/fields/field-base/src/services/field-config-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return C})),s.d(t,"b",(function(){return I})),s.d(t,"c",(function(){return T}))
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),i=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),r=s("./node_modules/reselect/lib/index.js"),o=s("./node_modules/lodash/merge.js"),c=s.n(o),l=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),u=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={setIssueConfig:(e,t)=>({setState:s})=>{s({[e]:t})},setIssuesConfig:e=>({setState:t})=>{t(e.reduce(((e,t)=>p(p({},e),t)),{}))},mergeIssueConfig:(e,t)=>({setState:s,getState:n})=>{s({[e]:c()({},n()[e],t)})},mergeIssuesConfig:e=>({setState:t,getState:s})=>{const n=e.reduce(((e,t)=>p(p({},e),t)),{});t(c()({},s(),n))}},f=Object(l.a)({name:"issue-field-config",initialState:{},actions:b}),g=Object(r.createSelector)(((e,t)=>e[t.issueKey]),(e=>e)),h=Object(u.a)(f,{selector:g}),y=Object(r.createSelector)(((e,t)=>e[t.issueKey]),((e,t)=>t.fieldKey),((e,t)=>null==e?e:e[t]?e[t]:null)),O=Object(u.a)(f,{selector:y}),j=Object(u.a)(f,{selector:null});function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>'\n  query fieldConfigurationQuery($issueKey: String) {\n    issue(issueIdOrKey: $issueKey, latestVersion: true, screen: "view") {\n      fields {\n        key\n        schema {\n          type\n          custom\n          customId\n          system\n          renderer\n        }\n        autoCompleteUrl\n        allowedValues\n        operations\n        required\n        editable\n        title\n      }\n    }\n  }',S=async(e,t)=>{const s=await Object(a.d)(`${t}/rest/graphql/1/`,{body:JSON.stringify({
query:w(),variables:{issueKey:e}})});return s&&s.data&&s.data.issue&&s.data.issue.fields?s.data.issue.fields.reduce(((e,t)=>E(E({},e),{},{[t.key]:{autoCompleteUrl:t.autoCompleteUrl,allowedValues:t.allowedValues,isEditable:t.editable,isRequired:t.required,schema:t.schema,title:t.title}})),{}):null},C=(()=>{const e=new Set;return(t,s)=>{const[a,{setIssueConfig:r}]=O({issueKey:t,fieldKey:s}),o=Object(i.a)(),c=Object(n.useCallback)((async()=>{e.add(t);const s=await S(t,o);r(t,s),e.delete(t)}),[o,t,r]);return Object(n.useEffect)((()=>{void 0!==a||e.has(t)||c()}),[t,a,c]),[a]}})(),I=()=>{const[,e]=j();return[null,Object(n.useMemo)((()=>({setIssueConfig:(t,s)=>e.setIssueConfig(t,s),setIssuesConfig:t=>e.setIssuesConfig(t),mergeIssueConfig:(t,s)=>e.mergeIssueConfig(t,s),mergeIssuesConfig:t=>e.mergeIssuesConfig(t)})),[e])]},T=(()=>{const e=new Set;return t=>{const[s,{setIssueConfig:a}]=h({issueKey:t}),r=Object(i.a)(),o=Object(n.useCallback)((async()=>{e.add(t);const s=await S(t,r);a(t,s),
e.delete(t)}),[r,t,a]);return Object(n.useEffect)((()=>{void 0===s&&o()}),[t,s,o]),[s]}})()},"./src/packages/issue/fields/field-base/src/services/field-value-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y})),s.d(t,"e",(function(){return j}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/merge.js"),i=s.n(a),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={setFieldValue:(e,t,s)=>({setState:n,getState:a})=>{n({[e]:u(u({},a()[e]),{},{[t]:s})})},getFieldValue:(e,t)=>({getState:s})=>s()[e]&&s()[e][t],setIssue:(e,t)=>({setState:s})=>{s({[e]:t})},mergeIssue:(e,t)=>({setState:s,getState:n})=>{s({[e]:i()({},n()[e],t)})},setIssues:e=>({setState:t})=>{const s={};e.forEach((e=>{Object.assign(s,e)})),t(s)},mergeIssues:e=>({setState:t,getState:s})=>{const n={};e.forEach((e=>{Object.assign(n,e)})),t(i()({},s(),n))}},m=Object(r.a)({name:"issue-fields",initialState:{},actions:p}),b=(e,{issueKey:t,fieldKey:s})=>e[t]&&e[t][s],f=Object(o.a)(m,{selector:b
}),g=Object(o.a)(m,{selector:(e,t)=>e[t]}),h=Object(o.a)(m,{selector:(e,{issueKeys:t,fieldKey:s})=>(t||[]).map((t=>b(e,{fieldKey:s,issueKey:t})))}),y=Object(c.a)(m,{selector:b}),O=Object(o.a)(m,{selector:null}),j=()=>{const[,e]=O();return[null,Object(n.useMemo)((()=>({setIssue:(t,s)=>e.setIssue(t,s),setFieldValue:(t,s,n)=>e.setFieldValue(t,s,n),getFieldValue:(t,s)=>e.getFieldValue(t,s),mergeIssue:(t,s)=>e.mergeIssue(t,s),setIssues:t=>e.setIssues(t),mergeIssues:t=>e.mergeIssues(t)})),[e])]}},"./src/packages/issue/fields/labels/src/ui/edit/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js")),c=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),l=s("./src/packages/platform/controllers/intl/src/index.js"),u=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),d=s("./src/packages/issue/base-components/base-select/src/ui/utils.js"),p=s("./node_modules/react-intl/lib/index.es.js"),m=Object(p.h)({empty:{id:"issue-field-labels.edit.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue-field-labels.edit.failed-fetch",defaultMessage:"Search failed. Please try again."},placeholder:{id:"issue-field-labels.edit.placeholder",defaultMessage:"Select label"},createNewItem:{id:"issue-field-labels.edit.create-new-item",defaultMessage:"New label"},loading:{id:"issue-field-labels.edit.loading",defaultMessage:"Searching..."},recent:{id:"issue-field-labels.edit.recent",defaultMessage:"Recent labels"},all:{id:"issue-field-labels.edit.all",defaultMessage:"All labels"}});const b=e=>{
const[t,s]=Object(n.useState)(!1),[i,p]=Object(n.useState)(!1),[b,f]=Object(n.useState)(),[g,h]=Object(n.useState)(),[y,O]=Object(n.useState)(!1),{formatMessage:j}=Object(l.c)(),v=Object(n.useRef)(""),{fetchSuggestionsOnMount:E=!0,autoCompleteUrl:k,autoFocus:w,onChange:S,onFocus:C,onBlur:I,spacing:T,value:P,options:_,cachedOptions:x=[],formatCreateLabel:D,noOptionsMessage:A,loadingMessage:L,onCloseMenuOnScroll:M,isDropdownMenuFixedAndLayered:R}=e,N=Object(n.useCallback)(((e,t)=>{if(v.current===t){const s=e.suggestions?e.suggestions.map((e=>({label:e.label,value:e.label}))):[];f(s),""===t&&h(s)}}),[]),F=Object(n.useCallback)((()=>a.a.createElement(u.b,null,j(m.failedFetch))),[j]),U=Object(n.useCallback)((async(e="")=>{try{const t=await Object(c.b)(`${k}${e}`);s(!1),N(t,e)}catch(t){s(!1),O(!0),f([{label:F(),value:"",isDisabled:!0}])}}),[k,F,N]);Object(n.useMemo)((()=>{E&&(_||g?_&&!g?(h(_),f(_)):(v.current="",s(!0),U()):(s(!0),U()))}),[]);const V=Object(n.useMemo)((()=>[{
label:j(m.recent),options:x},{label:j(m.all),options:b||[]}]),[x,j,b]),K=Object(n.useCallback)(r()(U,300),[]),W=Object(n.useCallback)((e=>`${e} (${void 0!==D?D:j(m.createNewItem)})`),[D,j]),B=Object(n.useCallback)((()=>void 0!==A?A:j(m.empty)),[j,A]),H=Object(n.useCallback)((()=>void 0!==L?L:j(m.loading)),[j,L]),$=Object(n.useCallback)(((e,t)=>!!y||Object(d.a)(e,t||"")),[y]),G=Object(n.useCallback)((e=>{K.cancel(),O(!1),e?(v.current=e,s(!0),K(e)):(v.current="",s(!1),f(g))}),[K,g]),q=Object(n.useCallback)((e=>{p(!0),!1===E&&(s(!0),U("")),C&&C(e)}),[E,C,U]),z=Object(n.useCallback)((e=>{p(!1),I&&I(e)}),[I]);return a.a.createElement(o.a,{isMulti:!0,autoFocus:w,options:V,value:P,menuIsOpen:i,onBlur:z,menuPosition:!0===R?"fixed":void 0,styles:!0===R?u.f:void 0,onFocus:q,noOptionsMessage:B,closeMenuOnScroll:M,loadingMessage:H,placeholder:j(m.placeholder),onInputChange:G,onChange:S,spacing:T,isLoading:i&&t,filterOption:$,formatCreateLabel:W})};b.displayName="LabelsEdit";t.a=b},
"./src/packages/issue/fields/labels/src/ui/edit/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>e.map((({value:e})=>e)),a=e=>e?e.map((e=>({value:e,label:e}))):[]},"./src/packages/issue/fields/number/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[o]=Object(i.a)(e,t),c=a()(o,"schema.type","number"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:t,issueKey:e,fieldType:c,initialValue:null,onSuccess:s,onFailure:n});return[{value:l,error:u,fieldConfig:o},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/number/src/ui/async.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-async-component/commonjs/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/issue/fields/number/src/ui/view/main.js");const l=Object(i.asyncComponent)({resolve:()=>s.e("async-number-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/number/src/ui/main.js")),name:"AsyncIssueNumberField",LoadingComponent:c.a,ErrorComponent:c.a}),u=({children:e,fallback:t,packageName:s})=>a.a.createElement(o.a,{id:"issue-number-field",packageName:s,render:()=>t},a.a.createElement(r.a,{fallback:t},e));u.displayName="IssueNumberFieldBoundary"},"./src/packages/issue/fields/number/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"actionSubject",(function(){return w}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/get.js"),r=s.n(i),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/fields/components/error-flag/src/main.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/main.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/fields/number/src/services/index.js"),p=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=m.default.div(["width:","px;cursor:auto;"],8.5*b.e);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const y=Object(n.memo)((e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,i=h(e,["isInvalid","type","defaultValue"]),r=null===n?"":Number(n);return a.a.createElement(f,null,a.a.createElement(p.a,g({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:r},i)))}));var O=s("./node_modules/react-intl/lib/index.es.js"),j=Object(O.h)({errorTitle:{id:"issue-field-number.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-number.error-message",defaultMessage:"Check your connection, then give it another try."}
}),v=s("./src/packages/issue/fields/number/src/ui/view/main.js");function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const w="numberInlineEdit";t.default=Object(n.memo)((e=>{
const{fieldKey:t,issueKey:s,onCancel:i,onEdit:p,onEscape:m,onConfirm:b,onEnter:f,onUpdate:g,readView:h,editView:O,noValueText:S}=e,C=k(e,["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]),[I,T]=Object(n.useState)(!1),[{value:P,error:_,fieldConfig:x},{saveValue:D,resetError:A}]=Object(d.a)({issueKey:Object(o.l)(s),fieldKey:t,onSuccess:e=>{g&&g(e),T(!1)}}),L=r()(x,"schema.type","number"),[M,R]=Object(n.useState)(P),N=!!x&&x.isEditable;Object(n.useEffect)((()=>{_&&T(!0),I||R(P)}),[_,I,P]);const F=Object(n.useCallback)((e=>{M!==P?D(M,null,e):T(!1),Object(u.h)(e)}),[D,M,P]),U=Object(n.useCallback)((e=>{A(),T(!1),R(P),Object(u.h)(e)}),[A,P]),V=Object(n.useCallback)((e=>{U(e),i&&i(e)}),[i,U]),K=Object(n.useCallback)((e=>{F(e),b&&b(e)}),[b,F]),W=Object(n.useCallback)((e=>{T(!0),Object(u.h)(e),p&&p(e)}),[p]),B=Object(n.useCallback)((e=>{U(e),m&&m(e)}),[m,U]),H=Object(n.useCallback)((e=>{F(e),f&&f(e)
}),[f,F]),$=Object(n.useCallback)((e=>{A();const t=""===e.target.value?null:parseFloat(Number(e.target.value).toFixed(3));R(t)}),[A,R]);return a.a.createElement(a.a.Fragment,null,_&&a.a.createElement(c.a,{error:_,title:j.errorTitle,description:j.errorMessage}),a.a.createElement(l.a,E({actionSubject:w,isEditable:N,isEditing:I,readView:(()=>void 0!==h?h:a.a.createElement(v.a,{isEditable:N,value:P}))(),editView:N?(()=>void 0!==O?O:a.a.createElement(y,{defaultValue:M,onChange:$,type:L,isInvalid:!!_}))():null,onCancel:V,onConfirm:K,onEdit:W,onEscape:B,onEnter:H},C)))}))},"./src/packages/issue/fields/number/src/ui/view/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const c=r.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],o.a.N800,o.a.N90),l=r.default.div(["border:2px solid transparent;"]),u=({isEditable:e,value:t})=>{if(void 0===t)return null;const s=null===t?"-":t.toString(),n=a.a.createElement(i.a,null,s),r=e?a.a.createElement(c,null,n):n;return a.a.createElement(l,null,r)};u.displayName="NumberView"},"./src/packages/issue/fields/original-estimate/src/ui/view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js");const r=({value:e})=>a.a.createElement(i.a,null,e);r.displayName="OriginalEstimateView",t.a=r},"./src/packages/issue/fields/resolution/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({id:e.value,name:e.label}),a=e=>({value:e.id,label:e.name
}),i=(e,t)=>e?t.reduce(((t,s)=>(s.id!==e.id&&t.push(a(s)),t)),[]):(e=>e.map((e=>a(e))))(t)},"./src/packages/issue/fields/resolution/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return P}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/ui/flags/src/services/index.js")),r=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),c=s("./src/packages/issue/fields/resolution/src/common/utils.js"),l=s("./node_modules/react-intl/lib/index.es.js"),u=Object(l.h)({editResolutionFailedTitle:{id:"issue-field-resolution.edit-resolution-failed-title",defaultMessage:"We couldn't update {issueKey}'s resolution"},editResolutionFailedDescription:{id:"issue-field-resolution.edit-resolution-failed-description",defaultMessage:"Check your connection, then try again."}
}),d=s("./src/packages/issue/fields/resolution/src/services/main.js"),p=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),m=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),b=s.n(m),f=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),g=s("./node_modules/@atlaskit/icon/glyph/check.js"),h=s.n(g),y=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),O=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),j=s("./src/packages/platform/controllers/intl/src/index.js"),v=Object(l.h)({readViewMessage:{id:"issue-field-resolution.read.read-view-message",defaultMessage:"You cannot edit the resolution field"},unresolvedResolution:{id:"issue-field-resolution.read.unresolved-resolution",defaultMessage:"Unresolved"}}),E=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const w=25*k.e,S=E.default.div(["padding:",";display:flex;align-items:center;height:","px;"],(e=>e.addPadding?`0 ${2*k.e}px 0 12px`:0),4*k.e),C=E.default.span(["color:",";display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:","px;",";"],(e=>e.isDarkText?y.a.N500:y.a.N90),w,(e=>e.isDisabled?":hover { cursor: not-allowed; }":"")),I=({value:e,isLabelClickEnabled:t})=>{const{formatMessage:s}=Object(j.c)(),n=e,i=(null==e?void 0:e.name)||s(v.unresolvedResolution),r=n?a.a.createElement(h.a,{size:"medium",label:i,primaryColor:y.a.G400}):null;return a.a.createElement(S,{addPadding:!t},r,(e=>{const i=a.a.createElement(C,{isDisabled:!t,isDarkText:t||!!n},e);return t?i:a.a.createElement(O.a,{content:s(v.readViewMessage),position:"top"},i)})(i))};I.displayName="ResolutionReadView";const T=({value:e=null,allowedOptions:t,onChange:s})=>a.a.createElement(f.a,{options:t||[],value:e,target:({ref:t})=>a.a.createElement(p.a,{ref:t,iconAfter:a.a.createElement(b.a,{label:"open"
}),appearance:"subtle"},a.a.createElement(I,{value:e?Object(c.b)(e):null,isLabelClickEnabled:!0})),onChange:s,isSearchable:!1,searchThreshold:99999});T.displayName="ResolutionEditView";const P=({issueKey:e})=>{const{showFlag:t}=Object(i.f)(),{createAnalyticsEvent:s}=Object(r.a)(),l=Object(n.useCallback)((()=>{t({type:"error",title:[u.editResolutionFailedTitle,{issueKey:e}],description:u.editResolutionFailedDescription})}),[e,t]),[{value:p,fieldConfig:m},{saveValue:b}]=Object(d.a)({issueKey:e,onFailure:l}),{allowedValues:f=[],isEditable:g=!1}=m||{},h=Object(n.useMemo)((()=>p?Object(c.c)(p):null),[p]),y=Object(n.useMemo)((()=>Object(c.a)(p,f)),[f,p]),O=g&&y.length>=1,j=Object(n.useCallback)((e=>{const t=Object(c.b)(e),n=s({action:"changed",actionSubject:"select"});Object(o.h)(n,"resolutionField"),b(t,null,n)}),[s,b]);return null==m?null:O?a.a.createElement(T,{onChange:j,allowedOptions:y,value:h}):a.a.createElement(I,{value:p,isLabelClickEnabled:!1})}},
"./src/packages/issue/fields/resolution/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onFailure:t})=>{const[s]=Object(i.a)(e,"resolution"),n=a()(s,"schema.type","resolution"),[{error:o,value:c,loading:l},{resetError:u,saveValue:d}]=Object(r.a)({fieldType:n,issueKey:e,initialValue:null,fieldKey:"resolution",onFailure:t});return[{error:o,value:c,loading:l,fieldConfig:s},{resetError:u,saveValue:d}]}},"./src/packages/issue/fields/security-level/src/common/ui/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.default.div(["display:flex;align-items:center;color:",";"],(e=>e.isActive?a.a.N0:e.hasSecurityLevel?a.a.R400:null))},"./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return w})),s.d(t,"a",(function(){return C})),s.d(t,"c",(function(){return I}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),r=s("./node_modules/@atlaskit/icon/cjs/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),l=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),u=s("./src/packages/issue/fields/status/src/feature-flags.js"),d=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const p={1:"default",2:"default",3:"success",
4:"inprogress"},m={default:l.a.N40,success:l.a.G50,inprogress:l.a.B50},b={default:l.a.N500,success:l.a.G500,inprogress:l.a.B500},f={default:l.a.N70,success:l.a.G400,inprogress:l.a.B400},g={default:l.a.N800,success:l.a.N0,inprogress:l.a.N0},h=d.default.span(["display:flex;align-items:center;> div{display:flex;line-height:initial;outline:0;> span{padding:2px 0;vertical-align:text-bottom;color:",";background-color:",";",";}}"],(e=>b[p[e.statusCategoryId]]),(e=>m[p[e.statusCategoryId]]),(e=>e.hasHoverState?`&:hover {\n                        color: ${g[p[e.statusCategoryId]]};\n                        background-color: ${f[p[e.statusCategoryId]]};\n                    }`:"")),y=d.default.div(["display:flex;align-items:center;"]);function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function E(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const w="issue.fields.status.common.ui.status-lozenge.",S=e=>a.a.createElement("svg",k({},e,{width:"13",height:"13",viewBox:"5 5 13 13"}),a.a.createElement("path",{d:"M8.292 10.293a1.009 1.009 0 0 0 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 0 0 0-1.419.987.987 0 0 0-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 0 0-1.406 0z",fill:"currentColor",fillRule:"evenodd"}));S.displayName="customChevronDownGlyph";const C=({status:{name:e,statusCategory:t},isEditable:s,hasHoverState:n,targetRef:i,shouldShowDropdownIndication:r})=>a.a.createElement(h,{hasHoverState:n,statusCategoryId:t.id},a.a.createElement("div",{ref:i,"data-test-id":`${w}${t.id}`},!0!==s&&!0!==r||!Object(u.a)()?a.a.createElement(c.a,null,e):(()=>a.a.createElement(c.a,null,a.a.createElement(y,null,e,a.a.createElement(o.a,{glyph:S,label:""}))))()));C.displayName="StatusLozenge"
;const I=e=>{const{ariaLabel:t,error:s,isEditable:n,isOpen:r,targetRef:o}=e,c=E(e,["ariaLabel","error","isEditable","isOpen","targetRef"]);return a.a.createElement(i.a,{ref:o,appearance:"subtle","aria-label":t,"aria-expanded":r,isDisabled:!n,theme:(e,t)=>{const{buttonStyles:a,spinnerStyles:i}=e(t);return{buttonStyles:j(j(j({},a),{},{backgroundColor:"transparent",margin:0,width:"auto",height:"auto",padding:0,border:`2px solid ${s?l.a.R300:"transparent"}`,borderRadius:"5px"},!0===n?void 0:{cursor:"auto"}),{},{outline:0,boxShadow:`0 0 0 2px ${!0===r?l.a.B100:"transparent"}`,"& > span":{margin:0},"&:focus, &:focus-within":{boxShadow:`0 0 0 2px ${l.a.B100}`}}),spinnerStyles:i}}},a.a.createElement(C,k({},c,{isEditable:n})))};I.displayName="WrappedStatusLozenge"},"./src/packages/issue/fields/status/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"e",(function(){return d})),
s.d(t,"c",(function(){return p}));var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js");const i=(e,t)=>e.to.id===t&&!0===e.isLooped,r=Object(n.a)(((e,t)=>e.filter((e=>!i(e,t)&&!((e,t)=>e.isGlobal&&e.to.id===t)(e,t))))),o=e=>e.every((e=>e.isGlobal)),c=(e,t)=>r(e||[],t),l=Object(n.a)(((e,t)=>(e||[]).filter((e=>i(e,t))))),u=Object(n.a)((e=>e.map((e=>({label:e.to.name,value:e.id,transition:e}))))),d=e=>u(e),p=(e,t,s)=>({id:e,name:t,statusCategory:{id:a.StatusCategoryIds[s]||1,name:t}})},"./src/packages/issue/fields/status/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={TIME_TO_RENDER_OPTIONS:"jira.fe.issue.fields.status.time-to.render-options",TIME_TO_APPLY_SELECTED_OPTION:"jira.fe.issue.fields.status.time-to.reflect-selected",TIME_TO_CANCEL_DROPDOWN:"jira.fe.issue.fields.status.time-to.cancel-dropdown",
TIME_TO_OPEN_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.open-transition-screen",TIME_TO_CONFIRM_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.confirm-transition-screen",TIME_TO_CANCEL_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.cancel-transition-screen",TIME_TO_ERROR_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.error-transition-screen"}},"./src/packages/issue/fields/status/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const a=()=>Object(n.b)("jsw.change-issue-status-button.add-drop-down-indication",!1)},"./src/packages/issue/fields/status/src/services/experience-descriptions/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return u}))
;var a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=n("./src/packages/platform/utils/types/src/application.js"),r=n("./src/packages/platform/utils/types/src/edition.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=(t,s,n,o,l)=>{let u=null,d=null;if(null!==o)try{const{appEditions:e}=Object(a.f)()
;u=Object(i.e)(o),d=Object(r.f)(u,e)}catch(e){}return{experience:"transitionIssue",wasExperienceSuccesful:t,analyticsSource:n,application:u,edition:d,additionalAttributes:c({method:s},null!=l?{errorMessage:l}:{})}}},"./src/packages/issue/fields/status/src/services/status-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return R}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/observability/browser-metrics/src/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),p=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),m=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),b=s("./src/packages/platform/ui/flags/src/ui/with-flag-service/index.js"),f=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),g=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js"),h=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),y=s("./src/packages/issue/workflow-transitions-services/src/main.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/status/src/constants.js"),v=s("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js"),E=s("./node_modules/react-intl/lib/index.es.js")
;const k=Object(E.h)({title:{id:"issue-field-status.services.flags.transition-failed-error.main.title",defaultMessage:"We couldn't update the status"},description:{id:"issue-field-status.services.flags.transition-failed-error.main.description",defaultMessage:"Check your network connection, then try reloading the issue."}});var w=()=>({type:"error",title:k.title,description:k.description,isAutoDismiss:!0});const S=Object(E.h)({title:{id:"issue-field-status.services.flags.validation-error.main.title",defaultMessage:"Transition failed"}});var C=e=>({type:"warning",title:S.title,description:{id:"issue-field.status.services.flags.validation-error.main.description",defaultMessage:e},isAutoDismiss:!0});function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=Object(o.b)(),D="#issue-workflow-transition-submit",A=(e,t,s)=>{const n=document.querySelector(e);n&&n.removeEventListener(t,s)};class L extends n.Component{static getDerivedStateFromProps(e,t){return t.loading||!e.value?null:{value:e.value}}constructor(e){super(e),this.componentDidUpdate=e=>{
this.props.initialValue&&e.initialValue&&e.initialValue.id!==this.props.initialValue.id&&this.props.initialValue.id!==this.state.value.id&&this.setState({loading:!1,value:this.props.initialValue})},this.isDialogOpened=!1,this.isDialogConfirmPressed=!1,this.onDialogContentReady=()=>{setTimeout((()=>{this.isDialogOpened?Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_ERROR_TRANSITION_SCREEN}):Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_OPEN_TRANSITION_SCREEN}),this.bindDialogFormHandlers(),this.isDialogOpened=!0,this.isDialogConfirmPressed=!1}))},this.bindDialogFormHandlers=()=>{((e,t,s)=>{A(e,t,s);const n=document.querySelector(e);n&&n.addEventListener(t,s)})(D,"click",this.onClickDialogConfirm)},this.unbindDialogFormHandlers=()=>{A(D,"click",this.onClickDialogConfirm)},this.handleBeforeDialogHide=()=>{this.isDialogOpened&&!this.isDialogConfirmPressed&&(this.cancelScreenBrowserMetricsEvents(),Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_CANCEL_TRANSITION_SCREEN}),
setTimeout((()=>{Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_CANCEL_TRANSITION_SCREEN})}))),this.unbindDialogFormHandlers(),this.isDialogOpened=!1,this.isDialogConfirmPressed=!1},this.cancelScreenBrowserMetricsEvents=()=>{[j.a.TIME_TO_ERROR_TRANSITION_SCREEN,j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,j.a.TIME_TO_OPEN_TRANSITION_SCREEN].forEach((e=>{Object(o.c)().cancel({key:e},!0)}))},this.onClickDialogConfirm=()=>{Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,cancelExisting:!0}),Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_ERROR_TRANSITION_SCREEN,cancelExisting:!0}),this.isDialogConfirmPressed=!0},this.resetError=()=>this.setState({error:null}),this.submit=(e,t)=>{const s=this.state.value,n=e.to;this.setState({loading:!0,value:n}),this.props.onSubmit(s,n,{transition:e},t)},this.success=({status:e,event:t,viaDialog:s=!1})=>{this.setState({loading:!1,lastSavedValue:e}),
this.props.fieldValueActions.setFieldValue(this.props.issueKey,"status",e),this.props.onSuccess(e,s,t),Object(O.f)(t,"statusField transitioned","statusField"),Object(u.a)(Object(v.a)(!0,"POST","Issue View Status Service",this.props.projectType)),s&&Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN})},this.failure=(e,t)=>{this.setState({error:e,loading:!1,value:this.state.lastSavedValue||this.props.value||this.props.initialValue}),this.props.onFailure();const s=e instanceof p.a;s?this.props.flagService.showFlag(C(e.message)):this.props.flagService.showFlag(w()),Object(O.b)(t,"statusField postTransitionFailed",{validationError:s,message:e.message}),Object(h.a)(e)?Object(u.a)(Object(v.a)(!1,"POST","Issue View Status Service",this.props.projectType,e.message)):Object(u.a)(Object(v.a)(!0,"POST","Issue View Status Service",this.props.projectType))},this.cancel=()=>{this.setState({loading:!1,value:this.props.value||this.props.initialValue}),
this.props.onEditCancel(),this.props.workflowTransitionsActions.setTransitionInProgress(!1)},this.transitionStatus=async(e,t)=>{const{issueKey:s,baseUrl:n}=this.props,a=e.to;this.submit(e,t);try{e.hasScreen?new l.a({baseUrl:n,issueKey:s,transitionId:e.id}).onDialogSuccess((()=>this.success({status:a,event:t,viaDialog:!0}))).onDialogCancel((()=>this.cancel())).show():(x.start({key:"issue-field.status.post-transition"}),await Object(m.d)(`${n}/rest/api/2/issue/${s}/transitions`,{body:JSON.stringify({transition:e})}),x.stop({key:"issue-field.status.post-transition"}),this.success({status:a,event:t}))}catch(i){x.cancel("issue-field.status.post-transition"),d.a.safeErrorWithoutCustomerData("issue-field.status.post-transition",i),this.failure(i,t)}},this.api={transitionStatus:this.transitionStatus,resetError:this.resetError};const t=e.value||e.initialValue;if(null==t)throw new Error("Either value or initialValue prop is required.");this.state={value:t,lastSavedValue:t,loading:!1,error:null}}
componentDidMount(){Object(c.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({bind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)})).catch(r.a),Object(g.a)("dialogContentReady",this.onDialogContentReady),Object(g.a)("Dialog.beforeHide",this.handleBeforeDialogHide)}componentWillUnmount(){Object(c.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({unbind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)})).catch(r.a),Object(g.b)("dialogContentReady",this.onDialogContentReady),Object(g.b)("Dialog.beforeHide",this.handleBeforeDialogHide),this.unbindDialogFormHandlers(),this.isDialogOpened=!1}render(){return this.props.children(P(P({},this.state),this.api))}}L.displayName="StatusService",L.defaultProps={onSubmit:r.a,onSuccess:r.a,onFailure:r.a,onEditStart:r.a,onEditCancel:r.a};const M=e=>{const[,t]=Object(y.a)()
;return a.a.createElement(f.a,{issueKey:e.issueKey,fieldKey:"status"},((s,n)=>a.a.createElement(L,I({value:s},e,{fieldValueActions:n,workflowTransitionsActions:t}))))};M.displayName="StatusWithValueService";const R=Object(b.a)(M)},"./src/packages/issue/fields/status/src/services/transitions-query/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/ui/error-boundary/src/main.js"),r=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),o=s("./src/packages/issue/fields/status/src/services/transitions-query/main.js");const c=e=>a.a.createElement(i.a,{id:"issue.fields.status.transitions-query"},a.a.createElement(r.a,{id:"fields.status.transitions-query",packageName:"jiraIssueFieldStatus",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(o.a,e)));c.displayName="WrappedTransitionsQuery"},
"./src/packages/issue/fields/status/src/services/transitions-query/main.js":function(t,s,n){"use strict";n.d(s,"b",(function(){return C})),n.d(s,"a",(function(){return _}));var a=n("./node_modules/react/index.js"),i=n.n(a),r=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),
n("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js")),o=n("./src/packages/platform/observability/browser-metrics/src/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),l=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),u=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),d=n("./src/packages/issue/issue-view/src/common/util/errors/index.js"),p=n("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),m=n("./src/packages/issue/workflow-transitions-services/src/main.js"),b=n("./src/packages/issue/workflow-transitions-services/src/context.js"),f=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),g=n("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=e=>y(y({id:parseInt(e.id,10),name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:parseInt(e.to.id,10),name:e.to.name,description:"",statusCategory:{id:e.to.statusCategory.id}},from:null}),v=e=>y(y({id:String(e.id),name:e.name,hasScreen:e.hasScreen,
isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:String(e.to.id),name:e.to.name,statusCategory:{id:e.to.statusCategory.id}}});function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const S=Object(o.b)(),C=(e,t)=>`${e}/rest/api/2/issue/${t}/transitions?sortByOpsBarAndStatus=true`,I=(e,t,s)=>{const n="string"==typeof s?Object(g.a)(e,"GET","Issue View BaseTransitionsQuery",t||null,s):Object(g.a)(e,"GET","Issue View BaseTransitionsQuery",t||null);Object(c.a)(n)},T=t=>{const{status:s,issueKey:n,baseUrl:i,projectType:r,preFetch:o,createAnalyticsEvent:c,isSaving:b}=t,[g,h]=Object(m.c)(),y=Object(a.useRef)(!1),[O]=Object(u.d)(n),E=Object(a.useCallback)((async t=>{if(!y.current){y.current=!0,h({loading:!0,error:null});try{S.start({key:"issue-field.status.fetch-transitions"});const e=((e=[])=>e.filter((e=>!!e.to&&!!e.to.statusCategory)))((await Object(l.a)(C(i,n))).transitions);S.stop({key:"issue-field.status.fetch-transitions"}),Object(f.g)(t,"statusField transitionsFetched","statusField",{count:e.length}),I(!0,r),h({data:e.map(j),loading:!1,error:null})}catch(e){S.cancel("issue-field.status.fetch-transitions"),
Object(d.a)("issue-field.status.fetch-transitions",e.toString(),e,{}),Object(p.a)(e)?I(!1,r,`${e.name||""} ${e.message}`.trim()):I(!0,r),h({data:null,loading:!1,error:e})}y.current=!1}}),[i,n,r,h,O]);return Object(a.useEffect)((()=>{!0===o&&c&&E(c({}))}),[n,o,c,h,E]),Object(a.useEffect)((()=>{b?h({data:null}):!b&&!0===o&&c&&E(c({}))}),[b,s,o,c,h,E]),t.children(k(k({},g),{},{data:g.data?g.data.map(v):null,fetch:E}))},P=e=>i.a.createElement(b.a,{scope:e.issueKey},i.a.createElement(T,e));P.displayName="ScopedTransitionsQuery";const _=Object(r.a)()(P)},"./src/packages/issue/fields/status/src/ui/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return jt}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/platform/ui/error-boundary/src/index.js"),l=s("./src/packages/platform/utils/types/src/general.js"),u=s("./src/packages/platform/services/providers-container-context/src/index.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),p=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),m=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),b=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),g=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),h=s("./src/packages/platform/utils/constants/src/project-types.js")
;const y=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t||"ADMINISTER"===e&&t,O=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t;function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const k=(e,t)=>`\n    query nextGenViewWorkflowQuery {\n        permissions(issueKey:"${e}", keys:["VIEW_READONLY_WORKFLOW", "ADMINISTER"]) {\n            key\n            havePermission\n        }\n        viewIssue(issueKey: "${e}") {\n            fields {\n                ... on IssueTypeField {\n                    fieldKey\n                    id\n                }\n            }\n        }\n        ${t?`project(projectKey: "${t}") {\n            projectId\n            simplified\n            type\n        }`:""}\n    }\n`,w=(e,t,s,n)=>Object(g.a)((e=>`${e}/rest/gira/latest/`)(e),{method:"POST",body:JSON.stringify({query:k(t,s)})}).then((e=>(({data:e},t)=>{if(!e||!e.permissions||!e.viewIssue)return;const{permissions:s,project:n,viewIssue:a}=e,i=!0===(n&&n.simplified||t)?y:O,r=a.fields.find((e=>"issuetype"===e.fieldKey)),o={hasPermission:s.some(i),issueTypeId:Object(l.m)(r?r.id:"")};return n&&(o.projectId=Object(l.p)(String(n.projectId)),o.projectType=Object(h.j)(n.type),
o.isSimplified=n.simplified),o})(e,n)));class S extends n.Component{constructor(e){super(e),this.fetch=async()=>{const{baseUrl:e,projectKey:t,issueKey:s,isSimplified:n}=this.props;this.request();try{const a=await w(e,s,t,n);this.success(a)}catch(a){f.a.safeErrorWithoutCustomerData("issue-field.status.fetch-view-workflow",a),this.failure(a)}},this.request=()=>{this.setState({error:void 0,loading:!0,data:void 0})},this.success=e=>{this.setState({loading:!1,data:e})},this.failure=e=>{this.setState({error:e,loading:!1})},this.state={data:void 0,loading:!1,error:void 0}}render(){return this.props.children(v(v({},this.state),{},{fetch:this.fetch}))}}function C(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function I(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?I(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}S.displayName="ViewWorkflowService";const _={data:void 0,loading:!1,error:void 0,fetch:()=>Promise.resolve()},x=e=>{
const{ViewWorkflowService:t,ContainerContextSubscriber:s,baseUrl:n,issueKey:i,children:r}=e,o=i?Object(b.a)(i):null;return i&&o?a.a.createElement(s,null,(({data:e})=>{const s=((e,t)=>{if(!e||!e.project)return;const s=e.project;return s.key===t?{projectId:Object(l.p)(s.id.toString()),projectType:s.type,isSimplified:s.isSimplified}:void 0})(e,o);return a.a.createElement(t,{baseUrl:n,issueKey:i,projectKey:s?void 0:o,isSimplified:s&&s.isSimplified},(e=>{let{data:t}=e,n=C(e,["data"]);const a=s||t?T(T({},s),t):void 0;return r(T({data:a},n))}))})):r(T({},_))};x.displayName="ViewWorkflowContextService",x.defaultProps={ViewWorkflowService:S}
;var D=x,A=s("./node_modules/react-intl/lib/index.es.js"),L=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),M=s("./src/packages/platform/observability/browser-metrics/src/index.js"),R=s("./src/packages/common-legacy-do-not-add-anything-new/src/blanket/index.js"),N=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),F=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),U=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),V=s("./src/packages/issue/fields/status/src/common/utils.js"),K=s("./src/packages/issue/fields/status/src/constants.js"),W=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js"),B=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),H=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),$=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const G=H.default.div(["padding:","px;text-align:center;"],$.e),q=()=>a.a.createElement(G,null,a.a.createElement(B.a,null));q.displayName="LoadingSpinner";var z=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),Y=s.n(z),Q=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const J=Object(H.keyframes)(["to{box-shadow:0 0 0 10px rgba(0,0,0,0);}"]),Z=H.default.div(["display:inline-flex;border-radius:3px;box-shadow:0 0 0 0 ",";animation:",";"],Q.a.G400,(e=>e.shouldShow?`${J} 1.45s cubic-bezier(0.5, 0, 0, 1)`:"none"));class X extends n.Component{constructor(...e){super(...e),this.state={shouldShow:!1}}componentDidUpdate(e){e.status.statusCategory.id!==this.props.status.statusCategory.id&&this.setState({shouldShow:3===this.props.status.statusCategory.id})}render(){return a.a.createElement(Z,{shouldShow:this.state.shouldShow},this.props.children)}}X.displayName="Pulse"
;var ee=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),te=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js");const se=e=>`\n    &:not(:active), &:disabled {\n        background: ${e.background} !important;\n        color: ${e.color} !important;\n    }\n    \n    &:hover:not(:active) {\n        background: ${e.backgroundHover} !important;\n        color: ${e.color} !important;\n    }\n`,ne={default:{background:Q.a.N20A,backgroundHover:Q.a.N30A,color:Q.a.N400},todo:{background:Q.a.N40,backgroundHover:Q.a.N50,color:Q.a.N800},inProgress:{background:Q.a.B400,backgroundHover:Q.a.B500,color:Q.a.N0},done:{background:Q.a.G400,backgroundHover:Q.a.G500,color:Q.a.N0}},ae=Object(ee.a)(te.a,{target:"elro8wh0"})("font-weight:600;",(e=>!e.isSelected&&se(ne.default)),";"),ie=Object(ee.a)(te.a,{target:"elro8wh1"})("font-weight:600;",(e=>!e.isSelected&&se(ne.todo)),";"),re=Object(ee.a)(te.a,{target:"elro8wh2"
})("font-weight:600;",(e=>!e.isSelected&&se(ne.inProgress)),";"),oe=Object(ee.a)(te.a,{target:"elro8wh3"})("font-weight:600;",(e=>!e.isSelected&&se(ne.done)),";"),ce=e=>{const{ariaLabel:t,isEditable:s,isOpen:n,status:i,targetRef:r}=e,o=(e=>{switch(e){case 2:return ie;case 3:return oe;case 4:return re;default:return ae}})(i.statusCategory.id);return a.a.createElement("div",{ref:r},a.a.createElement(X,{status:i},a.a.createElement(o,{"aria-label":t,"aria-expanded":n,isDisabled:!s,iconAfter:a.a.createElement(Y.a,{label:""})},i.name)))};ce.displayName="StatusButton";var le=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),ue=s.n(le),de=Object(A.h)({globalTransition:{id:"issue-field-status.status-view.transition.with-label.global-transition",defaultMessage:"Transition to"}})
;const pe=H.default.div(["display:flex;"]),me=H.default.span(["flex-grow:1;"]),be=H.default.span(["flex-shrink:0;display:flex;"]),fe=H.default.div(["display:inline-flex;align-items:center;"]),ge=e=>a.a.createElement(pe,null,a.a.createElement(me,null,((e,t)=>e.isGlobal?e.name!==e.to.name?e.name:t.formatMessage(de.globalTransition):e.name)(e.transition,e.intl)),a.a.createElement(be,null,a.a.createElement(fe,null,a.a.createElement(ue.a,{label:"",size:"small"})),a.a.createElement(U.a,{status:e.transition.to})));ge.displayName="TransitionWithLabel";const he=Object(A.i)(ge),ye=e=>a.a.createElement(U.a,{status:e.transition.to});ye.displayName="TransitionWithoutLabel";const Oe=e=>e.hasLabel?a.a.createElement(he,{transition:e.transition}):a.a.createElement(ye,{transition:e.transition}),je=Object(N.a)("statusField",{onOpen:"openDropdown",onChange:"transitionSelected"})(L.a);class ve extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.onChildWrapperRefUpdate=e=>{
this.childWrapperRef=e},this.wasChanged=!1,this.onChange=(e,t,s)=>{const{hasScreen:n}=e.transition;this.wasChanged=!0,Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_APPLY_SELECTED_OPTION,cancelExisting:!0}),n&&Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_OPEN_TRANSITION_SCREEN,cancelExisting:!0}),Object(F.h)(s,"transitionSelectedStatusField",{hasScreen:n}),this.props.onChange(e.transition,s)},this.onOpen=e=>{Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_RENDER_OPTIONS,cancelExisting:!0}),Object(F.h)(e,"openDropdownStatusField"),this.props.onOpen(e),this.setState({isOpen:!0})},this.onClose=()=>{this.wasChanged||Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_CANCEL_DROPDOWN,cancelExisting:!0}),this.wasChanged=!1,this.props.onClose(),this.setState({isOpen:!1})},this.childWrapperRef=void 0}componentDidUpdate(e,t){const{transitions:s,isSaving:n}=this.props,{isOpen:a}=this.state
;!0===e.isSaving&&!1===n&&this.childWrapperRef&&this.childWrapperRef.children.length>0&&this.childWrapperRef.children[0].focus();const i=!t.isOpen&&a,r=null===e.transitions&&s;i&&!s&&Object(M.c)().markTimeToFeedback({key:K.a.TIME_TO_RENDER_OPTIONS}),(i&&s||a&&r)&&setTimeout((()=>{Object(M.c)().markTimeToFinishTask({key:K.a.TIME_TO_RENDER_OPTIONS})}));t.isOpen&&!a&&setTimeout((()=>{Object(M.c)().markTimeToFinishTask({key:K.a.TIME_TO_APPLY_SELECTED_OPTION}),Object(M.c)().markTimeToFinishTask({key:K.a.TIME_TO_CANCEL_DROPDOWN})}))}componentWillUnmount(){Object.keys(K.a).forEach((e=>{Object(M.c)().cancel({key:K.a[e]},!0)}))}renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}){const{intl:{formatMessage:i},value:r}=this.props;return t?a.a.createElement(R.a,{border:!1},a.a.createElement(U.c,{targetRef:n,status:r,error:s})):a.a.createElement(U.c,{ariaLabel:i(W.a.changeStatus),error:s,hasHoverState:!0,isEditable:e,isOpen:this.state.isOpen,status:r,targetRef:n})}
renderButton({isEditable:e,isSaving:t,targetRef:s}){const{intl:{formatMessage:n},value:i}=this.props,r=a.a.createElement(ce,{ariaLabel:`${i.name} - ${n(W.a.changeStatus)}`,isEditable:e,isOpen:this.state.isOpen,status:i,targetRef:s});return t?a.a.createElement(R.a,null,r):r}renderWithFocusWrapper(e){return a.a.createElement("div",{ref:this.onChildWrapperRefUpdate},e)}renderTarget({isEditable:e,isSaving:t,error:s,targetRef:n}){const{appearance:i,value:r}=this.props;if(r){if("lozenge"===i)return this.renderWithFocusWrapper(this.renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}));if("button"===i)return this.renderWithFocusWrapper(this.renderButton({isEditable:e,isSaving:t,targetRef:n}))}return a.a.createElement("div",null)}render(){const{footer:e,isLoading:t,isEditable:s,isSaving:n,error:i,value:r,intl:{formatMessage:o},transitions:c}=this.props,l=null!=c,u=Object(V.a)(c,r.id),d=Object(V.d)(u||[]);return n||!s?this.renderTarget({isSaving:n,isEditable:s,error:i
}):a.a.createElement(je,{noOptionsMessage:()=>o(l?W.a.noPermission:W.a.cannotLoadTransitions),formatOptionLabel:e=>a.a.createElement(Oe,{transition:e.transition,hasLabel:!d}),options:Object(V.e)(u||[]),target:({ref:e})=>this.renderTarget({isEditable:s,isSaving:n,error:i,targetRef:e}),isLoading:t,isDisabled:!s,searchThreshold:99999,onChange:this.onChange,onOpen:this.onOpen,onClose:this.onClose,closeMenuOnSelect:!0,components:{LoadingMessage:()=>a.a.createElement(q,null)},popperProps:{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:5,rootBoundary:"document"}}],strategy:"fixed"},footer:e})}}ve.displayName="StatusView",ve.defaultProps={isEditable:!0,isSaving:!1,onChange:r.a,onOpen:r.a,onClose:r.a}
;var Ee=Object(A.i)(ve),ke=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),we=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Se=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Ce=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Ie=Object(A.h)({errorMessage:{id:"issue-field-status.common.view-workflow.error.error-message",defaultMessage:"Couldn\u2019t find the workflow."},tryAgain:{id:"issue-field-status.common.view-workflow.error.try-again",defaultMessage:"Try again"}});const Te=H.default.div(["height:","px;border-top:2px solid ",";display:flex;align-items:center;padding:0 ","px;justify-content:center;"],6*$.e,Q.a.N40,1.5*$.e),Pe=H.default.div(["display:flex;flex-grow:1;height:100%;"]),_e=H.default.div(["margin-right:","px;"],$.e);function xe(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function De(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(s),!0).forEach((function(t){Ae(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ae(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Le extends n.Component{constructor(...e){super(...e),this.onRetry=(e,t)=>{Object(F.h)(t,"retryViewWorkflowButton"),this.props.onRetry(e)}}render(){const{intl:{formatMessage:e}}=this.props;return a.a.createElement(we.a,{sourceName:"viewWorkflowError",sourceType:Se.f
},a.a.createElement(Te,null,a.a.createElement(_e,null,e(Ie.errorMessage)),a.a.createElement(Pe,null,a.a.createElement(ke.a,{appearance:"link",spacing:"none",onClick:this.onRetry,theme:(e,t)=>{const s=e(t);return De(De({},s),{},{buttonStyles:De(De({},s.buttonStyles),{},{alignItems:"center"})})}},e(Ie.tryAgain))),a.a.createElement(Ce.b,null)))}}Le.displayName="Error";var Me=Object(A.i)(Le),Re=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Ne=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),Fe=s("./src/packages/platform/ui/flags/src/ui/subscriber/index.js"),Ue=s("./src/packages/wrm/src/async-wrm.js"),Ve=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),Ke=s("./src/packages/platform/controllers/intl/src/index.js"),We=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),Be=Object(A.h)({viewWorkflow:{id:"issue-field-status.common.view-workflow.button.view-workflow",
defaultMessage:"View workflow"}});const He=H.default.div(["height:","px;border-top:2px solid ",";"],6*$.e,Q.a.N40),$e=H.default.div(["display:flex;flex-grow:1;height:100%;"]);function Ge(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(s),!0).forEach((function(t){ze(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ge(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ze(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ye=({content:e,children:t})=>e?a.a.createElement(Ve.a,{tag:"span",content:e
},t):t,Qe=({isDisabled:e,isLoading:t,isInitialLoading:s,onClick:n,onMount:i,tooltipContent:r})=>{const o=Object(Ke.c)(),c=!0===e&&!s;return a.a.createElement(He,null,a.a.createElement(We.a,{onMount:i}),a.a.createElement(Ye,{content:r},a.a.createElement($e,null,a.a.createElement(ke.a,{testId:"issue-field-status.common.ui.view-workflow.button.view-workflow",shouldFitContainer:!0,appearance:"subtle",spacing:"none",isDisabled:e,isLoading:t,onClick:n,theme:(e,t)=>{const s=e(t);return qe(qe({},s),{},{buttonStyles:qe(qe({},s.buttonStyles),{},{alignItems:"center",textAlign:"left",color:c?Q.a.N70:Q.a.N900,padding:`0 ${1.5*$.e}px`})})}},o.formatMessage(Be.viewWorkflow)))))};Qe.displayName="ViewWorkflowButton";var Je=Qe,Ze=Object(A.h)({noPermission:{id:"issue-field-status.common.view-workflow.no-permission",defaultMessage:"You don't have permission to view this workflow."},loading:{id:"issue-field-status.common.view-workflow.loading",
defaultMessage:"Looks like your connection is slow. We\u2019re still finding this workflow."}}),Xe=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),et=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const tt=e=>{if(e.data&&e.data.viewIssue&&e.data.viewIssue.workflow)return{workflowName:e.data.viewIssue.workflow.name,currentStepId:e.data.viewIssue.workflow.step.id};throw new Error("TransformError")};function st(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?st(Object(s),!0).forEach((function(t){at(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):st(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function at(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class it extends n.Component{constructor(...e){super(...e),this.state={data:void 0,error:void 0,loading:!1},this.load=async()=>{this.onLoading();const{baseUrl:e,issueKey:t}=this.props;try{this.fireAnalytics();const s=await((e,t)=>Object(et.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:"\nquery classicViewWorkflowQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        workflow {\n            name\n            step {\n                id\n            }\n        }\n    }\n}\n",variables:{issueKey:t}})}).then(tt))(e,t);this.onLoadSucceeded(s)}catch(s){f.a.safeErrorWithoutCustomerData("issue-field.status.classic-view-workflow-service.fetch","Failed to fetch classic view workflow data.",{errorReason:s.message&&"TransformError"===s.message?"transform":"fetch"}),
this.onLoadFailed(s)}}}componentDidMount(){!0===this.props.shouldLoadOnMount&&this.load()}onLoading(){this.setState({data:void 0,error:void 0,loading:!0})}onLoadSucceeded(e){this.setState({data:e,error:void 0,loading:!1})}onLoadFailed(e){this.setState({data:void 0,error:e,loading:!1})}fireAnalytics(){const e=this.props.createAnalyticsEvent({action:"requested"});Object(F.b)(e,"classicViewWorkflowData requested")}render(){return this.props.children(nt(nt({},this.state),{},{retry:this.load}))}}it.displayName="ClassicViewWorkflowService",it.defaultProps={shouldLoadOnMount:!0};const rt=Object(Xe.a)()(it),ot=Object(A.h)({title:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.title",defaultMessage:"We couldn't load the workflow"},description:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.description",defaultMessage:"Check your connection, then try reloading the page."}});var ct=()=>({type:"error",title:ot.title,description:ot.description
});class lt extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1,isRefetching:!1,isModalMounted:!1},this.modalApi=void 0,this.onClick=(e,t,s,n)=>{Object(F.h)(e,"viewWorkflowTrigger",{isSimplifiedProject:!1}),this.modalApi&&s&&n&&(this.setState({isLoadingModal:!0,isRefetching:!1}),this.modalApi.then((e=>{e.showDialog(s,n),window.dispatchEvent(Object(Ne.a)("resize")),this.setState({isModalMounted:!0})})).catch((()=>{t&&t(ct()),this.setState({isLoadingModal:!1})})))},this.onRetry=(e,t)=>(e.stopPropagation(),this.setState({isRefetching:!0}),t().then((()=>this.setState({isRefetching:!1})))),this.onMount=e=>{const{hasPermission:t}=this.props;Object(F.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!1})}}componentDidMount(){const e="workflow-designer/view-classic-project-workflow";this.modalApi=Object(Re.a)({name:e,tentatives:0,shouldLogError:!1
}).catch((()=>(Object(Ue.a)(["wr!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"]),Object(Re.a)({name:e}))))}getTooltipMessage(e){const{isServiceRefetching:t,intl:s,hasPermission:n}=this.props;return t||e?s.formatMessage(Ze.loading):n?"":s.formatMessage(Ze.noPermission)}render(){const{isServiceLoading:e,isServiceRefetching:t,issueKey:s,baseUrl:n,hasPermission:i,FlagServiceSubscriber:r,ClassicViewWorkflowService:o}=this.props,{isLoadingModal:c,isModalMounted:l,isRefetching:u}=this.state,d=c&&!l,p=!i||d,m=d||t||u;return a.a.createElement(r,null,(({showFlag:t})=>a.a.createElement(o,{issueKey:s,baseUrl:n,shouldLoadOnMount:i},(({data:s,error:n,loading:i,retry:r})=>{if(n)return a.a.createElement(Me,{onRetry:e=>{this.onRetry(e,r)}});const o=s?s.workflowName:null,c=s?s.currentStepId:null;return a.a.createElement(Je,{onMount:this.onMount,tooltipContent:this.getTooltipMessage(e||i),isDisabled:p||i,isLoading:m,isInitialLoading:e||i,
onClick:(e,s)=>this.onClick(s,t,o,c)})}))))}}lt.displayName="ViewWorkflowClassic",lt.defaultProps={ClassicViewWorkflowService:rt,FlagServiceSubscriber:Fe.a};var ut=Object(A.i)(lt);class dt extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1},this.onMount=e=>{const{hasPermission:t}=this.props;Object(F.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!0})},this.onClick=(e,t)=>{Object(F.h)(t,"viewWorkflowTrigger",{isSimplifiedProject:!0}),this.setState({isLoadingModal:!0});const{issueTypeId:s=Object(l.m)(""),projectId:n=Object(l.p)(""),onOpenModal:a}=this.props;a(s,n)}}getTooltipMessage(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,intl:n}=this.props;return e||t?n.formatMessage(Ze.loading):!0!==s?n.formatMessage(Ze.noPermission):""}render(){
const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,isModalMounted:n}=this.props,{isLoadingModal:i}=this.state,r=i&&!n,o=!0!==s||r,c=t||r,l=this.getTooltipMessage();return a.a.createElement(Je,{onMount:this.onMount,tooltipContent:l,isDisabled:o,isLoading:c,isInitialLoading:e,onClick:this.onClick})}}dt.displayName="ViewWorkflowSimplified",dt.defaultProps={hasPermission:!1};var pt=Object(A.i)(dt);class mt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowServiceRefetching:!1},this.onWorkflowServiceRefetch=async(e,t)=>{e.stopPropagation(),this.setState({isWorkflowServiceRefetching:!0}),await t(),this.setState({isWorkflowServiceRefetching:!1})}}render(){const{baseUrl:e,issueKey:t,isModalMounted:s,onOpenModal:n,workflowServiceApi:i}=this.props,{isWorkflowServiceRefetching:r}=this.state,{data:o,loading:c,error:l,fetch:u}=i;if(l)return a.a.createElement(Me,{onRetry:e=>{this.onWorkflowServiceRefetch(e,u)}});if(!o)return null
;const{isSimplified:d,projectId:p,issueTypeId:m,hasPermission:b}=o;return!0===d?a.a.createElement(pt,{projectId:p,issueTypeId:m,isModalMounted:s,hasPermission:b,isServiceLoading:c,isServiceRefetching:r,onOpenModal:n}):a.a.createElement(ut,{baseUrl:e,issueKey:t,hasPermission:b,isServiceLoading:c,isServiceRefetching:r})}}mt.displayName="ViewWorkflow";var bt=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),ft=s("./src/packages/platform/ui/modal/src/index.js");const gt=({children:e,packageName:t})=>a.a.createElement(ft.a,{id:"workflow-readonly-modal",metricKey:"WORKFLOW_READONLY_MODAL_LOAD_START_MARK_KEY",packageName:t},e);gt.displayName="WorkflowReadonlyModalBoundary";const ht=Object(bt.f)((()=>s.e("async-issue-workflow-readonly-modal").then(s.bind(null,"./src/packages/issue/workflow-readonly-modal/src/index.js"))),{moduleId:"./src/packages/issue/workflow-readonly-modal/src/index.js"});class yt extends n.Component{constructor(...e){super(...e),this.state={shouldMountWorkflow:!1}}
static getDerivedStateFromProps(e,t){return{shouldMountWorkflow:t.shouldMountWorkflow||e.isOpen}}render(){const{issueKey:e,issueTypeId:t,baseUrl:s,locale:n,cloudId:i,projectId:r,isOpen:o,onModalMounted:c,onClose:l}=this.props,{shouldMountWorkflow:u}=this.state;return u&&a.a.createElement(gt,{packageName:"issue"},a.a.createElement(ht,{onMounted:c,issueKey:e,issueTypeId:t,baseUrl:s,locale:n,isOpen:o,cloudId:i,projectId:r,onClose:l}))}}yt.displayName="WorkflowModal";var Ot=yt;class jt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowModalOpen:!1,isWorkflowModalMounted:!1,issueTypeId:Object(l.m)(""),projectId:Object(l.p)("")},this.onOpenModal=(e,t)=>{this.setState({isWorkflowModalOpen:!0,issueTypeId:e,projectId:t})},this.onCloseModal=()=>{this.setState({isWorkflowModalOpen:!1})},this.onModalMounted=()=>{this.setState({isWorkflowModalMounted:!0})}}render(){
const{issueKey:e,projectType:t,isEditable:s,isOptimistic:n,initialValue:i,appearance:r,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:b,onEditCancel:f,value:g,TenantContextSubscriber:h,ContainerContextSubscriber:y,preFetchTransitions:O,ViewWorkflowContextService:j}=this.props;return a.a.createElement(h,null,(({tenantContext:h})=>h?a.a.createElement(p.a,{value:g,projectType:t,initialValue:i,issueKey:e,baseUrl:h.baseUrl,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:b,onEditCancel:f},(({value:i,loading:l,transitionStatus:u,error:d,resetError:p})=>a.a.createElement(m.a,{issueKey:e,baseUrl:h.baseUrl,status:i,isSaving:l,preFetch:O,projectType:t},(({data:t,loading:m,fetch:g})=>a.a.createElement(j,{ContainerContextSubscriber:y,baseUrl:h.baseUrl,issueKey:e},(y=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee,{value:i,isEditable:s,isLoading:m||l,isSaving:!0!==n&&l,appearance:r,transitions:t,onOpen:e=>{b(),g(e);!0!==(y.data&&void 0!==y.data.hasPermission)&&y.fetch(),p()},onClose:f,
onChange:u,error:d,footer:a.a.createElement(o.a,{id:"issue-field-view-workflow"},a.a.createElement(mt,{baseUrl:h.baseUrl,issueKey:e,workflowServiceApi:y,onOpenModal:this.onOpenModal,isModalMounted:this.state.isWorkflowModalMounted}))}),a.a.createElement(c.b,null,a.a.createElement(Ot,{onModalMounted:this.onModalMounted,issueKey:e,issueTypeId:this.state.issueTypeId,baseUrl:h.baseUrl,locale:h.locale,cloudId:h.cloudId,projectId:this.state.projectId,isOpen:this.state.isWorkflowModalOpen,onClose:this.onCloseModal}))))))))):null))}}jt.displayName="StatusField",jt.defaultProps={isOptimistic:!0,TenantContextSubscriber:d.b,ContainerContextSubscriber:u.a,ViewWorkflowContextService:D,preFetchTransitions:!1,projectType:null,onEditStart:r.a,onEditCancel:r.a,onSubmit:r.a,onSuccess:r.a,onFailure:r.a}},"./src/packages/issue/fields/status/src/ui/status-view/actions/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/issue/issue-context-service/src/main.js")),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),u=s("./src/packages/issue/fields/status/src/common/utils.js"),d=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),p=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),m=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),b=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),f=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js");const y=Object(b.a)("button",{onClick:"clicked"})(m.a),O=e=>{
const{createAnalyticsEvent:t}=Object(f.a)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(y,{onClick:(s,n)=>{const a=t({action:"clicked",actionSubject:"button"});Object(g.h)(a,"loopActionsButton"),e.onClick(e.transition,n)}},e.transition.name),a.a.createElement(h.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"loopActions",attributes:{controlType:"button"}}))}
;var j=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),v=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),E=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),k=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),w=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),S=s.n(w),C=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),I=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),T=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),P=s("./src/packages/platform/controllers/intl/src/index.js"),_=s("./node_modules/react-intl/lib/index.es.js"),x=Object(_.h)({actions:{id:"issue-field-status.status-view.actions.actions-menu.actions",defaultMessage:"Actions"}}),D=s("./node_modules/styled-components/dist/styled-components.browser.esm.js")
;const A=D.default.span(["padding-right:","px;"],.75*T.e),L=D.default.div(["margin-right:-","px;"],T.e);function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function R(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){N(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function N(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function F(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const U=Object(b.a)("dropdownItem",{onClick:"clicked"})(v.a),V=e=>{const{transitions:t,onSelect:s}=e,{createAnalyticsEvent:i}=Object(f.a)(),{formatMessage:r}=Object(P.c)(),[o,c]=Object(n.useState)(!1);if(0===t.length)return null;return a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{trigger:a.a.createElement(j.a,{appearance:"subtle",isSelected:o,iconAfter:a.a.createElement(L,null,a.a.createElement(S.a,{label:""})),theme:(e,t)=>{const s=e(t),{buttonStyles:n}=s;return R(R({},F(s,["buttonStyles"])),{},{buttonStyles:R(R({},n),{},{padding:`0 ${T.e/2}px 0 ${T.e}px`,margin:`0 ${T.e/2}px 0 ${T.e/2}px`,backgroundColor:o?C.a.N400:C.a.N20,"&:hover":{backgroundColor:o?C.a.N500:C.a.N30,padding:`0 ${T.e/2}px 0 ${T.e}px`},"&:active":{backgroundColor:o?C.a.N500:C.a.B50,padding:`0 ${T.e/2}px 0 ${T.e}px`}})
})}},a.a.createElement(A,null,r(x.actions))),isOpen:o,onOpenChange:()=>{c(!o)}},a.a.createElement(k.a,null,t.map((e=>a.a.createElement(I.a,{key:e.id,content:e.name},a.a.createElement(U,{onClick:(t,n)=>((e,t,n)=>{const a=i({action:"clicked",actionSubject:"dropdown"});Object(g.h)(a,"loopActionsMenu"),s(e,n)})(e,0,n)},e.name)))))),a.a.createElement(h.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"loopActions",attributes:{controlType:"menu"}}))},K=Object(D.keyframes)(["0%{opacity:0;max-height:0;}50%{max-height:","px;}100%{opacity:1;}"],5*T.e),W=D.default.div(["display:inline-flex;overflow:hidden;animation-duration:0.5s;animation-iteration-count:1;animation-name:",";animation-timing-function:linear;white-space:nowrap;text-overflow:ellipsis;"],(e=>e.animationEnabled?K:"none")),B=({initialStatusValue:e,onSubmit:t,onSuccess:s})=>{const i=Object(o.g)(),m=Object(l.a)(),b=Object(o.i)(),f=Object(c.j)(b),[g,h]=Object(n.useState)(!1);return a.a.createElement(d.a,{projectType:f||null,
issueKey:i,baseUrl:m,onSubmit:t,onSuccess:(...e)=>{h(!0),s(...e)},onFailure:r.a,onEditStart:r.a,onEditCancel:r.a,initialValue:e},(({value:e,loading:t,transitionStatus:s})=>a.a.createElement(p.a,{issueKey:i,baseUrl:m,status:e,isSaving:t,preFetch:!0,projectType:f},(({data:t})=>{const n=Object(u.b)(t,e.id);return 0===n.length?null:1===n.length?a.a.createElement(W,{animationEnabled:g},a.a.createElement(O,{transition:n[0],onClick:s})):a.a.createElement(W,{animationEnabled:g},a.a.createElement(V,{transitions:n,onSelect:s}))}))))};B.displayName="Actions";t.a=B},"./src/packages/issue/fields/status/src/ui/status-view/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({noPermission:{id:"issue-field-status.status-view.no-permission",defaultMessage:"You don't have permission to transition this issue"},cannotLoadTransitions:{id:"issue-field-status.status-view.cannot-load-transitions",
defaultMessage:"We couldn't load the statuses and transitions"},changeStatus:{id:"issue-field-status.status-view.change-status",defaultMessage:"Change status"}})},"./src/packages/issue/fields/summary/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(i.a)(e,"summary"),o=a()(n,"schema.type","string"),[{value:c,error:l},{saveValue:u,resetError:d}]=Object(r.a)({fieldKey:"summary",issueKey:e,fieldType:o,initialValue:null,onSuccess:t,onFailure:s});return[{value:c,error:l,fieldConfig:n},{saveValue:u,resetError:d}]}},"./src/packages/issue/fields/voters/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({
fetchVotersListFailedTitle:{id:"issue-field-voters.fetch-voters-list-failed-title",defaultMessage:"We couldn't load the voters list"},fetchVotersListFailedDescription:{id:"issue-field-voters.fetch-voters-list-failed-description",defaultMessage:"Check your connection, then give it another try."},updateVoteFailedTitle:{id:"issue-field-voters.update-vote-failed-title",defaultMessage:"We couldn't update your vote status"},updateVoteFailedDescription:{id:"issue-field-voters.update-vote-failed-description",defaultMessage:"Check your connection, then try clicking vote again."},addVoteLabel:{id:"issue-field-voters.add-vote-label",defaultMessage:"Vote for this issue"},removeVoteLabel:{id:"issue-field-voters.remove-vote-label",defaultMessage:"Remove Vote"},voteOptionsTooltip:{id:"issue-field-voters.vote-options-tooltip",defaultMessage:"Vote options"},emptyVotersMessage:{id:"issue-field-voters.empty-voters-message",defaultMessage:"No one has voted for this issue"},votersListLabel:{
id:"issue-field-voters.voters-list-label",defaultMessage:"Voted for this issue"}})},"./src/packages/issue/fields/voters/src/services/voters-list-service/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));var n={};s.r(n),s.d(n,"setVoters",(function(){return o})),s.d(n,"setLoggedInUserAction",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=e=>({setState:t})=>{t({voters:e})},c=e=>({setState:t})=>{t({loggedInUserAction:e})},l=Object(a.a)({name:"issue-voters",initialState:{voters:[],loggedInUserAction:void 0},actions:n}),u=Object(i.a)(l,{selector:e=>e.voters}),d=Object(i.a)(l,{selector:e=>e.loggedInUserAction}),p=Object(r.a)(l)},
"./src/packages/issue/fields/voters/src/services/voters-list-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/common/src/use-service/index.js")),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),u=s("./src/packages/platform/services/user/src/main.js"),d=s("./src/packages/issue/fields/voters/src/messages.js"),p=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js");const m="ADDED",b="REMOVED";var f=s("./src/packages/platform/utils/types/src/general.js");const g=e=>({
id:Object(f.a)(e.accountId),displayName:e.displayName,avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"]});function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=()=>{
const[{data:e}]=Object(u.b)(),[t,{setVoters:s}]=Object(p.c)(),[f,{setLoggedInUserAction:h}]=Object(p.b)(),O=Object(l.a)(),j=Object(o.g)(),{showFlag:v}=Object(r.f)(),[E,{setFieldValue:k}]=Object(c.b)({issueKey:j,fieldKey:"votes"}),[w,S]=Object(n.useState)(!1),C=Object(n.useCallback)((()=>Object(i.b)(`${O}/rest/api/3/issue/${j}/votes`)),[O,j]),{loading:I,error:T,data:P,fetch:_}=Object(a.a)(C),x=Object(n.useMemo)((()=>P&&P.voters?P.voters.map(g):t),[P]);Object(n.useEffect)((()=>{P&&P.voters&&(s(x),S(!0))}),[P,s,x]);const D=Object(n.useMemo)((()=>{const t=e?g(e):null;switch(f){case m:return((e,t)=>t&&-1===e.findIndex((e=>e.id===t.id))?[...e,t].sort(((e,t)=>e.displayName.localeCompare(t.displayName))):e)(x,t);case b:return((e,t)=>t?e.filter((e=>e.id!==t.id)):e)(x,t);default:return x}}),[e,f,x]);Object(n.useEffect)((()=>{T&&v({type:"error",title:d.a.fetchVotersListFailedTitle,description:d.a.fetchVotersListFailedDescription})}),[T,v]),Object(n.useEffect)((()=>{if(w&&E.votes!==D.length){
const e=void 0===f;k(j,"votes",y(y({},E),{},{votes:D.length,hasVoted:e?E.hasVoted:f===m}))}S(!1)}),[w]);const A=Object(n.useCallback)((()=>{h(m)}),[h]),L=Object(n.useCallback)((()=>{h(b)}),[h]),M=Object(n.useCallback)((()=>{I||_()}),[_,I]),R=Object(n.useMemo)((()=>({setLoggedInUserActionVote:A,setLoggedInUserActionUnvote:L,refreshVoters:M})),[A,M,L]);return[{voters:D,isFetching:I,error:T},R]}},"./src/packages/issue/fields/voters/src/ui/button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/like.js")),o=s.n(r),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./node_modules/@atlassian/react-transitive-number/index.js"),d=s.n(u),p=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const f=m.default.span(["display:flex;align-items:center;",""],(e=>e.hasVoted&&!e.isSelected?`color: ${b.a.B500};`:"")),g=m.default.span(["display:flex;"]),h=m.default.span(["min-width:",";"],(e=>e.hasVoters?"15px":"0")),y=({isSelected:e=!1})=>{const t=Object(c.g)(),[{hasVoted:s,votes:n}]=Object(l.b)({issueKey:t,fieldKey:"votes"});return a.a.createElement(f,{hasVoted:s,isSelected:e},a.a.createElement(g,null,s?a.a.createElement(p.a,{label:"",size:"medium"}):a.a.createElement(o.a,{label:"",
size:"medium"})),a.a.createElement(h,{hasVoters:0!==n},a.a.createElement(d.a,null,0!==n?n:"")))};y.displayName="VoteIcon";var O=y,j=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js");const v=Object(m.default)(j.a)(["&&{padding:0 4px;align-items:center;}"]),E=({onClick:e,tooltip:t=null,isSelected:s=!1,isDisabled:n=!1})=>a.a.createElement(i.a,{content:t,position:"top"},a.a.createElement(v,{onClick:e,isSelected:s,appearance:"subtle",spacing:"default","aria-label":t,"aria-expanded":s,isDisabled:n},a.a.createElement(O,{isSelected:s})));E.displayName="VoteButton";t.a=E},"./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/cjs/index.js"),r=s.n(i);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}const c=e=>a.a.createElement("svg",o({},e,{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"}),a.a.createElement("defs",null,a.a.createElement("path",{id:"like-filled-a",
d:"M4.00029867,12.0000031 L4.00029867,19.0000031 C3.99379083,19.2619469 4.0938648,19.5154845 4.27800285,19.7035645 C4.46214091,19.8916445 4.71487577,19.9984685 4.97933941,20.0000031 L5.99875297,20.0000031 L5.99875297,11.0000031 L4.97933941,11.0000031 C4.71487577,11.0015345 4.46214091,11.1083586 4.27800285,11.2964386 C4.0938648,11.4845186 3.99379083,11.7380562 4.00029867,12.0000031 Z M19.2814088,11.0400031 C18.7031035,10.3648275 17.8537454,9.97663317 16.959972,9.97900342 L14.3256459,9.97900342 C14.3660187,9.79800348 14.4063915,9.61900354 14.4366711,9.4470036 C14.9514245,6.5130046 14.4366711,5.44700497 13.9320109,4.85300517 C13.4705845,4.31076256 12.7907146,3.99849428 12.0748615,4 C10.5305357,4.05274499 9.2630356,5.22781051 9.10745966,6.75100452 C8.71382472,8.59000389 8.6532655,8.75100384 8.13851212,9.47600359 L7.37142865,10.5650032 C7.13702441,10.900368 7.01037109,11.2980817 7.00807332,11.7060028 L7.00807332,17.9790007 C7.0094101,18.5107601 7.22390249,19.0202137 7.60436426,19.3952867 C7.98482603,19.7703597 8.50009148,19.9803277 9.03680723,19.9790426 L16.2837274,19.9790426 C17.7690249,19.9867984 19.0398298,18.9240081 19.2814088,17.4720009 L19.9576535,13.4720022 C20.1064636,12.6021375 19.8588502,11.7116379 19.2814088,11.0400031 Z"
})),a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("use",{fill:"currentColor",xlinkHref:"#like-filled-a"}),a.a.createElement("path",{fill:"inherit",d:"M17.2829545,17.140001 C17.2013522,17.6232979 16.7783039,17.9768163 16.2837274,17.9750077 L9.03680723,17.9750077 L9.03680723,11.7060028 L9.8038907,10.6170032 C10.5252697,9.572607 10.9727451,8.36664508 11.105914,7.1080044 C11.1422788,6.56547046 11.3606605,5.89943888 12.0748615,6.00000478 C12.7890625,6.10057068 12.6501741,7.91600412 12.4382168,9.10000372 C12.2228565,10.0810361 11.9326853,11.0444672 11.5702013,11.9820027 L16.959972,11.9740027 C17.2574249,11.9729101 17.5402185,12.1018688 17.7328364,12.3264423 C17.9254544,12.5510157 18.0082813,12.848334 17.9591992,13.1390023 L17.2829545,17.140001 Z"})));c.displayName="likeIconFilled";const l=({size:e,label:t,secondaryColor:s="#B3D4FF"})=>a.a.createElement(r.a,{glyph:c,size:e,label:t,secondaryColor:s});l.displayName="LikeIconFilled",t.a=l},
"./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/like.js")),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/platform/controllers/intl/src/index.js"),l=s("./src/packages/issue/fields/voters/src/messages.js"),u=s("./node_modules/lodash/get.js"),d=s.n(u),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),m=s("./src/packages/platform/ui/flags/src/services/index.js"),b=s("./src/packages/platform/utils/types/src/general.js"),f=s("./src/packages/issue/issue-context-service/src/main.js"),g=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),h=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),y=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/voters/src/services/voters-list-service/main.js");function v(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>{const e=Object(f.g)(),[,{setLoggedInUserActionVote:t,setLoggedInUserActionUnvote:s}]=Object(j.a)(),[a]=Object(g.a)(e,"votes"),i=d()(a,"schema.type","votes"),{showFlag:r}=Object(m.f)(),{createAnalyticsEvent:o}=Object(y.a)(),c=Object(n.useCallback)(((e,n)=>{r({type:"error",title:l.a.updateVoteFailedTitle,
description:l.a.updateVoteFailedDescription}),n.hasVoted?s():t()}),[r,s,t]),[{value:u,error:v},{saveValue:k,resetError:w}]=Object(h.a)({fieldKey:"votes",issueKey:e,fieldType:i,initialValue:{hasVoted:!1,votes:0},saveField:(t,s,n,a)=>(({issueKey:e,newValue:t,baseUrl:s})=>t.hasVoted?Object(p.d)(`${s}/rest/api/3/issue/${e}/votes`):Object(p.a)(`${s}/rest/api/3/issue/${e}/votes`))({issueKey:e,newValue:n,baseUrl:Object(b.b)(a)}),onFailure:c}),S=Object(n.useCallback)(((e=!1)=>{const n=!u.hasVoted,a=o({action:"clicked",actionSubject:"button"});Object(O.h)(a,n?"voteAdded":"voteRemoved",{viewMode:e?"showVotersList":"hideVotersList"}),n?t():s(),k(((e,t)=>E(E({},t),{},e?{votes:t.votes+1,hasVoted:!0}:{votes:t.votes-1,hasVoted:!1}))(n,u),null,a)}),[u,o,t,s,k]);return[{value:u,error:v,fieldConfig:a},{toggleValue:S,resetError:w}]}
;var S=s("./src/packages/issue/fields/voters/src/ui/button/index.js"),C=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),I=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");const P=Object(I.default)(T.a)(["&&&{padding:8px 12px 7px;}"]),_=({onClick:e,isDropdownItem:t=!1,disableVotingProps:s={isDisabled:!1}})=>{const{isDisabled:i,tooltips:u}=s,{formatMessage:d}=Object(c.c)(),[{value:p},{toggleValue:m}]=w(),{buttonLabel:b,disabledTooltip:f}=Object(n.useMemo)((()=>p.hasVoted?{buttonLabel:d(l.a.removeVoteLabel),disabledTooltip:null==u?void 0:u.removeVote}:{buttonLabel:d(l.a.addVoteLabel),disabledTooltip:null==u?void 0:u.addVote}),[u,d,p.hasVoted]),g=Object(n.useCallback)((()=>{null==e||e(),m(t)}),[t,e,m]);return t?a.a.createElement(o.a,{content:i&&void 0!==f?f:null},a.a.createElement(P,{elemBefore:p.hasVoted?a.a.createElement(r.a,{label:"",size:"medium"
}):a.a.createElement(C.a,{label:"",size:"medium"}),onClick:g,isDisabled:i},b)):a.a.createElement(S.a,{tooltip:i?f:b,onClick:g,isDisabled:i})};_.displayName="VoteToggle";t.a=_},"./src/packages/issue/forge-service/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),s.d(n,"setForge",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{t(e)},o=Object(a.a)({name:"issue-view-layout-forge-apps-service",initialState:{customField:[],issueAction:[],issueActivity:[],issueGlance:[],issuePanel:[],activeAction:null,customFieldType:[]},actions:n}),c=Object(i.a)(o),l=Object(i.a)(o,{selector:null}),u=()=>{const[e]=c();return[e.issueGlance]},d=()=>{const[,e]=l();return[void 0,e]}},"./src/packages/issue/format-date/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){
return r})),s.d(t,"b",(function(){return o}));var n=s("./src/packages/platform/utils/constants/src/supported-locales.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const i="en-US",r=e=>{if("string"!=typeof e)return a.h.safeErrorWithoutCustomerData("jira-issue-format-date.standardize-locale",`Invalid input type for locale was passed in: ${e}. Falling back to en-US.`),i;const t=e.replace("_","-");switch(t){case"en":return"en-US";case"en-UK":return"en-GB";default:return n.a.includes(e)||a.h.safeWarnWithoutCustomerData("jira-issue-format-date.standardize-locale",`Discovered unsupported locale: ${e}. This value was not modified, but its use may lead to unpredictable behaviour for formatting.`),t}},o=e=>{try{return Intl.DateTimeFormat(i,{timeZone:e}),e}catch(t){
return void a.h.safeErrorWithoutCustomerData("jira-issue-format-date.verify-time-zone",`Invalid timeZone: ${e}. Date time formatting cannot be performed with this value. Falling back to undefined`,t)}}},"./src/packages/issue/issue-actions/activity-feed/src/messages.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/react-intl/lib/index.es.js");const a=Object(n.h)({allActivity:{id:"issue-activity-feed.all-activity",defaultMessage:"All"},comments:{id:"issue-activity-feed.comments",defaultMessage:"Comments"},history:{id:"issue-activity-feed.history",defaultMessage:"History"},worklog:{id:"issue-activity-feed.worklog",defaultMessage:"Work log"},activity:{id:"issue-activity-feed.activity",defaultMessage:"Activity"},filterBy:{id:"issue-activity-feed.filter-by",defaultMessage:"Show:"},polarisData:{id:"issue-activity-feed.polaris-data",defaultMessage:"Data"}})},
"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/assets/Error.svg":function(e,t,s){e.exports=s.p+"assets/Error.be0d40cfbcd6c064b92b9530fd4cf3ce.8.svg"},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),r=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./node_modules/lodash/countBy.js"),p=s.n(d),m=s("./node_modules/lodash/isEmpty.js"),b=s.n(m),f=s("./node_modules/@atlaskit/icon/glyph/check.js"),g=s.n(f),h=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),y=s.n(h),O=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),j=s.n(O),v=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),E=s("./node_modules/react-select/dist/chunk-80640036.browser.esm.js"),k=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),w=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),S=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),C=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),I=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),T=Object(o.h)({
publicTooltip:{id:"issue-comment-base.comment.comment-visibility.button.public-tooltip",defaultMessage:"Visible to all users"},optionsTooltip:{id:"issue-comment-base.comment.comment-visibility.button.options-tooltip",defaultMessage:"Only visible to {value}"}}),P=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const _=P.default.div(["display:flex;align-items:center;",";"],(e=>e.removeIconMargin?`margin: 0 ${-S.e/2}px;`:null)),x=P.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px;"]);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){M(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function R(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const N=(e,t)=>{const s=e(t),{buttonStyles:n}=s,a=R(s,["buttonStyles"]);return L({buttonStyles:L(L({},n),{},{maxWidth:"300px"})},a)
},F=({selectedOption:e,isSelected:t})=>{const s="public"===e.type,n=s?j.a:y.a,i=s?a.a.createElement(o.c,T.publicTooltip):a.a.createElement(o.c,D({},T.optionsTooltip,{values:{value:e.value}}));return a.a.createElement(w.a,{content:i,position:"left"},a.a.createElement(I.a,{spacing:"default",theme:N,isSelected:t,shouldFitContainer:!0,iconBefore:a.a.createElement(_,{removeIconMargin:!s},a.a.createElement(n,{label:""}))},!s&&a.a.createElement(x,null,e.value)))};F.displayName="TargetButton";var U=F,V=s("./src/packages/platform/controllers/intl/src/index.js"),K=Object(o.h)({errorMessage:{id:"issue-comment-base.comment.comment-visibility.error-image.error-message",defaultMessage:"We couldn't load the visibility options"}}),W=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/assets/Error.svg"),B=s.n(W)
;const H=P.default.div(["width:","px;"],25*S.e),$=P.default.div(["width:","px;height:","px;margin:12px 0;background:center no-repeat url(",");"],10*S.e,10*S.e,B.a),G=P.default.div(["display:flex;flex-direction:column;align-items:center;"]),q=P.default.p(["color:",";text-align:center;"],k.a.N200),z=()=>{const e=Object(V.c)();return a.a.createElement(H,null,a.a.createElement(G,null,a.a.createElement($,null),a.a.createElement(q,null,e.formatMessage(K.errorMessage))))};z.displayName="ErrorImage";var Y=z,Q=Object(o.h)({visibleToAllUsers:{id:"issue-comment-base.comment.comment-visibility.visible-to-all-users",defaultMessage:"Visible to all users"},projectRolesLabel:{id:"issue-comment-base.comment.comment-visibility.project-roles-label",defaultMessage:"Project roles"},groupsLabel:{id:"issue-comment-base.comment.comment-visibility.groups-label",defaultMessage:"Groups"}
}),J=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),Z=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js");function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const se=(e,t,s)=>e.filter((e=>e.type===s)).map((e=>ee(ee({},e),{},{selected:!!e&&Object(Z.a)(e,t)}))),ne=e=>({
label:"",options:[ee(ee({},J.a),{},{selected:"public"===e.type})]});var ae=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const ie=P.default.div(["display:flex;justify-content:center;align-items:center;height:","px;"],18*S.e),re=()=>a.a.createElement(ie,null,a.a.createElement(ae.a,null));re.displayName="LoadingSpinner";const oe=P.default.div(["display:flex;justify-content:left;align-items:center;"]),ce=P.default.span(["padding:0 5px 0 0;flex-shrink:0;max-height:","px;"],3*S.e),le=P.default.span(["margin-left:","px;max-height:","px;"],S.e/2,3*S.e),ue=P.default.div(["font-size:11px;font-weight:initial;padding-top:4px;"]),de=P.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),pe=P.default.div(["display:flex;justify-content:center;padding:","px;"],2*S.e),me=P.default.div(["min-width:","px;margin-left:","px;"],4.5*S.e,S.e/2);function be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?be(Object(s),!0).forEach((function(t){ge(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ge(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const he="commentVisibilityView",ye=({label:e})=>e&&a.a.createElement(ue,null,e),Oe={container:e=>fe(fe({},e),{},{paddingBottom:"0",paddingTop:"0"}),group:e=>fe(fe({},e),{},{paddingBottom:"4px",paddingTop:"0"}),option:(e,{data:{selected:t},isFocused:s})=>{const n=s?k.a.N20:e.backgroundColor,a=t?k.a.B50:n;return fe(fe({},e),{},{backgroundColor:a})}},je=()=>({placement:"bottom-end",modifiers:[{
name:"offset",options:{offset:[0,S.e]}},{name:"setZIndex",enabled:!0,phase:"read",fn:({state:e})=>{var t;return fe(fe({},e),{},{styles:fe(fe({},e.styles),{},{popper:fe(fe({},null===(t=e.styles)||void 0===t?void 0:t.popper),{},{zIndex:S.f.modal})})})}},{name:"preventOverflow",options:{padding:5,escapeWithReference:!0}}]}),ve=Object(C.a)("commentVisibilitySelect",{onOpen:"opened",onChange:"changed"})(v.a),Ee=({value:e,selected:t,isPublic:s})=>{const n=s?j.a:y.a;return a.a.createElement(w.a,{content:e,delay:2e3},a.a.createElement(oe,null,a.a.createElement(ce,null,a.a.createElement(n,{label:""})),a.a.createElement(de,null,e),a.a.createElement(le,null,t?a.a.createElement(g.a,{primaryColor:k.a.B500,label:""}):null)))};Ee.displayName="OptionLabel";const ke=({isLoading:e,options:t,initialValue:s,onChange:i,error:r,intl:{formatMessage:o}})=>{
const c=e||r,[d,m]=Object(n.useState)(s),[f,g]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>g(!0)),[]),y=Object(n.useCallback)((()=>g(!1)),[]),O="public"===s.type;if((c||b()(t))&&O)return null;const j=c||null==t?((e,t,s)=>{const n=[ne(t)];if(e){const a=e.type===t.type&&e.value===t.value;n.push({label:"group"===e.type?s(Q.groupsLabel):s(Q.projectRolesLabel),options:[ee(ee({},e),{},{selected:a})]})}return n})(s,d,o):((e,t,s)=>[ne(s),{label:t(Q.projectRolesLabel),options:se(e,s,"role")},{label:t(Q.groupsLabel),options:se(e,s,"group")}])(t,o,d),v=c?{MenuList:e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(E.z.MenuList,e,e.children),a.a.createElement(pe,null,r?a.a.createElement(Y,null):a.a.createElement(re,null)))}:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{onMount:e=>Object(u.b)(e,"commentVisibilitySelect rendered")}),a.a.createElement(me,null,a.a.createElement(ve,{onClose:y,onOpen:e=>{h();const s=p()(t,"type");Object(u.h)(e,he,{
roleCount:s.role||0,groupCount:s.group||0,totalCount:null==t?1:t.length+1})},maxMenuWidth:300,minMenuWidth:175,maxMenuHeight:340,formatOptionLabel:({type:e,value:t,selected:s})=>{const n="public"===e;return a.a.createElement(Ee,{isPublic:n,selected:s,value:n?o(Q.visibleToAllUsers):t})},popperProps:je(),components:v,styles:Oe,formatGroupLabel:ye,options:j,target:({ref:e})=>a.a.createElement("div",{ref:e},a.a.createElement(U,{selectedOption:d,isSelected:f})),isLoading:e,error:r,onChange:(e,t,s)=>{(e=>{i(e),m(e)})((({type:e,value:t})=>({type:e,value:t}))(e)),Object(u.h)(s,he)},isSearchable:null!=t&&t.length+1>30,searchThreshold:30})))};var we=Object(c.a)([o.i])((e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{onMount:t=>{Object(u.b)(t,"commentVisibilitySelect mounted",{isLoading:e.isLoading})}}),a.a.createElement(ke,e))));const Se=({initialValue:e,onChange:t})=>a.a.createElement(r.a,null,(({loading:s,error:n,data:i})=>a.a.createElement(we,{initialValue:e,onChange:t,
isLoading:s,error:n,options:i?i.commentVisibilities:null})));Se.displayName="CommentVisibilitySelect";t.a=Object(i.a)()(Se)},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js":function(e,t,s){"use strict";var n=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js"),a=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js");t.a=Object(n.a)(a.a,{displayName:"CommentVisibilitiesSubscriber"})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),i=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),r=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");const c=async(e,t)=>{const{errors:s,data:n}=await Object(r.a)(e).query({query:"\nquery CommentVisibilitiesQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        commentVisibilities {\n            type\n            value\n        }\n    }\n}\n",variables:{issueKey:t}});if(s)throw new Error("GraphqlErrorResponse");if(n&&n.viewIssue&&n.viewIssue.commentVisibilities){return(e=>e.map(o.e))(n.viewIssue.commentVisibilities)}throw new Error("GraphqlNullData")};var l={fetch:()=>async({getState:e,setState:t},{issueKey:s,baseUrl:n,createAnalyticsEvent:r})=>{const o=e()
;if(!(o.loading||o.error||o.data)){t({loading:!0,error:null,data:null});try{const e=await c(n,s);t({loading:!1,error:null,data:{commentVisibilities:e}}),((e,t)=>{const s=e({action:"fetched"}),n={totalCount:t.length,roleCount:t.filter((e=>"role"===e.type)).length,groupCount:t.filter((e=>"group"===e.type)).length};Object(i.c)(s,"commentVisibilities fetched",n)})(r,e)}catch(l){(e=>{const t="GraphqlErrorResponse"===e.message||"GraphqlNullData"===e.message?e.message:"other";Object(a.a)("issue.fetch.comment-visibilities","An error occurred attempting to fetch comment visibilities from gira",e,{errorReason:t})})(l),t({loading:!1,error:l,data:null})}}}};t.a=Object(n.a)({name:"issue-view-comment-visibilities",initialState:{data:null,loading:!1,error:null},actions:l})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>e.value===t.value&&e.type===t.type},
"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["flex:1 1 100%;min-width:0;input{font:inherit;}"])},"./src/packages/issue/issue-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return D})),s.d(t,"g",(function(){return A})),s.d(t,"f",(function(){return L})),s.d(t,"i",(function(){return M})),s.d(t,"a",(function(){return R})),s.d(t,"e",(function(){return N})),s.d(t,"k",(function(){return F})),s.d(t,"c",(function(){return U})),s.d(t,"b",(function(){return V})),s.d(t,"h",(function(){return K})),s.d(t,"j",(function(){return W})),s.d(t,"l",(function(){return B}));var n={};s.r(n),s.d(n,"setIssueContext",(function(){return m})),s.d(n,"mergeIssueContext",(function(){return b})),s.d(n,"getMaxTokenLength",(function(){return f})),s.d(n,"getIsLoadedWithPage",(function(){
return g})),s.d(n,"getBackButtonUrl",(function(){return h})),s.d(n,"getIsSpaEnabled",(function(){return y}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),l=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=e=>({setState:t})=>{t(e)},b=e=>({getState:t,setState:s})=>{s(d(d({},t()),e))},f=()=>({getState:e})=>e().maxTokenLength,g=()=>({getState:e})=>e().isLoadedWithPage,h=()=>({getState:e})=>e().backButtonUrl,y=()=>({getState:e})=>e().isSpaEnabled,O={issueKey:Object(i.l)(""),issueId:void 0,isModal:!1,maxTokenLength:0,isLoadedWithPage:!1,rapidViewMap:void 0,estimationStatistic:void 0,isLoading:!1,viewMode:void 0,analyticsSource:void 0,backButtonUrl:void 0,boardId:void 0,boardType:void 0,isSpaEnabled:!1,loginRedirectUrl:void 0,onIssueKeyChange:void 0,rapidViewId:void 0,viewScreenId:void 0},j=Object(r.a)({name:"issue-context",initialState:O,actions:n}),v=(Object(o.a)(j,{selector:e=>e}),Object(o.a)(j,{selector:e=>e.issueKey})),E=Object(o.a)(j,{selector:e=>e.issueId}),k=Object(o.a)(j,{
selector:e=>e.isModal}),w=Object(o.a)(j,{selector:e=>e.viewScreenId}),S=Object(o.a)(j,{selector:e=>void 0!==e.analyticsSource?new l.a(e.analyticsSource):void 0}),C=Object(o.a)(j,{selector:e=>e.rapidViewMap}),I=(Object(o.a)(j,{selector:e=>e.maxTokenLength}),Object(o.a)(j,{selector:e=>e.isLoadedWithPage}),Object(o.a)(j,{selector:e=>e.estimationStatistic})),T=(Object(o.a)(j,{selector:e=>e.isLoading}),Object(o.a)(j,{selector:e=>e.viewMode}),Object(o.a)(j,{selector:e=>e.backButtonUrl})),P=(Object(o.a)(j,{selector:e=>e.boardId}),Object(o.a)(j,{selector:e=>e.boardType}),Object(o.a)(j,{selector:e=>e.isSpaEnabled}),Object(o.a)(j,{selector:e=>e.loginRedirectUrl}),Object(o.a)(j,{selector:e=>e.onIssueKeyChange})),_=Object(o.a)(j,{selector:e=>e.rapidViewId}),x=(Object(c.a)(j),Object(o.a)(j,{selector:null})),D=()=>{const[e]=k();return e},A=()=>{const[e]=v();return e},L=()=>{const[e]=E();return e},M=()=>{const[e]=v();return Object(i.q)(e.split("-")[0])},R=()=>{const[e]=S();return e},N=()=>{
const[,{setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r}]=x();return[void 0,Object(a.useMemo)((()=>({setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r})),[e,t,s,n,i,r])]},F=()=>{const[e]=C();return e},U=()=>{const[e]=I();return e},V=()=>{const[e]=T();return e},K=()=>{const[e]=P();return e},W=()=>{const[e]=_();return e},B=()=>{const[e]=w();return e}},"./src/packages/issue/issue-context-service/src/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n="VIEW_MODE_MODAL",a="VIEW_MODE_SIDEBAR"},"./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>65536},"./src/packages/issue/issue-fetch-services-common/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),
s.d(t,"a",(function(){return o}));let n=null;const a=()=>(n||(n=(()=>{const e=document.querySelector('meta[name="ajs-fe-feature-flags"]'),t=null==e?void 0:e.getAttribute("content"),s=window.featureFlags;return s?JSON.parse(s):null!=t?JSON.parse(t):null})()||(()=>{var e;return null!==(e=window.ssr__feFeatureFlags)&&void 0!==e?e:null})()||{}),n),i=(e,t=!1)=>{const s=a();return s[e]?!!s[e].value:t},r=()=>i("shpl-113-sort-issue-under-epic",!1),o=()=>i("issue.details.bento-6520-activity-sorting",!1)},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}))
;const n=()=>`\n  ${(()=>"\nfragment groupItems on GroupSectionItem {\n    ... on FieldSectionItem {\n      id\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n  }")()}\n  ${(()=>"\n  fragment sectionItems on SectionItem {\n    __typename\n    ... on FieldSectionItem {\n      id\n    }\n    ... on TabLayout {\n      id\n      name\n      items {\n        ... on FieldSectionItem {\n          id\n        }\n      }\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n    ... on GroupLayout {\n      id\n      name\n      items {\n        ...groupItems\n      }\n    }\n  }")()}\n  ${(()=>"\nfragment section on Section {\n    items {\n      ...sectionItems\n    }\n  }\n  ")()}\n  `
;t.a=()=>"\n  issueSections {\n    __typename\n    ... on PrimarySecondaryContextSections {\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n    ... on JsdSections {\n      requestPortalSection {\n        ...section\n      }\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n  }\n  "},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js");const i={
COMMENTS:"focusedCommentId",WORKLOG:"focusedWorklogId"},r=e=>{if(!i[e])return null;return(()=>{let e=window.location.search.slice(1);const t={};if(e){e=e.split("#")[0];const s=e.split("&");for(let e=0;e<s.length;e+=1){const n=s[e].split("="),a=n[0],i=void 0===n[1]||decodeURIComponent(n[1]);t[a]=i}}return t})()[i[e]]};var o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js")
;const c="issueViewInteractiveQuery",l=e=>`${e}/rest/gira/1/`,u=e=>`\nquery ${c}($issueKey: String!, $projectKey: String)  {\n        ${(()=>`mediaContext(issueKey: $issueKey) {\n    userToken {\n      token\n      id\n      issueId\n      tokenDurationInMins\n    }\n    uploadToken {\n      __typename\n      ... on MediaUploadToken {\n        endpointUrl\n        token\n        targetCollection\n        tokenDurationInMins\n        clientId\n      }\n      ... on FailedMediaUploadToken {\n        error\n      }\n    }\n    readToken(maxTokenLength: ${Object(a.a)()}) {\n      clientId\n      endpointUrl\n      tokensWithFiles {\n        files {\n          issueId\n          attachmentId\n          attachmentMediaApiId\n        }\n        token\n      }\n      tokenLifespanInSeconds\n    }\n  }`)()}\n        viewIssue(issueKey: $issueKey) {\n            ${Object(n.a)()?(({maxResults:e,startAt:t,orderBy:s,commentAmount:n})=>{const a=r("COMMENTS"),i=null!=a?`, commentId: ${a}`:""
;return`\n        comments (first: ${t}${""===i&&null!=e?`, maxResults: ${e}`:""}${null!=s?`, orderBy: "${s}"`:""}${i}${""!==i&&null!=n?`, commentAmount: ${n}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    `})({maxResults:5,startAt:0,commentAmount:Math.floor(5)}):((e,t,s,n)=>{const a=r("COMMENTS")
;return`\n        comments (first: ${t}, maxResults: ${e}${null!=s?`, orderBy: "${s}"`:""}${null!=a?`, commentId: ${a}`:""}${null!=n?`, commentAmount: ${n}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                renderedBody\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    `})(5,0,"-created")}\n            ${Object(n.a)()?(({startAt:e,orderBy:t,worklogAmount:s})=>{const n=null!=t?`, orderBy: "${t}"`:"",a=r("WORKLOG")
;return null==a?"":`\n        worklogs (startAt: ${e}${n}, worklogId: ${a}${null!=s?`, worklogAmount: ${s}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n        }\n    `})({startAt:0,worklogAmount:Math.floor(5)}):((e,t,s,n)=>{const a=null!=s?`, orderBy: "${s}"`:"",i=r("WORKLOG")
;return null==i?"":`\n        worklogs (startAt: ${t}, maxResults: ${e}${a}, worklogId: ${i}${null!=n?`, worklogAmount: ${n}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n        }\n    `
})(5,0,"-started")}  \n            ${(()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised\n      ${(()=>"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }")()}\n    }\n`)()}\n            fields {\n                __typename\n                    ${(()=>"\n      ... on GlancesField {\n        fieldKey\n        value {\n          name\n          status\n          iframe {\n            addonKey\n            moduleKey\n            options\n          }\n          icon {\n            url\n          }\n          content\n          type\n        }\n      }\n")()}\n            }\n            ${(()=>"attachments(orderDirection: DESC, orderField: CREATED, maxResults: 6) {\n            nodes {\n              id\n              filename\n              mimetype\n              mediaApiFileId\n              createdDate\n              filesize\n              parentName\n              author {\n                  accountId\n              }\n              parentId\n              isParentCommentJsdInternal\n            }\n            totalCount\n            deletableCount\n          }\n    ")()}\n            ${(()=>"\n    layoutItems {\n        location\n        category\n        items {\n        itemId\n        type\n        }\n    }\n")()}            \n            ${Object(o.a)()}     \n            ${(()=>"\n    remoteLinks {\n        isLinkingEnabled\n        remoteLinkedIssues {\n            preview {\n                id\n                issueId\n                globalId\n                href\n                applicationType\n                applicationName\n                relationship\n                title\n            }\n        }\n    }            \n")()}\n        }\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n        ${(()=>`\n    jiraSettings {\n      ${(()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n")()}\n      ${(()=>"\n      subtasks {\n        enabled\n      }\n")()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n      newIssueViewTransitionSettings {\n        shouldDelayChangeboarding\n        newIssueViewTransitionLockingStatus\n     }\n    }\n`)()}\n        ${(()=>`\n    permissions(issueKey:$issueKey, keys:["${(()=>["ADMINISTER","ADMINISTER_PROJECTS","ASSIGN_ISSUES","EDIT_ISSUES","SCHEDULE_ISSUES","ADD_COMMENTS","DELETE_ALL_COMMENTS","DELETE_OWN_COMMENTS","EDIT_ALL_COMMENTS","EDIT_OWN_COMMENTS","CREATE_ISSUES","DELETE_ISSUES","MOVE_ISSUES","MODIFY_REPORTER","CREATE_ATTACHMENTS","DELETE_ALL_ATTACHMENTS","DELETE_OWN_ATTACHMENTS","WORK_ON_ISSUES","ASSIGNABLE_USER","LINK_ISSUES","VIEW_VOTERS_AND_WATCHERS","MANAGE_WATCHERS","EDIT_ALL_WORKLOGS","EDIT_OWN_WORKLOGS","DELETE_ALL_WORKLOGS","DELETE_OWN_WORKLOGS","USER_PICKER","VIEW_DEV_TOOLS","SERVICEDESK_AGENT","RESOLVE_ISSUES"])().join('","')}"]) {\n        key\n        havePermission\n    }\n`)()}\n        ${(e=>`\n    myPreferences(keys: [\n        "jira.user.issue.changeboarding.lastinteracted",\n        "jira.user.issue.clickthrough-banner.lastinteracted",\n        "jira.user.issue.attachment.view",\n        "jira.user.issue.details.pinned-fields.${e}",\n        "jira.user.issue.details.timestamp-display-setting",\n        "jira.user.issue.cross-join-via-epic-touchpoint.dismissed"\n    ])\n`)(e)}\n        ${(()=>"\n    project(projectKey: $projectKey) {\n        id\n        newIssueViewLockedIn\n        issueTypes {\n            id\n            name\n            iconUrl\n            subtask\n        }\n    }\n")()}\n        ${Object(n.a)()?(()=>"activitySortOrder")():""}\n    }\n    ${Object(o.b)()}\n    \n`,d=(e,t)=>({
method:"POST",body:JSON.stringify({query:u(t),variables:{issueKey:e,projectKey:t}})})},"./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js");const a=(e,...t)=>{let s="";return t.forEach(((t,n)=>{s+=e[n],s+=t.toString()})),s+=e[e.length-1],s};var i=(e,t)=>a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            viewScreenId 
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            ${Object(n.b)()?"expandSystemDateTimesForChildIssues":""}
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    isHybridAgilityProject\n    ")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            issueTypeHierarchy {
                baseLevelId
                levels {
                    id
                    aboveLevelId
                    belowLevelId
                }
            }
        }
    }`;const r=e=>`${e}/rest/graphql/1/`,o=(e,t)=>({method:"POST",body:JSON.stringify({query:i(e,t)})})},"./src/packages/issue/issue-fetch-services/src/common/utils/client.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");let a=null;const i=e=>(a||(a=(e=>({query:({query:t,variables:s})=>Object(n.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:t,variables:s})})}))(e)),a)},"./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.q)(e.split("-")[0])},"./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}))
;var n=s("./src/packages/forge/forge-ui/src/utils/fetch-modules/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const i=()=>Object(a.b)("forge_custom_field_types_qwxh8",!1),r=async(e,t)=>{const s=["jira:issueAction","jira:issueGlance","jira:issuePanel","jira:issueActivity","jira:customField",...i()?["jira:customFieldType"]:[]],a=Object(n.a)(e,t,s),r=await a,[o,c,l,u,d,p]=r;return{issueAction:o,issueGlance:c,issuePanel:l,issueActivity:u,customField:d,customFieldType:p}}},"./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),a=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),i=s("./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js");t.a=async(e,t)=>{const s=Object(i.a)(t),r={issueKey:t,projectKey:s};return await Object(a.a)(e).query({
query:Object(n.b)(s),variables:r})}},"./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js");const i=(e,t,s)=>Object(n.a)(Object(a.b)(e),Object(a.a)(t,s))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));s("./node_modules/rxjs/Observable.js");var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const i=(e,t,s)=>`${e}/rest/api/2/attachment/read/issue/${t}/credentials?maxTokenLength=${s}`
;var r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const c=(e,t,s,a)=>Object(n.a)(i(e,t,s),{perf:r.i,headersProcessor:a&&a(r.i.key)}).catch((e=>{throw new o.a(e,i("{baseUrl}","{issueKey}","{maxTokenLength}"))})),l=(e,t,s,n)=>Object(a.a)(i(e,t,s),{perf:r.i,headersProcessor:n&&n(r.i.key)})},"./src/packages/issue/issue-glance/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return I}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),u=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),d=s("./src/packages/issue/fields/components/field-pin/src/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const f=p.default.div(["position:relative;overflow:hidden;display:flex;border-radius:5px;margin:0 0 0 -","px;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}height:","px;align-items:center;"],b.e,m.a.N20,m.a.B100,m.a.N20,4*b.e),g=p.default.div(["overflow:hidden;margin:","px 0 ","px ","px;height:","px;width:","px;align-items:center;"],b.e,b.e,b.e,3*b.e,3*b.e),h=Object(p.default)(g)(["margin:0 0 0 ","px;padding-left:","px;padding-right:","px;"],b.e,.25*b.e,.25*b.e),y=p.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;padding-left:","px;line-height:inherit;"],b.e),O=p.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*b.e,5*b.e,m.a.N20),j=p.default.div(["position:absolute;right:0;margin:6px ","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],b.e,b.e/2,m.a.N30,m.a.N60),v=Object(p.keyframes)(["0%{right:-28px;}100%{right:0;}"]),E=p.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],v)
;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){C(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class I extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1},
this.handleOpenGlancePanel=()=>{const{onClickPayload:e,title:t,onOpenPanel:s}=this.props;s(S(S({},e),{},{title:t}))},this.eventHandlers={onClick:this.handleOpenGlancePanel,onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})}}render(){const{title:e,Icon:t,content:s,showPinButton:n,itemId:i}=this.props,p=s.length<=170?s:`${s.substring(0,170).trim()}\u2026`;return a.a.createElement(u.d,null,e&&a.a.createElement(u.b,null,a.a.createElement(u.c,null,e),!0===n&&a.a.createElement(d.a,{fieldId:i,label:e})),a.a.createElement(u.g,{fixedHeight:!0},a.a.createElement(o.a,{content:p},a.a.createElement(l.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(f,k({tabIndex:"0"},this.eventHandlers),t&&a.a.createElement(h,null,a.a.createElement(t,null)),a.a.createElement(y,null,s),this.state.isHovering&&a.a.createElement(c.a,{mountAnimation:E
},a.a.createElement(O,null,a.a.createElement(j,null,a.a.createElement(r.a,{size:"medium",label:""})))))))))}}I.displayName="Glance",I.displayName="Glance",I.defaultProps={Icon:null}},"./src/packages/issue/issue-scroll/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return p}));var n={};s.r(n),s.d(n,"setScrollTarget",(function(){return r})),s.d(n,"getScrollTargetId",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const r=e=>({setState:t})=>{t({scrollTarget:e})},o=e=>({getState:t})=>{const s=t();return s.scrollTarget&&s.scrollTarget.type===e&&s.scrollTarget.id||null},c=Object(i.a)({name:"issue-scroll",initialState:{scrollTarget:null},actions:n}),l=Object(a.a)(c,{selector:e=>e.scrollTarget}),u=Object(a.a)(c,{selector:null}),d=()=>{const[e,{setScrollTarget:t,getScrollTargetId:s}]=l();return[{scrollTarget:e},{
setScrollTarget:t,getScrollTargetId:s}]},p=()=>{const[,{setScrollTarget:e,getScrollTargetId:t}]=u();return[void 0,{setScrollTarget:e,getScrollTargetId:t}]}},"./src/packages/issue/issue-scroll/src/services/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=Object.freeze({COMMENT:"COMMENT",WORKLOG:"WORKLOG"})},"./src/packages/issue/issue-tabs/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return p}));var n={};s.r(n),s.d(n,"setIssueTabs",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const o=e=>({setState:t})=>{t(e)},c=Object(r.a)({name:"issue-tabs",initialState:{},actions:n}),l=Object(i.a)(c,{selector:e=>e}),u=Object(i.a)(c,{selector:null}),d=()=>{const[e,{setIssueTabs:t}]=l();return[{issueTabs:e},{setIssueTabs:t}]},p=()=>{const[,e]=u()
;return[null,Object(a.useMemo)((()=>({setIssueTabs:t=>e.setIssueTabs(t)})),[e])]}},"./src/packages/issue/issue-view-layout-templates/components/item-list/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/issue-context-service/src/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),l=s("./src/packages/issue/issue-view-layout/src/services/main.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),d=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),p=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js")
;function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var b=({id:e,type:t,area:s,payload:i={}})=>{const r=Object(u.a)(),[,b]=Object(l.b)(),{createAnalyticsEvent:f}=Object(d.a)(),g=Object(n.useCallback)((s=>{Object(p.h)(f({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:e,contextPanelType:t,tabItemsCount:s.tabItems?s.tabItems.length:0}),b({payload:s,title:null==s?void 0:s.title,type:t,key:e})}),[e,t,b,f]);if(r[t]){const n=r[t].item;return a.a.createElement(n,m({},i,{key:e,fieldId:e,area:s,onOpenPanel:g}))}return c.a.safeErrorWithoutCustomerData("issue.views.issue-base.context",`Could not find a matching component for "${e}"`,new o.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null
},f=s("./src/packages/issue/issue-view-layout-templates/utils/src/index.js"),g=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js");const h=({items:e,area:t})=>{const s=Object(i.g)(),[n]=Object(r.c)(s);return e.map((e=>{if("CustomItem"===e.type)return a.a.createElement("div",{key:e.id},e.item);if(null==n)return null;const{type:s,id:i}=Object(f.a)(n[e.id],e),r=e.globalRef?e.globalRef:"",o=a.a.createElement(b,{key:i,id:i,type:s,area:t,payload:e.payload||{}});return r?a.a.createElement(g.a,{id:r,key:i},o):o}))}},"./src/packages/issue/issue-view-layout-templates/utils/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),a=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),i=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");const r=(e,t)=>{
const{id:s}=t,r=void 0!==t.__typename?t.__typename:t.type;if("TabLayout"===r||"ecosystemGlance"===r||"forgeGlance"===r)return{type:r,id:s};if(Object(i.c)().includes(s))return{id:s,type:s};const o=Object(a.b)(e);if(null!==o)return{type:o,id:s};const c=(null==e?void 0:e.schema)||{},l=null!==c.system?c.system:"";return{type:Object(n.a)(c.custom)||l||c.type,id:s}}},"./src/packages/issue/issue-view-layout/src/services/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return v}));var n={};s.r(n),s.d(n,"setIssueViewLayout",(function(){return c})),s.d(n,"setIssueViewLayoutGlance",(function(){return l})),s.d(n,"setIssueViewLayoutContextPanel",(function(){return u}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function o(e,t){
if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const c=e=>({setState:t})=>{const{__typename:s}=e;t({templateKey:s,sections:o(e,["__typename"])})},l=e=>({setState:t})=>{t({glance:e})},u=e=>({setState:t})=>{t({contextPanel:e})},d=Object(i.a)({name:"issue-view-layout-service",initialState:{sections:{},templateKey:"default",glance:void 0,contextPanel:void 0},actions:n}),p=Object(r.a)(d,{selector:e=>e.sections}),m=(Object(r.a)(d,{selector:e=>e.groups}),Object(r.a)(d,{selector:e=>e.templateKey})),b=Object(r.a)(d,{selector:e=>e.glance}),f=Object(r.a)(d,{selector:e=>e.contextPanel}),g=Object(r.a)(d,{selector:null}),h=()=>{const[e]=p();return[e]},y=()=>{const[e]=m();return[e]},O=()=>{
const[e,t]=b();return[e,Object(a.useCallback)((e=>{t.setIssueViewLayoutGlance(e)}),[t])]},j=()=>{const[e,t]=f();return[e,Object(a.useCallback)((e=>{t.setIssueViewLayoutContextPanel(e)}),[t])]},v=()=>{const[,e]=g();return[null,{setIssueViewLayout:Object(a.useCallback)((t=>{e.setIssueViewLayout(t)}),[e])}]}},"./src/packages/issue/issue-view/src/actions/activity-feed-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r}));const n=e=>({type:"SELECT_ACTIVITY_ITEM",payload:e}),a=e=>({type:"SELECT_INITIAL_ACTIVITY_ITEM",payload:e}),i=e=>({type:"SELECT_ACTIVITY_SORT_ORDER",payload:e}),r=e=>({type:"UPDATE_ACTIVITY_SORT_ORDER_REQUEST",payload:e})},"./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t)=>({type:"APPLINK_AUTHENTICATION_REQUEST",
payload:e,meta:{analyticsEvent:t}}),a=()=>({type:"APPLINK_AUTHENTICATION_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/approval-action/index.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"f",(function(){return l}));var n=s("./src/packages/issue/issue-view/src/common/constants/flags.js");const a=(e,t)=>({type:"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD",payload:{linkedUserPickerFieldId:e,newApproverList:t}}),i=()=>({type:n.K}),r=()=>({type:n.L}),o=()=>({type:n.a}),c=()=>({type:n.F}),l=()=>({type:"ZERO_APPROVAL_REQUIRED"})},"./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),
s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"j",(function(){return p}));const n=()=>({type:"SHOW_ASSIGN_ISSUE_PARENT_MODAL"}),a=()=>({type:"HIDE_ASSIGN_ISSUE_PARENT_MODAL"}),i=()=>({type:"FETCH_ISSUE_PARENTS_REQUEST"}),r=(e=[])=>({type:"FETCH_ISSUE_PARENTS_SUCCESS",payload:e}),o=()=>({type:"FETCH_ISSUE_PARENTS_FAILURE"}),c=(e,t)=>({type:"SET_PARENT_REQUEST",payload:{issues:e,parentId:t}}),l=(e,t,s)=>({type:"SET_PARENT_OPTIMISTIC",payload:{issues:e,parentIssue:t,requestPromise:s}}),u=e=>({type:"UNSET_PARENT_REQUEST",payload:{issues:e}}),d=(e,t)=>({type:"SET_PARENT_SUCCESS",payload:{parentIssue:e,oldParentIdsByIssueIds:t}}),p=e=>({type:"UNSET_PARENT_SUCCESS",payload:{oldParentIdsByIssueIds:e}})},"./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){
return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c}));const n=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN",payload:e}),a=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END",payload:e}),i=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR",payload:e}),r=e=>({type:"ATTACHMENT_JIRA_CREATE_SUCCESS",payload:e}),o=(e,t)=>({type:"ATTACHMENT_JIRA_CREATE_FAILURE",payload:{attachment:e,statusCode:t}}),c=e=>({type:"MEDIA_PICKER_ERROR",payload:e})},"./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS"}),a=()=>({type:"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/card-cover-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),
s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return o}));const n=e=>({type:"CARD_COVER_FETCH_SUCCESS",payload:{cardCover:e}}),a=()=>({type:"CARD_COVER_FETCH_FAILURE"}),i=(e,t)=>({type:"CARD_COVER_UPDATE_REQUEST",payload:{currentAttachmentId:e,attachmentId:t}}),r=()=>({type:"CARD_COVER_UPDATE_SUCCESS"}),o=e=>({type:"CARD_COVER_UPDATE_FAILURE",payload:{attachmentId:e}})},"./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"d",(function(){return u}));const n=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST",payload:e}),a=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS",payload:e}),i=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_FAILURE",payload:e}),r=(e,t,s,n,a)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST",
payload:{issueKey:e,issueId:t,currentType:s,targetType:n,analyticsEvent:a}}),o=(e,t)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS",payload:{issueKey:e,targetTypeName:t,fieldId:"issuetype"}}),c=e=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE",payload:e}),l=(e,t,s)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED",payload:{issueId:e,currentType:t,targetType:s}}),u=e=>({type:"SHOW_ISSUE_TYPE_LIST",payload:e})},"./src/packages/issue/issue-view/src/actions/comment-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"C",(function(){return r})),s.d(t,"z",(function(){return o})),s.d(t,"E",(function(){return c})),s.d(t,"B",(function(){return l})),s.d(t,"D",(function(){return u})),s.d(t,"A",(function(){return d})),s.d(t,"y",(function(){return p})),s.d(t,"t",(function(){return m})),s.d(t,"s",(function(){return b})),s.d(t,"o",(function(){return f})),s.d(t,"p",(function(){return g})),
s.d(t,"n",(function(){return h})),s.d(t,"r",(function(){return y})),s.d(t,"q",(function(){return O})),s.d(t,"v",(function(){return j})),s.d(t,"w",(function(){return v})),s.d(t,"u",(function(){return E})),s.d(t,"d",(function(){return k})),s.d(t,"i",(function(){return w})),s.d(t,"k",(function(){return S})),s.d(t,"j",(function(){return C})),s.d(t,"l",(function(){return I})),s.d(t,"m",(function(){return T})),s.d(t,"g",(function(){return P})),s.d(t,"h",(function(){return _})),s.d(t,"f",(function(){return x})),s.d(t,"H",(function(){return D})),s.d(t,"e",(function(){return A})),s.d(t,"x",(function(){return L})),s.d(t,"F",(function(){return M})),s.d(t,"G",(function(){return R}));const n=()=>({type:"ADD_COMMENT_FORM_EXPAND"}),a=()=>({type:"ADD_COMMENT_FORM_COLLAPSE"}),i=()=>({type:"ADD_COMMENT_FORM_CANCEL"}),r=(e,t,s)=>({type:"SAVE_COMMENT_RETRY",payload:{optimisticId:e,createdDate:t,isNewComment:s}}),o=e=>({type:"SAVE_COMMENT_EDIT",payload:{optimisticId:e}}),c=(e,t)=>({
type:"SAVE_COMMENT_SUCCESS_WITH_PASTED_CONTENT",payload:{comment:e,pastedContent:t}}),l=(e,t)=>({type:"SAVE_COMMENT_REQUEST",payload:{comment:e,analyticsEvent:t,updatedField:"comment"}}),u=(e,t,s,n,a)=>({type:"SAVE_COMMENT_SUCCESS",payload:{fieldId:"comment",comment:e,optimisticId:t,isNewComment:s,analyticsEvent:n},meta:a}),d=e=>({type:"SAVE_COMMENT_FAILURE",payload:e}),p=e=>({type:"SAVE_COMMENT_CANCEL",payload:{optimisticId:e}}),m=()=>({type:"FETCH_OLDER_COMMENTS_REQUEST"}),b=()=>({type:"FETCH_NEWER_COMMENTS_REQUEST"}),f=()=>({type:"FETCH_LATEST_COMMENTS_REQUEST"}),g=e=>({type:"FETCH_LATEST_COMMENTS_SUCCESS",payload:e}),h=()=>({type:"FETCH_LATEST_COMMENTS_FAILURE"}),y=e=>({type:"FETCH_MORE_COMMENTS_SUCCESS",payload:e}),O=()=>({type:"FETCH_MORE_COMMENTS_FAILURE"}),j=e=>({type:"FETCH_SORTED_COMMENTS_REQUEST",payload:e}),v=e=>({type:"FETCH_SORTED_COMMENTS_SUCCESS",payload:e}),E=()=>({type:"FETCH_SORTED_COMMENTS_FAILURE"}),k=(e,t)=>({type:"CHANGE_COMMENT_VISIBILITY",payload:{id:e,
isInternal:t}}),w=(e,t)=>({type:"EDIT_COMMENT_BEGIN",payload:{id:e,isInternal:t}}),S=e=>({type:"EDIT_COMMENT_COLLAPSE",payload:{id:e,fieldId:"comment"}}),C=e=>({type:"EDIT_COMMENT_CANCEL",payload:{id:e,fieldId:"comment"}}),I=(e,t)=>({type:"EDIT_COMMENT_UPDATE",payload:{id:e,value:t,fieldId:"comment"}}),T=(e,t)=>({type:"EDIT_COMMENT_VISIBILITY",payload:{id:e,visibility:t}}),P=(e,t)=>({type:"DELETE_COMMENT_REQUEST",payload:{id:e,analyticsEvent:t,updatedField:"comment"}}),_=e=>({type:"DELETE_COMMENT_SUCCESS",payload:{id:e,fieldId:"comment"}}),x=e=>({type:"DELETE_COMMENT_FAILURE",payload:e}),D=e=>({type:"SHOW_DELETE_COMMENT_MODAL",payload:e}),A=()=>({type:"DELETE_COMMENT_CANCEL"}),L=(e,t)=>({type:"PASTED_INTO_COMMENT_FORM",payload:{id:e,pastedContent:t}}),M=e=>({type:"SET_COMMENT_ATTACHMENT_IN_PROGRESS",payload:{isInProgress:e}}),R=e=>({type:"SET_COMMENT_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js":function(e,t,s){
"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"e",(function(){return d}));const n=()=>({type:"LINK_CONFLUENCE_PAGE_CLICKED"}),a=()=>({type:"LINK_CONFLUENCE_PAGE_CLOSED"}),i=()=>({type:"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED"}),r=(e,t)=>({type:"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{pageHref:e},meta:{analyticsEvent:t}}),o=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS",payload:{confluencePageLink:e}}),c=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_FAILED",payload:{errorMessage:e}}),l=e=>({type:"DELETE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{globalId:e}}),u=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_SUCCESS"}),d=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_FAILED"})},"./src/packages/issue/issue-view/src/actions/context-item-actions.js":function(e,t,s){
"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"CONTEXT_PANEL_SHOW",payload:e}),a=()=>({type:"CONTEXT_PANEL_HIDE"})},"./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"h",(function(){return r})),s.d(t,"i",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"f",(function(){return d}));const n=e=>({type:"ADD_CONTENT_PANEL_REQUEST",payload:e}),a=e=>({type:"ADD_CONTENT_PANEL_SUCCESS",payload:e}),i=e=>({type:"ADD_CONTENT_PANEL_FAILURE",payload:e}),r=e=>({type:"REMOVE_CONTENT_PANEL_REQUEST",payload:e}),o=e=>({type:"REMOVE_CONTENT_PANEL_SUCCESS",payload:e}),c=e=>({type:"REMOVE_CONTENT_PANEL_FAILURE",payload:e}),l=e=>({type:"CONTENT_PANEL_SELECTED",payload:e}),u=e=>({type:"CONTENT_PANEL_UNSELECT",
payload:e}),d=()=>({type:"CONTENT_PANELS_CUSTOMISED_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t)=>({type:"ECOSYSTEM_SHOW_GLANCE",payload:{appKey:e,moduleKey:t}}),a=()=>({type:"ECOSYSTEM_HIDE_GLANCE"})},"./src/packages/issue/issue-view/src/actions/editor-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=()=>({type:"EDITOR_CHANGE_FAILURE"}),a=()=>({type:"EDITOR_EXPANDED_FAILURE"}),i=()=>({type:"EDITOR_SAVE_FAILURE"})},"./src/packages/issue/issue-view/src/actions/external-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u}));var n=s("./src/packages/issue/issue-view/src/actions/comment-actions.js")
;const a="EDIT_FIELD",i=e=>({type:a,payload:{fieldId:e}}),r="ADD_COMMENT",o=()=>({type:r}),c="ASSIGN_TO_ME",l=()=>({type:c}),u=e=>{switch(e.type){case r:return Object(n.c)();case c:return(()=>({type:"ASSIGN_TO_ME_EXTERNAL"}))();case a:return(e=>({type:"FIELD_EDIT_REQUEST_EXTERNAL",payload:{fieldId:e}}))(e.payload.fieldId);default:throw new Error(`Unhandled external action type: ${e.type}`)}}},"./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_CONFLUENCE_APP_LINKS_SUCCESS",payload:e.applicationLinks}),i=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){
return i}));const n=()=>({type:"FETCH_JIRA_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_JIRA_APP_LINKS_SUCCESS",payload:e}),i=()=>({type:"FETCH_JIRA_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST"}),a=e=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS",payload:e}),i=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_FAILED"})},"./src/packages/issue/issue-view/src/actions/forge-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"h",(function(){return d}))
;const n=e=>({type:"FETCH_FORGE_SUCCESS",payload:e}),a=e=>({type:"FORGE_ISSUE_ACTION_EXEC",payload:e}),i=()=>({type:"FORGE_ISSUE_ACTION_RENDERED"}),r=()=>({type:"FORGE_ISSUE_ACTION_CLOSE"}),o=e=>({type:"FORGE_ISSUE_PANEL_ADDED",payload:e}),c=e=>({type:"FORGE_NEW_ISSUE_PANEL_UNTRACK",payload:e}),l=e=>({type:"FORGE_ISSUE_PANEL_REMOVED",payload:e}),u=e=>({type:"FORGE_ISSUE_PANEL_UPDATE_REQUEST",payload:e}),d=e=>({type:"FORGE_ISSUE_PANEL_UPDATED",payload:e})},"./src/packages/issue/issue-view/src/actions/issue-delete-actions.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));const n=()=>({type:"OPEN_DELETE_ISSUE_MODAL"}),a=()=>({type:"CLOSE_DELETE_ISSUE_MODAL"}),i=(e,t)=>({type:"DELETE_ISSUE_REQUEST",payload:{issueKey:e,analyticsEvent:t}}),r=e=>({type:"DELETE_ISSUE_SUCCESS",payload:e}),o=(e,t)=>({type:"DELETE_ISSUE_FAILURE",payload:{
issueKey:e,error:t}})},"./src/packages/issue/issue-view/src/actions/issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"n",(function(){return c})),s.d(t,"p",(function(){return l})),s.d(t,"m",(function(){return u})),s.d(t,"o",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"i",(function(){return b})),s.d(t,"h",(function(){return f})),s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"g",(function(){return y})),s.d(t,"q",(function(){return O})),s.d(t,"c",(function(){return j}));const n=e=>({type:"FETCH_LINKED_ISSUES_SUCCESS",payload:e}),a=e=>({type:"FETCH_LINKED_ISSUES_FAILURE",payload:e}),i=(e,t)=>({type:"DELETE_LINKED_ISSUE_REQUEST",payload:{linkedIssueId:e,analyticsEvent:t}}),r=(e,t)=>({type:"DELETE_LINKED_ISSUE_SUCCESS",payload:e,meta:t}),o=e=>({
type:"DELETE_LINKED_ISSUE_FAILURE",payload:e}),c=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_REQUEST",payload:{newIssueLinks:e,analyticsEvent:s,requestAnalyticsEvent:t}}),l=(e,t)=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,analyticsEvent:t}}),u=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:t,analyticsEvent:s}}),d="SAVE_LINKED_ISSUE_RETRY",p=(e,t,s)=>({type:d,payload:{optimisticId:e,analyticsEvent:s,requestAnalyticsEvent:t}}),m=e=>({type:"SAVE_LINKED_ISSUE_CANCEL",payload:e}),b=(e,t,s,n)=>({type:"FETCH_LINKED_ISSUES_DATA_SUCCESS",payload:{issueLinks:e,linkedIssues:t,optimisticIds:s,optimisticLinks:n}}),f=(e,t)=>({type:"FETCH_LINKED_ISSUES_DATA_FAILURE",payload:{optimisticIds:e,error:t}}),g=()=>({type:"ADD_ISSUE_LINK_CLICKED"}),h=()=>({type:"ADD_ISSUE_LINK_CLOSED"}),y=()=>({type:"FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST"}),O=e=>({type:"SET_CREATE_LINKED_ISSUE_PERMISSION",payload:{canCreateLinkedIssue:e}}),j=e=>({type:"CREATE_LINKED_ISSUE_SUCCESS",
payload:{newIssueLinks:e}})},"./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const n=({fromIssueKey:e,toIssueKey:t})=>({type:"NAVIGATE_TO_NEW_ISSUE",payload:{fromIssueKey:e,toIssueKey:t}}),a=(e,t)=>({type:"NAVIGATE_TO_PROJECT",payload:{projectUrl:e,pushAction:t}}),i=e=>({type:"NAVIGATE_TO_SPRINT",payload:{sprintId:e}}),r=e=>({type:"LOAD_NEW_ISSUE",payload:{issueKey:e}}),o=(e,t)=>({type:"LOAD_RECENT_ISSUE",payload:{issueKey:e,issueState:t}})},"./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({type:"FETCH_ISSUE_REMOTE_DATA_REQUEST",payload:e}),a=e=>({type:"FETCH_ISSUE_REMOTE_DATA_SUCCESS",payload:e
}),i=()=>({type:"FETCH_ISSUE_REMOTE_DATA_FAILURE"})},"./src/packages/issue/issue-view/src/actions/login-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>({type:"LOGIN"}),a=e=>({type:"LOGIN_SUCCESSFUL",payload:e})},"./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({issueKeys:e,issueIds:t})=>({type:"PREFETCH_ISSUES",payload:{issueKeys:e||[],issueIds:t||[]}})},"./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"d",(function(){return u}));const n=(e,t)=>({type:"DELETE_REMOTE_LINKED_ISSUE_REQUEST",payload:{globalId:e,analyticsEvent:t}
}),a=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_SUCCESS",payload:e}),i=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_FAILURE",payload:e}),r=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_REQUEST",payload:{saveRemoteIssueLinkPayload:e,requestAnalyticsEvent:t,analyticsEvent:s}}),o=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,saveRemoteLinkResponse:t,analyticsEvent:s}}),c=(e,t,s,n)=>({type:"SAVE_REMOTE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:s,analyticsEvent:n,remoteIssueKey:t}}),l=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,requestAnalyticsEvent:t,analyticsEvent:s}}),u=e=>({type:"SAVE_REMOTE_LINKED_ISSUE_CANCEL",payload:e})},"./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"SHARE_AS_COMMENT",payload:{value:e}}),a=()=>({type:"CLEAR_SHARED_AS_COMMENT_VALUES"})},
"./src/packages/issue/issue-view/src/actions/web-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return a})),s.d(t,"j",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return b}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=()=>({type:"SHOW_CREATE_WEB_LINK_FORM"}),i=()=>({type:"HIDE_CREATE_WEB_LINK_FORM"}),r=(e,t,s)=>({type:"CREATE_WEB_LINK_REQUEST",payload:{optimisticId:Object(n.u)(`optimistic-web-link-${Date.now()}`),href:e,linkText:t,iconUrl:s}}),o=(e,t)=>({type:"CREATE_WEB_LINK_SUCCESS",payload:{optimisticId:e,webLink:t}}),c=e=>({type:"CREATE_WEB_LINK_FAILED",payload:{optimisticId:e}}),l=e=>({type:"CREATE_WEB_LINK_RETRY",payload:{optimisticId:e}}),u=e=>({
type:"DELETE_WEB_LINK_REQUEST",payload:{id:e}}),d=e=>({type:"DELETE_WEB_LINK_SUCCESS",payload:{id:e}}),p=e=>({type:"DELETE_WEB_LINK_FAILED",payload:{id:e}}),m=e=>({type:"CANCEL_FAILED_WEB_LINK_DELETION",payload:{id:e}}),b=e=>({type:"DELETE_OPTIMISTIC_WEB_LINK",payload:{id:e}})},"./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),o=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),c=s("./node_modules/react/index.js"),l=s.n(c),u=s("./node_modules/react-intl/lib/index.es.js"),d=s("./node_modules/lodash/noop.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),f=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),g=Object(u.h)({replyToCustomer:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.reply-to-customer-button",defaultMessage:"Reply to customer"},addInternalNote:{
id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.add-internal-note-button",defaultMessage:"Add internal note"},loadingAttachments:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.loading-attachments",defaultMessage:"Loading attachments\u2026"}}),h=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),y=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),O=s.n(y),j=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),v=Object(u.h)({addAttachmentLabel:{id:"issue.label-for-add-attachment-button",defaultMessage:"Add attachment"}}),E=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const w=E.default.span(["padding:","px;"],k.e/2),S=E.default.div(["margin-left:auto;margin-right:","px;"],k.e),C=e=>{
const{intl:{formatMessage:t},onClick:s,isCommentAttachmentInProgress:n}=e;return l.a.createElement(S,null,l.a.createElement(j.a,{content:t(v.addAttachmentLabel),position:"bottom"},l.a.createElement(f.a,{spacing:"none",appearance:"subtle-link",isLoading:n,iconBefore:l.a.createElement(w,null,l.a.createElement(O.a,{size:"medium",label:t(v.addAttachmentLabel)})),externalId:"attachment",onClick:s})))};C.displayName="AttachmentPicker";var I=Object(u.i)(C),T=Object(r.a)([Object(n.b)((e=>({isCommentAttachmentInProgress:Object(o.x)(e)})),(e=>({onClick:()=>{e(Object(h.b)())}})))])(I),P=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const _=E.default.div(["white-space:nowrap;border:1px solid ",";height:","px;box-sizing:border-box;padding:","px 0;border-radius:","px;display:flex;align-items:center;"],P.a.N40,5*k.e,k.e/2,k.a),x=E.default.div(["padding:0 ","px;"],k.e);class D extends c.Component{renderReplyToCustomer(){const{onReplyToCustomer:e,intl:{formatMessage:t}}=this.props
;return l.a.createElement(l.a.Fragment,null," / ",l.a.createElement(f.a,{appearance:"link",onClick:e},t(g.replyToCustomer)))}render(){const{onAddInternalNote:e,isCommentAttachmentInProgress:t,intl:{formatMessage:s},isPublicCommentAllowed:n}=this.props;return l.a.createElement(_,null,t?l.a.createElement(x,null,s(g.loadingAttachments)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{appearance:"link",onClick:e},s(g.addInternalNote)),n&&this.renderReplyToCustomer()),l.a.createElement(T,null))}}D.displayName="CollapsedEditorView";var A=Object(u.i)(D),L=Object(r.a)([Object(b.a)({onReplyToCustomer:"onReplyToCustomer",onAddInternalNote:"onAddInternalNote"}),Object(n.b)((e=>({isCommentAttachmentInProgress:Object(o.x)(e)})),{})])(A);const M=E.default.div(["margin:0 -","px ","px;"],k.e,2*k.e),R="internal",N={public:{id:"public",label:l.a.createElement(u.c,g.replyToCustomer),content:l.a.createElement("div",null)},internal:{id:R,label:l.a.createElement(u.c,g.addInternalNote),
content:l.a.createElement("div",null)}};class F extends c.Component{constructor(...e){super(...e),this.onReplyToCustomer=()=>{this.props.onCommentVisibilityChange(!1),this.expandEditor()},this.onAddInternalNote=()=>{this.props.onCommentVisibilityChange(!0),this.expandEditor()},this.onTabSelect=e=>{this.props.onCommentVisibilityChange(e.id===R)},this.expandEditor=()=>{const{isExpanded:e,onExpanded:t}=this.props;e||t&&t()}}getExpandedView(){const{isInternal:e,isPublicCommentAllowed:t,children:s}=this.props,n=t&&!e?N.public:N.internal,a=t?[N.internal,N.public]:[N.internal];return l.a.createElement(l.a.Fragment,null,l.a.createElement(M,null,l.a.createElement(m.a,{tabs:a,selected:n,onSelect:this.onTabSelect})),s)}getCollapsedView(){return l.a.createElement(L,{onReplyToCustomer:this.onReplyToCustomer,onAddInternalNote:this.onAddInternalNote,isPublicCommentAllowed:this.props.isPublicCommentAllowed})}render(){const{isExpanded:e}=this.props
;return e?this.getExpandedView():this.getCollapsedView()}}F.displayName="ServiceDeskCommentEditorContainer",F.defaultProps={isExpanded:!1,isInternal:!1,isPublicCommentAllowed:!1,onExpanded:p.a,onCommentVisibilityChange:p.a};var U=Object(u.i)(F);function V(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function K(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?V(Object(s),!0).forEach((function(t){W(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function W(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function B(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}t.a=Object(r.a)([Object(n.b)(((e,t)=>({isInternal:Object(o.C)(t.commentId)(e),isPublicCommentAllowed:Object(i.f)(e)})),((e,t)=>({onCommentVisibilityChange:s=>{e(Object(a.d)(t.commentId,s))}})),((e,t,s)=>{const{commentId:n}=s;return K(K(K({},B(s,["commentId"])),e),t)}))])(U)},"./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),d=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js")
;const p=Object(c.default)(d.a)(["flex-direction:column;width:100%;"]),m=Object(c.default)(i.a)(["display:flex;"]),b=Object(c.default)(r.a)(["width:9px;flex-shrink:0;"]),f=Object(c.default)(r.a)(["height:22px;"]),g=Object(c.default)(u.a)(["background-position:-2px -2px;border-bottom:","px solid white;flex-shrink:0;"],4*l.e),h=a.a.createElement(a.a.Fragment,null,a.a.createElement(g,null),a.a.createElement(b,null),a.a.createElement(i.a,null,a.a.createElement(i.a,{paddingTop:1,paddingBottom:5},a.a.createElement(o.a,{fontSize:14,lineHeight:16,intrusion:250})),a.a.createElement(i.a,{paddingTop:4,paddingBottom:0},a.a.createElement(o.a,{fontSize:24,lineHeight:24,intrusion:0})),a.a.createElement(f,null)));t.a=()=>a.a.createElement(p,null,a.a.createElement(r.b,null),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h))},"./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/loading-button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div(["margin:","px 0;"],2*o.e),l=({onClick:e,isDisabled:t,isLoading:s,numberToLoad:n,children:r})=>n<=0?null:a.a.createElement(c,null,a.a.createElement(i.a,{onClick:e,isDisabled:t,isLoading:s,shouldFitContainer:!0},r));l.displayName="LoadMoreButton";var u=l;t.a=u},"./src/packages/issue/issue-view/src/activity/common/styles/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.span(["font-weight:500;"]);r.displayName="Emphasise";const o=n.default.span(["grid-row:1;margin-left:","px;white-space:nowrap;"],.5*i.e);o.displayName="GridContainer";const c=n.default.div(["margin:","px 0;"],3*i.e);n.default.span(["margin-left:","px;"],i.e).displayName="TimestampContainer";const l=n.default.span(["margin-left:-","px;display:grid;"],i.e/2),u=n.default.span(["display:grid;"]);u.displayName="GridContentContainer";const d={always:Object(n.css)(["color:",";"],a.a.N500),whenDisplaySettingSwitchable:Object(n.css)([":hover{color:inherit;}"])}},"./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){
return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js");const r=Object(n.createSelector)(a.H,(e=>e.worklog)),o=Object(n.createSelector)(i.i,(e=>e.remainingEstimateSeconds||0)),c=Object(n.createSelector)(r,(e=>e.loadingStage)),l=Object(n.createSelector)(r,(e=>e.highlightedWorklogId))},"./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),o=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js");class c extends n.Component{constructor(...e){super(...e),this.state={stackIndex:0},this.incrementStackIndex=()=>{this.setState({
stackIndex:this.state.stackIndex+1})},this.decrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex-1})}}componentDidMount(){Object(r.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({bind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)})).catch(i.a),Object(o.a)("show",this.incrementStackIndex),Object(o.a)("hide",this.decrementStackIndex)}componentWillUnmount(){Object(r.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({unbind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)})).catch(i.a),Object(o.b)("show",this.incrementStackIndex),Object(o.b)("hide",this.decrementStackIndex)}render(){return this.props.children(this.state.stackIndex)}}c.displayName="AuiModalStackIndex"},"./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),
s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"e",(function(){return p}));const n="ISSUE_DETAILS",a={key:"FETCH_FIELD_DATA",prefix:n},i={key:"FETCH_INITIAL_COMMENTS",prefix:n},r={key:"FETCH_ISSUE_LINK_TYPES",prefix:n},o={key:"FETCH_SUBTASK_TYPES",prefix:n},c={key:"FETCH_LOAD_CONTEXT",prefix:n},l={key:"FETCH_USER_AUTH",prefix:n},u={key:"FETCH_VIEW_CONTEXT",prefix:n},d={key:"FETCH_ECOSYSTEM_EXTENSIONS",prefix:n},p={key:"FETCH_ISSUE_PROPERTIES",prefix:n}},"./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),a=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=[a.g,a.a,a.e,a.d,a.i,a.f,a.c,a.b,a.h];let l;const u=()=>{c.forEach((e=>{
const t=`BEGIN_${e.prefix}_${e.key}`,s=`END_${e.prefix}_${e.key}`;n.default.clearMarks&&(n.default.clearMarks(t),n.default.clearMarks(s))})),l=null},d=()=>(l||(l=(()=>c.reduce(((e,t)=>{const s=`BEGIN_${t.prefix}_${t.key}`,a=`END_${t.prefix}_${t.key}`,i=Object(n.timeBetweenMarks)(s,a);if(null!=i&&i>0){const o=r(r({},e),{},{[`${t.key}_NETWORK`]:i});return n.default.clearMarks&&(n.default.clearMarks(s),n.default.clearMarks(a)),o}return e}),{}))()),l)},"./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return u}));const n=()=>({type:"FETCH_ISSUE_REQUEST"}),a=e=>({type:"FETCH_ISSUE_SUCCESS",payload:e}),i=e=>({type:"FETCH_ISSUE_FAILURE",payload:e}),r=()=>({
type:"REFRESH_ISSUE_REQUEST"}),o=e=>({type:"REFRESH_ISSUE_SUCCESS",payload:e}),c=()=>({type:"REFRESH_ECOSYSTEM_REQUEST"}),l=e=>({type:"REFRESH_ECOSYSTEM_SUCCESS",payload:e}),u=()=>({type:"FETCH_FORGE_REQUEST"})},"./src/packages/issue/issue-view/src/common/actions/worklog-actions.js":function(e,t,s){"use strict";s.d(t,"l",(function(){return n})),s.d(t,"m",(function(){return a})),s.d(t,"Q",(function(){return i})),s.d(t,"S",(function(){return r})),s.d(t,"P",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"q",(function(){return l})),s.d(t,"r",(function(){return u})),s.d(t,"k",(function(){return d})),s.d(t,"M",(function(){return p})),s.d(t,"O",(function(){return m})),s.d(t,"N",(function(){return b})),s.d(t,"p",(function(){return f})),s.d(t,"o",(function(){return g})),s.d(t,"W",(function(){return h})),s.d(t,"X",(function(){return y})),s.d(t,"V",(function(){return O})),s.d(t,"n",(function(){return j})),s.d(t,"R",(function(){return v})),s.d(t,"T",(function(){return E})),
s.d(t,"s",(function(){return k})),s.d(t,"d",(function(){return w})),s.d(t,"y",(function(){return S})),s.d(t,"z",(function(){return C})),s.d(t,"x",(function(){return I})),s.d(t,"b",(function(){return T})),s.d(t,"u",(function(){return P})),s.d(t,"c",(function(){return _})),s.d(t,"v",(function(){return x})),s.d(t,"t",(function(){return D})),s.d(t,"w",(function(){return A})),s.d(t,"f",(function(){return L})),s.d(t,"C",(function(){return M})),s.d(t,"D",(function(){return R})),s.d(t,"h",(function(){return N})),s.d(t,"G",(function(){return F})),s.d(t,"H",(function(){return U})),s.d(t,"U",(function(){return V})),s.d(t,"i",(function(){return K})),s.d(t,"J",(function(){return W})),s.d(t,"L",(function(){return B})),s.d(t,"I",(function(){return H})),s.d(t,"e",(function(){return $})),s.d(t,"A",(function(){return G})),s.d(t,"B",(function(){return q})),s.d(t,"g",(function(){return z})),s.d(t,"E",(function(){return Y})),s.d(t,"F",(function(){return Q})),s.d(t,"j",(function(){return J})),
s.d(t,"K",(function(){return Z}));const n="state.FETCH_WORKLOGS_REQUEST",a="state.FETCH_WORKLOGS_REQUEST_INITIAL",i=(e,t,s)=>({type:a,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),r=(e,t,s)=>({type:"state.FETCH_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),o=()=>({type:"state.FETCH_WORKLOGS_FAILURE"}),c="state.ADD_WORKLOG_REQUEST",l=(e,t)=>({type:c,payload:{values:e},meta:{analyticsEvent:t}}),u=(e,t,s)=>({type:"state.ADD_WORKLOG_SUCCESS",payload:{worklogId:e,timeTracking:t},meta:s}),d="state.FETCH_SURROUNDING_WORKLOGS_BY_ID",p=e=>({type:d,payload:{worklogId:e}}),m=(e,t,s,n)=>({type:"state.FETCH_WORKLOGS_BY_ID_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,startIndex:s,totalWorklogs:n}}),b=()=>({type:"state.FETCH_WORKLOGS_BY_ID_FAILURE"}),f=()=>({type:"state.ADD_WORKLOG_FAILURE"}),g="state.UPDATE_TIME_REMAINING_REQUEST",h=(e,t)=>({type:g,payload:{timeRemaining:e},meta:{analyticsEvent:t}}),y=e=>({type:"state.UPDATE_TIME_REMAINING_SUCCESS",
payload:{timeRemaining:e}}),O=()=>({type:"state.UPDATE_TIME_REMAINING_FAILURE"}),j="state.FETCH_WORKLOGS_RETRY",v=(e,t,s)=>({type:j,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),E=(e,t)=>({type:"state.OPEN_MODAL",payload:{modalType:e,worklogId:t}}),k=()=>({type:"state.CLOSE_MODAL"}),w="state.EDIT_WORKLOG_REQUEST",S=(e,t,s)=>({type:w,payload:{worklogId:e,values:t},meta:{analyticsEvent:s}}),C=(e,t,s,n)=>({type:"state.EDIT_WORKLOG_SUCCESS",payload:{worklogs:e,worklogId:t,timeTrackingDeltas:s},meta:n}),I=()=>({type:"state.EDIT_WORKLOG_FAILURE"}),T="state.DELETE_WORKLOG_REQUEST",P=(e,t,s,n)=>({type:T,payload:{worklogId:e,timeRemaining:t,isAdjustTimeRemainingChecked:s},meta:{analyticsEvent:n}}),_="state.DELETE_WORKLOG_SUCCESS",x=(e,t)=>({type:_,payload:{worklogId:e,timeTrackingDeltas:t}}),D=()=>({type:"state.DELETE_WORKLOG_FAILURE"}),A=()=>({type:"state.DISPOSE_WORKLOG_APP"}),L="state.FETCH_NEWER_WORKLOGS_REQUEST",M=(e,t,s)=>({type:L,payload:{baseUrl:e,issueKey:t,analyticsEvent:s}
}),R=(e,t,s)=>({type:"state.FETCH_NEWER_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),N="state.FETCH_OLDER_WORKLOGS_REQUEST",F=(e,t,s)=>({type:N,payload:{baseUrl:e,issueKey:t,analyticsEvent:s}}),U=(e,t,s)=>({type:"state.FETCH_OLDER_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),V=e=>({type:"SET_WORKLOG_SCROLL_STATUS",payload:{status:e}}),K="state.FETCH_SORTED_WORKLOGS_REQUEST",W=()=>({type:K}),B=e=>({payload:e,type:"state.FETCH_SORTED_WORKLOGS_SUCCESS"}),H=()=>({type:"state.FETCH_SORTED_WORKLOGS_FAILURE"}),$="state.FETCH_NEWER_SORTED_WORKLOGS_REQUEST",G=()=>({type:$}),q=e=>({type:"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS",payload:e}),z="state.FETCH_OLDER_SORTED_WORKLOGS_REQUEST",Y=()=>({type:z}),Q=e=>({type:"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS",payload:e}),J="state.FETCH_SORTED_WORKLOGS_RETRY",Z=()=>({type:J})},"./src/packages/issue/issue-view/src/common/component/date-time/view.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/lodash/isNaN.js"),o=s.n(r),c=s("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js"),l=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js"),d=s("./src/packages/compatibility/src/main.js");class p extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const t=Object(d.a)(e);this.props.onChange(o()(Date.parse(t))?null:t)},this.parseValue=(e,t,s)=>this.props.parseValue(e,t,s,this.props.timeZone)}render(){const{autoFocus:e,isDisabled:t,value:s,timeZone:n,intl:{formatMessage:i}}=this.props;return a.a.createElement(c.a,{autoFocus:e,isDisabled:t,value:s||"",onChange:this.onChange,timeIsEditable:!0,parseValue:n?this.parseValue:void 0,datePickerSelectProps:{placeholder:i(u.a.placeholderDate)},timePickerSelectProps:{
formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:l.a})}}p.displayName="DateTimeFieldView",p.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1},t.a=Object(i.i)(p)},"./src/packages/issue/issue-view/src/common/component/editor/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundary/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js");const c=({defaultValue:e,mediaContext:t})=>a.a.createElement(o.a,{mediaContext:t,adf:e});c.displayName="IssueEditorReadonly";const l=({children:e,fallback:t,packageName:s})=>a.a.createElement(r.a,{id:"issue-editor",packageName:s,render:()=>t},a.a.createElement(i.a,{fallback:t},e));l.displayName="IssueEditorBoundary"},
"./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isFunction.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=(e,t,s)=>{const i=r()(e)?e:()=>e||null;class d extends n.Component{constructor(e){super(e),this.startTime=void 0,this.mountTime=void 0,this.startTime=c.default.now()}componentDidMount(){this.mountTime=c.default.now()}componentWillUnmount(){
const e=c.default.now(),t=e-this.startTime,n=this.mountTime-this.startTime,a=e-this.mountTime;t>0&&this.props.onWillUnmount(t,n,a,s)}render(){return i()}}d.displayName="LoadingWrapper",d.defaultProps={onWillUnmount:()=>{}};const p=Object(o.a)((e=>({onWillUnmount:(t,s,n,a)=>e("loading-component",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:t,initializationTime:s,mountingTime:n},a||{}))})))(d);return a.a.createElement(p,{externalId:t})}},"./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("./node_modules/lodash/clamp.js");const n={minute:"m",hour:"h",day:"d",week:"w"
},a=e=>n[e]||n.minute},"./src/packages/issue/issue-view/src/common/component/logged-time/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),o=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const d=c.default.div(["width:100%;display:flex;"]),p=c.default.div(["flex-grow:1;margin-top:","px;"],u.e/4),m=c.default.small(["color:",";display:flex;justify-content:space-between;margin-top:0;font-size:","px;flex-wrap:wrap;"],l.a.N500,u.d),b=c.default.span(["margin-right:","px;"],u.e/2),f=c.default.span(["cursor:pointer;"]),g=c.default.span(["font-weight:normal;"]);class h extends n.Component{constructor(...e){super(...e),this.getTimeRemainingText=()=>{if(!this.props.value.remainingTime)return null;const e=this.secondsToTimeString(this.props.value.remainingTime);return a.a.createElement(f,null,a.a.createElement(i.c,{id:"issue.log-time.remaining-time",defaultMessage:"{time} remaining",values:{time:a.a.createElement(g,null,e)}}))},this.secondsToTimeString=e=>{const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(r.a)(t,s)(e)}}getTimeLoggedText(){if(this.props.value&&this.props.value.loggedTime){const e=this.secondsToTimeString(this.props.value.loggedTime)
;return a.a.createElement(i.c,{id:"issue.log-time.time-logged",defaultMessage:"{time} logged",values:{time:a.a.createElement(g,{"data-testid":"issue.issue-view.common.logged-time.value"},e)}})}return a.a.createElement(i.c,{id:"issue.log-time.no-time-logged",defaultMessage:"No time logged"})}render(){const{config:e,isDone:t,isCompact:s,value:n,estimatedTime:i}=this.props;return a.a.createElement(d,null,a.a.createElement(p,null,a.a.createElement(o.a,{value:n,estimatedTime:i,config:e,isDone:t,isCompact:s}),a.a.createElement(m,null,a.a.createElement(b,null,this.getTimeLoggedText()),this.getTimeRemainingText())))}}h.displayName="LoggedTime",h.defaultProps={isCompact:!0,isDone:!1}},"./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),r=s("./node_modules/@atlaskit/icon/glyph/check-circle.js"),o=s.n(r),c=s("./node_modules/@atlaskit/icon/glyph/link.js"),l=s.n(c),u=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const b=p.default.div(["padding-top:","px;opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(","px,0);padding-left:","px;display:flex;align-items:flex-end;",";&:focus{opacity:1;transform:translate(0,0);}"],m.e/4,-m.e,m.e/2,(e=>e.isVisible&&"\n        opacity: 1;\n        transform: translate(0, 0);\n    "));class f extends n.Component{constructor(...e){super(...e),this.state={isCopied:!1},
this.onCopySuccess=e=>{this.setState({isCopied:e})},this.onCopyReset=()=>{this.setState({isCopied:!1})}}render(){const{id:e,label:t,fullIssueUrl:s,isVisible:n,onCopyClick:r}=this.props,{isCopied:c}=this.state;return a.a.createElement(b,{isVisible:n,className:"issue_view_permalink_button_wrapper"},a.a.createElement(d.a,{id:e,label:t,tooltipDelay:0,tooltipLabel:t,tooltipLabelPosition:"top",shouldFitContainer:!0,value:s,hideFieldText:!0,remountOnChange:!0,onCopyClick:r,onClickChange:e=>this.onCopySuccess(e),onCopyReset:this.onCopyReset},a.a.createElement(i.a,{appearance:"subtle-link",iconBefore:c?a.a.createElement(o.a,{label:"",primaryColor:u.a.G500,size:"small"}):a.a.createElement(l.a,{size:"small",label:t}),spacing:"none"})))}}f.displayName="PermalinkButton"},"./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js");const a=e=>{const[t,s,a]=((e=!1)=>{
const[t,s]=Object(n.useState)(e);return[t,()=>{s(!0)},()=>{s(!1)}]})(e.defaultIsVisible);return e.children({isVisible:t,show:s,hide:a})};a.defaultProps={defaultIsVisible:!1};t.a=a},"./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),o=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),c=Object(n.h)({underOriginalEstimate:{id:"issue.log-time.under-original-estimated-time-tooltip",defaultMessage:"{time} under original estimate"},overOriginalEstimate:{id:"issue.log-time.over-original-estimated-time-tooltip",defaultMessage:"{time} over original estimate"}
}),l=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const p=u.default.div(["padding:","px;background-color:transparent;border-radius:3px;",";&:hover{background-color:",";}"],d.e/2,(e=>e.hasPointerCursor?"cursor: pointer;":""),r.a.N60),m=u.default.div(["background-color:",";border-radius:","px;display:flex;height:","px;overflow:hidden;width:100%;",";"],r.a.N40,d.e/2,(e=>e.isCompact?d.e/2:d.e),(e=>e.hasPointerCursor?"cursor: pointer;":""));class b extends a.Component{renderProgressBar(){return this.props.shouldHighlightOnHover?i.a.createElement(p,{hasPointerCursor:!!this.props.tooltip},i.a.createElement(m,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)):i.a.createElement(m,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)}render(){
return this.props.tooltip?i.a.createElement(l.a,{content:this.props.tooltip},this.renderProgressBar()):this.renderProgressBar()}}b.displayName="ProgressBar",b.defaultProps={isCompact:!0,shouldHighlightOnHover:!1,children:null,tooltip:null};const f=u.default.div(["background-color:",";flex-shrink:0;width:",";transition:width 0.3s ease;&:first-child{border-top-left-radius:","px;border-bottom-left-radius:","px;}&:last-child{border-top-right-radius:","px;border-bottom-right-radius:","px;}"],(e=>e.color),(e=>e.width),d.e/2,d.e/2,d.e/2,d.e/2);class g extends a.Component{render(){const{color:e,proportion:t}=this.props,s=t>0?100*t+"%":"0";return i.a.createElement(f,{color:e,width:s})}}g.displayName="ProgressBarSegment",g.defaultProps={color:r.a.B400,proportion:0};const h=(e,t)=>{const{loggedTime:s,remainingTime:n}=e;return s&&void 0!==t?s+(n||0)-t:0};class y extends a.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{daysPerWeek:t,hoursPerDay:s}=this.props.config
;return Object(o.a)(t,s)(e)}}getTooltip(){const{value:e,estimatedTime:t}=this.props,s=h(e,t);return 0===s?null:s>0?this.props.intl.formatMessage(c.overOriginalEstimate,{time:this.secondsToTimeString(s)}):this.props.intl.formatMessage(c.underOriginalEstimate,{time:this.secondsToTimeString(-s)})}render(){const{value:e,estimatedTime:t,shouldHighlightOnHover:s}=this.props,{loggedTime:n=0}=e,a=((e,t=0)=>{const{loggedTime:s=0,remainingTime:n=0}=e;return Math.max(t,s+n)})(e,t),o=Math.max(h(e,t),0),c=a?(n-o)/a:0,l=a?o/a:0;return i.a.createElement(b,{tooltip:this.getTooltip(),isCompact:this.props.isCompact,shouldHighlightOnHover:s},i.a.createElement(g,{color:this.props.isDone?r.a.G300:r.a.B400,proportion:c}),i.a.createElement(g,{color:r.a.Y300,proportion:l}))}}y.displayName="ProgressTracker",y.defaultProps={isCompact:!0,isDone:!1,shouldHighlightOnHover:!1,value:{loggedTime:0}};t.a=Object(n.i)(y)},"./src/packages/issue/issue-view/src/common/component/renderer/index.js":function(e,t,s){
"use strict"
;var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),i=s("./src/packages/issue/media-provider/src/controllers/with-media-provider/index.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./node_modules/react/index.js"),c=s.n(o),l=s("./node_modules/@atlaskit/adf-schema/dist/es2019/schema/default-schema.js"),u=s("./node_modules/@atlaskit/editor-common/dist/es2019/provider-factory/provider-factory.js"),d=s("./node_modules/@atlaskit/renderer/dist/es2019/ui/Renderer/index.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/services/emoji.js"),f=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),y=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js")
;class O extends o.PureComponent{constructor(e){super(e),this.onInlineCardClicked=(e,t)=>{const{linkActions:s}=this.props,n=e||window.event;n.preventDefault();const a=n.metaKey||0!==n.button;Object(m.a)(t,a,s.push)},this.onMentionClicked=(e,t,s)=>{const{linkActions:n,mentionEncoder:a}=this.props;if(a){s.stopPropagation();const t=s,i=t.metaKey||0!==t.button;Object(m.a)(a(e),i,n.push)}},this.onContentSelected=e=>{e.target instanceof window.Element&&!Object(p.a)(e.target,e.currentTarget)&&!this.checkForMedia(e.target,e.currentTarget)||e.stopPropagation()},this.checkForMedia=(e,t)=>!(!e||e===t)&&(!(!e.className.includes("rich-media-item")&&!e.className.includes("MediaGroup")&&"media-viewer-popup"!==e.getAttribute("data-testid"))||this.checkForMedia(e.parentElement,t)),this.dataProviders=void 0,this.eventHandlers=void 0,this.isEmpty=()=>this.isAdfValueEmpty(),this.isAdfValueEmpty=()=>{const{adf:e}=this.props;return!e||Object(f.g)(e)}
;const{mediaProvider:t,mentionProvider:s,contextIdentifier:n}=this.props;this.dataProviders=new u.a,this.dataProviders.setProvider("mediaProvider",t),this.dataProviders.setProvider("mentionProvider",Promise.resolve(s)),this.dataProviders.setProvider("emojiProvider",Object(b.b)(this.props.cloudId,this.props.loggedInUserAccountId)),n&&this.dataProviders.setProvider("contextIdentifierProvider",Promise.resolve(n)),this.eventHandlers={mention:{onClick:this.onMentionClicked},smartCard:{onClick:this.onInlineCardClicked}}}render(){const{adf:e}=this.props;return this.isEmpty()?c.a.createElement(y.b,null,this.props.placeholder):c.a.createElement("div",{onClick:this.onContentSelected,onKeyPress:this.onContentSelected,role:"presentation"},c.a.createElement(d.a,{schema:l.a,document:Object(f.h)(e),dataProviders:this.dataProviders,eventHandlers:this.eventHandlers,allowAltTextOnImage:!0,media:{allowLinking:Object(g.isMediaLinkingEnabled)(),featureFlags:Object(h.a)()},
analyticsEventSeverityTracking:Object(g.getTTRSeverityTrackingConfiguration)()}))}}O.displayName="Renderer",O.displayName="Renderer",O.defaultProps={adf:void 0,placeholder:void 0,mentionEncoder:()=>""};const j=Object(n.b)((e=>({cloudId:Object(r.i)(e),loggedInUserAccountId:Object(r.a)(e)})),{})(O),v=Object(i.a)(Object(a.a)(j));t.a=v},"./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=n.default.div(["display:flex;align-items:baseline;flex-wrap:nowrap;justify-content:",";"],(e=>e.leftAlign?"normal":"space-between")),o=n.default.div(["display:flex;justify-content:flex-start;align-items:baseline;max-width:100%;"]),c=n.default.h2(["",";line-height:","px;color:",";overflow-wrap:break-word;min-width:0;"],a.d.h400(),3*i.e,a.a.heading),l=n.default.div(["display:flex;align-items:center;",";"],(e=>e.leftAlign?`margin-left: ${i.e}px`:"")),u=n.default.div(["",";margin-left:","px;margin-top:0;flex-shrink:0;"],a.d.h100(),i.e)},"./src/packages/issue/issue-view/src/common/constants/flags.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return n})),s.d(t,"k",(function(){return a})),s.d(t,"l",(function(){return i})),s.d(t,"m",(function(){return r})),s.d(t,"u",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"q",(function(){return l})),s.d(t,"E",(function(){return u})),s.d(t,"f",(function(){return d})),s.d(t,"Q",(function(){return p})),
s.d(t,"z",(function(){return m})),s.d(t,"N",(function(){return b})),s.d(t,"M",(function(){return f})),s.d(t,"G",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"O",(function(){return y})),s.d(t,"A",(function(){return O})),s.d(t,"B",(function(){return j})),s.d(t,"D",(function(){return v})),s.d(t,"d",(function(){return E})),s.d(t,"n",(function(){return k})),s.d(t,"C",(function(){return w})),s.d(t,"h",(function(){return S})),s.d(t,"g",(function(){return C})),s.d(t,"p",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"P",(function(){return P})),s.d(t,"x",(function(){return _})),s.d(t,"w",(function(){return x})),s.d(t,"t",(function(){return D})),s.d(t,"s",(function(){return A})),s.d(t,"H",(function(){return L})),s.d(t,"I",(function(){return M})),s.d(t,"J",(function(){return R})),s.d(t,"o",(function(){return N})),s.d(t,"r",(function(){return F})),s.d(t,"i",(function(){return U})),s.d(t,"K",(function(){return V})),s.d(t,"L",(function(){return K})),
s.d(t,"a",(function(){return W})),s.d(t,"F",(function(){return B})),s.d(t,"v",(function(){return H})),s.d(t,"y",(function(){return $}))
;const n="COMMENT_ADD_ERROR_GENERIC",a="COMMENT_ADD_ERROR_INVALID",i="COMMENT_CONTENT_EXCEEDED_ERROR",r="COMMENT_DELETE_ERROR",o="EDITOR_ERROR",c="ATTACHMENT_ADD_ERROR",l="DELETE_LINKED_ISSUE_ERROR",u="REMOTE_LINK_VALIDATION_ERROR",d="ATTACHMENT_DELETE_ERROR",p="WATCH_TOGGLE_UPDATE_ERROR",m="FETCH_WATCHERS_ERROR",b="STOP_WATCHING_SUCCESS",f="START_WATCHING_SUCCESS",g="REMOVE_WATCHER_ERROR",h="ADD_WATCHER_ERROR",y="SUBTASKS_REORDER_ERROR_GENERIC",O="FLAGGED_ADD_UPDATE_ERROR",j="FLAGGED_REMOVE_UPDATE_ERROR",v="LOG_WORK_CONFIRM_ERROR",E="ASSIGN_TO_ME_SUCCESS",k="CREATE_CHILD_ISSUE_ERROR",w="LINK_CHILD_ISSUE_ERROR",S="CHANGE_ISSUE_TYPE_SUCCESS",C="CHANGE_ISSUE_TYPE_ERROR",I="DELETE_ISSUE_ERROR",T="ADD_WORKLOG_FAILURE",P="UPDATE_TIME_REMAINING_FAILURE",_="EDIT_WORKLOG_SUCCESS",x="EDIT_WORKLOG_FAILURE",D="DELETE_WORKLOG_SUCCESS",A="DELETE_WORKLOG_FAILURE",L="RICH_CONTENT_FIELD_CONFIRM_ERROR",M="RICH_CONTENT_FIELD_MAXIMUM_LENGTH_EXCEEDED_ERROR",R="RICH_CONTENT_FIELD_REQUIRED_ERROR",N="DELETE_CONFLUENCE_PAGE_LINK_FAILED",F="DELETE_WEB_LINK_FAILED",U="CLICKTHROUGH_BANNER_DISMISS_SUCCESS",V="SAVE_APPROVAL_ANSWER_ERROR",K="SAVE_APPROVAL_ANSWER_SUCCESS",W="ADD_APPROVER_ERROR",B="REMOVE_APPROVER_ERROR",H="EDIT_EPIC_COLOUR_ERROR",$="FETCH_JIRA_APP_LINKS_ERROR"
},"./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return j}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o=e=>{const t=e.reduce(((e,t)=>{e[t.appKey]||(e[t.appKey]={total:0,status:{}});const s=e[t.appKey];if(s.total+=1,t.status&&t.status.type){const e=s.status[t.status.type];s.status[t.status.type]=e>0?e+1:1}else{const e=s.status["N/A"];s.status["N/A"]=e>0?e+1:1}return e}),{}),s=JSON.stringify(t);return{total:e.length,data:Object(n.i)(s)(s)}},c=(e,t,s)=>{const a=s?s.type:"",i=Object(n.i)(e,t,a);return{appKey:i(e),moduleKey:i(t),statusType:i(a)}},l=(e,t)=>{let s=0;const a=e.reduce(((e,n)=>{e[n.appKey]||(e[n.appKey]={total:0,totalOnPage:0});const a=e[n.appKey];a.total+=1;const i=`${n.appKey}_${n.moduleKey}`;return t.includes(i)&&(a.totalOnPage+=1,s+=1),e}),{}),i=JSON.stringify(a);return{totalOnPage:s,total:e.length,data:Object(n.i)(i)(i)}},u=(e,t)=>{const s=Object(n.i)(e,t);return{appKey:s(e),moduleKey:s(t)}},d=(e,t)=>u(e,t),p=(e,t,s)=>i(i({},u(e,t)),{},{
event:Object(n.i)(s)(s)}),m=(e,t)=>u(e,t),b=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name}))),f=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type}))),g=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type,showByDefault:e.showByDefault}))),h=e=>e.map((e=>({name:e.name}))),y=e=>"WEB_PANEL"===e.type,O=e=>"ISSUE_MODULE"===e.type,j=(e=[],t=[],s=[],a=[],i=0)=>{const r={glances:f(e),contentPanels:g(t),activityPanels:b(s),operations:h(a)},o=Object.keys(r).reduce(((e,t)=>r[t]&&r[t].length?e+r[t].length:e),0),c=JSON.stringify(r);return{totalGlances:e.filter(O).length,totalLegacyGlances:e.filter(y).length,totalContentPanels:t.filter(O).length,totalLegacyContentPanels:t.filter(y).length,totalActivityPanels:s.length,totalOperations:a.length,totalCustomIssueFields:i,totalModules:o,data:Object(n.i)(c)(c)}}},"./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js":function(e,t,s){"use strict"
;s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t=0)=>{const s=e.lastIndexOf("-"),n=e.substr(s+1);return/^\d+$/.test(n)&&n.length>=t?e.substr(0,s):e},a=e=>{const t=e.match(/^(.*)-(\w+)-(\d+)$/);if(null==t)return null;const[,s,n,a]=t;return{extensionId:s,id:n,added:Number(a)}}},"./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/lodash/noop.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/deferred-globals.js");const r=()=>window.AJS&&window.AJS.dialog2,o=(e,t)=>{Object(i.b)().then((()=>((e,t)=>{r()&&window.AJS.dialog2.on(e,t)})(e,t))).catch(a.a)},c=(e,t)=>{Object(i.b)().then((()=>((e,t)=>{r()&&window.AJS.dialog2.off(e,t)})(e,t))).catch(a.a)}},"./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){
return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_UPLOAD_CONTEXT_REQUEST"}),a=e=>({type:"FETCH_UPLOAD_CONTEXT_SUCCESS",payload:e}),i=e=>({type:"FETCH_UPLOAD_CONTEXT_FAILURE",payload:{error:e}}),r=()=>({type:"CHECK_UPLOAD_CONTEXT"})},"./src/packages/issue/issue-view/src/common/messages/drafts.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({draftIndicator:{id:"issue.draft-indicator-for-multiline-field",defaultMessage:"Unsaved changes"}})},"./src/packages/issue/issue-view/src/common/messages/flags.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({commentWorklogAttachmentFetchFailedTitle:{id:"issue.comment-worklog-attachment-fetch-failed-title",defaultMessage:"We couldn't find the {field}"},commentWorklogAttachmentFetchFailedDescription:{
id:"issue.comment-worklog-attachment-fetch-failed-description",defaultMessage:"Reload the issue, then give it another try."}})},"./src/packages/issue/issue-view/src/common/messages/time.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(i.h)({logWork:{id:"issue.common.messages.time.log-work",defaultMessage:"Log work"},timeInputPlaceholder:{id:"issue.common.messages.time.time-input-placeholder",defaultMessage:"e.g. 2w 4d 6h 45m"},exampleFormat:{id:"issue.common.messages.time.time-input-format-tooltip.example",defaultMessage:"Use the format: {formatExample}"},weeks:{id:"issue.common.messages.time.time-input-format-tooltip.weeks",defaultMessage:"{w} = weeks"},days:{id:"issue.common.messages.time.time-input-format-tooltip.days",defaultMessage:"{d} = days"},hours:{id:"issue.common.messages.time.time-input-format-tooltip.hours",defaultMessage:"{h} = hours"},minutes:{
id:"issue.common.messages.time.time-input-format-tooltip.minutes",defaultMessage:"{m} = minutes"}});const r=a.a.createElement(i.c,{id:"issue.common.messages.time.time-invalid-message",defaultMessage:"You need to log time in the format {timeString}.",values:{timeString:a.a.createElement("b",null,"2w 4d 6h 45m")}})},"./src/packages/issue/issue-view/src/common/metrics/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/issue-view/src/common/metrics/index.js");const i=e=>t=>{e&&e.onReadyForUser&&e.onReadyForUser();const{isInitialRender:s,lastTransitionStartTime:n}=t;s&&Object(a.i)(!0),Object(a.e)({isInitialRender:s,lastTransitionStartTime:n})},r=e=>t=>{e&&e.onInteractive&&e.onInteractive(),Object(a.d)(t)},o=e=>({onPreviewRendered:i(e),onInteractive:r(e)});let c=null;const l=e=>(c=Object(n.createContext)(o(e)),
c),u=()=>c||Object(n.createContext)(o())},"./src/packages/issue/issue-view/src/common/metrics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return z})),s.d(t,"a",(function(){return Y})),s.d(t,"g",(function(){return Q})),s.d(t,"f",(function(){return J})),s.d(t,"c",(function(){return Z})),s.d(t,"d",(function(){return X})),s.d(t,"h",(function(){return ee})),s.d(t,"e",(function(){return te})),s.d(t,"i",(function(){return se}))
;var n=s("./node_modules/uuid/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/platform/utils/constants/src/analytics-marks.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/performance-marks-tools/index.js"),u=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js"),d=s("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js"),p=s("./src/packages/issue/issue-view/src/utils/performance-analytics/index.js"),m=s("./node_modules/reselect/lib/index.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const f=Object(m.createSelector)((e=>e.timing),b.r,((e,t)=>t?void 0:e.server))
;var g=s("./node_modules/lodash/isFunction.js"),h=s.n(g),y=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),O=s("./src/packages/issue/issue-view/src/feature-flags.js");function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const k=()=>Object.keys(O).reduce(((e,t)=>h()(O[t])?v(v({},e),{},{[String(t)]:new y.a(O[t]())
}):e),{});var w=s("./src/packages/platform/utils/permalinks/src/index.js"),S=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),C=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),I=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),T=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),P=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const A=e=>Object.values(Object(_.s)(e)).filter((e=>"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"===e.schema.custom)),L=e=>{const t=A(e);return 0===t.length?0:t.reduce(((e,t)=>e+((e=>0===e.length?0:Object.values(e).reduce(((e,t)=>{var s;return e+((null==t||null===(s=t.children)||void 0===s?void 0:s.length)||1)}),0))(t.allowedValues)||1)),0)},M=e=>()=>{const t=e.getState(),{permalinkType:s}=Object(w.b)()||{},n=Object(_.q)("children-issues")(t),a=Object(O.isAddCascadingSelectValueCountToBMEnabled)()?{cascadingSelectCount:A(t).length,cascadingSelectOptionsTotalCount:L(t)}:{};return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({
visibleContextItem:Object(C.j)(t).length,conditionallyVisibleContextItems:Object(C.a)(t).length,visibleContentItems:Object(C.i)(t).length,ecosystemGlances:Object(S.m)(t).length,ecosystemContentPanels:Object(S.b)(t).length,ecosystemActivityPanels:Object(S.a)(t).length,ecosystemOperations:Object(S.q)(t).length,ecosystemCustomsFields:Object(C.b)(t).length,childIssues:n?n.value.length:0,linkIssueCount:Object(T.b)(t),subtaskCount:Object(P.d)(t).length,commentsTotalCount:Object(I.K)(t),hasCommentPermalink:"Comments"===s},a)};var R=s("./src/packages/platform/utils/constants/src/analytics-sources.js");class N{constructor(e){this.immutableState=void 0,this.isLoadedWithPage=void 0,this.hasLoadedEditor=!1,this.startTime=Math.floor(performance.now()),this.previewEnd=void 0,this.fmp=void 0,this.interactiveEnd=void 0,this.trueInteractiveEnd=void 0,this.immutableState=e,this.isLoadedWithPage=e.isLoadedWithPage}lazyMetricsProps(){return this.immutableState.lazyMetricsProps}getDataProvider(){
return this.immutableState.dataProvider}getIsFullIssue(){return"full-issue"===this.immutableState.analyticsSource}getIsLoadedWithPage(){return this.immutableState.isLoadedWithPage}setIsLoadedWithPage(e){this.isLoadedWithPage=e}getIsSPA(){return this.immutableState.isSPA}getIsRecentIssue(){return this.immutableState.isRecentIssue}getRecentIssuesCount(){return this.immutableState.recentIssuesCount}getAnalyticsSource(){return Object(y.c)(...R.b)(this.immutableState.analyticsSource)}getCorrelationId(){return this.immutableState.correlationId}getIssueScaleabilityReporter(){return this.immutableState.issueScaleabilityReporter}getStartTime(){return this.startTime}setPreviewEnd(e){this.previewEnd=null===e?0:Math.floor(e)}getPreviewEnd(){return this.previewEnd}setFMP(e){this.fmp=null===e?0:Math.floor(e)}getFMP(){return this.fmp}setInteractiveEnd(e){this.interactiveEnd=e}getInteractiveEnd(){return this.interactiveEnd}setTrueInteractiveEnd(e){this.trueInteractiveEnd=Math.floor(e)}
getTrueInteractiveEnd(){return Math.floor(this.trueInteractiveEnd)}getHasLoadedEditor(){return this.hasLoadedEditor}getIsInitial(){return this.getIsFullIssue()&&!this.getIsSPA()}getLocation(){const{route:e}=this.immutableState,t=null==e?void 0:e.name;return new y.a(t||"")}}var F=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),U=s("./src/packages/issue/issue-context-service/src/types.js");var V=(e=null)=>Object(c.i)("sidebar","modal","default")((e=>{switch(e){case U.a:return"modal";case U.b:return"sidebar";default:return null}})(e)||(()=>window.localStorage&&window.localStorage.getItem("gh.ghx-issue-fragment-view-mode")||"default")().replace(/"/g,""));const K=Object(m.createSelector)(F.e,F.K,F.x,((e,t,s)=>({analyticsKey:new y.a(e),viewMode:V(t),issueId:new y.a(s)})));function W(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function B(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?W(Object(s),!0).forEach((function(t){H(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function H(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $="issue.metrics";let G;const q=e=>{try{Object(o.setMark)(e)}catch(t){c.h.safeErrorWithoutCustomerData($,"Setting performance mark failed",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},z=()=>{q("ISSUE_FRAGMENT_READY_MARK")},Y=e=>{try{const{isLoadedWithPage:t,isSPA:s,isRecentIssue:n,recentIssuesCount:i,dataProvider:r,analyticsSource:o,store:c,route:l}=e;G=new N({isLoadedWithPage:t,isSPA:s,isRecentIssue:n,
analyticsSource:o,recentIssuesCount:i,correlationId:a.a.v4(),lazyMetricsProps:()=>K(c.getState()),timingDataReporter:()=>B(B({},f(c.getState())),Object(d.b)()),issueScaleabilityReporter:M(c),dataProvider:r,route:l}),p.b.mark("metrics_init")}catch(t){c.h.safeErrorWithoutCustomerData($,"Failed to initialise issue metrics",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},Q=()=>{q("ISSUE_START_RENDERING_MARK"),p.b.mark("ISSUE_START_RENDERING_MARK")},J=()=>{q("ISSUE_START_FETCHING_DATA"),p.b.mark("ISSUE_START_FETCHING_DATA")},Z=()=>{q("ISSUE_FETCHED_MARK"),p.b.mark("ISSUE_FETCHED_MARK")},X=({lastTransitionTime:e})=>{const t=G.getIsFullIssue();if(G.setInteractiveEnd(performance.now()),G){const s=e||G.getStartTime();G.getIsFullIssue()&&Object(l.d)("product",u.b,!0),p.b.stop({stopTime:G.getInteractiveEnd(),customData:B(B(B(B({},G.getIssueScaleabilityReporter()()),k()),t?{}:{embeddedIssueFMP:Math.floor(G.getFMP()),embeddedIssueTTI:Math.floor(G.getInteractiveEnd()-s),
analyticsSource:G.getAnalyticsSource()}),{isBentoRecentIssue:G.getIsRecentIssue(),bentoRecentIssuesCount:G.getRecentIssuesCount(),correlationId:G.getCorrelationId()})})}},ee=(e=!1)=>{e||p.a.start({startTime:performance.now()}),p.b.start()},te=({isInitialRender:e,lastTransitionStartTime:t})=>{const s=(()=>{const e=Object(o.getMark)(r.SPA_SSR_RENDERED_MARK);return null!=e?Math.floor(e.startTime):null})(),n=performance.now(),a=G.getStartTime();let i=0;i=G.getIsFullIssue()?e?s:n-(t||a):n-a,p.b.mark("ISSUE_PREVIEW_RENDERED"),G.setFMP(i),G.setPreviewEnd(n),q("ISSUE_PREVIEW_RENDERED")},se=e=>{G&&G.setIsLoadedWithPage(e)}},"./src/packages/issue/issue-view/src/common/model/comment-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={type:"public",value:""}},"./src/packages/issue/issue-view/src/common/model/linked-issue-type.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="INWARD",a="OUTWARD",i="BOTH",r=e=>{
switch(e.toUpperCase()){case n:return n;case a:return a;case i:default:return i}},o={[n]:n,[a]:a,[i]:i}},"./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const a=Object(n.b)("issue-changeboarding"),i="banner-seen-times",r="banner-first-seen-timestamp",o=()=>a.get(i)||0,c=e=>a.set(i,e),l=e=>a.set(r,e)},"./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return p}))
;var n=s("./node_modules/lodash/find.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/status-categories.js"),r=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=(e,t)=>{
const{fields:s}=e,n=a()(s,(e=>"issuetype"===e.schema.system)),c=a()(s,(e=>"priority"===e.schema.system)),u=a()(s,(e=>"summary"===e.schema.system)),d=a()(s,(e=>"status"===e.schema.system)),p=a()(s,(e=>"assignee"===e.schema.system)),m=p?(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(o.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(p.value):{},b=a()(s,(e=>"com.pyxis.greenhopper.jira:jsw-story-points"===e.schema.custom)),f=a()(s,(e=>"timetracking"===e.schema.system)),g=a()(s,(e=>"created"===e.schema.system)),h=a()(s,(e=>"updated"===e.schema.system));return l(l({id:e.id,issueLink:Object(r.f)(t,e.key),issueTypeIconUrl:n&&n.value.iconUrl,issueTypeName:n&&n.value.name,issuePriorityUrl:c&&c.value&&c.value.iconUrl||void 0,issuePriorityName:c&&c.value&&c.value.name||void 0,issueKey:e.key,issueSummary:u&&u.value,statusCategory:d&&d.value&&Object(i.statusCategoryForId)(d.value.statusCategory.id),
statusCategoryId:d&&d.value&&d.value.statusCategory.id,statusName:d&&d.value&&d.value.name||void 0,statusId:d&&d.value&&d.value.id||void 0,estimateFieldId:b&&b.key||void 0,estimateValue:b&&b.value||void 0,assigneeDisplayName:m.assigneeDisplayName,assigneeUrl:m.assigneeUrl,isLoading:!1,issueTimeTracking:f&&f.value||void 0},g&&g.content&&{created:g.content}),h&&h.content&&{updated:h.content})},p=(e=[],t)=>e?e.map((e=>d(e,t))):[]},"./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"e",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"c",(function(){return g}))
;var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const u=e=>({id:e.id,author:e.author?Object(l.c)(e.author):null,updateAuthor:e.updateAuthor?Object(l.c)(e.updateAuthor):null,bodyAdf:e.body,bodyHtml:void 0,visibility:e.visibility,createdDate:Object(a.a)(e.created),updatedDate:e.updated?Object(a.a)(e.updated):null,edited:!!e.updated&&e.updated!==e.created,isInternal:!e.jsdPublic
}),d=({id:e,author:t,updateAuthor:s,visibility:n,created:i,updated:o,bodyAdf:c,renderedBody:u,jsdPublic:d})=>({id:e,author:t?Object(l.b)(t):null,updateAuthor:s?Object(l.b)(s):null,visibility:n,createdDate:Object(a.a)(i),updatedDate:o?Object(a.a)(o):null,edited:!!o&&o!==i,bodyAdf:Object(r.a)(c),bodyHtml:u,isInternal:!d}),p=e=>({comments:e.data.issueComments.nodes.map((e=>d(e))),totalComments:e.data.issueComments.totalCount}),m=({type:e,value:t})=>{switch(e?e.toLowerCase():null){case"group":return{value:t,type:"group"};case"role":return{value:t,type:"role"};default:{const s=`transformCommentVisibility: unknown comment visibility type received '${e}'`;return i.h.safeErrorWithoutCustomerData("issue.transform.comment",s,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(s)})),{value:t,type:"role"}}}},b=e=>{const t=e.author?e.author.id:null,s=e.updateAuthor?e.updateAuthor.id:null;return{id:e.id,authorId:t,updateAuthorId:s,bodyAdf:e.bodyAdf,bodyHtml:e.bodyHtml,
createdDate:e.createdDate,updatedDate:e.updatedDate,edited:e.edited,visibility:e.visibility?m(e.visibility):o.a,isInternal:e.isInternal}},f=(e,t,s,n)=>{const{comments:a}=e,i=a.filter((e=>e.author)).map((e=>e.author)),r=Math.max("FETCH_NEWER_COMMENTS_REQUEST"===n?s-a.length:s,0);return{users:Object(c.b)(i,"id"),comments:Object(c.b)(a.map(b),"id"),loadedComments:t+a.length,commentsStartIndex:r,totalComments:e.totalComments}},g=(e,t,s,n,a)=>{const{comments:i}=e,r=i.filter((e=>e.author)).map((e=>e.author));let o;return o="FETCH_NEWER_COMMENTS_REQUEST"===n?Math.max("NEWEST_FIRST"===a?s-i.length:s,0):Math.max("NEWEST_FIRST"===a?s:s-i.length,0),{users:Object(c.b)(r,"id"),comments:Object(c.b)(i.map(b),"id"),loadedComments:t+i.length,commentsStartIndex:o,totalComments:e.totalComments}}},"./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return f}));const r=(e,t)=>t.includes("http")?t:e+t,o=(e,t)=>{if(t&&"icon"===t.type){const s=a({},t);return s.value.label=r(e,t.value.label),s}return t},c=(e,t)=>{const s=Object.keys(t)[0];return a(a({},e),{},{[s]:a(a({},t[s]),e[s])})},l=e=>"string"==typeof e?JSON.parse(e):e,u=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{
[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},label:{type:"text",value:e.content||e.name},status:o(l(e.iframe.options).origin,e.status),type:e.type}}}))).reduce(c,{}),d=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},tooltip:e.tooltip,type:e.type,showByDefault:!!e.showByDefault}}}))).reduce(c,{}),p=(e=[])=>e.map((({iframe:e,shouldReloadOnRefresh:t})=>({appKey:e.addonKey,moduleKey:e.moduleKey,options:l(e.options),shouldReloadOnRefresh:t}))),m=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options)}}}))).reduce(c,{}),b=(e=[])=>e.map((e=>({name:e.name,url:e.url,tooltip:e.tooltip,styleClass:e.styleClass}))),f=e=>({glances:u(e.glances),
contentPanels:d(e.contentPanels),backgroundScripts:p(e.backgroundScripts),operations:b(e.operations),activityPanels:m(e.activityPanels),ecosystemOnDate:e.ecoSystemOnDate,canInstallAddons:e.canInstallAddons||!1})},"./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p}));var n=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),a=s("./src/packages/platform/utils/permalinks/src/index.js"),i=s("./src/packages/platform/utils/permalinks/src/constants.js");const r=(e,t,s)=>`\n    comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${(()=>{const{hasPermalink:e,permalinkId:t}=Object(a.a)(i.a);return e?`commentId: ${t}`:""
})()}) {\n        nodes {\n            id\n            author {\n                accountId\n                displayName\n                avatarUrl\n            }\n            updateAuthor {\n                accountId\n                displayName\n                avatarUrl\n            }\n            visibility {\n                type\n                value\n            }\n            created\n            updated\n            renderedBody\n            jsdPublic\n            bodyAdf\n        }\n        totalCount\n        startIndex\n    }\n`;function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=()=>r(5,0,"-created"),d=e=>{const{comments:t}=e;if(!t)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:s,startIndex:a}=t,i={data:{issueComments:t}};return c(c({},Object(n.b)(Object(n.f)(i),0,a)),{},{totalComments:s,commentsStartIndex:a})},p=(e,t,s,a,i)=>{const{comments:r}=e;if(!r)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:o}=r,l={data:{issueComments:r}};return c(c({},Object(n.c)(Object(n.f)(l),t,s,a,i)),{},{totalComments:o})}},"./src/packages/issue/issue-view/src/common/service/issue/gira/index.js":function(e,t,s){"use strict"
;s.d(t,"c",(function(){return oe})),s.d(t,"a",(function(){return le})),s.d(t,"b",(function(){return ue}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js"),l=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),p=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js")
;var m=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),b=s("./node_modules/lodash/flatten.js"),f=s.n(b),g=s("./node_modules/lodash/isNumber.js"),h=s.n(g),y=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),O=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),v=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){w(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const S=e=>{if(!e.ecosystem||!e.fields)return{ecosystem:{},issueContentPanels:[],forgeIssueProperties:{collapsedPanels:[]}};const{ecosystem:t}=e,s=Object(v.a)(e.fields,"GlancesField"),n=s?s.value.map((e=>k(k({},e),{},{status:e.status?JSON.parse(e.status):null}))):[],{forgeCollapsedPanels:a,forgePanelsKeys:i}=(e=>{const t=e.forge?f()((e.forge.panels||[]).map((e=>{const{id:t,instances:s}=e;return(Array.isArray(s)?s:[]).filter((({added:e})=>h()(e))).map((({added:e,id:s,collapsed:n})=>({key:Object(y.f)(t,s,e),collapsed:n||!1})))}))):[];return{forgeCollapsedPanels:t.filter((({collapsed:e})=>e)).map((({key:e})=>e)),forgePanelsKeys:t.map((({key:e})=>e))}
})(t),r=t?(t.contentPanels||[]).filter((e=>e.manuallyAddedToIssue)).map((e=>`${e.iframe.addonKey}_${Object(O.b)(e.iframe.moduleKey)}`)):[],o=t.contentPanelsCustomised?["issue.content.panel.customised.flag"]:[],c={contentPanels:t.contentPanels||[],operations:t.operations||[],activityPanels:t.activityPanels||[],backgroundScripts:t.backgroundScripts||[],ecoSystemOnDate:t.ecoSystemOnDate||0,contentPanelsCustomised:t.contentPanelsCustomised};return{ecosystem:Object(j.b)(k(k({},c),{},{glances:n,canInstallAddons:!1})),issueContentPanels:[...i,...r,...o],forgeIssueProperties:{collapsedPanels:a}}
},C=()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n",I=({shouldRefreshComments:e}={})=>`\n    query issueViewDynamicQuery($issueKey: String!) {\n        viewIssue(issueKey: $issueKey) {\n            ${!0===e?Object(m.a)():""}  \n            ${(()=>(()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised \n      ${(()=>"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }")()}\n    }\n`)())()}\n            fields {\n                __typename \n                    ${(()=>"\n  ... on GlancesField {\n    fieldKey\n    value {\n      name\n      status\n      iframe {\n        addonKey\n        moduleKey\n        options\n      }\n      icon {\n        url\n      }\n      content\n      type\n    }\n  }\n")()}\n            }\n        }\n        ${(()=>`\n    jiraSettings {\n      ${C()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n    }\n`)()}\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n        ${Object(u.isActivitySortingEnabled)()?"activitySortOrder":""}\n    }\n`
;function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x={isTimeTrackingEnabled:!1,daysPerWeek:5,hoursPerDay:8,defaultUnit:"minute"},D=e=>({timeTrackingConfiguration:e.timeTracking||x});function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){M(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const R={CONTENT_VISIBLE:"visible",CONTENT_REQUEST:"request"},N={CONTEXT_PRIMARY:"primary",CONTEXT_SECONDARY:"secondary"},F={primary:[],secondary:[]},U=({itemId:e,type:t})=>({id:e,type:t}),V=e=>e.layoutItems.reduce(((e,{category:t,items:s})=>{const n=N[t];return void 0!==n?L(L({},e),{},{[`${n}`]:s.map(U)}):e}),F),K={visible:[],request:void 0},W=e=>e.layoutItems?e.layoutItems.reduce(((e,{category:t,items:s})=>{const n=R[t]
;return void 0!==n?L(L({},e),{},{[`${n}`]:s.map(U)}):e}),K):K;var B=s("./src/packages/platform/utils/types/src/license-state.js");function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const q=(e=[],t)=>{const s=e.find((e=>e.name===t));switch(s&&s.status){case"ACTIVE":return B.a;case"SUSPENDED":return B.c;case"EXPIRED":return B.b;default:return B.d}
},z=(e=[])=>({licensedProducts:e.reduce(((e,t)=>$($({},e),{},{[t.name]:"ACTIVE"===t.status})),{}),licenseStates:{core:q(e,"jira-core"),software:q(e,"jira-software"),serviceDesk:q(e,"jira-servicedesk")}});var Y=s("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js");var Q=s("./src/packages/issue/project-permissions-service/src/context.js"),J=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function Z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function X(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(s),!0).forEach((function(t){ee(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ee(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var te=s("./src/packages/rich-content/src/common/adf-parsing-utils.js");const se=e=>{const{accountId:t,displayName:s=null,avatarUrl:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n}},ne=e=>{const t=e.map((e=>(e=>{const{id:t,author:s,updateAuthor:n,created:a,updated:i,started:r,comment:o,timeSpent:c}=e,l=i!==a;return{id:t,author:s?se(s):null,updateAuthor:l&&n?se(n):null,updated:l?i:null,started:r,timeSpent:c,comment:Object(te.a)(o)}})(e)));return{worklogs:Object(v.b)(t,"id")}};s("./src/packages/platform/utils/permalinks/src/index.js");function ae(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ie(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(s),!0).forEach((function(t){re(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ae(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oe=e=>{const{activitySortOrder:t,viewIssue:s,licensedProducts:n,jiraSettings:a,permissions:i,myPreferences:r,mediaContext:o,project:c}=e;return ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie(ie({},(e=>({attachments:e.attachments}))(s)),Object(m.b)(s)),(e=>{const{worklogs:t}=e;if(!t)return{worklogs:{},sortedWorklogIds:[],totalWorklogs:0,worklogsStartIndex:0};const{totalCount:s,startIndex:n,nodes:a}=t,{worklogs:i}=ne(a);return{worklogs:i,sortedWorklogIds:Object(u.isActivitySortingEnabled)()?a.map((e=>e.id)):a.map((e=>e.id)).reverse(),
totalWorklogs:s,worklogsStartIndex:n}})(s)),S(s)),z(n)),(e=>{const t=D(e),s=((e={issueLinkTypes:[]})=>{const t=[];return e.issueLinkTypes.forEach((e=>t.push(...(({id:e,inward:t,outward:s})=>{const n=[];return t&&t===s?n.push({id:e,label:t,direction:"BOTH"}):(n.push({id:e,label:t,direction:"INWARD"}),n.push({id:e,label:s,direction:"OUTWARD"})),n})(e)))),{issueLinkTypes:t}})({issueLinkTypes:e.issueLinkTypes||[]}),n=(e=>({subtasksConfiguration:e.subtasks}))(e),a=(e=>({newIssueViewTransitionSettings:e.newIssueViewTransitionSettings}))(e);return{jiraSettings:P(P(P(P({},t),s),n),a)}})(a)),(e=>e&&0!==e.length?Object(J.d)({permissions:e.reduce(((e,t)=>X(X({},e),{},{[t.key]:t})),{})}):{permissions:Q.a})(i)),(e=>e?{myPreferences:e}:Object.freeze({}))(r)),(e=>({issueTypes:e?e.issueTypes:[],newIssueViewLockedIn:Boolean(e&&e.newIssueViewLockedIn)}))(c)),{},{contextItemsCategories:V(s),contentItemsCategories:W(s),issueSections:s.issueSections},(e=>e?Object(Y.a)(e):{})(o)),(e=>{const{remoteLinks:t}=e
;return t?{remoteLinks:t}:{remoteLinks:{isLinkingEnabled:!1,remoteLinkedIssues:[]}}})(s)),Object(u.isActivitySortingEnabled)()?{activitySortOrder:t}:{})},ce=e=>{let t=0;const s=e=>e.path?e.path.join("."):e.locations?e.locations.map((e=>`line ${e.line}, column ${e.column}`)).join("&"):(t+=1,`error without path or location: ${t}`),n=e.reduce(((e,t)=>ie(ie({},e),{},{[s(t)]:t.message})),{});return new a.a({eventNameSuffix:"issue.error.gira",type:"fetch",app:"issue",event:n})},le=async(e,t,s)=>{const a=Object(p.a)(s,(()=>n.Observable.fromPromise(Object(c.a)(e,t)))).toPromise(),{data:l,errors:u}=await a;if(!l){const e=u?JSON.stringify(ce(u)):"No data returned from graphql call";throw new d.a(new Error(e),o.a)}if(l&&u&&i.h.safeErrorWithoutCustomerData("issue.fetch.gira","Failed to fetch some data from gira",ce(u)),!l.viewIssue)throw new d.a(new r.a(404,"Call to gira returned empty viewIssue"),o.a);return oe(l)},ue=async(e,t,s)=>{const n=await Object(l.a)(e).query({query:I(s),variables:{
issueKey:t}}),{data:a,errors:r}=n;if(!a){const e=r?JSON.stringify(ce(r)):"No data returned from graphql call for dynamic data";throw new Error(e)}return a&&r&&i.h.safeErrorWithoutCustomerData("issue.fetch.gira.dynamic","Failed to fetch some data from gira for dynamic data fetch",ce(r)),Object(u.isActivitySortingEnabled)()?(e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n,activitySortOrder:a}=e;return ie(ie(ie(ie(ie({},t&&t.comments?Object(m.b)(t):{}),z(s)),S(t)),D(n)),{},{activitySortOrder:a})})(a):(e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n}=e;return ie(ie(ie(ie({},t&&t.comments?Object(m.b)(t):{}),z(s)),S(t)),D(n))})(a)}},"./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),
areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,tokenIssueTimestamp:Date.now()-1e4,collection:null}),i=e=>null!=e.clientId&&null!=e.endpointUrl&&null!=e.token&&null!=e.tokenDurationInMins&&null!=e.targetCollection?{clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4}:null!=e.error?{error:e.error}:null,r=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*Number(e.tokenDurationInMins)*1e3,tokenIssueTimestamp:Date.now()-1e4}),o=({readToken:e,uploadToken:t,userToken:s})=>({viewContext:e?a(e):null,uploadContext:t?i(t):null,userAuth:s?r(s):null})},"./src/packages/issue/issue-view/src/common/service/issue/gira/util.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const r=(e,t)=>e.find((e=>e.__typename===t)),o=(e,t)=>e.reduce(((e,s)=>a(a({},e),{},{[s[t]]:s})),{})},"./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return C})),s.d(t,"a",(function(){return I})),s.d(t,"b",(function(){return T})),s.d(t,"d",(function(){return P}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-view/src/feature-flags.js"),l=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),u=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),b=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const f=(e,t)=>[e.retry(2),t.retry(2)]
;var g=s("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),h=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=(e,t,s)=>a.a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            ${(e=>e?"":"viewScreenId")(s)}
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            ${Object(c.isSortingIssuesUnderEpicEnabled)()?"expandSystemDateTimesForChildIssues":""}
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            issueTypeHierarchy {
                baseLevelId
                levels {
                    id
                    aboveLevelId
                    belowLevelId
                }
            }
        }
    }`,S=(e,t,s,n,a)=>Object(u.a)(a,(()=>Object(i.a)(Object(O.d)(e),((e,t,s)=>({method:"POST",body:JSON.stringify({query:w(e,t,s)})}))(t,s,n)))).catch((e=>{throw new l.a(e,Object(O.d)(Object(r.b)("{baseUrl}")))})).map((e=>((e,t)=>{if(t.errors){const s=t.errors[0],n=new b.a(s.message);throw m.h.safeErrorWithoutCustomerData(e,"getGraphQlData: Error present in GraphQL response",new p.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:n})),n}return t.data})("issue.fetch.issue-fetch-server",e))).map((t=>Object(y.c)(t,e))),C=(e,t)=>{const s=Object(d.f)(e),a=Object(d.y)(e),i=Object(d.D)(e),r=Object(d.o)(e);return n.Observable.zip(...f(n.Observable.fromPromise(Object(g.b)(s,a,t)),S(s,a,i,r)),((e,t)=>E(E({},e),t)))},I=(e,t)=>{const s=Object(d.f)(e),a=Object(d.y)(e),i=Object(d.D)(e),r=Object(d.o)(e),c=n.Observable.fromPromise(Object(g.a)(s,a,t&&t.issueGiraData)).catch((e=>{throw new l.a(e,o.a)
})),u=S(s,a,i,r,t&&t.issueGraphqlData),p=Object(d.s)(e),m=Object(d.p)(e),b=!(p||m)?f(c,u):((e,t,s)=>[e.retry(2),t.retry(2),s.retry(2)])(c,u,Object(j.a)(s,i));return n.Observable.zip(...b,((e,t)=>E(E(E({},e),t),{},{issue:E(E({},t.issue),{},{contextItemsCategories:e.contextItemsCategories,contentItemsCategories:e.contentItemsCategories})})))},T=(e,t,s)=>n.Observable.from(t).bufferCount(50).flatMap((t=>((e,t,s)=>Object(i.a)(Object(O.o)(e),{method:"POST",body:JSON.stringify({jql:t,fields:s})}).map(y.b))(e,`key in (${t.join(",")})`,s))).reduce(((e,t)=>[...e,...t]),[]),P=(e,t)=>Object(i.a)(Object(O.g)(e,t)).map((t=>t.fields.issuelinks&&Object(h.b)(e,t.fields.issuelinks)))},"./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return f}))
;var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/index.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{statusCategoryForId:m}=i.a,b=(e,t=[])=>{let s={},n={};t&&t.filter(Boolean).forEach((({id:t,inwardIssue:i,outwardIssue:o,type:u})=>{let p,b,f=null;if(i?(b="inward",f=u.inward,p=i):o&&(b="outward",f=u.outward,p=o),f&&null!=p){const i={id:Object(r.j)(t),linkedIssueKey:p.key,direction:b,typeName:f,typeId:u.id};s=d(d({},s),{},{[t]:i});const o=((e,t)=>{const{id:s,key:n,fields:i}=e;return{id:s,issueKey:n,issueLink:Object(c.f)(t,e.key),issueSummary:i.summary,statusCategory:m(a()(e.fields,"status.statusCategory.id")),statusCategoryId:a()(e.fields,"status.statusCategory.id"),statusName:i.status&&i.status.name,statusId:i.status&&i.status.id,issuePriorityUrl:a()(i,"priority.iconUrl",null),issuePriorityName:a()(i,"priority.name",null),issueTypeIconUrl:a()(i,"issuetype.iconUrl",null),issueTypeName:a()(i,"issuetype.name",null),
assigneeDisplayName:i.assignee?Object(l.c)(i.assignee).displayName:null,assigneeUrl:i.assignee?Object(l.c)(i.assignee).avatarUrl:null}})(p,e);n=d(d({},n),{},{[o.issueKey]:o})}}));const i=s?Object.values(s).map((({linkedIssueKey:e})=>e)):[];return{issueLinks:s,linkedIssueKeys:i,linkedIssues:n}},f=e=>e.map((e=>{const{id:t,type:s}=e;return{id:t,type:s,inwardIssue:e.inwardIssue?Object(o.b)(e.inwardIssue):null,outwardIssue:e.outwardIssue?Object(o.b)(e.outwardIssue):null}}))},"./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return P})),s.d(t,"a",(function(){return D})),s.d(t,"c",(function(){return L})),s.d(t,"b",(function(){return M}))
;var n=s("./src/packages/platform/utils/constants/src/status-categories.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=(e,t)=>{const{fields:s}=e;return d(d({id:e.id,issueLink:Object(c.f)(t,e.key),issueTypeIconUrl:s.issuetype.iconUrl,issueTypeName:s.issuetype.name,issuePriorityUrl:s.priority&&s.priority.iconUrl||void 0,issuePriorityName:s.priority&&s.priority.name||void 0,issueKey:e.key,issueSummary:s.summary,statusCategory:Object(n.statusCategoryForId)(s.status.statusCategory.id),statusCategoryId:s.status.statusCategory.id,statusName:s.status.name,statusId:s.status.id},(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(l.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(s.assignee)),{},{isLoading:!1})}
;var b=s("./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js"),f=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");const g=(e=[],t)=>null===e?[]:e.map((e=>((e,t)=>({id:e.id,issueLink:Object(c.f)(t,e.key),issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issuePriorityUrl:e.fields.priority&&e.fields.priority.iconUrl||void 0,issuePriorityName:e.fields.priority&&e.fields.priority.name||void 0,issueKey:e.key,issueSummary:e.fields.summary,statusCategory:Object(n.statusCategoryForId)(e.fields.status.statusCategory.id),statusCategoryId:e.fields.status.statusCategory.id,statusId:e.fields.status.id,statusName:e.fields.status.name,isLoading:!1,hasError:!1,assigneeUrl:e.fields.assignee?Object(l.c)(e.fields.assignee).avatarUrl:null,assigneeDisplayName:e.fields.assignee?Object(l.c)(e.fields.assignee).displayName:null,issueTimeTracking:e.fields.timetracking}))(e,t)));function h(e,t){
if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v=e=>e?Object(a.a)(e):null,E=(e,t)=>e&&e[t],k=e=>e?{id:Object(i.j)(e.id),key:Object(i.l)(e.key),summary:e.fields.summary,issueTypeName:e.fields.issuetype?e.fields.issuetype.name:"",issueTypeIconUrl:e.fields.issuetype?e.fields.issuetype.iconUrl:""}:null,w=e=>({id:Number(e.id),level:null,aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}),S=e=>e?e.reduce(((e,t)=>O(O({},e),{},{[t.id]:w(t)})),{}):{},C=e=>e?{baseLevelId:Number(e.baseLevelId),levels:S(e.levels)}:null,I=e=>{if(e.project.avatarUrls){const t=e.project.avatarUrls.find((e=>"32x32"===e.key));return t?t.value:t}return e.project.avatarUrls},T=(e,t)=>{const s=(e=>e.reduce(((e,t)=>O(O({},e),{},{[t.key]:t})),{}))(e.issue.fields),a=(e=>t=>t?t.split(".").reduce(E,e):e)(s),i=a("subtasks.content"),r=a("parent-issue.content"),c=a("children-issues.content"),l=a("epic-issues.content"),u=a("portfolio-child-issues.content")
;let d=[];return c?d=Object(b.b)(c,t):l?d=Object(b.b)(l,t):u&&(d=((e=[],t)=>e?e.map((e=>m(e,t))):[])(u,t)),{project:{projectId:e.project.id,projectName:e.project.name,projectKey:e.project.key,projectType:e.project.projectTypeKey,isSimplified:e.project.simplified,avatarUrl:I(e),issueTypeHierarchy:Object(o.collapsedHierarchies)()?null:C(e.project.issueTypeHierarchy)},createdDate:v(a("created.content")),updatedDate:v(a("updated.content")),statuses:{[s.status.content.id]:{id:s.status.content.id,name:s.status.content.name,statusCategory:Object(n.statusCategoryForId)(s.status.content.statusCategory.id)}},issueLinks:s.issuelinks&&Object(f.b)(t,s.issuelinks.content),subtasks:g(i,t),parentIssue:k(r),childrenIssues:d}},P=e=>{
const{permissions:{ADMINISTER:t,ADMINISTER_PROJECTS:s,ASSIGN_ISSUES:n,EDIT_ISSUES:a,SCHEDULE_ISSUES:i,ADD_COMMENTS:r,DELETE_ALL_COMMENTS:o,DELETE_OWN_COMMENTS:c,EDIT_ALL_COMMENTS:l,EDIT_OWN_COMMENTS:u,CREATE_ISSUES:d,DELETE_ISSUES:p,MOVE_ISSUES:m,MODIFY_REPORTER:b,CREATE_ATTACHMENTS:f,DELETE_ALL_ATTACHMENTS:g,DELETE_OWN_ATTACHMENTS:h,WORK_ON_ISSUES:y,ASSIGNABLE_USER:O,LINK_ISSUES:j,VIEW_VOTERS_AND_WATCHERS:v,MANAGE_WATCHERS:E,EDIT_ALL_WORKLOGS:k,EDIT_OWN_WORKLOGS:w,DELETE_ALL_WORKLOGS:S,DELETE_OWN_WORKLOGS:C,USER_PICKER:I,VIEW_DEV_TOOLS:T,SERVICEDESK_AGENT:P,RESOLVE_ISSUES:_}}=e;return{permissions:{canAddComments:r.havePermission,canAdministerJira:t.havePermission,canAdministerProject:s.havePermission,canAssignIssues:n.havePermission,canBeAssignedToIssues:O.havePermission,canCloneIssue:d.havePermission,canCreateAttachments:f.havePermission,canCreateChildren:d.havePermission,canCreateIssuesInClassicProjectEpic:d.havePermission,canCreateSubtask:d.havePermission,
canDeleteAllAttachments:g.havePermission,canDeleteOwnAttachments:h.havePermission,canDeleteAllComments:o.havePermission,canDeleteOwnComments:c.havePermission,canDeleteIssue:p.havePermission,canEditAllComments:l.havePermission,canEditOwnComments:u.havePermission,canEditIssues:a.havePermission,canLinkIssues:j.havePermission,canLogWork:y.havePermission,canManageWatchers:E.havePermission,canMoveIssue:m.havePermission,canModifyReporter:b.havePermission,canScheduleIssues:i.havePermission,canViewWatchers:v.havePermission,canViewVoters:v.havePermission,canEditAllWorklogs:k.havePermission,canEditOwnWorklogs:w.havePermission,canDeleteAllWorklogs:S.havePermission,canDeleteOwnWorklogs:C.havePermission,canBrowseUsers:I.havePermission,canViewDevTools:!(!T||!T.havePermission),canUseServiceDeskAgentFeatures:!(!P||!P.havePermission),canResolveIssues:_.havePermission}}},_=e=>{
const{content:t,renderedContent:s,configuration:n}=e,a=h(e,["content","renderedContent","configuration"]),i=void 0!==t||void 0!==s;return O(O(O(O({},i?{value:t}:null),i?{renderedValue:s}:null),n&&{configuration:n}),a)},x=(e,t)=>{const s=((e,t)=>{const s=e.issue.systemFields[`${t}Adf`],n=e.issue.customFields.textareaAdf.find((e=>e.key===t));return s||n||null})(e,t);let n;n=s&&s.value?{value:s.value}:{value:r.c};const a="string"==typeof n.value?JSON.parse(n.value):n.value;return Object(r.h)(a)},D=e=>{const t=new Set(e.issue.fields.filter((e=>"atlassian-wiki-renderer"===e.schema.renderer)).map((e=>e.key))),s=e.issue.customFields.textareaAdf.map((e=>e.key)).filter((e=>t.has(e))),n=[...["description","environment"].filter((e=>t.has(e)||"description"===e)),...s].map((t=>({key:t,value:x(e,t)})));return e.issue.fields.map((e=>{const t=n.find((t=>t.key===e.key&&null!==t.value));return t?{[t.key]:O(O({},_(e)),{},{adfValue:t.value})}:{[e.key]:_(e)}})).reduce(((e,t)=>Object.assign(e,t)))
},A=e=>e?e.reduce(((e,{id:t,name:s,items:n})=>O(O({},e),{},{[t]:{id:t,name:s,items:n}})),{}):{},L=(e,t)=>{const s=T(e,t),n={issue:O({id:e.issue.id,agile:e.issue.agile,fields:D(e),tabs:A(e.issue.tabs)},e.issue.viewScreenId?{viewScreenId:e.issue.viewScreenId}:null)};return O(O({},n),s)},M=({issues:e=[]}={})=>e},"./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js":function(e,t,s){"use strict";s.d(t,"q",(function(){return n})),s.d(t,"f",(function(){return r})),s.d(t,"j",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"o",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"p",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"m",(function(){return g})),s.d(t,"n",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"h",(function(){return v})),s.d(t,"l",(function(){return k})),s.d(t,"k",(function(){return w}))
;const n=e=>e,a=/^([A-Z][A-Z0-9]+)-([0-9]*)$/i,i=e=>{if(e){const t=a.exec(e);if(t&&3===t.length)return t[1]}},r=(e,t)=>`${e}/browse/${t}`,o=(e,t)=>`${e}/browse/${t}`,c=(e,t)=>`${e}/rest/api/2/issue/${t}`,l=e=>`${e}/rest/api/2/search`,u=(e,t)=>`${e}/rest/api/2/issue/${t}?fields=issuelinks`,d=(e,t,s,n)=>`${e}/rest/api/2/issue/picker?currentIssueKey=${s}&showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(n)}&currentJQL=${encodeURIComponent(t)}`,p="(resolution = Unresolved or statusCategory != Done) ORDER BY priority DESC, updated DESC",m=(e,t,s)=>{let n=`project in projectsWhereUserHasPermission("Link Issues") AND ${p}`;const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),d(e,n,t,s)},b=(e,t,s)=>{let n="";const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),d(e,n,t,s)
},f=(e,t)=>`${e}/rest/api/2/issue/createmeta?projectKeys=${t}&expand=projects.issuetypes.fields`,g=e=>`${e}/rest/api/2/issueLink`,h=(e,t)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/${t}/createIssueLink`,y=e=>`${e}/rest/graphql/1/`,O=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.changeboarding.lastinteracted`,j=e=>`${e}/rest/confluenceIssueLink/1/confluence/applink`,v=(e,t)=>`${e}/rest/issueLinkAppLink/1/appLink/info?type=com.atlassian.applinks.api.application.jira.JiraApplicationType&issueIdOrKey=${t}`,E=(e,t,s,n)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/picker?showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(s)}&currentJQL=${encodeURIComponent(t)}&appId=${n}`,k=(e,t,s)=>{let n=p;const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),E(e,n,t,s)},w=(e,t,s)=>{let n="";const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),E(e,n,t,s)}},
"./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/query-string/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-context-service/src/types.js");const r=()=>a.a.parse(window.location.search).view||"",o=()=>r().includes("planning"),c=e=>e?e===i.b:o()||(()=>"detail"===r())()},"./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js")
;const l=e=>e.projects[0]?{subtaskTypes:e.projects[0].issuetypes.filter((e=>e.subtask)),issueTypes:e.projects[0].issuetypes}:{subtaskTypes:[],issueTypes:[]},u=(e,t,s)=>((e,t)=>Object(i.a)(e,{perf:r.f,headersProcessor:t&&t(r.f.key)}).map(l).catch((e=>(Object(o.a)("issue.issue-base.content.subtasks.type.subtasks-types-epic","Failed to fetch subtask types.",e,new a.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),n.Observable.of({subtaskTypes:[],issueTypes:[]})))))(Object(c.i)(e,t),s)},"./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"d",(function(){return h}));var n=s("./node_modules/lodash/every.js"),a=s.n(n),i=s("./node_modules/lodash/has.js"),r=s.n(i),o=s("./node_modules/lodash/partial.js"),c=s.n(o),l=s("./src/packages/platform/utils/types/src/general.js");function u(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=["accountId","displayName","avatarUrls","timeZone"],m=({accountId:e,displayName:t,avatarUrls:s,timeZone:n})=>({displayName:t,id:Object(l.a)(e),avatarUrl:s["48x48"],timeZone:n}),b=e=>{const{applicationRoles:t}=e;return t&&t.items&&t.items.map((e=>e.key))||[]},f=e=>{const t=e.find((e=>"48x48"===e.key));return t&&t.value||null},g=e=>{const{accountId:t,displayName:s,avatarUrl:n,avatarUrls:a,timeZone:i}=e;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:t,displayName:s,avatarUrl:n||f(a)},i?{timeZone:i}:{})},h=e=>{if(!e)throw new Error("User is null or undefined");if(!(e&&a()(p,c()(r.a,e))))throw new Error(`User object is not expected shape, keys present: ${Object.keys(e).toString()}`);return e}},"./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js":function(e,t,s){"use strict";var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js");t.a=Object(n.a)((e=>t=>`${e}/people/${t}`))},"./src/packages/issue/issue-view/src/common/service/mentions/issue-user-team-mention-provider.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("./node_modules/query-string/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/platform/services/mention-provider/src/services/user-mention-provider/index.js")
;function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l=e=>null==e||""===e?"":`${window.location.origin}/jira/people/team/${e}?ref=jira$&src=issue`,u=({accountId:e,teamId:t,name:s,avatarUrl:n,members:a,memberCount:r,includesYou:o})=>a?{id:Object(i.a)(t||""),name:s,accessLevel:"CONTAINER",userType:"TEAM",avatarUrl:n,context:{members:a.map((e=>(({accountId:e,name:t})=>({id:e,name:t}))(e))),memberCount:r||0,includesYou:o||!1,teamLink:l(t)}}:{name:s,mentionName:s,nickname:s,id:Object(i.a)(e||""),avatarUrl:n};class d extends r.a{constructor(e,t,s,a,i){super(e,t,s,i),this.teamHighlightEnabled=void 0,this.createTeamPath=void 0,this.mentionTypeaheadHighlightEnabled=()=>!0,
this.mentionTypeaheadCreateTeamPath=()=>this.createTeamPath,this.getQueryString=(e,t)=>Object(n.stringify)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({query:e||"",issueKey:this.issueKey,maxResults:20},t)),this.getUrl=e=>`${this.baseUrl}/rest/internal/2/userteam/mention/search?${e}`,this.createTeamPath=a}search(e,t){const s=this.getQueryString(e,t),n=this.getUrl(s);return this.activeSearches.add(e||""),Object(a.a)(n).mergeMap((e=>e.map(u))).reduce(((e,t)=>[...e,t]),[]).map((t=>({query:e||"",mentions:t}))).toPromise()}}},"./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/service/mentions/issue-user-team-mention-provider.js");const o=Object(n.createSelector)(a.f,a.y,a.a,i.F,((e,t,s,n)=>new r.a(e,t,s,`${e}/jira/people/search#createTeam`,n)))},"./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const d=i.default.div(["display:flex;"]),p=Object(i.default)(c.a)(["width:8px;"]);t.a=()=>a.a.createElement(l.a,null,a.a.createElement(c.b,null),a.a.createElement(o.a,{paddingTop:0,paddingBottom:0},a.a.createElement(o.a,{paddingTop:32,paddingBottom:12},a.a.createElement(u.a,{fontSize:14,lineHeight:16,intrusion:300})),a.a.createElement(d,null,a.a.createElement(r.a,null),a.a.createElement(p,null),a.a.createElement(u.a,{fontSize:40,lineHeight:40,intrusion:0
}))))},"./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;t.a=n.default.div(["width:","px;height:","px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMnB4IGNpcmNsZSBpbnNpZGUgNDBweCByZWN0PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPjwvZGVmcz4gICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iMzJweC1jaXJjbGUtaW5zaWRlLTQwcHgtcmVjdCIgZmlsbD0iI0ZGRkZGRiI+ICAgICAgICAgICAgPHBhdGggZD0iTTAsMCBMNDAsMCBMNDAsNDAgTDAsNDAgTDAsMCBaIE0yMCw0IEMxMS4xNjM0NDQsNCA0LDExLjE2MzQ0NCA0LDIwIEM0LDI4LjgzNjU1NiAxMS4xNjM0NDQsMzYgMjAsMzYgQzI4LjgzNjU1NiwzNiAzNiwyOC44MzY1NTYgMzYsMjAgQzM2LDExLjE2MzQ0NCAyOC44MzY1NTYsNCAyMCw0IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);"],5*a.e,5*a.e)
},"./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");t.a=n.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],(e=>e.paddingTop),a.a.N0,(e=>e.paddingBottom),a.a.N0)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=Object(n.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),r=n.default.div(["background-color:",";background-image:none;"],a.a.N0)
;t.b=n.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],i,a.a.N30,a.a.N30,a.a.N20,a.a.N30)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");t.a=n.default.div(["width:100%;display:flex;position:relative;"])},"./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;t.a=n.default.div(["position:relative;height:","px;border-right:","px solid ",";border-top:","px solid ",";border-bottom:","px solid ",";"],(e=>e.fontSize),(e=>e.intrusion),a.a.N0,(e=>(e.lineHeight-e.fontSize)/2),a.a.N0,(e=>(e.lineHeight-e.fontSize)/2),a.a.N0)},"./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/@atlaskit/activity-provider/dist/es2019/api/ActivityResource.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js");const r=Object(n.createSelector)(i.i,(e=>new a.a("/gateway/api/graphql",e)))},"./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/application.js"),i=s("./src/packages/platform/utils/types/src/edition.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const c=Object(n.createSelector)(o.F,(e=>e?Object(a.e)(e):null)),l=Object(n.createSelector)([r.c,c],((e,t)=>t?Object(i.f)(t,e):null))},"./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/memoize.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=i()(((e,t,s)=>({objectId:e,containerId:t,childObjectId:s})),((...e)=>e.join("_"))),d=Object(n.createSelector)(r.x,o.C,((e,{commentId:t})=>t||"NEW_OPTIMISTIC_COMMENT"),((e,t,s)=>u(e,t,s))),p=i()(((e,t,s)=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({objectId:String(e),containerId:String(t)},"string"==typeof s&&{childObjectId:s})),((e,t,s)=>`${String(e)}-${String(t)}-${String(s)}`)),m=(e,t)=>{
const{objectId:s,containerId:n,childObjectId:a}=d(e,{commentId:t});return p(s,n,a)}},"./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js":function(e,t,s){"use strict";s.d(t,"l",(function(){return d})),s.d(t,"a",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"B",(function(){return b})),s.d(t,"y",(function(){return f})),s.d(t,"x",(function(){return g})),s.d(t,"D",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"i",(function(){return O})),s.d(t,"A",(function(){return j})),s.d(t,"w",(function(){return v})),s.d(t,"C",(function(){return k})),s.d(t,"G",(function(){return w})),s.d(t,"j",(function(){return S})),s.d(t,"F",(function(){return C})),s.d(t,"k",(function(){return I})),s.d(t,"q",(function(){return T})),s.d(t,"e",(function(){return _})),s.d(t,"s",(function(){return x})),s.d(t,"o",(function(){return D})),s.d(t,"u",(function(){return A})),s.d(t,"p",(function(){return L})),s.d(t,"t",(function(){return M})),s.d(t,"r",(function(){
return R})),s.d(t,"E",(function(){return N})),s.d(t,"m",(function(){return F})),s.d(t,"h",(function(){return U})),s.d(t,"g",(function(){return V})),s.d(t,"I",(function(){return K})),s.d(t,"z",(function(){return W})),s.d(t,"d",(function(){return B})),s.d(t,"H",(function(){return $})),s.d(t,"K",(function(){return G})),s.d(t,"c",(function(){return q})),s.d(t,"v",(function(){return z})),s.d(t,"n",(function(){return J})),s.d(t,"J",(function(){return X}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),i=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/utils/types/src/license-state.js"),l=s("./src/packages/issue/issue-view/src/configurations.js"),u=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js")
;const d=e=>e.context,p=Object(n.createSelector)(d,(e=>e.atlassianAccountId)),m=Object(n.createSelector)(d,(e=>e.baseUrl)),b=Object(n.createSelector)(d,(e=>e.loginRedirectUrl)),f=Object(n.createSelector)(d,(e=>Object(o.l)(e.issueKey))),g=Object(n.createSelector)(d,(e=>e.issueId)),h=Object(n.createSelector)(f,(e=>Object(u.a)(e))),y=Object(n.createSelector)(d,(e=>void 0!==e.analyticsSource?new a.a(e.analyticsSource):void 0)),O=Object(n.createSelector)(d,(e=>e.cloudId||Object(o.c)(""))),j=(Object(n.createSelector)(d,(e=>e.isAnonymous)),
Object(n.createSelector)(d,(e=>e.locale))),v=Object(n.createSelector)(d,(e=>e.issueActions||[])),E=Object(n.createSelector)(d,(e=>e.contextItemCategories)),k=Object(n.createSelector)(E,(e=>e.primary)),w=Object(n.createSelector)(E,(e=>e.secondary)),S=Object(n.createSelector)(d,(e=>e.contentItemCategories.visible||[])),C=Object(n.createSelector)(d,(e=>e.contentItemCategories.request)),I=Object(n.createSelector)(k,w,((e,t)=>e.concat(t))),T=Object(n.createSelector)(S,((e,t)=>t),((e,t)=>e.map((e=>e.id)).includes(t))),P=Object(n.createSelector)(I,((e,t)=>t),((e,t)=>e.includes(t))),_=(Object(n.createSelector)(T,P,((e,t)=>e?"content":t?"context":"foundation")),
Object(n.createSelector)(d,(e=>e.applicationKey))),x=Object(n.createSelector)(y,(e=>!!e&&e.value===i.a.MOBILE_ISSUE)),D=Object(n.createSelector)(_,(e=>e===Object(l.l)().applicationKey||e===Object(l.o)().applicationKey)),A=Object(n.createSelector)(_,(e=>e===Object(l.m)().applicationKey)),L=Object(n.createSelector)(y,(e=>!!e&&e.value===i.a.BITBUCKET_ISSUE)),M=Object(n.createSelector)(_,(e=>e===Object(l.k)().applicationKey)),R=Object(n.createSelector)(d,(e=>!!e.ecosystemEnabled)),N=Object(n.createSelector)(d,(e=>e.rapidViewId)),F=Object(n.createSelector)(d,(e=>e.estimationStatistic||null)),U=Object(n.createSelector)(d,(e=>e.boardType)),V=Object(n.createSelector)(d,(e=>e.boardId)),K=Object(n.createSelector)(d,(e=>e.siteAdminStatus)),W=(Object(n.createSelector)(d,(e=>e.productCrossSellConfig)),
Object(n.createSelector)(d,(e=>e.licensedProducts))),B=Object(n.createSelector)(d,(e=>e.appPermissions)),H=Object(n.createSelector)(d,(e=>e.isModal)),$=Object(n.createSelector)(H,x,((e,t)=>!e&&!t)),G=Object(n.createSelector)(d,(e=>e.viewMode)),q=Object(n.createSelector)(d,(e=>e.appEditions)),z=Object(n.createSelector)(W,(e=>e&&!0===e["is.origo.jira.tempo-plugin"])),Y=Object(n.createSelector)(d,(e=>e.licenseStates)),Q=Object(n.createSelector)(Y,(e=>e&&e.software===c.a)),J=Object(n.createSelector)(W,Q,((e,t)=>e[r.a.JIRA_SOFTWARE]&&t)),Z=Object(n.createSelector)(Y,(e=>e&&e.serviceDesk===c.a)),X=Object(n.createSelector)(W,Z,((e,t)=>e&&e[r.a.JIRA_SERVICEDESK]&&t))},"./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js":function(e,t,s){"use strict";s.d(t,"s",(function(){return g})),s.d(t,"v",(function(){return y})),s.d(t,"e",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"q",(function(){return v})),s.d(t,"y",(function(){return E})),
s.d(t,"A",(function(){return k})),s.d(t,"z",(function(){return w})),s.d(t,"x",(function(){return S})),s.d(t,"a",(function(){return I})),s.d(t,"C",(function(){return T})),s.d(t,"p",(function(){return P})),s.d(t,"D",(function(){return _})),s.d(t,"m",(function(){return x})),s.d(t,"l",(function(){return D})),s.d(t,"d",(function(){return A})),s.d(t,"c",(function(){return L})),s.d(t,"F",(function(){return M})),s.d(t,"r",(function(){return R})),s.d(t,"o",(function(){return N})),s.d(t,"n",(function(){return F})),s.d(t,"h",(function(){return U})),s.d(t,"g",(function(){return V})),s.d(t,"i",(function(){return K})),s.d(t,"B",(function(){return W})),s.d(t,"E",(function(){return B})),s.d(t,"f",(function(){return H})),s.d(t,"G",(function(){return $})),s.d(t,"j",(function(){return G})),s.d(t,"k",(function(){return q})),s.d(t,"J",(function(){return Y})),s.d(t,"K",(function(){return Q})),s.d(t,"I",(function(){return J})),s.d(t,"H",(function(){return Z})),s.d(t,"u",(function(){return ee})),
s.d(t,"w",(function(){return te})),s.d(t,"t",(function(){return ie}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/issue-view/src/configurations.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const g=e=>e.fields||{},h=(e,t)=>i()(t,(t=>(t.schema&&t.schema.custom)===e)),y=(e,t)=>{let s=t[e];if(!s&&Object.keys(c.n).includes(e)){const n=c.n[e];s=h(n,t)}return s},O=e=>Object(n.createSelector)(g,(t=>h(e,t))),j=e=>Object(n.createSelector)(O(e),(e=>{const t=e?e.key.match(/customfield_(\d+)$/i):null;return t?+t[1]:null
})),v=e=>Object(n.createSelector)(g,(t=>y(e,t))),E=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes(o.k))),k=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("subtasks"))),w=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("portfolio-child-issues"))),S=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("children-issues"))),C=Object(n.createSelector)(g,(e=>Object.keys(e).map((t=>y(t,e))).filter(Boolean))),I=Object(n.createSelector)(g,(e=>Object.keys(e))),T=e=>!!e&&e.editable,P=e=>Object(n.createSelector)(v(e),(e=>e&&e.schema&&e.schema.configuration&&e.schema.configuration.reduce(((e,{key:t,value:s})=>b(b({},e),{},{[t]:s})),{}))),_=e=>Object(n.createSelector)(v(e),(e=>T(e))),x=e=>Object(n.createSelector)(v(e),(t=>t&&t.title?t.title:(r.h.safeWarnWithoutCustomerData("issue.field.selector",`${e} does not have a field title`),
""))),D=e=>Object(n.createSelector)(v(e),(e=>e&&e.key)),A=e=>Object(n.createSelector)(v(e),(e=>e&&e.autoCompleteUrl)),L=e=>Object(n.createSelector)(v(e),(e=>e?e.allowedValues:[])),M=e=>Object(n.createSelector)(v(e),(e=>!!e&&e.required)),R=e=>Object(n.createSelector)(v(e),(e=>e&&Object(d.b)(e))),N=e=>Object(n.createSelector)(v(e),(e=>e&&e.value)),F=e=>Object(n.createSelector)(v(e),(e=>e&&Object(p.a)(e))),U=e=>Object(n.createSelector)(v(e),(e=>e&&Object(u.a)(e))),V=e=>Object(n.createSelector)(v(e),(e=>e&&Object(u.b)(e))),K=e=>Object(n.createSelector)(v(e),(e=>e&&e.renderedValue)),W=e=>!!e&&void 0!==e.editingValue,B=e=>Object(n.createSelector)(v(e),(e=>W(e))),H=e=>Object(n.createSelector)(v(e),(e=>(e?e.fieldEditSessionId:null)||"")),$=e=>Object(n.createSelector)(v(e),(e=>!!e&&void 0!==e.pendingValue)),G=(e,t)=>Object(n.createSelector)(v(e),(e=>e&&(e.isInvalid?e.invalidMessage||t:null))),q=e=>Object(n.createSelector)(v(e),(e=>Boolean(e&&e.isInvalid))),z=e=>"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e||"environment"===e||"description"===e,Y=e=>Object(n.createSelector)((t=>Object(l.q)(t,e)),l.t,R(e),(e=>Object(n.createSelector)(v(e),(e=>e&&e.schema&&e.schema.renderer)))(e),((t,s,n,a)=>{
const i="description"===e,r=z(n)&&"atlassian-wiki-renderer"===a;return i||r})),Q=Object(n.createSelector)(g,(e=>e),((e,t)=>Object.keys(e).filter((e=>Y(e)(t))))),J=Object(n.createSelector)(Q,(e=>e),((e,t)=>e.some((e=>B(e)(t))))),Z=e=>Object(n.createSelector)(R(e),(e=>z(e))),X=Object(n.createSelector)(g,(e=>e),((e,t)=>Object.keys(e).filter((e=>Z(e)(t))))),ee=Object(n.createSelector)(X,(e=>e),((e,t)=>e.filter((e=>B(e)(t))))),te=Object(n.createSelector)(v("fixVersions"),v("versions"),((e,t)=>{const s=[];return e&&s.push(e.key),t&&s.push(t.key),s
})),se=["com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jira.plugin.system.customfieldtypes:float","ecosystemGlance","forgeGlance","com.atlassian.servicedesk:sd-request-feedback","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.jira.plugin.system.customfieldtypes:project"],ne=["timetracking","security","issuerestriction","timeoriginalestimate"],ae=["issuetype"],ie=Object(n.createSelector)(C,l.k,l.j,l.F,(e=>e),((e,t,s,n,a)=>{const i=[...t.map((e=>e.id)),...s.map((e=>e.id)),...n?n.map((e=>e.id)):[]];return e.filter((e=>((e,t)=>ae.includes(t)||e.indexOf(t)>-1)(i,e.key)&&e.editable&&(e=>!e||-1===se.indexOf(e.custom)&&-1===ne.indexOf(e.system))(e.schema))).map((e=>({value:e.key,
label:e.title,isRichTextField:Y(e.key)(a)})))}))},"./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"c",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/ui/field-config/src/index.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const c=e=>Object.values(Object(a.W)()).includes(e),l=e=>Object(n.createSelector)(Object(i.c)(e),(e=>!e||e.length>1)),u=e=>Object(n.createSelector)(o.f,Object(i.o)(e),((e,t)=>Boolean(e&&t&&t.rating))),d=e=>Object(n.createSelector)(Object(i.n)(e),(e=>Boolean(e&&(e.showField||e.hasEpicLinkFieldDependency)))),p=({fieldType:e,fieldId:t,state:s})=>{switch(e){case"com.atlassian.servicedesk:sd-request-feedback":return u(t)(s);case"com.atlassian.jpo:jpo-custom-field-parent":return d(t)(s);case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":return l(t)(s);case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":return(e=>Object(n.createSelector)(Object(i.n)(e),(e=>Boolean(e))))(t)(s);case"com.pyxis.greenhopper.jira:jsw-issue-color":return!1;default:return!0}},m=(e,t)=>{if(!Object(i.a)(t).includes(e))return!1;const s=Object(r.b)(Object(i.v)(e,Object(i.s)(t)));return!(void 0===s||!c(s))&&p({fieldType:s,fieldId:e,state:t})}},
"./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");t.a=e=>void 0!==e.editingValue?e.editingValue:Object(n.a)(e);const a=e=>e.editingValue||Object(n.b)(e)},"./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var n=s("./src/packages/issue/issue-view/src/configurations.js");const a=e=>(()=>[...Object(n.e)().filter((e=>!n.f.includes(e))),...Object.keys(n.n).map((e=>n.n[e])),"com.atlassian.jira.plugin.system.customfieldtypes:flagged"])().find((t=>t===e)),i=e=>{const t=e?e.schema:void 0;return t?a(t.custom)||t.system||t.type:void 0}},"./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),
t.a=e=>void 0!==e.pendingValue?e.pendingValue:e.value;const n=e=>e.pendingValue||e.adfValue||e.value},"./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return c})),s.d(t,"E",(function(){return l})),s.d(t,"H",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"j",(function(){return m})),s.d(t,"C",(function(){return b})),s.d(t,"D",(function(){return f})),s.d(t,"F",(function(){return g})),s.d(t,"u",(function(){return h})),s.d(t,"y",(function(){return y})),s.d(t,"x",(function(){return O})),s.d(t,"A",(function(){return j})),s.d(t,"z",(function(){return v})),s.d(t,"l",(function(){return E})),s.d(t,"m",(function(){return k})),s.d(t,"r",(function(){return w})),s.d(t,"s",(function(){return S})),s.d(t,"n",(function(){return C})),s.d(t,"w",(function(){return I})),s.d(t,"o",(function(){return T})),s.d(t,"p",(function(){return P})),s.d(t,"c",(function(){return _})),
s.d(t,"i",(function(){return x})),s.d(t,"h",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"B",(function(){return L})),s.d(t,"G",(function(){return M})),s.d(t,"b",(function(){return R})),s.d(t,"a",(function(){return N})),s.d(t,"v",(function(){return F})),s.d(t,"g",(function(){return U})),s.d(t,"q",(function(){return V})),s.d(t,"t",(function(){return K}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js")
;const c=e=>e.entities,l=Object(n.createSelector)(c,(e=>e?e.project:null)),u=e=>e.ui,d=Object(n.createSelector)(c,(e=>e.issue)),p=Object(n.createSelector)(c,(e=>e.refreshedOn)),m=Object(n.createSelector)(u,(e=>e.flags)),b=Object(n.createSelector)(l,(e=>e&&e.projectId?e.projectId:null)),f=Object(n.createSelector)(l,(e=>e?e.projectKey:null)),g=Object(n.createSelector)(l,(e=>e&&e.projectType?e.projectType:null)),h=Object(n.createSelector)(l,(e=>!!e&&e.isSimplified)),y=Object(n.createSelector)(c,r.a,((e,t)=>t?e.users[t]:null)),O=Object(n.createSelector)(c,r.a,((e,t)=>{const s=t?e.users[t]:null;return s?s.avatarUrl:null
})),j=Object(n.createSelector)(c,(e=>e.parentIssue)),v=Object(n.createSelector)(y,(e=>e?e.timeZone:void 0)),E=Object(n.createSelector)(d,(e=>e&&Object(i.j)(e.id))),k=Object(n.createSelector)(h,(e=>!e)),w=Object(n.createSelector)(u,(e=>"LOADING"===e.loadingStage)),S=Object(n.createSelector)(u,(e=>"PREVIEW"===e.loadingStage)),C=Object(n.createSelector)(u,(e=>"COMPLETE"===e.loadingStage)),I=Object(n.createSelector)(u,(e=>e.loadingStage)),T=Object(n.createSelector)(u,(e=>!(!e.issueDeletion||!e.issueDeletion.isDeleteIssueModalOpen))),P=Object(n.createSelector)(u,(e=>!!e.issueDeletion&&e.issueDeletion.isDeletingIssue)),_=Object(n.createSelector)(u,(e=>!!e.issueDeletion&&e.issueDeletion.didIssueDeleteFail)),x=Object(n.createSelector)(u,(e=>e.error)),D=Object(n.createSelector)(u,(e=>e.errorMessage)),A=Object(n.createSelector)(c,(e=>t=>t?e.users[t]:void 0)),L=Object(n.createSelector)(c,(e=>e.parentLevelIssues)),M=()=>"jira",R=Object(n.createSelector)(g,a.i),N=Object(n.createSelector)(M,r.i,((e,t)=>t?`ari:cloud:${e}:${t}`:null)),F=Object(n.createSelector)(N,E,((e,t)=>e&&t?`${e}:issue/${t}`:null)),U=Object(n.createSelector)((e=>e.agile),(e=>e&&e.epic&&e.epic.key||null)),V=Object(n.createSelector)(o.s,(e=>(e=>({}.hasOwnProperty.call(e,"epic-issues")))(e))),K=Object(n.createSelector)(g,(e=>"service_desk"===e))
},"./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.mediaContext,i=Object(n.createSelector)(a,(e=>e&&e.userAuth||null)),r=Object(n.createSelector)(a,(e=>e&&e.viewContext||null)),o=Object(n.createSelector)(a,(e=>e&&e.uploadContext||null))},"./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"h",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"e",(function(){return y})),s.d(t,"i",(function(){return O})),s.d(t,"g",(function(){return j})),s.d(t,"f",(function(){return v}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/mapValues.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const l=Object(n.createSelector)(c.f,(e=>e.applicationRoles)),u=Object(n.createSelector)(c.f,(e=>e.permissions)),d=new Set(["canUseServiceDeskAgentFeatures","canEditIssues","canTransitionIssues","canScheduleIssues","canMoveIssue","canAssignIssues","canBeAssignedToIssues","canDeleteIssue","canManageWatchers","canEditAllComments","canDeleteAllComments","canDeleteAllAttachments","canLogWork","canEditOwnWorklogs","canEditAllWorklogs","canDeleteOwnWorklogs","canDeleteAllWorklogs","canResolveIssues","canViewReadonlyWorkflow","canCloseIssues","canModifyReporter","canSetIssueSecurity"]),p=Object(n.createSelector)(l,o.d,c.F,u,o.J,((e,t,s,n,a)=>"service_desk"===s&&a?Object(r.isUseAppPermissionsFromTenantContextEnabled)()?((e,t)=>{const{canUseServiceDeskAgentFeatures:s}=t;return i()(t,((t,n)=>d.has(n)?t&&e&&s:t))})(t.hasServiceDeskAccess,n):((e,t)=>{const s=e&&e.includes("jira-servicedesk"),{canUseServiceDeskAgentFeatures:n}=t;return i()(t,((e,t)=>d.has(t)?e&&s&&n:e))
})(e||[],n):n)),m=Object(n.createSelector)(p,(e=>!!e.canBeAssignedToIssues)),b=Object(n.createSelector)(p,(e=>!!e.canAdministerProject)),f=Object(n.createSelector)(p,(e=>!!e.canAdministerJira)),g=Object(n.createSelector)(p,(e=>e.canViewWatchers)),h=Object(n.createSelector)(p,(e=>e.canManageWatchers)),y=Object(n.createSelector)(p,(e=>e.canModifyReporter)),O=Object(n.createSelector)(g,h,((e,t)=>({canViewWatchers:e,canManageWatchers:t}))),j=(Object(n.createSelector)(p,(e=>e.canBrowseUsers)),Object(n.createSelector)(p,(e=>e.canViewDevTools))),v=Object(n.createSelector)(p,(e=>e.canUseServiceDeskAgentFeatures))},"./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const o=e=>Object(n.createSelector)(i.a,(t=>t&&e?`${t}:comment/${e}`:null)),c=Object(n.createSelector)(r.h,a.i,((e,t)=>!(!e.canAddComments||!t)))},"./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return g})),s.d(t,"c",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"l",(function(){return E})),s.d(t,"f",(function(){return T})),s.d(t,"j",(function(){return P})),s.d(t,"e",(function(){return _})),s.d(t,"d",(function(){return x})),s.d(t,"m",(function(){return L})),s.d(t,"a",(function(){return M})),s.d(t,"g",(function(){return N})),
s.d(t,"k",(function(){return F})),s.d(t,"n",(function(){return U}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isNumber.js"),i=s.n(a),r=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),l=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const f=Object(n.createSelector)(m.f,(e=>e.jiraSettings.timeTrackingConfiguration)),g=Object(p.o)("timetracking"),h=Object(n.createSelector)(f,(e=>e.isTimeTrackingEnabled)),y=Object(n.createSelector)(h,p.a,((e,t)=>e&&t.includes("timetracking"))),O=Object(n.createSelector)(y,b.h,d.s,((e,t,s)=>e&&t.canLogWork&&!s)),j=Object(n.createSelector)(m.H,(e=>e.worklog)),v=Object(n.createSelector)(j,(e=>e.modal)),E=Object(n.createSelector)(j,(e=>e.loadingStage)),k=Object(n.createSelector)(Object(p.o)("subtasks"),Object(p.o)("children-issues"),c.f,c.b,o.collapsedHierarchies,((e,t,s,n,a)=>a?null!=t&&t.length&&Object(r.a)(n)?t:e:null!=t&&t.length&&0===s?t:e)),w=Object(n.createSelector)(l.a,u.b,c.f,c.b,o.collapsedHierarchies,((e,t,s,n,a)=>a?t||Boolean(null==e?void 0:e.length)&&Object(r.a)(n):t||Boolean(null==e?void 0:e.length)&&0===s)),S=(e,t)=>i()(e)||i()(t)?(e||0)+(t||0):e,C=(e,t)=>{var s;return Array.isArray(e)?null===(s=e.find((e=>e.key===t)))||void 0===s?void 0:s.value:e&&e[t]
},I=Object(n.createSelector)(k,m.m,((e,t)=>{if(!Object(o.isOriginalEstimateAvailableInNextGen)())return!0;if(t)return!0;if(!e||0===e.length)return!1;return e.map((e=>C(e.fields,"timetracking"))).filter(Boolean).length>0})),T=Object(n.createSelector)(w,I,((e,t)=>e&&t)),P=Object(n.createSelector)(g,k,((e,t)=>s=>t&&0!==t.length&&s?t.map((e=>C(e.fields,"timetracking"))).filter(Boolean).reduce(((e,t)=>({originalEstimateSeconds:S(e.originalEstimateSeconds,t.originalEstimateSeconds),timeSpentSeconds:S(e.timeSpentSeconds,t.timeSpentSeconds),remainingEstimateSeconds:S(e.remainingEstimateSeconds,t.remainingEstimateSeconds)
})),e):e)),_=Object(n.createSelector)(v,(e=>e.openModal)),x=Object(n.createSelector)(v,(e=>e.isSaving)),D=Object(n.createSelector)(v,(e=>e.activeWorklogId)),A=Object(n.createSelector)(m.f,(e=>e.worklog)),L=Object(n.createSelector)(A,(e=>e.worklogs)),M=Object(n.createSelector)(D,L,((e,t)=>e&&t[e]||null)),R=Object(n.createSelector)(A,(e=>e.sortedWorklogIds)),N=Object(n.createSelector)(L,R,((e,t)=>t.map((t=>e[t])))),F=Object(n.createSelector)(A,(e=>e.totalWorklogs)),U=Object(n.createSelector)(A,(e=>e.worklogsStartIndex||0))},"./src/packages/issue/issue-view/src/common/styles/issue-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const i=n.default.span(["color:",";"],a.a.N300),r=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),o=n.default.div(["",";"],r),c=e=>Object(n.css)(["","::-webkit-scrollbar{width:8px;background:transparent;}","::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px;}"],e,e),l=Object(n.css)(["font-size:1em;line-height:1.714;font-weight:normal;margin-top:1.143;margin-bottom:0;letter-spacing:-0.005em;overflow-y:auto;overflow-x:hidden;width:100%;height:auto;white-space:pre-line;"]),u=n.default.div(["",";"],l),d=n.default.div(["",";max-height:","ex;",";"],l,(e=>2.5*(e.maxRows?e.maxRows:2)),c("&"))},"./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./node_modules/moment-timezone/index.js"),a=s.n(n);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(e,t,s)=>{if(!t)return null;const n={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0},i=s?r(r({},n),{},{timeZone:s}):r({},n),o=a()(t).valueOf();return e.formatDate(o,i)},l=(e,t,s,n)=>{const i=a.a.tz(e,n);return i.isValid()&&e?{dateValue:i.format("YYYY-MM-DD"),timeValue:i.format("HH:mm"),zoneValue:i.format("ZZ")}:{dateValue:t,timeValue:s,
zoneValue:a()().tz(n).format("ZZ")}}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>{if(!e)return;const t=getComputedStyle(e),s=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0);return e.clientHeight-s}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t=!0)=>{if(!e||!e.parentElement)return null;let s=getComputedStyle(e);const n=t&&"absolute"===s.position,a=/(auto|scroll)/;if("fixed"===s.position)return document.body;for(let i=e.parentElement;i;i=i&&i.parentElement){s=getComputedStyle(i);if(!(n&&"static"===s.position)&&a.test(s.overflow+s.overflowY+s.overflowX))return i}return null}},"./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}))
;var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.q)(e.split("-")[0])},"./src/packages/issue/issue-view/src/common/util/errors/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const r=(e,t,s,r)=>{s instanceof TypeError&&Object(i.c)(s)?((e,t,s)=>{Object(a.a)({error:s,attributes:{message:t},meta:{id:e,packageName:"jiraIssueView"}})})(e,t,s):r&&n.h.safeErrorWithoutCustomerData(e,t,r)}},"./src/packages/issue/issue-view/src/common/util/events/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return c}))
;const n=e=>e&&e instanceof KeyboardEvent&&27===e.keyCode,a=e=>13===e.keyCode,i=e=>0===e.button,r=e=>i(e)&&!(e.metaKey||e.ctrlKey),o=e=>1===e.button,c=e=>i(e)&&(e.metaKey||e.ctrlKey)},"./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/flow.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js");t.a=(e=[],t)=>s=>a()(...e,Object(i.a)({FallbackComponent:t}))(s)},"./src/packages/issue/issue-view/src/common/util/get-element/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>document.querySelector(".issue-app-modal-ak-dropdown-portal"),a=()=>document.querySelector(".issue-app-modal-editor-dropdown-portal")},"./src/packages/issue/issue-view/src/common/util/safe-component/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return f}))
;var a=n("./node_modules/react/index.js"),i=n.n(a),r=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/node-env.js");const l="issue.error-boundary.";class u{constructor(t){this.logLocation=void 0,this.handleError=(e,t)=>o.h.safeErrorWithoutCustomerData(this.logLocation,"An uncaught error has occurred in a React component",new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}})),this.callSafely=(t,s,...n)=>{try{return s&&s.apply(t,n)}catch(e){this.handleError(e)}return null},this.logLocation=`${l}${t}`}}const d=e=>!!e.prototype&&e.prototype.isReactComponent,p=(e,t)=>{const s=e,n=Object.getOwnPropertyDescriptor(s,"prototype");return Boolean(n&&n.value&&n.value[t])
},m=["componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","componentDidUpdate"],b=(e,t,s)=>{var n,r;const f=s||(e=>e.displayName||e.name||"UnsafeComponent")(e),g=new u(s?`Fallback(${f})`:f);t&&((e,t)=>{const s=d(e)?e:e().type;if(!s)return;const n=[];if(m.forEach((e=>{p(s,e)&&n.push(e)})),n.length){const e="\t\t",s=`The fallback component provided for '${t}' defines the following unsupported lifecycles methods:\n${e}${n.join(`\n${e}`)}`;Object(c.a)()?console.warn(s):o.h.safeWarnWithoutCustomerData(`${l}${t}`,s)}})(t,f);let h=e;if(d(e)&&p(e,"componentWillUnmount")){class t extends e{componentWillUnmount(){g.callSafely(this,super.componentWillUnmount)}}t.displayName=f,h=t}const y={hadError:!1,isInternalRender:!1};return r=n=class extends a.Component{constructor(...e){super(...e),this.state=y}componentDidCatch(e,t){g.handleError(e,t.componentStack),this.setState({hadError:!0,isInternalRender:!0})}render(){if(this.state.hadError){
if(!t)return null;const e=b(t,null,f);return i.a.createElement(e,this.props)}return i.a.createElement(h,this.props)}},n.displayName=`${(()=>s?"Fallback":t?"SafeWithFallback":"Safe")()}(${f})`,n.getDerivedStateFromProps=(e,t)=>t.hadError&&!t.isInternalRender?y:{isInternalRender:!1},r},f=(e={})=>t=>b(t,e.FallbackComponent)},"./src/packages/issue/issue-view/src/common/util/scroll/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/scroll-into-view-if-needed/es/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r=(e,t=Object.freeze({}))=>{e&&Object(n.default)(e,function(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:300},t))},o=e=>{e&&r(e,{centerIfNeeded:!0})}},"./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/isFinite.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");t.a=e=>{const t=Object(i.a)(1,1)(e);return null!==t&&a()(t)}},"./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js":function(e,t,s){"use strict";t.a=(e,t)=>{const s=[{suffix:"w",seconds:e*t*60*60},{suffix:"d",seconds:60*t*60},{suffix:"h",seconds:3600},{suffix:"m",seconds:60}];return e=>{const t={secondsRemaining:e,
timeString:""};return s.reduce(((e,t)=>{if(t.seconds<=0)return e;const s=Math.floor(e.secondsRemaining/t.seconds);return{secondsRemaining:s>=1?e.secondsRemaining%t.seconds:e.secondsRemaining,timeString:s>=1?`${e.timeString} ${s}${t.suffix}`:e.timeString}}),t).timeString.trim()||"0m"}}},"./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js":function(e,t,s){"use strict";const n=/^(\d+(?:\.\d+)?)([wdhm])$/,a=e=>{const t=n.exec(e);return t?{quantity:parseFloat(t[1]),unit:t[2]}:null};t.a=(e,t)=>{const s=[{unit:"w",seconds:e*t*60*60},{unit:"d",seconds:60*t*60},{unit:"h",seconds:3600},{unit:"m",seconds:60}];return e=>{const t=e.split(" ").map(a);let n=0,i=0;for(let a=0;a<s.length&&n!==t.length;a+=1){const e=s[a],r=t[n];if(!r)return null;r.unit===e.unit&&(i+=r.quantity*e.seconds,n+=1)}return n<t.length?null:Math.floor(i)}}},"./src/packages/issue/issue-view/src/common/util/types/type-check/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){
return n}));const n=e=>e.length>0&&!Number.isNaN(Number(e))},"./src/packages/issue/issue-view/src/configurations.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"n",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"m",(function(){return b})),s.d(t,"l",(function(){return f})),s.d(t,"o",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"j",(function(){return y})),s.d(t,"k",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"h",(function(){return v}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");const i="com.atlassian.jpo:jpo-custom-field-parent",r="flagActions",o={epic:"com.pyxis.greenhopper.jira:gh-epic-link",sprint:"com.pyxis.greenhopper.jira:gh-sprint",
storyPointsField:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.teams:rm-teams-custom-field-team":"com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent":"com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start":"com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end":"com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color":"com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:gh-epic-color":"com.pyxis.greenhopper.jira:gh-epic-color"
},c=["number","string","datetime","option2","array"],l=["com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.servicedesk:sd-request-feedback","com.atlassian.servicedesk.approvals-plugin:sd-approvals","com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list","com.atlassian.servicedesk:vp-origin","com.atlassian.jira.plugins.cmdb:cmdb-object-cftype","com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype"],u=()=>["com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:project","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield",...Object(a.isEpicStatusEnabled)()?["com.pyxis.greenhopper.jira:gh-epic-status"]:[],...c,...l],d={
software:"https://confluence.atlassian.com/jirasoftwarecloud/configure-field-layout-in-the-issue-view-961798059.html",business:"https://confluence.atlassian.com/jiracorecloud/configure-field-layout-in-the-issue-view-961798123.html",service_desk:"https://support.atlassian.com/jira-service-desk-cloud/docs/what-are-the-different-sections-in-the-issue-view/"},p=()=>({issueActions:[]}),m=()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}),b=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:[r],ecosystemEnabled:!0}),f=()=>({applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:[r,"cardCoverActions"],ecosystemEnabled:!0}),g=()=>({applicationKey:n.a.STANDARD_ROADMAP_ISSUE,issueActions:[r],ecosystemEnabled:!0}),h=()=>({applicationKey:n.a.BITBUCKET_ISSUE,issueActions:[]}),y=()=>({applicationKey:n.a.MOBILE_ISSUE,issueActions:[]}),O=()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}),j=()=>({applicationKey:n.a.CONNECT_ISSUE,issueActions:[],
ecosystemEnabled:!0}),v=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?f():b();case"business":return m();case"service_desk":return O();default:return b()}return b()}},"./src/packages/issue/issue-view/src/drafts/draft-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"g",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"a",(function(){return d}));const n=(e,t,s)=>({type:"SAVE_DRAFT_REQUEST",payload:{fieldId:e,value:t,serverValue:s}}),a=(e,t)=>({type:"SAVE_DRAFT_SUCCESS",payload:{draftKey:e,value:t}}),i=e=>({type:"SAVE_DRAFT_FAILURE",payload:e}),r=(e,t,s,n)=>({type:"LOAD_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t,draftHandler:s,serverValue:n}}),o=(e,t)=>({type:"LOAD_DRAFT_SUCCESS",payload:{fieldId:e,value:t}}),c=(e,t)=>({type:"LOAD_DRAFT_FAILURE",
payload:{fieldId:e,error:t}}),l=({fieldId:e,draftKey:t})=>({type:"DELETE_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t}}),u=e=>({type:"DELETE_DRAFT_SUCCESS",payload:{fieldId:e}}),d=(e,t)=>({type:"DELETE_DRAFT_FAILURE",payload:{fieldId:e,error:t}})},"./src/packages/issue/issue-view/src/drafts/draft-utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=(e,t,s)=>`${String(e)}.${t}.${s}`,a=e=>e.split(".")[2],i=e=>`${e}-previous-hash`,r=e=>`comment_${e}`},"./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js");t.a=(e,t,s)=>{Object(n.b)((n=>{n&&n.broadcastEvent(e,t,s)}))}},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js");const a=e=>{Object(n.a)({name:"ac/create",wrmKeys:["wrc!com.atlassian.plugins.atlassian-connect-plugin:jira-atlassian-connect-resources-v5","wrc!com.atlassian.jira.jira-atlaskit-plugin:sidebar"]}).then((()=>e(window.connectHost)))};t.a=()=>window.connectHost},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return h})),s.d(t,"p",(function(){return y})),s.d(t,"n",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"o",(function(){return v})),s.d(t,"m",(function(){return I})),s.d(t,"i",(function(){return T})),s.d(t,"l",(function(){return P})),s.d(t,"b",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"k",(function(){return D})),s.d(t,"f",(function(){return L})),s.d(t,"d",(function(){return M})),s.d(t,"r",(function(){return R})),s.d(t,"q",(function(){return N})),s.d(t,"j",(function(){return F})),
s.d(t,"a",(function(){return U})),s.d(t,"e",(function(){return V}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/flatten.js"),i=s.n(a),r=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),o=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),c=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const h=Object(n.createSelector)(p.a,(e=>e.backgroundScripts||[])),y=Object(n.createSelector)(u.f,(e=>e.issueContentPanels||[])),O=Object(n.createSelector)(u.f,(e=>!!e.issueContentPanels&&e.issueContentPanels.includes("issue.content.panel.customised.flag"))),j=Object(n.createSelector)(d.b,(e=>e)),v=Object(n.createSelector)(u.f,(e=>e.ecosystem&&!!e.ecosystem.ecosystemOnDate&&Date.parse(e.createdDate)>e.ecosystem.ecosystemOnDate)),E=e=>Object.keys(e||{}).map((t=>Object.values(e?e[t]:{}))),k=Object(n.createSelector)(p.a,(e=>[].concat(...E(e.glances)))),w=Object(n.createSelector)(p.a,(e=>[].concat(...E(e.contentPanels)))),S=Object(n.createSelector)(p.a,(e=>[].concat(...E(e.activityPanels)))),C=e=>Object(n.createSelector)(l.r,e,((e,t)=>e&&t||[])),I=C(Object(n.createSelector)(k,(e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,icon:e.icon&&e.icon.url&&{url:e.icon.url},label:e.label,status:e.status,type:e.type,glanceType:"CONNECT_ENTITY_TYPE"
})))))),T=Object(n.createSelector)([m.d,I],((e,t)=>[...e,...t])),P=(e,t)=>Object(n.createSelector)(p.a,(s=>s&&s.glances&&s.glances[e]&&s.glances[e][t])),_=C(Object(n.createSelector)(w,(e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,tooltip:e.tooltip,iconUrl:e.icon&&e.icon.url,type:e.type,showByDefault:e.showByDefault})))))),x=Object(n.createSelector)([m.k,_],((e,t)=>[...e,...t])),D=Object(n.createSelector)([m.k,_],((e,t)=>[...e,...t])),A=(e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.name.toLowerCase();if("FORGE_ENTITY_TYPE"===t.type){const e=t.name.toLowerCase();return s<e?-1/0:s>e?1/0:0}return 1/0}return 1/0},L=C(Object(n.createSelector)(y,x,O,v,l.b,((e,t,s,n,a)=>{const l=t.map((t=>{if("FORGE_ENTITY_TYPE"===t.type){const s=t;if(!s.iconUrl)return s;const n=`${s.appKey}/${s.moduleKey}-`,i=e.filter((e=>Object(o.b)(e,n))).map((e=>{const t=Object(c.a)(e);return null==t&&Object(r.b)(a,{error:Error(`Panel key doesn't match regexp: ${e}`)}),t&&f(f({},s),{},{
dateAdded:t.added,panelInstanceId:t.id})})).filter(Boolean);return i.length>0&&i}if(!s&&!n)return t;return(e.includes(`${t.appKey}_${t.moduleKey}`)||e.includes(`${t.appKey}_${Object(c.b)(t.moduleKey,10)}`)||t.showByDefault)&&t}));return i()((e=>e.map((e=>[].concat(e))).sort(((e,t)=>((e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.dateAdded||1;return"FORGE_ENTITY_TYPE"===t.type?s-(t.dateAdded||1):s}return 1/0})(e[0],t[0]))))(l.filter(Boolean)))}))),M=(e,t)=>Object(n.createSelector)(p.a,(s=>s&&s.contentPanels&&s.contentPanels[e]&&s.contentPanels[e][t])),R=(e,t)=>Object(n.createSelector)(p.a,(s=>s&&s.selectedContentPanel&&(s.selectedContentPanel===`${e}_${t}`||s.selectedContentPanel===`${e}_${Object(c.b)(t,10)}`))),N=C(Object(n.createSelector)(p.a,(e=>e.operations||[]))),F=C(Object(n.createSelector)([m.f,N],((e,t)=>[...e,...t]))),U=Object(n.createSelector)(l.r,S,((e,t)=>e?t.map((e=>({name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,type:"CONNECT_ENTITY_TYPE"
}))):[])),V=Object(n.createSelector)([m.g,U],((e,t)=>[...e,...t].sort(A)))},"./src/packages/issue/issue-view/src/ecosystem/entities-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");const r=Object(n.createSelector)(a.f,(e=>e.ecosystem||{})),o=Object(n.createSelector)(a.f,(e=>e.forge||i.b))},"./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return j})),s.d(t,"f",(function(){return v})),s.d(t,"k",(function(){return E})),s.d(t,"j",(function(){return k})),s.d(t,"m",(function(){return C})),s.d(t,"n",(function(){return T})),s.d(t,"a",(function(){return _})),s.d(t,"b",(function(){return D})),s.d(t,"c",(function(){return A})),
s.d(t,"o",(function(){return L})),s.d(t,"h",(function(){return M})),s.d(t,"g",(function(){return R})),s.d(t,"i",(function(){return N})),s.d(t,"l",(function(){return F})),s.d(t,"e",(function(){return U}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),r=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),o=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=(e,t)=>e.filter((e=>Object(i.a)(e,t))),y=(e,t)=>e.name===t.name?0:e.name>t.name?1:-1,O=Object(n.createSelector)(d.h,c.x,c.y,p.g,u.C,c.D,u.F,((e,t,s,n,a,i,r)=>({issueId:t||null,issueKey:s,issueType:n,projectId:a,projectKey:i,projectType:r||null,canAddComments:e.canAddComments,canAdministerJira:e.canAdministerJira,canAdministerProjects:e.canAdministerProject,canAssignIssues:e.canAssignIssues,
canBeAssignedToIssues:e.canBeAssignedToIssues,canCloneIssues:e.canCloneIssue,canCreateAttachments:e.canCreateAttachments,canCreateChildren:e.canCreateChildren,canCreateSubtasks:e.canCreateSubtask,canDeleteAllAttachments:e.canDeleteAllAttachments,canDeleteAllComments:e.canDeleteAllComments,canDeleteAllWorklogs:e.canDeleteAllWorklogs,canDeleteIssues:e.canDeleteIssue,canDeleteOwnAttachments:e.canDeleteOwnAttachments,canDeleteOwnComments:e.canDeleteOwnComments,canDeleteOwnWorklogs:e.canDeleteOwnWorklogs,canEditAllComments:e.canEditAllComments,canEditAllWorklogs:e.canEditAllWorklogs,canEditIssues:e.canEditIssues,canEditOwnComments:e.canEditOwnComments,canEditOwnWorklogs:e.canEditOwnWorklogs,canLinkIssues:e.canLinkIssues,canLogWork:e.canLogWork,canManageWatchers:e.canManageWatchers,canModifyReporters:e.canModifyReporter,canMoveIssues:e.canMoveIssue,canScheduleIssues:e.canScheduleIssues,canUseServiceManagementAgentFeatures:e.canUseServiceDeskAgentFeatures,canBrowseUsers:e.canBrowseUsers,
canViewDevTools:e.canViewDevTools,canViewWatchers:e.canViewWatchers}))),j=Object(n.createSelector)(c.r,m.b,O,((e,t,s)=>e&&Array.isArray(t.glances)?h(t.glances,s).map((e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{title:s,label:n,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}})):[])),v=Object(n.createSelector)(c.r,m.b,O,((e,t,s)=>e&&Array.isArray(t.actions)?h(t.actions,s).map((e=>{const{id:t,properties:{title:s}}=e;return{id:t,title:s,extension:e,type:"FORGE_ENTITY_TYPE"}})):[])),E=Object(n.createSelector)(c.r,m.b,O,((e,t,s)=>e&&Array.isArray(t.panels)?h(t.panels,s).filter((e=>null!=e.properties.icon)).map((e=>{const{id:t,properties:{title:s,icon:n,allowMultiple:a}}=e,{appKey:i,moduleKey:o}=Object(r.d)(t);return{name:s,tooltip:s,iconUrl:n,extension:e,allowMultiple:!!a,showByDefault:!1,type:"FORGE_ENTITY_TYPE",moduleKey:o,appKey:i}
})).sort(y):[])),k=e=>Object(n.createSelector)(m.a,(t=>t&&t.selectedContentPanel===e)),w=Object(n.createSelector)(c.r,m.b,O,((e,t,s)=>e&&Array.isArray(t.customFields)?h(t.customFields,s):[])),S=Object(n.createSelector)(c.r,m.b,O,((e,t,s)=>e&&Array.isArray(t.customFieldTypes)?h(t.customFieldTypes,s):[])),C=Object(n.createSelector)(w,(e=>e.length>0)),I=Object(n.createSelector)(S,(e=>e.length>0)),T=Object(n.createSelector)(C,I,((e,t)=>e||t)),P=Object(n.createSelector)(w,S,((e,t)=>[...e,...t])),_=Object(n.createSelector)(c.r,m.b,((e,t)=>e&&t.activeAction||null)),x=e=>Object(n.createSelector)(Object(l.q)(e),(e=>e?e.schema.custom:"")),D=e=>Object(n.createSelector)(w,x(e),((e,t)=>e.find((e=>e.id===t))||null)),A=e=>Object(n.createSelector)(P,x(e),((e,t)=>e.find((e=>e.id===t))||null)),L=e=>Object(n.createSelector)(c.r,m.b,x(e),O,((e,t,s,n)=>{if(!e||!Array.isArray(t.customFields))return!1;const a=t.customFields.find((e=>e.id===s));return null!=a&&!Object(i.a)(a,n)
})),M=Object(n.createSelector)(c.y,c.x,p.g,c.D,u.C,((e,t,s,n,i)=>({issue:{key:e,id:t,type:s},project:{id:null!==i?Object(a.p)(i.toString()):i,key:n}}))),R=Object(n.createSelector)(c.r,m.b,O,((e,t,s)=>e&&Array.isArray(t.actions)?h(t.activities,s).map((e=>{const{id:t,properties:{title:s}}=e,{appKey:n,moduleKey:a}=Object(r.d)(t);return{name:s,extension:e,type:"FORGE_ENTITY_TYPE",moduleKey:a,appKey:n}})):[])),N=e=>Object(n.createSelector)(M,m.b,((t,s)=>f(f({},t),{},{isNewToIssue:s.panelsKeys.newPanels.includes(e)}))),F=e=>Object(n.createSelector)(E,(t=>{const{extensionId:s}=Object(o.a)(e)||{};return t.find((e=>s===e.extension.id))})),U=e=>Object(n.createSelector)(m.b,(t=>t.panelsKeys.collapsedPanels.includes(e)))},"./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}))
;var n=s("./node_modules/lodash/has.js"),a=s.n(n),i=s("./node_modules/lodash/isNil.js"),r=s.n(i);const o=e=>e&&a()(e,"schema.custom")&&!r()(e.schema.custom)&&e.schema.custom.includes("ari:cloud:ecosystem::extension"),c=e=>o(e)?{id:e.key,type:"forgeCustomField"}:null,l=e=>o(e)?"forgeCustomField":null},"./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return N})),s.d(t,"a",(function(){return F})),s.d(t,"f",(function(){return K})),s.d(t,"e",(function(){return W})),s.d(t,"g",(function(){return B})),s.d(t,"c",(function(){return H})),s.d(t,"d",(function(){return $}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),c=s("./src/packages/issue/issue-scroll/src/services/types.js"),l=s("./src/packages/platform/utils/permalinks/src/index.js"),u=s("./src/packages/platform/utils/permalinks/src/constants.js"),d=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),p=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),m=s("./src/packages/issue/issue-view/src/common/messages/flags.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),f=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),g=s("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),h=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js")
;const v="issue.comment.fetch.epic.graphql",E=(e,t,s,n)=>`\n query issueViewInteractiveQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", commentId: ${n}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                renderedBody\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    }\n  }\n`,k="-created",w=(e,t,s,n)=>b.a`query {
        issueComments(issueIdOrKey: "${e}", first: ${t}, offset: ${s}, orderBy: "${n}") {
            nodes {
                id
                author {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                updateAuthor {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                visibility {
                  type
                  value
                }
                created
                updated
                renderedBody
                jsdPublic
                bodyAdf
            }
            totalCount
        }
    }`,S=(e,t,s,n,a,i,r)=>Object(f.a)(Object(j.d)(e),((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:w(e,t,s,n)}),perf:i,headersProcessor:a&&a(h.a.key)}))(t,s,n,k)).map(y.f).map((e=>Object(y.b)(e,a,i,r))),C=(e,t,s)=>Object(f.a)(`${e}/rest/gira/1/`,((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:E(t,s,n,a),variables:i})}))(0,5,0,k,s,{issueKey:t})).map(g.a).map((e=>Object(g.b)(v,e))).map((e=>Object(O.b)(e.viewIssue))),I=({startAt:e,maxResults:t,orderBy:s,commentId:n,commentAmount:a})=>{const i=null!=n?`, commentId: "${n}"`:""
;return`query issueViewInteractiveQuery($issueKey: String!) {\n       viewIssue(issueKey: $issueKey) {\n           comments (${`first: ${e}`}${""===i&&null!=t?`, maxResults: ${t}`:""}${""!==i&&null!=a?`, commentAmount: ${a}`:""}${null!=s?`, orderBy: "${s}"`:""}${i}) {\n               nodes {\n                   id\n                   author {\n                       accountId\n                       displayName\n                       avatarUrl\n                   }\n                   updateAuthor {\n                       accountId\n                       displayName\n                       avatarUrl\n                   }\n                   visibility {\n                       type\n                       value\n                   }\n                   created\n                   updated\n                   jsdPublic\n                   bodyAdf\n               }\n               startIndex\n               totalCount\n           }\n       }\n     }\n   `
},T=({issueKey:e,maxResults:t,startAt:s,orderBy:n,commentId:a,commentAmount:i})=>({method:"POST",body:JSON.stringify({query:I({maxResults:t,startAt:s,orderBy:n,commentId:a,commentAmount:i}),variables:{issueKey:e}})}),P={NEWEST_FIRST:"-created",OLDEST_FIRST:"created"},_=({baseUrl:e,issueKey:t,commentId:s,commentAmount:n})=>Object(f.a)(`${e}/rest/gira/1/`,T({issueKey:t,commentAmount:n,startAt:0,orderBy:void 0,commentId:s})).map(g.a).map((e=>Object(g.b)(v,e))).map((e=>Object(O.b)(e.viewIssue)));var x=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),D=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),A=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),L=s("./src/packages/issue/issue-view/src/feature-flags.js"),M=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),R=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const N=(e,t,s,n,a)=>{
const i=Object(L.isActivitySortingEnabled)()?100:10;let r=0;s>0&&(r=s+a.filter((e=>e.completedDate.epochMillis>n[n.length-1].timestamp)).length);const o=e+a.length-(n.length+r);return{numNextActivityItemsToLoad:o>i?i:o,numPrevActivityItemsToLoad:r>i?i:r}},F=(e,t,s)=>{let n=0;const a=Object(L.isActivitySortingEnabled)()?100:10,i=e-(t+s);return s>0&&(n=s>a?a:s),{numNextCommentsToLoad:i>a?a:i,numPrevCommentsToLoad:n}},U="issue.comment.fetch.epic",V="Failed to fetch comments",K=(e,t)=>e.ofType("FETCH_LATEST_COMMENTS_REQUEST").switchMap((({type:e})=>{const s=t.getState(),a=Object(x.f)(s),r=Object(x.y)(s),o=Object(R.J)(s);return(o>10?10:o)>0?S(a,r,5,0,0,0,e).map((e=>Object(p.p)(e))).catch((e=>(Object(A.a)(U,V,e),i.h.safeWarnWithoutCustomerData(U,V),n.Observable.of(Object(p.n)())))):n.Observable.empty()})),W=(e,t)=>e.ofType("FETCH_OLDER_COMMENTS_REQUEST","FETCH_NEWER_COMMENTS_REQUEST").switchMap((({type:e})=>{
const s=t.getState(),a=Object(x.f)(s),r=Object(x.y)(s),o=Object(R.K)(s),c=Object(R.F)(s),l=Object(R.J)(s);if(Object(L.isActivitySortingEnabled)()){const t=Object(M.b)(s),{startAt:u,maxResults:d}=((e,t,s,n,a)=>{let i=0,r=0;return"FETCH_OLDER_COMMENTS_REQUEST"===e?(r="NEWEST_FIRST"===a?t+n:Math.max(t-100,0),{maxResults:"NEWEST_FIRST"===a?Math.min(s-r,100):t-r,startAt:r}):(r="NEWEST_FIRST"===a?Math.max(0,t-100):t+n,i="NEWEST_FIRST"===a?t-r:Math.min(s-r,100),{maxResults:i,startAt:r})})(e,l,o,c,t);return(({baseUrl:e,issueKey:t,maxResults:s,startAt:n=0,loadedComments:a=0,commentsStartIndex:i=0,commentId:r,type:o,selectedSortOrder:c})=>Object(f.a)(`${e}/rest/gira/1/`,T({issueKey:t,maxResults:s,startAt:n,orderBy:P[c],commentId:r})).map(g.a).map((e=>Object(g.b)(v,e))).map((e=>Object(O.c)(e.viewIssue,a,i,o,c))))({baseUrl:a,issueKey:r,maxResults:d,startAt:u,loadedComments:c,commentsStartIndex:l,type:e,selectedSortOrder:t}).map((e=>Object(p.r)(e))).catch((e=>(Object(A.a)(U,V,e),
i.h.safeWarnWithoutCustomerData(U,V),n.Observable.of(Object(p.q)()))))}const{startAt:u,maxResults:d}=((e,t,s,n)=>{let a=0,i=0;return"FETCH_OLDER_COMMENTS_REQUEST"===e?(i=t+n,{maxResults:Math.min(s-i,10),startAt:i}):(i=Math.max(0,t-10),a=t-i,{maxResults:a,startAt:i})})(e,l,o,c);return S(a,r,d,u,c,l,e).map((e=>Object(p.r)(e))).catch((e=>(Object(A.a)(U,V,e),i.h.safeWarnWithoutCustomerData(U,V),n.Observable.of(Object(p.q)()))))})),B=(e,t)=>e.ofType("FETCH_SORTED_COMMENTS_REQUEST").switchMap((({payload:e})=>{const s=t.getState(),a=Object(x.f)(s),r=Object(x.y)(s),o=Object(M.b)(s);return void 0!==e?_({baseUrl:a,issueKey:r,commentAmount:Math.floor(5),commentId:e}).map((e=>Object(p.w)(e))).catch((e=>(Object(A.a)(U,V,e),i.h.safeWarnWithoutCustomerData(U,V),n.Observable.of(Object(p.u)())))):(({baseUrl:e,issueKey:t,maxResults:s,selectedSortOrder:n})=>Object(f.a)(`${e}/rest/gira/1/`,T({issueKey:t,maxResults:s,startAt:0,orderBy:P[n],commentId:void 0
})).map(g.a).map((e=>Object(g.b)(v,e))).map((e=>Object(O.c)(e.viewIssue,0,0,void 0,n))))({baseUrl:a,issueKey:r,maxResults:5,selectedSortOrder:o}).map((e=>Object(p.w)(e))).catch((e=>(Object(A.a)(U,V,e),i.h.safeWarnWithoutCustomerData(U,V),n.Observable.of(Object(p.u)()))))})),H=e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_COMMENT").switchMap((()=>{const t=s.getState(),b=Object(x.f)(t),f=Object(x.y)(t),g=Object(D.F)(t)===a.g,h=e.getScrollTargetId(c.a.COMMENT),y={key:"JSDComments",type:"JSDComments",name:o.a.comments.defaultMessage},O={key:"Comments",type:"Comments",name:o.a.comments.defaultMessage};return null===h?n.Observable.of():_({baseUrl:b,issueKey:f,commentAmount:Math.floor(5),commentId:h}).flatMap((t=>(window.history.replaceState({},null,Object(l.c)(h,u.b.COMMENTS)),e.setScrollTarget(null),n.Observable.of(Object(p.w)(t),Object(d.a)(g?y:O),Object(p.G)(!1))))).catch((e=>{Object(A.a)(U,V,e),i.h.safeWarnWithoutCustomerData(U,V);const{showFlag:t}=Object(r.f)();return t({type:"error",
title:[m.a.commentWorklogAttachmentFetchFailedTitle,{field:"comment"}],description:m.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),n.Observable.of()}))})),$=e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_COMMENT").switchMap((()=>{const t=s.getState(),b=Object(x.f)(t),f=Object(x.y)(t),g=Object(D.F)(t)===a.g,h=e.getScrollTargetId(c.a.COMMENT),y={key:"JSDComments",type:"JSDComments",name:o.a.comments.defaultMessage},O={key:"Comments",type:"Comments",name:o.a.comments.defaultMessage};return null===h?n.Observable.of():C(b,f,h).flatMap((t=>(window.history.replaceState({},null,Object(l.c)(h,u.b.COMMENTS)),e.setScrollTarget(null),n.Observable.of(Object(p.p)(t),Object(d.b)(g?y:O),Object(p.G)(!1))))).catch((e=>{Object(A.a)(U,V,e),i.h.safeWarnWithoutCustomerData(U,V);const{showFlag:t}=Object(r.f)();return t({type:"error",title:[m.a.commentWorklogAttachmentFetchFailedTitle,{field:"comment"}],description:m.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),
n.Observable.of()}))}))},"./src/packages/issue/issue-view/src/feature-flags.js":function(e,t,s){"use strict";s.r(t),s.d(t,"isTemplatedBaseContextEnabled",(function(){return i})),s.d(t,"isTabsInTemplatesMasterEnabled",(function(){return r})),s.d(t,"isGroundWorkMasterEnabled",(function(){return o})),s.d(t,"isForgeAndEcosystemSweetStateEnabled",(function(){return c})),s.d(t,"isGroupingPreEarlyAccessEnabled",(function(){return l})),s.d(t,"isInlineCloneEnabled",(function(){return u})),s.d(t,"isAddCascadingSelectValueCountToBMEnabled",(function(){return d})),s.d(t,"isSkip4xxReportingEnabled",(function(){return p})),s.d(t,"isConnectPanelsMarginBottomEnabled",(function(){return m})),s.d(t,"isForgeCollapsedPanelEnabled",(function(){return b})),s.d(t,"isForgeCustomFieldNewSchemaEnabled",(function(){return f})),s.d(t,"isGraphqlFix_BulkBuildEnabled",(function(){return g})),s.d(t,"isGraphqlFix_PreloadIssueEnabled",(function(){return h})),s.d(t,"isGraphqlFix_epicsBulk",(function(){return y})),
s.d(t,"isGraphqlFix_sprintBulk",(function(){return O})),s.d(t,"removeTimeZoneFromIssueUser",(function(){return j})),s.d(t,"isAttachmentsUIFeedbackEnabled",(function(){return v})),s.d(t,"isEpicNameFieldTypeEnabled",(function(){return E})),s.d(t,"isExtractedLabelsFieldEnabled",(function(){return k})),s.d(t,"isSortingIssuesUnderEpicEnabled",(function(){return w})),s.d(t,"isIssueViewMigration1stAprilEnabled",(function(){return S})),s.d(t,"isIssueViewMigrationMidMarchEnabled",(function(){return C})),s.d(t,"isIssueViewMigratedStreamEnabled",(function(){return I})),s.d(t,"isIssueViewMigrationPostMigrationEnabled",(function(){return T})),s.d(t,"isStateRefactorInChildIssuesPanelEnabled",(function(){return P})),s.d(t,"isFixLatestCommentsSuccessReducerEnabled",(function(){return _})),s.d(t,"isCleanupCreateChildSuccessEpicEnabled",(function(){return x})),s.d(t,"isUseAppPermissionsFromTenantContextEnabled",(function(){return D})),
s.d(t,"isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext",(function(){return A})),s.d(t,"isShortcutMenuEnabled",(function(){return L})),s.d(t,"isBentoPrefetchErrorFixEnabled",(function(){return M})),s.d(t,"isProjectsDirectoryPrettyUrlEnabled",(function(){return R})),s.d(t,"isSmartEpicRankingEnabled",(function(){return N})),s.d(t,"isSmartSprintRankingEnabled",(function(){return F})),s.d(t,"isNewCardExperience",(function(){return U})),s.d(t,"isFolderUploadsEnabled",(function(){return V})),s.d(t,"isCodeViewerEnabled",(function(){return K})),s.d(t,"isZipPreviewEnabled",(function(){return W})),s.d(t,"getClientPollingIntervalMs",(function(){return B})),s.d(t,"getClientPollingMaxAttempts",(function(){return H})),s.d(t,"getClientPollingBackoffFactor",(function(){return $})),s.d(t,"getClientPollingMaxIntervalMs",(function(){return G})),s.d(t,"getClientPollingMaxGlobalFailures",(function(){return q})),s.d(t,"isAllActivityEnabled",(function(){return z})),
s.d(t,"isActivitySortingEnabled",(function(){return Y})),s.d(t,"isSortableStickyAddCommentBoxEnabled",(function(){return Q})),s.d(t,"isDateTimeConsistencyMvpEnabled",(function(){return J})),s.d(t,"isFollowUpFixEcosystemDropdownFieldsNotClearingEnabled",(function(){return Z})),s.d(t,"isTeamsCustomFieldTypeEnabled",(function(){return X})),s.d(t,"isCmdbIntegrationFieldEnabled",(function(){return ee})),s.d(t,"isUpdatedAffectiveServiceFieldEnabled",(function(){return te})),s.d(t,"getCrossJoinViaEpicTouchpointFlag",(function(){return se})),s.d(t,"getCrossJoinViaEpicTouchpointMetricValue",(function(){return ne})),s.d(t,"getCrossJoinViaEpicAATestFlag",(function(){return ae})),s.d(t,"getCrossJoinViaEpicAATestMetricValue",(function(){return ie})),s.d(t,"isInvitePeopleDrawerEnabled",(function(){return re})),s.d(t,"isInviteFromAssignEnabled",(function(){return oe})),s.d(t,"isJsmChangeVisibilityM2Enabled",(function(){return ce})),s.d(t,"isHOT94246ModalViewRedirectEnabled",(function(){return le})),
s.d(t,"isCascadingSelectOptimisationEnabled",(function(){return ue})),s.d(t,"isAtlaskitFieldBaseRemovalEnabled",(function(){return de})),s.d(t,"isShareDialogAfterTtiExperimentEnabled",(function(){return pe})),s.d(t,"isApprovalFieldExtractionEnabled",(function(){return me})),s.d(t,"isPinnedFieldsClickThroughBannerEnabled",(function(){return be})),s.d(t,"isExtractedSlaPanelEnabled",(function(){return fe})),s.d(t,"isIssueViewEarlyVendorEnabled",(function(){return ge})),s.d(t,"isSaferLoadBridgeApiEnabled",(function(){return he})),s.d(t,"isPolarisInsightsTabEnabled",(function(){return ye})),s.d(t,"isRelatedIssuesPanelEnabled",(function(){return Oe})),s.d(t,"isIssueIdPopulationEnabled",(function(){return je})),s.d(t,"isSelectFieldPerformanceImprovementEnabled",(function(){return ve})),s.d(t,"isWebAndIssueLinkSummaryEnabled",(function(){return Ee})),s.d(t,"isOrderByLexoRankEnabled",(function(){return ke})),s.d(t,"collapsedHierarchies",(function(){return we})),
s.d(t,"isFetchTransitionsInPreviewModeEnabled",(function(){return Se})),s.d(t,"isMoveServiceRegistryToTopNavEnabled",(function(){return Ce})),s.d(t,"isRemoveDuplicateGiraEnabled",(function(){return Ie})),s.d(t,"isEpicStatusEnabled",(function(){return Te})),s.d(t,"isRemoveOldIssueAppPreloads",(function(){return Pe})),s.d(t,"isBoardSearchFieldChangeboardingEnabled",(function(){return _e})),s.d(t,"isBacklogSearchFieldChangeboardingEnabled",(function(){return xe})),s.d(t,"isOriginalEstimateAvailableInNextGen",(function(){return De})),s.d(t,"isEpicStatusEnabledInPreview",(function(){return Ae})),s.d(t,"isNewAnalyticsComponent",(function(){return Le})),s.d(t,"isAutomaticExposureTrackingEnabled",(function(){return Me})),s.d(t,"getPerformanceTrackingConfiguration",(function(){return Re})),s.d(t,"getTTRSeverityTrackingConfiguration",(function(){return Ne})),s.d(t,"isMediaLinkingEnabled",(function(){return Fe})),s.d(t,"isJsmLinkedAlertsEnabled",(function(){return Ue})),
s.d(t,"isJsmRespondersEnabled",(function(){return Ve})),s.d(t,"getCodeInDevPanelExperimentCohort",(function(){return Ke})),s.d(t,"isEnrolledInCodeInDevPanelExperiment",(function(){return We})),s.d(t,"getCodeInDevPanelExperimentMetricValue",(function(){return Be})),s.d(t,"isStickyHeaderRefactoringEnabled",(function(){return He})),s.d(t,"isConnectIssueModalErrorHandlerEnabled",(function(){return $e})),s.d(t,"isRemoveUnusedAppBasePropsEnabled",(function(){return Ge})),s.d(t,"isCustomFieldTypesEnabled",(function(){return qe}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js")
;const i=()=>Object(n.c)("issue.details.templates.base-context",!1),r=()=>Object(n.b)("issue.details.tabs-in-templates.master",!1),o=()=>Object(n.b)("issue.details.ground.work.master",!1),c=()=>Object(n.b)("issue.details.forge-and-ecosystem-sweet-state",!1),l=()=>Object(n.b)("issue.details.grouping.pre-early-access",!1),u=()=>Object(n.b)("issue.details.clone-modal",!1),d=()=>Object(n.b)("issue.details.add-cascading-select-value-count-to-browser-metrics",!1),p=()=>Object(n.b)("isissue.details.skip-reporting-4xx",!1),m=()=>Object(n.b)("issue.details.add.margin.bottom.to.collapsed.panels",!1),b=()=>Object(n.b)("issue.details.forge.make.collapsed.panels.compact",!1),f=()=>Object(n.b)("issue.details.forge-custom-field-new-schema.enabled",!1),g=()=>Object(n.b)("issue-2031.agile.fields.provider.use.bulk.build",!1),h=()=>Object(n.b)("issue-2031.use.preloaded.issue.in.field.editability.provider",!1),y=()=>Object(n.b)("issue-2033.load.epic.issues.in.bulk",!1),O=()=>Object(n.b)("issue-2032.lookup.sprint.and.flagged.in.bulk",!1),j=()=>Object(n.b)("issue.details.timezone-refactoring",!1),v=()=>Object(n.b)("issue.details.attachments-ui-feedback",!1),E=()=>Object(n.b)("issue.details.epic-name-field-type",!1),k=()=>Object(n.b)("issue.details.extracted-field.labels",!1),w=()=>Object(n.b)("shpl-113-sort-issue-under-epic",!1),S=()=>Object(n.b)("issue.details.migration.1st-april",!1),C=()=>Object(n.b)("issue.details.migration.mid-march",!1),I=()=>Object(n.b)("issue.details.migration-migrated-stream",!1),T=()=>Object(n.b)("issue.details.migration.post-migration",!1),P=()=>Object(n.b)("issue.details.bento-8345.child-issues-panel.state-refactor",!1),_=()=>Object(n.b)("issue.details.bento-8676-fix-reducer",!1),x=()=>Object(n.b)("issue.details.bento-8703-cleanup-create-child-success-epic",!1),D=()=>Object(n.b)("issue.details.jsd.app-permissions.from.tenant-context",!1),A=()=>Object(n.b)("issue.details.bitbucket.license.state.in.tenant.context",!1),L=()=>Object(n.b)("issue.details.shortcuts-dialog",!1),M=()=>Object(n.b)("issue.details.restore.retries.on.fetch.error",!1),R=()=>Object(n.b)("endeavour.projects-directory.pretty-url",!1),N=()=>Object(n.b)("issue.details.smart-epic-ranking",!1),F=()=>Object(n.b)("issue.details.smart-sprint-ranking",!1),U=()=>Object(n.b)("issue.details.media-cards-new-experience",!1),V=()=>Object(n.b)("issue.details.media-picker-folder-upload",!1),K=()=>Object(n.b)("issue.details.media-viewer-code-viewer",!1),W=()=>Object(n.b)("issue.details.media-viewer-zip-previews",!1),B=()=>Object(n.c)("issue.details.media-client-polling-intervalms",void 0),H=()=>Object(n.c)("issue.details.media-client-polling-max-attempts",void 0),$=()=>Object(n.c)("issue.details.media-client-polling-backoff-factor",void 0),G=()=>Object(n.c)("issue.details.media-client-polling-max-intervalms",void 0),q=()=>Object(n.c)("issue.details.media-client-polling-max-global-failures",void 0),z=()=>Object(n.b)("issue.details.bento-8177-all-activity-feed",!1),Y=()=>Object(n.b)("issue.details.bento-6520-activity-sorting",!1),Q=()=>Object(n.b)("issue.details.bento-8862-sortable-sticky-add-comment-box",!1),J=()=>Object(n.b)("issue.details.bento-8324-date-time-consistency",!1),Z=()=>Object(n.b)("issue.details.bento-6200-followup-fix-for-ecosystem-dropdowns-not-clearing",!1),X=()=>Object(n.b)("jira.teams.enable-new-custom-field-types",!1),ee=()=>Object(n.b)("jsd-cmdb-integration-field",!1),te=()=>Object(n.b)("JDW-2848-krispy-krew-updated-affective-service-field",!1),se=(e=!1,t)=>Object(a.a)().getVariantValue("growth.jsw-epic-touchpoint.cross-join",{
default:"not-enrolled",oneOf:["control","not-enrolled","experiment"],shouldTrackExposureEvent:e,exposureData:t}),ne=()=>({"not-enrolled":0,control:1,experiment:2}[se()]),ae=(e=!1,t)=>Object(a.a)().getVariantValue("growth.jsw-epic-touchpoint.cross-join.aa-test",{default:"not-enrolled",oneOf:["control","not-enrolled","experiment"],shouldTrackExposureEvent:e,exposureData:t}),ie=()=>({"not-enrolled":0,control:1,experiment:2}[ae()]),re=()=>"variation"===Object(a.a)().getVariantValue("confluence.frontend.invite.from.mention",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),oe=()=>"variation"===Object(a.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1
}),ce=()=>Object(n.b)("jsm-changevisibility-m2",!1),le=()=>Object(n.e)("hot-94246-redirect-safari-modal-issue-to-sidebar","OFF",["OFF","ON","REVERT"]),ue=()=>Object(n.b)("issue.details.custom-cascading-select-render-optimisation",!1),de=()=>Object(n.b)("issue.details.bento-8071.atlaskit.field-base.removal",!1),pe=()=>Object(n.b)("jira.share-dialog-after-tti.experiment",!1),me=()=>Object(n.b)("issue.details.extract-approval-field",!1),be=()=>Object(n.b)("issue.details.pinned-fields-click-through-banner",!1),fe=()=>Object(n.b)("issue.details.extracted-sla-panel",!1),ge=()=>Object(n.b)("kirigami.issue.view.early.vendor",!1),he=()=>Object(n.b)("kirigami-safer-load-bridge-api",!1),ye=()=>Object(n.b)("polaris.insights-tab-in-bento",!1),Oe=()=>Object(n.b)("issue.details.enable-related-issues-panel-in-bento",!1),je=()=>Object(n.b)("issue.details.enable-issue-id-population-in-bento",!1),ve=()=>Object(n.b)("issue.details.enable-select-field-performance-improvement",!1),Ee=()=>Object(n.b)("issue-view-display-summary-on-web-and-issue-links",!1),ke=()=>Object(n.b)("issue-1953-return-subtasks-in-lexo-rank",!1),we=()=>Object(n.b)("collapse-nextgen-issuetype-hierarchy-fe-reads",!1),Se=()=>Object(n.b)("issue.details.bento-7718.transitions-fetch-preview",!1),Ce=()=>Object(n.b)("krispy-krew-move-service-registry-to-top-nav",!1),Ie=()=>Object(n.b)("jsw.classic.remove.duplicate.gira.call.issue.dialog",!1),Te=()=>Object(n.b)("jsw.bento.epic.status",!1),Pe=()=>Object(n.b)("jfp.perf.remove-old-issue-app-preloads",!1),_e=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding-board",!1),xe=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding",!1),De=()=>Object(n.b)("jsw.agility.original-estimate.available",!1),Ae=()=>Object(n.b)("jsw.bento.epic.status.preview",!1),Le=()=>Object(n.b)("jfp.perf.new-analytics-component",!1),Me=()=>"control"!==Object(a.a)().getVariantValue("tac.fe.rollout.cohort.selector",{
default:"control",oneOf:["control","auto-delay","auto-no-delay"],shouldTrackExposureEvent:!0}),Re=()=>Object(n.c)("issue.details.editor.performance-tracking",{}),Ne=()=>Object(n.c)("issue.details.renderer.ttr-severity-tracking",{}),Fe=()=>Object(n.b)("issue.details.editor.media.linking",!1),Ue=()=>Object(n.b)("jsm_showing_related_alerts_on_incident_5f6bg",!1),Ve=()=>Object(n.b)("jsm.incident.responders_xevre",!1),Ke=()=>Object(n.e)("jira.growth-experiment-discover-dev-integrations","not-enrolled",["control","not-enrolled","experiment"]),We=()=>"experiment"===Ke(),Be=()=>({"not-enrolled":0,control:1,experiment:2}[Ke()]),He=()=>Object(n.b)("issue.details.sticky-header-refactoring",!1),$e=()=>Object(n.b)("smite.connect.issue.modal.handle.error",!1),Ge=()=>Object(n.b)("jfp.perf.cleanup-unused-locale-from-all-appbase-instances",!1),qe=()=>Object(n.b)("forge_custom_field_types_qwxh8",!1)},"./src/packages/issue/issue-view/src/feedback-button/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/app-base/src/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),l=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),u=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),d=s("./node_modules/@atlaskit/icon/glyph/feedback.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");class b extends n.Component{renderButton(){return a.a.createElement(u.a,{onClick:this.props.onClick,appearance:"subtle",iconBefore:a.a.createElement(p.a,{label:this.props.iconLabel})},this.props.children)}render(){return a.a.createElement("div",null,this.props.tooltip?a.a.createElement(m.a,{content:this.props.tooltip,position:"top"
},this.renderButton()):this.renderButton())}}b.displayName="BentoFeedbackTriggerButton",b.defaultProps={children:null,tooltip:null,iconLabel:"",onClick:null};class f extends n.Component{renderFeedbackButton(e){const t={collectorId:this.props.collectorId,feedbackGroupId:this.props.feedbackGroupId,feedbackType:c.a,optOut:!0};return a.a.createElement(l.a,null,((s,{openFeedbackDialog:n})=>a.a.createElement(o.c,{id:"software-issue.labs-feature-button-text",defaultMessage:"Give feedback"},(s=>this.props.isCompact?a.a.createElement(b,{iconLabel:String(s),tooltip:e,onClick:()=>n(t)}):a.a.createElement(b,{onClick:()=>n(t)},s)))))}render(){return a.a.createElement(o.c,{id:"software-backlog-issue.labs-feature-button-tooltip",defaultMessage:"Give feedback"},(e=>this.renderFeedbackButton(e)))}}f.displayName="Feedback",f.defaultProps={isCompact:!1};var g=f;const h=e=>a.a.createElement(i.a,null,a.a.createElement(r.a,null,a.a.createElement(g,e)));h.displayName="FeedbackButton";t.a=h},
"./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"a",(function(){return l}));const n=(e,t)=>({type:"FIELD_INIT_OPTIONS",payload:{fieldId:e,fieldOptions:t}}),a=(e,t,s,n)=>({type:"FIELD_EDIT_BEGIN",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,fieldEditSessionId:s}}),i=(e,t,s)=>({type:"FIELD_EDIT_UPDATE",payload:{fieldId:e,value:t,fieldOptions:s}}),r=(e,t,s,n,a)=>({type:"FIELD_EDIT_CONFIRM",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,saveFieldData:s,analyticsAttributeIdRetriever:a}}),o=(e,t)=>({type:"FIELD_EDIT_CANCEL",payload:{fieldId:e,fieldOptions:t}}),c=(e,t,s)=>({type:"FIELD_PASTE",payload:{fieldId:e,fieldOptions:t,pastedContent:s}}),l=(e,t)=>({type:"FIELD_ADD_ALLOWED_VALUES",payload:{fieldId:e,
allowedValues:t}})},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u}))
;const r=(e,t,s,n,i,r,o=!1)=>({type:"FIELD_SAVE_REQUEST",payload:a({fieldId:e,value:t,fieldOptions:s,saveFieldData:n,analyticsEvent:i,shouldFetchViewContext:o},r&&{eventData:r})}),o=(e,t,s,n,a)=>({type:"FIELD_SAVE_SUCCESS",payload:{fieldId:e,fieldOptions:t,fieldValue:s,saveFieldResult:n},meta:a}),c=(e,t,s,n)=>({type:"FIELD_SAVE_FAILURE",payload:{fieldId:e,invalidMessage:t,error:s,fieldOptions:n}}),l=(e,t,s,n)=>({type:"FIELD_SAVE_SUCCESS_WITH_PASTED_CONTENT",payload:{fieldId:e,fieldOptions:t,value:s,pastedContent:n}}),u=(e,t,s)=>({type:"FIELD_UPDATED",payload:{fieldId:e,fieldValue:t,extraParams:s}})},"./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js");const l=Object(n.createSelector)(Object(i.n)("epic"),(e=>null!==e?e:void 0)),u=Object(n.createSelector)(r.q,c.f,c.b,o.collapsedHierarchies,((e,t,s,n)=>n?e||Object(a.b)(s):e||1===t))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return u}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");const r=e=>!!e&&e.length>0,o=e=>e?[{value:!0}]:null,c=Object(a.e)("com.atlassian.jira.plugin.system.customfieldtypes:flagged"),l=Object(n.createSelector)(c,(e=>!!e&&(e=>{if(e){const t=Object(i.a)(e);return r(t)}return!1})(e))),u=Object(n.createSelector)(c,(e=>e&&e.key))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return g})),s.d(t,"k",(function(){return h})),s.d(t,"g",(function(){return j})),s.d(t,"h",(function(){return v})),s.d(t,"e",(function(){return w})),s.d(t,"i",(function(){return S})),s.d(t,"b",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"d",(function(){return P})),s.d(t,"f",(function(){return _})),s.d(t,"a",(function(){return x}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),o=s("./src/packages/issue/project-context-service/src/utils.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/project-selector.js");const b=Object(c.o)("hierarchy-level-below")||null,f=Object(n.createSelector)(b,(e=>e&&e.issueTypes||[])),g=Object(n.createSelector)(l.f,f,((e,t)=>{const s=e.issueTypes,n=t.map((e=>e.id));return s.filter((e=>-1!==n.indexOf(e.id)))
})),h=Object(n.createSelector)(u.h,f,((e,t)=>e.canCreateChildren&&!!t.length)),y=Object(c.o)("hierarchy-level-above")||null,O=Object(n.createSelector)(y,(e=>e&&(e.name||null))),j=Object(n.createSelector)(y,(e=>e&&e.issueTypeIds.map(String)||[])),v=Object(n.createSelector)(y,(e=>e&&e.issueTypes.map((e=>e.name)).filter((e=>e))||[])),E=Object(n.createSelector)(j,(e=>e.length>0)),k=Object(c.o)("hierarchy-level-same-level")||null,w=Object(n.createSelector)(k,(e=>{if(!e)return!1;if(Object(d.collapsedHierarchies)())return Object(r.c)(e.level);return e.issueTypes[0].subtask
})),S=Object(n.createSelector)(k,(e=>e?e.issueTypeIds.map(String):[])),C=Object(n.createSelector)(k,(e=>e?e.id:null)),I=Object(n.createSelector)(k,(e=>e?Object(r.d)(e.level):null)),T=Object(n.createSelector)(I,(e=>null==e||Object(r.a)(e))),P=Object(n.createSelector)(m.b,m.c,C,((e,t,s)=>!!(e&&t&&s)&&(e===s||!!i()(t,(e=>e.id===s))))),_=Object(n.createSelector)(m.b,C,m.d,o.b),x=Object(n.createSelector)(O,p.c,E,((e,t,s)=>Boolean(e)&&t&&s))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return j})),s.d(t,"d",(function(){return v})),s.d(t,"h",(function(){return E})),s.d(t,"b",(function(){return I})),s.d(t,"j",(function(){return A})),s.d(t,"i",(function(){return L})),s.d(t,"g",(function(){return M})),s.d(t,"a",(function(){return R})),s.d(t,"e",(function(){return N})),s.d(t,"f",(function(){return F}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isArray.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/isPlainObject.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),g=s("./src/packages/issue/issue-view/src/configurations.js"),h=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),y=s("./src/packages/issue/issue-view/src/feature-flags.js")
;const O=["devSummary","SLA_PANEL","KNOWLEDGE_BASE","ASSET_ONBOARDING"],j=()=>Object(y.isJsmLinkedAlertsEnabled)()?[...O,"LINKED_ALERTS"]:O,v=e=>o()(e)||i()(e)&&0===e.length||l()(e)&&0===Object.keys(e).length,E=(e,t)=>!!t&&!e,k=(e,t,s)=>!(!e||!v(Object(m.a)(e))||Object(d.C)(e))&&("assignee"!==e.key&&"com.atlassian.servicedesk:vp-origin"!==Object(p.b)(e)&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==Object(p.b)(e)&&("timetracking"!==e.key||E(t,s))),w=(e,t)=>{if(j().includes(e.id))return{id:e.id,type:e.id};if("TAB"===e.type)return e;const s=Object(h.a)(t[e.id]);if(s)return s;const n=Object(d.v)(e.id,t),a=Object(p.b)(n);return n&&a?{id:n.key,type:a}:null},S=Object(n.createSelector)(b.H,(e=>e.contextItems)),C=Object(n.createSelector)(d.s,(e=>Object.keys(e).filter((t=>{const s=Object(p.b)(e[t]);return s&&Object(g.e)().includes(s)})))),I=Object(n.createSelector)(d.s,(e=>Object.keys(e).filter((t=>{const s=Object(p.b)(e[t]);return s&&g.f.includes(s)
})))),T=Object(n.createSelector)(d.s,u.C,u.G,C,u.m,((e,t,s,n,a)=>{if(!a)return null;return[...t,...n,...s].find((t=>{const s=Object(d.v)(t.id,e);return s&&s.key===a}))||null})),P=Object(n.createSelector)(u.C,T,((e,t)=>t&&!e.includes(t)?e.concat([t]):e)),_=Object(n.createSelector)(u.G,T,((e,t)=>t?e.filter((e=>e!==t)):e)),x=Object(n.createSelector)(C,T,((e,t)=>t?e.filter((e=>e!==t)):e)),D=Object(n.createSelector)(P,_,x,u.o,b.F,((e,t,s,n)=>[...e,...t,...n?[{id:"devSummary",type:"DEV_SUMMARY"}]:[]])),A=Object(n.createSelector)(d.s,D,_,f.b,f.c,((e,t,s,n,a)=>t.filter((t=>{const i=!!s.find((e=>e.id===t.id));if(j().includes(t.id)||"TAB"===t.type)return!i;if(Object(h.c)(e[t.id]))return!0;const r=Object(d.v)(t.id,e);return!!Object(d.B)(r)||!k(r,n,a)&&(r&&Object(p.b)(r)&&!(i&&v(Object(m.a)(r))))})).map((t=>w(t,e))).filter(Boolean))),L=Object(n.createSelector)(d.s,u.j,((e,t)=>t.filter((t=>{const s=Object(d.v)(t.id,e);return!(!s||!Object(p.b)(s))
})).map((t=>w(t,e))).filter(Boolean))),M=Object(n.createSelector)(d.s,u.F,((e,t)=>t&&t.filter((t=>{const s=Object(d.v)(t.id,e);return!(!s||!Object(p.b)(s))})).map((t=>w(t,e))).filter(Boolean))),R=Object(n.createSelector)(d.s,_,f.b,f.c,((e,t,s,n)=>t.filter((t=>{if(j().includes(t.id)||"TAB"===t.type)return!0;const a=Object(d.v)(t.id,e);return!Object(d.B)(a)&&(!k(a,s,n)&&(a&&Object(p.b)(a)&&v(Object(m.a)(a))))})).map((t=>w(t,e))).filter(Boolean))),N=Object(n.createSelector)(S,(e=>e.isShowMoreExpanded)),F=Object(n.createSelector)(R,(e=>e.length>0))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");const r=Object(a.q)("security"),o=Object(n.createSelector)(r,(e=>e&&e.value||null)),c=Object(n.createSelector)(r,(e=>e&&e.allowedValues||[])),l=Object(n.createSelector)(o,c,((e,t)=>e||t&&t.length>0)),u=Object(n.createSelector)(Object(a.D)("security"),i.c,((e,t)=>e&&!t)),d=Object(n.createSelector)(o,c,u,((e,t,s)=>({hasSecurityLevel:null!=e,securityLevelAllowedValuesCount:t.length,hasSecurityLevelEditPermissions:s})))},"./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return g}))
;var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),i=s("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),r=s("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/issue-view/src/feature-flags.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={[i.s]:"com.atlassian.jira.plugin.system.customfieldtypes:float",[i.w]:"com.pyxis.greenhopper.jira:jsw-story-points",[i.z]:"com.atlassian.jira.plugin.system.customfieldtypes:url",[i.x]:"com.atlassian.jira.plugin.system.customfieldtypes:textfield",[i.y]:"com.atlassian.jira.plugin.system.customfieldtypes:textarea",[i.m]:"com.atlassian.jira.plugin.system.customfieldtypes:labels",[i.c]:"com.atlassian.jira.plugin.system.customfieldtypes:datepicker",[i.d]:"com.atlassian.jira.plugin.system.customfieldtypes:datetime",[i.u]:"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",[i.n]:"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",[i.p]:"com.atlassian.jira.plugin.system.customfieldtypes:multiselect",[i.v]:"com.atlassian.jira.plugin.system.customfieldtypes:select",
[i.r]:"com.atlassian.jira.plugin.system.customfieldtypes:multiversion",[i.B]:"com.atlassian.jira.plugin.system.customfieldtypes:version",[i.l]:"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker",[i.o]:"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker",[i.A]:"com.atlassian.jira.plugin.system.customfieldtypes:userpicker",[i.q]:"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker",[i.k]:"string",[i.i]:"number",[i.f]:"datetime",[i.j]:"option2",[i.h]:"array",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[i.e]:"com.pyxis.greenhopper.jira:gh-epic-color",[i.a]:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",[i.t]:"com.atlassian.jira.plugin.system.customfieldtypes:project",[i.g]:"com.pyxis.greenhopper.jira:gh-epic-status"},m={[r.c]:"com.pyxis.greenhopper.jira:gh-epic-link",[r.d]:"com.pyxis.greenhopper.jira:gh-epic-label",[r.g]:"com.pyxis.greenhopper.jira:gh-sprint",
[r.h]:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint",[r.i]:"com.atlassian.teams:rm-teams-custom-field-team",[r.f]:"com.atlassian.jpo:jpo-custom-field-parent",[r.b]:"com.atlassian.jpo:jpo-custom-field-baseline-start",[r.a]:"com.atlassian.jpo:jpo-custom-field-baseline-end",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[r.e]:"com.atlassian.jira.plugin.system.customfieldtypes:flagged"},b=e=>({editable:e.editable,required:!1,autoCompleteUrl:void 0,allowedValues:[],schema:{system:e.systemType,custom:e.customType,type:e.type?e.type:"",renderer:e.renderer},title:e.title||e.key,renderedValue:e.value,value:e.value,adfValue:e.adfValue,key:e.key}),f=e=>{const t={};return e&&e.fields.forEach(((e,s)=>{try{switch(e.type){case o.a:case o.b:case o.e:case o.g:case o.i:case o.n:case o.p:case o.q:case o.s:case o.r:t[s]=b({key:s,systemType:s,customType:null,value:e.value,title:e.title,editable:!!e.editable});break;case o.x:t.timeoriginalestimate=b({key:"timeoriginalestimate",
systemType:"timeoriginalestimate",customType:null,title:e.title,editable:!!e.editable,value:e.value&&e.value.originalEstimateSeconds}),t[s]=b({key:s,systemType:s,customType:null,title:e.title,editable:!!e.editable,value:e.value});break;case o.f:t[s]=b({key:s,systemType:s,customType:null,title:e.title,value:void 0,renderedValue:void 0,adfValue:e.value,editable:!!e.editable,renderer:e.renderer});break;case o.h:t[s]=b({key:s,systemType:s,customType:null,title:e.title,value:"atlassian-wiki-renderer"===e.renderer?void 0:e.value,adfValue:"atlassian-wiki-renderer"===e.renderer?e.value:void 0,editable:!!e.editable,renderer:e.renderer});break;case o.w:case o.l:case o.t:t[s]=b({key:s,systemType:s,customType:null,value:e.value,editable:!!e.editable});break;case r.c:case r.g:case r.h:case r.i:case r.f:case r.b:case r.a:case r.e:t[s]=b({key:s,systemType:null,customType:m[e.type],value:e.value,title:e.title,editable:!!e.editable});break;case r.d:t[s]=b({key:s,systemType:null,customType:m[e.type],
value:e.value,title:e.title,editable:!!e.editable,renderer:e.renderer,type:"string"});break;case i.y:{const n="atlassian-wiki-renderer"===e.renderer?{adfValue:e.value}:{value:e.value};t[s]=b(u({key:s,systemType:null,customType:p[e.type],title:e.title,editable:!!e.editable,renderer:e.renderer},n));break}case i.a:t[s]=b({systemType:null,customType:p[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.b:case i.e:case i.s:case i.w:case i.z:case i.x:case i.m:case i.c:case i.d:case i.u:case i.n:case i.p:case i.v:case i.r:case i.B:case i.l:case i.o:case i.A:case i.q:t[s]=b({systemType:null,customType:p[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.g:Object(c.isEpicStatusEnabledInPreview)()&&(t[s]=b({systemType:null,customType:p[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable}));break;case i.k:case i.i:case i.j:case i.h:case i.f:t[s]=b({systemType:null,customType:null,type:e.type,key:s,title:e.title,value:e.value,
editable:!!e.editable});break;case i.t:t[s]=b({systemType:null,customType:p[e.type],type:e.type,title:e.title,key:s,editable:!!e.editable,value:e.value});break;case o.j:case o.d:case o.v:case o.m:t[s]=b({systemType:null,customType:null,key:s,title:e.title,value:e.value,editable:!1})}}catch(l){a.a.safeErrorWithoutCustomerData("issue.details.field.initial-data-transformer",`Failed to map field: ${e.type}`,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:l}))}})),t},g=e=>{const t=Object.entries(f(e)).reduce(((e,[t,s])=>u(u({},e),{},{[t]:s.value})),{});return u(u({},e),{},{fields:t})};t.a=f},"./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return ie})),s.d(t,"a",(function(){return ae}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/rxjs/Rx.js"),r=s("./node_modules/lodash/identity.js"),o=s.n(r),c=s("./node_modules/lodash/isEqual.js"),l=s.n(c),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const p={context:{primaryContextItems:[],secondaryContextItems:[]},content:{visibleContentItems:[],requestPanelContentItems:void 0}}
;var m=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),b=s("./node_modules/lodash/isNull.js"),f=s.n(b),g=s("./node_modules/lodash/negate.js"),h=s.n(g),y=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),O=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),j=s("./src/packages/issue/issue-view/src/feature-flags.js"),v=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),E=e=>"FORGE_ENTITY_TYPE"===e.glanceType?(e=>({type:"forgeGlance",key:`forgeGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e):(e=>({type:"ecosystemGlance",key:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e),k=e=>{switch(e.type){case"com.pyxis.greenhopper.jira:gh-epic-status":return Object(j.isEpicStatusEnabled)()?{type:e.type,key:`${e.type}__${e.id}`,payload:{fieldId:e.id}}:null;case"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":case"assignee":case"reporter":
case"description":case"environment":case"duedate":case"priority":case"labels":case"components":case"com.pyxis.greenhopper.jira:gh-sprint":case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":case"com.pyxis.greenhopper.jira:gh-epic-link":case"fixVersions":case"versions":case"timetracking":case"timeoriginalestimate":case"com.atlassian.jira.plugin.system.customfieldtypes:labels":case"com.atlassian.jira.plugin.system.customfieldtypes:textfield":case"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:url":case"com.atlassian.jira.plugin.system.customfieldtypes:float":case"com.pyxis.greenhopper.jira:jsw-story-points":case"com.atlassian.jira.plugin.system.customfieldtypes:select":case"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":case"com.atlassian.jira.plugin.system.customfieldtypes:version":case"com.atlassian.jira.plugin.system.customfieldtypes:textarea":
case"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":case"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":case"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:people":case"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":case"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":case"com.atlassian.jira.plugin.system.customfieldtypes:datetime":case"com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team":case"com.atlassian.teams:rm-teams-custom-field-team":case"com.atlassian.jpo:jpo-custom-field-parent":case"com.atlassian.jpo:jpo-custom-field-baseline-start":case"com.atlassian.jpo:jpo-custom-field-baseline-end":case"com.pyxis.greenhopper.jira:jsw-issue-color":case"com.atlassian.servicedesk:vp-origin":
case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":case"com.atlassian.servicedesk:sd-request-participants":case"com.atlassian.servicedesk:sd-customer-organizations":case"number":case"string":case"option2":case"array":case"datetime":case"com.atlassian.servicedesk.assets-plugin:assetfield":case"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":case"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":case"com.atlassian.jira.plugins.cmdb:cmdb-object-cftype":case"com.atlassian.servicedesk:sd-request-feedback":case"user":case"group-list":case"array-string":case"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":case"com.atlassian.jira.plugin.system.customfieldtypes:project":case"forgeCustomField":return{type:e.type,key:`${e.type}__${e.id}`,payload:{fieldId:e.id}};case"TAB":return{type:e.type,key:`${e.type}__${e.id}`,payload:{
tabId:e.id}};case"KNOWLEDGE_BASE":case"SLA_PANEL":case"devSummary":case"releases":case"ASSET_ONBOARDING":return{type:e.type,key:e.type,payload:{itemId:e.id}};default:return null}};const w=e=>({applicationRoles:Object(j.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(y.a)(e),permissions:Object(y.h)(e),glances:Object(O.i)(e),visibleContentItems:Object(v.i)(e),requestContentItems:Object(v.g)(e),visibleContextItems:Object(v.j)(e),conditionallyVisibleContextItems:Object(v.a)(e)}),S=h()(f.a);var C=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),I=s("./node_modules/lodash/partition.js"),T=s.n(I);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){
x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D=(e,t)=>{const{primaryContextItems:s,secondaryContextItems:n}=e.context,a=n.filter((e=>e.type===t));if(a.length){const i=((e,t)=>e.filter((e=>e.type!==t)))(n,t),r=[...s,...a];return _(_({},e),{},{context:{primaryContextItems:r,secondaryContextItems:i}})}return e};var A=s("./node_modules/lodash/get.js"),L=s.n(A),M=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),R=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function F(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){U(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function U(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V=e=>"com.atlassian.servicedesk:sd-request-feedback"===e.type,K=e=>"com.atlassian.servicedesk:sd-request-feedback"!==e.type;var W=(e,t)=>((e,t)=>{const{primaryContextItems:s}=e.context,n=s.slice().filter(K),a=s.find(V);if("DONE"===Object(R.a)(t)&&a){const e=a&&L()(a,"payload.fieldId"),s=e&&Object(M.v)(e,Object(M.s)(t));L()(s,"value",!1)&&n.unshift(a)}return F(F({},e),{},{context:F(F({},e.context),{},{primaryContextItems:n})})
})(e,t);function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach((function(t){$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const G=new Set(["releases"]),q=e=>{const{context:{primaryContextItems:t},content:s}=e,[n,a]=T()(s.visibleContentItems,(e=>G.has(e.type))),[i,r]=s.requestPanelContentItems?T()(s.requestPanelContentItems,(e=>G.has(e.type))):[];return H(H({},e),{},{content:H(H({},s),{},{visibleContentItems:a,
requestPanelContentItems:r}),context:H(H({},e.context),{},{primaryContextItems:[...t,...i||[],...n]})})},z=e=>D(e,"ecosystemGlance"),Y=e=>"com.atlassian.jira.plugin.system.customfieldtypes:select"===e.type||"description"===e.type||"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"===e.type,Q=(e,t)=>e.map((e=>t.some((t=>t(e)))?H(H({},e),{},{hasGlobalSpotlightTarget:!0}):e)),J=e=>{const{content:t,context:s}=e,{visibleContentItems:n,requestPanelContentItems:a}=t,{primaryContextItems:i,secondaryContextItems:r}=s,o=[Y];return H(H({},e),{},{content:H(H({},t),{},{visibleContentItems:Q(n,o),requestPanelContentItems:a&&Q(a,o)}),context:H(H({},s),{},{primaryContextItems:Q(i,o),secondaryContextItems:Q(r,o)})})},Z=e=>e.map(q);const X=e=>{switch(Object(C.F)(e)){case"service_desk":return(e=>({layoutDescriptor$:t})=>({layoutDescriptor$:Z(t).map((t=>Object(C.u)(e)?W(t,e):t)).map(z).map(J)}))(e);case"business":case"software":default:return o.a}};const ee=Object(m.a)(w),te=(e,t)=>{
const s=ee(e),n=w(t);return l()(s,n)};var se=({locationTransformer:e,store:t})=>{const s=i.Observable.create((e=>{let s=t.getState();return e.next(s),t.subscribe((()=>{const n=t.getState();s!==n&&(s=n,e.next(s))}))})).distinctUntilChanged(te);return{layoutDescriptor$:e({layoutDescriptor$:(({state$:e})=>{const t=e.map(X).distinctUntilChanged();return({layoutDescriptor$:e})=>({layoutDescriptor$:t.map((t=>t({layoutDescriptor$:e}))).share().switchMap((e=>e.layoutDescriptor$))})})({state$:s})({layoutDescriptor$:(({state$:e})=>({layoutDescriptor$:e.map(w).map((e=>{const t=e.glances;return{context:{primaryContextItems:e.visibleContextItems.map(k).concat(t.map(E)).filter(S),secondaryContextItems:e.conditionallyVisibleContextItems.map(k).filter(S)},content:{visibleContentItems:e.visibleContentItems.map(k).filter(S),requestPanelContentItems:e.requestContentItems&&e.requestContentItems.map(k).filter(S)}}}))}))({state$:s}).layoutDescriptor$}).layoutDescriptor$}).layoutDescriptor$}}
;const{Provider:ne,Consumer:ae}=Object(n.createContext)({layoutDescriptor:p});class ie extends n.Component{constructor(e){super(e),this.state={layoutDescriptor:p},this.onError=e=>{d.h.safeErrorWithoutCustomerData("issue.layout-descriptor.provider","Failed to create layout descriptor",new u.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))},this.getLayoutDescriptorObservable=(()=>{const{store:e,locationTransformer:t}=this.props,{layoutDescriptor$:s}=se({store:e,locationTransformer:t}),n=s.share();return()=>n})(),this.constructorSubscription=void 0,this.componentDidMountSubscription=void 0;const t=this.getLayoutDescriptorObservable();this.constructorSubscription=t.filter(((e,t)=>0===t)).subscribe((e=>{this.state={layoutDescriptor:e}}),this.onError)}componentDidMount(){const e=this.getLayoutDescriptorObservable();this.componentDidMountSubscription=e.subscribe((e=>{l()(this.state.layoutDescriptor,e)||this.setState({layoutDescriptor:e})}),this.onError),
this.constructorSubscription.unsubscribe()}componentWillUnmount(){this.componentDidMountSubscription.unsubscribe()}render(){const{children:e}=this.props,{layoutDescriptor:t}=this.state;return a.a.createElement(ne,{value:{layoutDescriptor:t}},e)}}ie.displayName="Provider",ie.displayName="LayoutDescriptorProvider",ie.defaultProps={locationTransformer:o.a}},"./src/packages/issue/issue-view/src/media-feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=()=>({newCardExperience:Object(n.isNewCardExperience)(),zipPreviews:Object(n.isZipPreviewEnabled)(),folderUploads:Object(n.isFolderUploadsEnabled)(),codeViewer:Object(n.isCodeViewerEnabled)(),poll_intervalMs:Object(n.getClientPollingIntervalMs)(),poll_maxAttempts:Object(n.getClientPollingMaxAttempts)(),poll_backoffFactor:Object(n.getClientPollingBackoffFactor)(),poll_maxIntervalMs:Object(n.getClientPollingMaxIntervalMs)(),
poll_maxGlobalFailures:Object(n.getClientPollingMaxGlobalFailures)()})},"./src/packages/issue/issue-view/src/model/change-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));const n="FIELD_CHANGE_REQUESTED",a="FIELD_CHANGED",i="FIELD_CHANGE_FAILED",r="ISSUE_TYPE_CHANGED",o="ISSUE_RELATIONSHIP_UPDATED",c="ISSUE_LINKS_CREATED",l="ISSUE_LINK_DELETED",u="CHILD_ISSUE_ADDED",d="ISSUE_CHILDREN_ORDER_CHANGED",p={[n]:n,[i]:i,[a]:a,[r]:r,[o]:o,[c]:c,[l]:l,[u]:u,[d]:d}},"./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o={actions:[],glances:[],panels:[],activities:[],customFields:[],customFieldTypes:[],activeAction:null,panelsKeys:{newPanels:[],collapsedPanels:[]}};t.a=(e=o,t)=>{switch(t.type){case"FETCH_FORGE_SUCCESS":return i(i({},e),{},{actions:t.payload.issueAction,glances:t.payload.issueGlance,panels:t.payload.issuePanel,activities:t.payload.issueActivity,customFields:t.payload.customField,customFieldTypes:Object(n.isCustomFieldTypesEnabled)()?t.payload.customFieldType:[],activeAction:null,panelsKeys:i(i({},e.panelsKeys),{},{newPanels:[]})});case"FORGE_ISSUE_ACTION_EXEC":return i(i({},e),{},{activeAction:{
action:t.payload,isLoading:!0}});case"FORGE_ISSUE_ACTION_RENDERED":return i(i({},e),{},{activeAction:i(i({},e.activeAction),{},{isLoading:!1})});case"FORGE_ISSUE_ACTION_CLOSE":return i(i({},e),{},{activeAction:null});case"FORGE_ISSUE_PANEL_ADDED":return i(i({},e),{},{panelsKeys:i(i({},e.panelsKeys),{},{newPanels:[...e.panelsKeys.newPanels,t.payload]})});case"FORGE_NEW_ISSUE_PANEL_UNTRACK":{const s=t.payload,{panelsKeys:n}=e;return i(i({},e),{},{panelsKeys:i(i({},n),{},{newPanels:n.newPanels.filter((e=>e!==s))})})}case"FORGE_ISSUE_PANEL_REMOVED":{const s=t.payload;return i(i({},e),{},{panelsKeys:{newPanels:e.panelsKeys.newPanels.filter((e=>e!==s)),collapsedPanels:e.panelsKeys.collapsedPanels.filter((e=>e!==s))}})}case"FORGE_ISSUE_PANEL_UPDATED":{const{panelKey:s,collapsed:n}=t.payload,a=n?Array.from(new Set([...e.panelsKeys.collapsedPanels,s])):e.panelsKeys.collapsedPanels.filter((e=>e!==s));return i(i({},e),{},{panelsKeys:i(i({},e.panelsKeys),{},{collapsedPanels:a})})}
case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{var s;const n=(null===(s=t.payload.forgeIssueProperties)||void 0===s?void 0:s.collapsedPanels)||[];return i(i({},e),{},{panelsKeys:i(i({},e.panelsKeys),{},{collapsedPanels:Array.from(new Set([...e.panelsKeys.collapsedPanels,...n]))})})}default:return e}}},"./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.activityFeed)),r=Object(n.createSelector)(i,(e=>e.selectedActivityItem)),o=Object(n.createSelector)(i,(e=>e.selectedActivitySortOrder))},"./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return S}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/camelCase.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),o=s("./src/packages/platform/utils/constants/src/board-types.js"),c=s("./src/packages/platform/utils/constants/src/project-types.js"),l=s("./src/packages/platform/utils/constants/src/status-categories.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const f=Object(n.createSelector)(Object(p.q)("servicedesk-practices"),(e=>{if(e&&e.value&&e.value.length>0)return e.value[0]}))
;var g=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const j=e=>Object(u.i)(...c.f)(e),v=e=>Object(u.i)(...c.c)(e),E=e=>Object(u.i)(...o.a)(e),k=e=>Object(u.i)(...l.STATUS_CATEGORIES)(e),w=Object(n.createSelector)(Object(p.q)("assignee"),(e=>e&&e.value?e.value.accountId:null)),S=Object(n.createSelector)(d.b,m.l,m.C,m.F,m.u,b.f,g.a,d.h,d.g,m.C,d.x,w,f,((e,t,s,n,a,o,c,d,p,m,b,f,g)=>{const h={};return e&&(h.analyticsSource=e),"serviceDesk"===j(i()(n)).value&&g&&(h.itsmPractice=g),{containerType:Object(u.i)("project")("project"),containerId:m,objectType:Object(u.i)("issue")("issue"),objectId:new r.a(b),attributes:y(y({},h),{},{designVersion:Object(u.i)("v2-bento")("v2-bento"),projectId:s,issueId:t,projectConfig:v(a?"next-gen":"classic"),projectType:j(i()(n)),nextGenProject:Boolean(a),statusCategory:k(c),statusCategoryId:c?Object(l.categoryIdForStatusCategory)(c):null,issueTypeId:o,boardType:E(d),boardId:p,assigneeId:f?Object(u.i)(f)(f):f})}}))},"./src/packages/issue/issue-view/src/selectors/approval-selector/index.js":function(e,t,s){
"use strict";s.d(t,"d",(function(){return b})),s.d(t,"e",(function(){return g})),s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return y})),s.d(t,"f",(function(){return O})),s.d(t,"b",(function(){return j}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/castArray.js"),i=s.n(a),r=s("./node_modules/lodash/get.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),d=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),p=s("./src/packages/issue/issue-view/src/selectors/approval-selector/utils/index.js")
;const m=Object(n.createSelector)(((e,t)=>t?Object(l.n)(t)(e):void 0),(e=>e&&e.activeApproval)),b=Object(n.createSelector)(((e,t)=>m(e,t)),(e=>o()(e,["configuration","approvers","customFieldId"]))),f=Object(n.createSelector)(((e,t)=>m(e,t)),(e=>o()(e,["configuration","approvers","customFieldName"]))),g=Object(n.createSelector)(((e,t)=>m(e,t)),((e,t)=>{const s=t&&((e,t)=>{const s=b(e,t);return s?Object(l.n)(s)(e):void 0})(e,t);return s?i()(s):[]}),((e,t)=>f(e,t)),((e,t)=>((e,t)=>{const s=b(e,t);return s&&Object(l.r)(s)(e)})(e,t)),((e,t,s,n)=>e&&Object(p.a)(e,t,s,n))),h=Object(n.createSelector)(Object(l.q)("servicedesk-approvals"),(e=>e&&e.value&&e.value.completedApprovals||[])),y=(Object(n.createSelector)(h,(e=>e&&e.length)),Object(n.createSelector)(d.a,d.L,d.K,d.F,d.J,h,((e,t,s,n,a,i)=>{const r=[];Object.keys(e).filter((e=>t.includes(e))).forEach((t=>{const s=e[t],n={comment:s,timestamp:new Date(s.createdDate).getTime(),type:"COMMENT"};r.push(n)})),i&&i.forEach((e=>{const t={
approval:e,timestamp:o()(e,"completedDate.epochMillis"),type:"APPROVAL"};r.push(t)})),r.sort(((e,t)=>e.timestamp-t.timestamp));let c=r.slice();const l=n+a;return a&&s>n&&c[c.length-1]&&"APPROVAL"===c[c.length-1].type&&(c=c.slice(0,c.map((e=>e.type)).lastIndexOf("COMMENT")+1)),s>l&&c[0]&&"APPROVAL"===c[0].type?c.slice(c.map((e=>e.type)).indexOf("COMMENT")):c}))),O=Object(n.createSelector)(d.a,d.I,u.b,d.K,d.F,d.J,h,((e,t,s,n,a,i,r)=>{const c=[];Object.keys(e).filter((e=>t.includes(e))).forEach((t=>{const s=e[t],n={comment:s,timestamp:new Date(s.createdDate).getTime(),type:"COMMENT"};c.push(n)})),r&&r.forEach((e=>{const t={approval:e,timestamp:o()(e,"completedDate.epochMillis"),type:"APPROVAL"};c.push(t)})),c.sort(((e,t)=>"OLDEST_FIRST"===s?e.timestamp-t.timestamp:t.timestamp-e.timestamp));let l=c.slice();const u=a+i;return i&&n>a&&l[l.length-1]&&"APPROVAL"===l[l.length-1].type&&(l=l.slice(0,l.map((e=>e.type)).lastIndexOf("COMMENT")+1)),
n>u&&l[0]&&"APPROVAL"===l[0].type?l.slice(l.map((e=>e.type)).indexOf("COMMENT")):l})),j=Object(n.createSelector)(g,c.a,((e,t)=>!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some((e=>e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)))))},"./src/packages/issue/issue-view/src/selectors/approval-selector/utils/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var n=s("./node_modules/lodash/every.js"),a=s.n(n),i=s("./node_modules/lodash/fp/get.js"),r=s.n(i),o=s("./node_modules/lodash/unionBy.js"),c=s.n(o),l=s("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),u=s.n(l);function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=(e,t,s)=>(e=>void 0===e)(r()(t,s))?e:r()(t,s),f=(e,t,s)=>t.filter((t=>s.some((s=>e(t)===e(s))))),g=(e,t,s)=>t.filter((t=>!s.some((s=>e(t)===e(s))))),h=({key:e,accountId:t,displayName:s,avatarUrls:n})=>({approver:{accountId:t,key:e,displayName:s,isFromLinkedField:!0,avatarUrl:b(u.a,"24x24",n)}}),y=({approver:{key:e,accountId:t,displayName:s},approverDecision:n})=>({approver:{accountId:t,key:e,displayName:s},approverDecision:n}),O=(e,t)=>{const s=a()(t,(e=>e.approver.accountId));return((e,t)=>{const s=e.map((e=>e.approver.accountId));return t.map((e=>s.includes(e.approver.accountId)?{
approverDecision:e.approverDecision,approver:p(p({},e.approver),{},{isFromLinkedField:!0})}:e))})(t,c()(e,t,(e=>s?e.approver.accountId:null)))},j=(e,t)=>{if(t&&t.value){const s=+t.value;if("number"===t.type)return s;if("percent"===t.type)return Math.ceil(e*(s/100))}return e},v=({name:e})=>({name:e,type:"group",meta:{memberCount:NaN,approvedCount:NaN},id:void 0}),E=(e,t)=>{const s=e||[];return[...f(r()("name"),s,t),...g(r()("name"),t,s).map(v)]},k=(e,t,s,n)=>"multi_group_picker"!==e.configuration.approvers.type?((e,t,s,n)=>{const a=(t?e.approvers.filter((e=>"pending"!==e.approverDecision)):e.approvers).map(y),i=t.map(h),o=O(a,i),c=r()(["configuration","condition"],e),l=j(o.length,c),u="com.atlassian.jira.plugin.system.customfieldtypes:userpicker"===n,{id:d,name:p,finalDecision:m,canAnswerApproval:b,decisions:f,approverPrincipals:g}=e;return{id:d,name:p,finalDecision:m,approvers:o,minApprovalsRequired:l,canAnswerApproval:b,linkedFieldName:s,isSingleUserPicker:u,decisions:(f||[]).map(y),
approverPrincipals:g,configuration:e.configuration}})(e,t,s,n):(({id:e,name:t,finalDecision:s,approvers:n,configuration:a,canAnswerApproval:i,decisions:r,approverPrincipals:o},c,l)=>({id:e,name:t,finalDecision:s,approvers:n.map(y),minApprovalsRequired:j(n.length,a.condition),canAnswerApproval:i,linkedFieldName:l,isSingleUserPicker:!1,decisions:(r||[]).map(y),approverPrincipals:E(o,c),configuration:a}))(e,t,s)},"./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const r=Object(n.createSelector)(i.H,(e=>e.assignIssueParentModal.isOpen)),o=Object(n.createSelector)(a.l,i.A,((e,t)=>[{id:e.issueId,key:e.issueKey,parentId:t&&t.id}]))},
"./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js");const i=Object(n.createSelector)(a.a,(e=>e.picker)),r=Object(n.createSelector)(i,(e=>e.attachments||e.uploadedAttachments)),o=Object(n.createSelector)(i,(e=>e.isPopupOpen)),c=e=>Object(n.createSelector)(r,(t=>t[e]))},"./src/packages/issue/issue-view/src/selectors/attachment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const r=Object(n.createSelector)(i.h,(e=>e.canCreateAttachments)),o=Object(n.createSelector)(a.H,(e=>e.attachments))},"./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"c",(function(){return v})),s.d(t,"h",(function(){return E})),s.d(t,"i",(function(){return k})),s.d(t,"b",(function(){return w})),s.d(t,"g",(function(){return S})),s.d(t,"f",(function(){return C})),s.d(t,"e",(function(){return I})),s.d(t,"d",(function(){return T}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/configurations.js")
;const c=(e,t)=>`${e?e.replace(/\/?$/,"/"):"/"}browse/${t}`,l=(e,t)=>`${window.location.protocol}//${window.location.host}${c(e,t)}`,u=Object(i.q)("issuetype"),d=Object(i.q)("parent"),p=Object(i.q)("epic"),m=Object(i.q)(o.a),b=Object(n.createSelector)(p,a.f,((e,t)=>((e,t)=>e&&void 0!==t?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t))),f=Object(n.createSelector)(m,a.f,((e,t)=>((e,t)=>e&&e.data?{summary:e.data.summary,key:e.data.key,url:c(t,e.data.key),issueTypeName:e.data.issueTypeName||"",issueTypeIconUrl:e.data.issueTypeIconUrl||""}:null)(e&&e.value,t))),g=Object(n.createSelector)(d,a.f,((e,t)=>((e,t)=>e?{summary:e.fields.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t))),h=Object(n.createSelector)(r.A,a.f,((e,t)=>((e,t)=>e?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",
issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e,t))),y=Object(n.createSelector)(h,g,f,((e,t,s)=>e||t||s)),O=Object(n.createSelector)(b,h,((e,t)=>[e,t].filter((e=>e)))),j=Object(n.createSelector)(b,y,((e,t)=>[e,t].filter((e=>e)))),v=e=>e?O:j,E=Object(n.createSelector)(u,(e=>e&&e.value)),k=Object(n.createSelector)(a.f,a.y,c),w=Object(n.createSelector)(a.f,a.y,l),S=Object(n.createSelector)(E,(e=>e&&e.name)),C=Object(n.createSelector)(E,(e=>e&&e.id)),I=Object(n.createSelector)(E,(e=>e&&e.iconUrl)),T=Object(n.createSelector)(u,(e=>e&&Boolean(e.editable)))},"./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return p}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const u=Object(n.createSelector)(l.f,(e=>e.cardCover)),d=Object(n.createSelector)(u,(e=>e&&e.isEnabled)),p=(Object(n.createSelector)(u,(e=>e&&(!o()(e.attachmentId)||!i()(e.availableAttachmentIds)))),Object(n.createSelector)(c.w,(e=>!!e&&e.includes("cardCoverActions"))))},"./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return b})),s.d(t,"d",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"a",(function(){return h}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");var l=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js")
;const d=Object(n.createSelector)(o.H,(e=>e.changeboarding)),p=["core-issue","full-issue","software-issue","software-backlog-issue"],m=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],b=Object(n.createSelector)(r.b,u.a,o.u,((e,t,s)=>p.includes(null==e?void 0:e.value)&&!t&&!s)),f=Object(n.createSelector)(r.b,u.a,o.u,((e,t,s)=>m.includes(null==e?void 0:e.value)&&!t&&!s)),g=(Object(n.createSelector)(b,d,(e=>{const{firstActivationDateMs:t}=e.context;return(e=>null!=e&&e<15357276e5)(t)}),(()=>Object(i.a)()<7),l.a,u.a,((e,t,s,n,a,i)=>e&&t.isBannerVisible&&s&&n&&!a&&!i)),Object(n.createSelector)(d,(e=>e.isTourActive)),Object(n.createSelector)(d,(e=>e.isBannerDismissed))),h=Object(n.createSelector)(c.j,(e=>e.some((e=>"assignee"===e.id))))},"./src/packages/issue/issue-view/src/selectors/children-issues-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.childrenIssues))},"./src/packages/issue/issue-view/src/selectors/comment-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return y})),s.d(t,"K",(function(){return O})),s.d(t,"J",(function(){return j})),s.d(t,"F",(function(){return v})),s.d(t,"E",(function(){return E})),s.d(t,"v",(function(){return k})),s.d(t,"G",(function(){return C})),s.d(t,"a",(function(){return I})),s.d(t,"e",(function(){return L})),s.d(t,"q",(function(){return M})),s.d(t,"i",(function(){return R})),s.d(t,"l",(function(){return N})),s.d(t,"j",(function(){return F})),s.d(t,"f",(function(){return U})),s.d(t,"g",(function(){return V})),s.d(t,"r",(function(){return K})),s.d(t,"h",(function(){return W})),s.d(t,"H",(function(){return B})),s.d(t,"o",(function(){return H})),s.d(t,"p",(function(){return $})),s.d(t,"m",(function(){
return G})),s.d(t,"s",(function(){return q})),s.d(t,"k",(function(){return z})),s.d(t,"D",(function(){return Y})),s.d(t,"C",(function(){return Q})),s.d(t,"b",(function(){return J})),s.d(t,"c",(function(){return Z})),s.d(t,"d",(function(){return X})),s.d(t,"L",(function(){return ee})),s.d(t,"I",(function(){return te})),s.d(t,"B",(function(){return se})),s.d(t,"u",(function(){return ne})),s.d(t,"n",(function(){return ae})),s.d(t,"A",(function(){return ie})),s.d(t,"w",(function(){return re})),s.d(t,"y",(function(){return oe})),s.d(t,"x",(function(){return ce})),s.d(t,"z",(function(){return le}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/values.js"),i=s.n(a),r=s("./node_modules/date-fns--current/compare_asc/index.js"),o=s.n(r),c=s("./node_modules/date-fns--current/compare_desc/index.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const h=Object(n.createSelector)(d.H,(e=>e.comments.pendingDeletedIds)),y=Object(n.createSelector)(d.f,(e=>e.comments)),O=Object(n.createSelector)(d.f,(e=>e.totalComments)),j=Object(n.createSelector)(d.f,(e=>e.commentsStartIndex)),v=Object(n.createSelector)(d.f,(e=>e.loadedComments)),E=Object(n.createSelector)(d.H,(e=>e.comments.isLoadingMoreComments)),k=Object(n.createSelector)(d.H,(e=>e.comments.hasScrolledPermalinkComment)),w=Object(n.createSelector)(d.H,(e=>e.comments.pendingSavedValues)),S=Object(n.createSelector)(d.H,(e=>e.comments.deleteModalCommentId)),C=Object(n.createSelector)(d.H,(e=>e.comments.loadingStage)),I=Object(n.createSelector)(y,w,((e,t)=>f(f({},e),t))),T=e=>Object(n.createSelector)(I,(t=>t[e])),P=e=>Object(n.createSelector)(T(e),u.a,((e,t)=>null!==t&&t===(e&&e.authorId))),_=(e,t)=>Object(n.createSelector)(T(e),d.k,((e,s)=>e&&e[t]?s(e[t]):null)),x=Object(n.createSelector)(d.H,(e=>e&&e.comments||null)),D=Object(n.createSelector)(x,(e=>e&&e.commentEditors||null)),A=e=>Object(n.createSelector)(D,(t=>t&&t[e]||null)),L=e=>_(e,"authorId"),M=e=>_(e,"updateAuthorId"),R=e=>Object(n.createSelector)(A(e),(e=>e&&e.editingValue||null)),N=e=>Object(n.createSelector)(A(e),(e=>e&&e.visibility||null)),F=e=>Object(n.createSelector)(R(e),T(e),((e,t)=>e||t&&t.bodyAdf||null)),U=e=>Object(n.createSelector)(T(e),(e=>e?e.bodyHtml:null)),V=e=>Object(n.createSelector)(T(e),(e=>e?e.createdDate:null)),K=e=>Object(n.createSelector)(T(e),(e=>e?e.updatedDate:null)),W=e=>Object(n.createSelector)(T(e),(e=>e?e.edited:null)),B=e=>Object(n.createSelector)(w,(t=>t[e])),H=e=>Object(n.createSelector)(B(e),(e=>!!e)),$=e=>Object(n.createSelector)(B(e),(e=>!(!e||!e.hasSaveFailed))),G=e=>Object(n.createSelector)(S,(t=>t===e)),q=e=>Object(n.createSelector)(T(e),(e=>e?e.visibility:null)),z=e=>Object(n.createSelector)(N(e),q(e),((e,t)=>e||t)),Y=e=>Object(n.createSelector)(u.t,(e=>Object(n.createSelector)(T(e),(e=>!!e&&e.isInternal)))(e),((e,t)=>e&&t)),Q=e=>Object(n.createSelector)(A(e),(e=>!e||e.isInternal)),J=Object(n.createSelector)(p.h,(e=>e.canAddComments)),Z=e=>Object(n.createSelector)(p.h,P(e),((e,t)=>e.canDeleteAllComments||e.canDeleteOwnComments&&t)),X=e=>Object(n.createSelector)(p.h,P(e),((e,t)=>e.canEditAllComments||e.canEditOwnComments&&t)),ee=Object(n.createSelector)(I,h,((e,t)=>Object.keys(e).filter((e=>!t.includes(e))).map((t=>({
id:t,createdDate:new Date(e[t].createdDate)}))).sort(((e,t)=>o()(e.createdDate,t.createdDate))).map((e=>e.id)))),te=Object(n.createSelector)(m.b,I,h,((e,t,s)=>Object.keys(t).filter((e=>!s.includes(e))).map((e=>({id:e,createdDate:new Date(t[e].createdDate)}))).sort(((t,s)=>"OLDEST_FIRST"===e?o()(t.createdDate,s.createdDate):l()(t.createdDate,s.createdDate))).map((e=>e.id)))),se=e=>Object(n.createSelector)(A(e),(e=>!!e&&e.isEditing)),ne=Object(n.createSelector)(ee,(e=>e),((e,t)=>e.filter((e=>se(e)(t))))),ae=Object(n.createSelector)(y,(e=>e?Object.keys(e).filter((t=>"object"==typeof e[t])):[])),ie=Object(n.createSelector)(ae,(e=>e),((e,t)=>e.some((e=>se(e)(t))))),re=Object(n.createSelector)(d.H,(e=>e.comments.addCommentEditorExpand||!1)),oe=Object(n.createSelector)(re,D,((e,t)=>e||!!t&&i()(t).some((e=>e.isEditing)))),ce=Object(n.createSelector)(d.H,(e=>e.comments.isCommentAttachmentInProgress)),le=Object(n.createSelector)(d.u,d.F,((e,t)=>!e&&("business"===t||"software"===t)))},
"./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const o=Object(n.createSelector)(a.f,(e=>e.confluenceAppLinks||[])),c=Object(n.createSelector)(o,(e=>e.length)),l=Object(n.createSelector)(o,(e=>e&&e.length>0)),u=Object(n.createSelector)(l,i.c,r.d,((e,t,s)=>e&&t&&s))},"./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){
return b})),s.d(t,"h",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"i",(function(){return y}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.f,(e=>e.confluencePages)),r=Object(n.createSelector)(i,(e=>e.createLinkedPage)),o=Object(n.createSelector)(r,(e=>e.errorMessage)),c=Object(n.createSelector)(r,(e=>e.isInvalid)),l=Object(n.createSelector)(r,(e=>e.isLoading)),u=Object(n.createSelector)(r,(e=>e.clickedCount>0)),d=Object(n.createSelector)(r,(e=>e.clickedCount)),p=Object(n.createSelector)(i,(e=>e&&e.linkedPages)),m=Object(n.createSelector)(i,(e=>e&&e.mentionedPages)),b=Object(n.createSelector)(i,(e=>!(!e||!e.isLinkingEnabled))),f=Object(n.createSelector)(p,(e=>e&&e.pages)),g=Object(n.createSelector)(m,(e=>e&&e.pages)),h=Object(n.createSelector)(p,(e=>e&&e.pageCount)),y=Object(n.createSelector)(m,(e=>e&&e.pageCount))},"./src/packages/issue/issue-view/src/selectors/context-panel-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.contextPanel)),r=Object(n.createSelector)(i,(e=>e&&e.isContextPanelOpen)),o=Object(n.createSelector)(i,(e=>e&&e.contextPanelItem))},"./src/packages/issue/issue-view/src/selectors/drafts/selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.drafts)),r=e=>Object(n.createSelector)(i,(t=>!!t[e]))},"./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.H,(e=>e.ecosystem&&e.ecosystem.glance))},"./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"d",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const i=Object(n.createSelector)(a.h,(e=>e.canCloneIssue)),r=Object(n.createSelector)(a.h,(e=>e.canDeleteIssue)),o=Object(n.createSelector)(a.h,(e=>e.canMoveIssue)),c=Object(n.createSelector)(a.h,(e=>e.canEditIssues)),l=(Object(n.createSelector)(a.h,(e=>e.canAdministerJira||e.canAdministerProject)),Object(n.createSelector)(a.h,(e=>e.canAssignIssues)),Object(n.createSelector)(a.h,(e=>e.canLinkIssues)))},"./src/packages/issue/issue-view/src/selectors/issue-links-selector.js":function(e,t,s){
"use strict";s.d(t,"e",(function(){return f})),s.d(t,"k",(function(){return h})),s.d(t,"i",(function(){return y})),s.d(t,"g",(function(){return j})),s.d(t,"d",(function(){return v})),s.d(t,"b",(function(){return E})),s.d(t,"c",(function(){return w})),s.d(t,"f",(function(){return S})),s.d(t,"h",(function(){return C})),s.d(t,"j",(function(){return I})),s.d(t,"l",(function(){return T})),s.d(t,"a",(function(){return P}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/pickBy.js"),o=s.n(r),c=s("./node_modules/lodash/toArray.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=Object(n.createSelector)(u.f,(e=>e.issueLinks)),f=Object(n.createSelector)(b,(e=>!!e)),g=Object(n.createSelector)(b,(e=>e&&e.issueLinks)),h=e=>e.entities.remoteIssueLinks.remoteIssues,y=Object(n.createSelector)(g,(e=>e&&o()(e,(e=>e.isOptimistic)))),O=Object(n.createSelector)(b,(e=>e&&e.linkedIssues)),j=Object(n.createSelector)(b,(e=>e?e.linkedIssueKeys:[])),v=(Object(n.createSelector)(g,(e=>!i()(e))),
Object(n.createSelector)(g,h,((e,t)=>!i()(e)||!i()(t)))),E=Object(n.createSelector)(j,h,((e,t)=>e.length+t.length)),k=Object(n.createSelector)(g,O,((e,t)=>i()(e)?null:l()(e).filter((e=>!e.isDeleted)).map((e=>p(p({},e),{},{linkedIssue:t[e.linkedIssueKey]}))).reduce(((e,t)=>Object.assign(e,{[t.typeName]:[...e[t.typeName]||[],t]})),{}))),w=Object(n.createSelector)(k,h,((e,t)=>{if(null==e&&0===t.length)return null;const s=e=>({id:e.remoteIssueId,issueKey:e.issueKey,issueLink:e.issueLinkUrl,issueSummary:e.summary,issueTypeIconUrl:e.iconUrl});return t.reduce(((e,t)=>{const{issueDetails:n,relationship:a,id:i,issueKey:r,issueLinkUrl:o,remoteIssueLinkError:c,globalId:l,isSaved:u,isLoading:d,isOptimistic:m,hasError:b,isDeleted:f}=t;return null==a||f?e:p(p({},e),{},{[a]:[...e[a]||[],{id:i.toString(),direction:"OUTWARD",typeName:a,linkedIssueKey:r,linkedIssue:n||s(t),isRemote:!0,globalId:l,remoteServerHostname:new URL(o).hostname,remoteIssueLinkError:c,isSaved:u,isLoading:d,isOptimistic:m,
hasError:b}]})}),p({},e))})),S=e=>Object(n.createSelector)(g,(t=>t&&t[e]||null)),C=e=>Object(n.createSelector)(O,(t=>t&&t[e]||null)),I=Object(n.createSelector)(b,(e=>e&&e.quickAddClicked)),T=Object(n.createSelector)(I,(e=>!!e)),P=Object(n.createSelector)(b,(e=>e&&e.canCreateLinkedIssue))},"./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js");const o=Object(n.createSelector)(a.f,(e=>e.jiraSettings.issueLinkTypes)),c=Object(n.createSelector)(i.h,r.e,o,(({canLinkIssues:e},t,s)=>!!(e&&t&&s&&s.length)))},
"./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.issueRemoteData)),r=Object(n.createSelector)(i,(e=>e.isLoadingComplete))},"./src/packages/issue/issue-view/src/selectors/issue-types-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js")
;const c=Object(n.createSelector)(r.f,(e=>e.issueTypes)),l=["summary","issuetype","parent","project"],u=e=>!!Object.keys(e).find((t=>!(e=>l.find((t=>e===t)))(t)&&!e[t].hasDefaultValue&&e[t].required)),d=e=>i()(e.fields)||u(e.fields),p=Object(n.createSelector)(c,o.h,r.q,((e,t,s)=>{const n=s&&t&&t.id;return e.filter((e=>!e.subtask&&e.id!==n))})),m=Object(n.createSelector)(r.H,(e=>e.fetchIssueTypesStatus))},"./src/packages/issue/issue-view/src/selectors/project-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.f,(e=>e.project)),r=Object(n.createSelector)(i,(e=>e?e.projectName:null)),o=Object(n.createSelector)(i,(e=>e?e.avatarUrl:null)),c=Object(n.createSelector)(i,(e=>e?e.issueTypeHierarchy:null)),l=Object(n.createSelector)(c,(e=>e?e.baseLevelId:null)),u=Object(n.createSelector)(c,(e=>e?e.levels:{})),d=Object(n.createSelector)(l,u,((e,t)=>{const s=[];if(!e||!t)return s;const n=t[e];if(!n)return s;let a=n.belowLevelId?t[n.belowLevelId]:void 0;for(;void 0!==a;)s.push(a),a=a.belowLevelId?t[a.belowLevelId]:void 0;return s}))},"./src/packages/issue/issue-view/src/selectors/share-as-comment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.shareAsComment,i=Object(n.createSelector)(a,(e=>e.value)),r=Object(n.createSelector)(a,(e=>e.timestamp))},"./src/packages/issue/issue-view/src/selectors/status-selector.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const r=Object(n.createSelector)(Object(i.o)("status"),(e=>e?Object(a.statusCategoryForId)(e.statusCategory.id):null))},"./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const i=Object(n.createSelector)(a.d,(e=>e.filter((e=>e.subtask)))),r=Object(n.createSelector)(i,(e=>e.length>=1)),o=Object(n.createSelector)(i,(e=>!!e.find(a.b)))},"./src/packages/issue/issue-view/src/selectors/subtasks-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),
s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return f}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const c=Object(n.createSelector)((e=>e.validators),(e=>{const t=e.projectHasSubtaskValidators;return(e=>"LOADED"===e.status&&e.value)(t)||(e=>"LOADING"===e.status||"FAILED"===e.status)(t)}));var l=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js")
;const u=Object(n.createSelector)(o.h,(e=>!(!e||!e.subtask))),d=Object(n.createSelector)(i.f,(e=>e.subtasks)),p=Object(n.createSelector)(d,(e=>e.length>0)),m=Object(n.createSelector)(l.a,c,((e,t)=>e||t)),b=Object(n.createSelector)(i.f,(({jiraSettings:e})=>e.subtasksConfiguration.enabled)),f=Object(n.createSelector)(r.h,u,l.b,m,a.s,a.p,a.t,i.u,b,(({canCreateSubtask:e},t,s,n,a,i,r,o,c)=>!(!e||t||!s||!!n&&(a||i)||!(!r||!o)||!c)))},"./src/packages/issue/issue-view/src/selectors/tab-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function o(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=Object(n.createSelector)(r.d,(e=>e&&e.tabs||{})),d=e=>Object(n.createSelector)(u,(t=>Boolean(Object.keys(t).find((s=>t[s].items.find((t=>t.id===e))))))),p=(e,t)=>t,m=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){const s=t;return e.map((e=>e.id)).sort().join("")===s.map((e=>e.id)).sort().join("")}return!1},b=()=>{
const e=Object(a.a)(((e,t)=>c(c({},e),{},{items:t})),m);return Object(n.createSelector)((()=>Object(n.createSelector)(u,p,((e,t)=>e[t]||null)))(),(e=>e),((t,s)=>{if(!t)return null;const n=t.items.filter((({id:e})=>!!Object(i.c)(e,s)));return n.length>0?e(t,n):null}))},f=(e,t)=>{if(!t)return!1;return!!b()(e,t)}},"./src/packages/issue/issue-view/src/selectors/ui-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.uiConfig)),r=Object(n.createSelector)(i,(e=>Boolean(e&&e.newIssueViewLockedIn)))},"./src/packages/issue/issue-view/src/selectors/web-links-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){
return p}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(a.f,(e=>e.webLinks)),o=Object(n.createSelector)(r,(e=>e.links.filter((e=>void 0===e.isDeleting||!0!==e.isDeleting)))),c=e=>Object(n.createSelector)(o,(t=>t.find((t=>t.id===e)))),l=Object(n.createSelector)(r,i.h,((e,t)=>!0===e.isLinkingEnabled&&t.canLinkIssues)),u=Object(n.createSelector)(r,(e=>e.linkCount)),d=Object(n.createSelector)(r,(e=>e.createClickCount)),p=Object(n.createSelector)(d,(e=>e>0))},"./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const a=[400,403,401,404,409,412],i=e=>e>=400&&e<=499&&429!==e;t.a=e=>{if(e instanceof n.a)return!1
;return!(e instanceof n.b&&e.statusCode&&(e=>a.some((t=>t===e)))(e.statusCode))&&("TypeError"!==e.name&&"AbortError"!==e.name)}},"./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");class a extends Error{constructor(e,t){if(e instanceof a)return e;super(e.message),this.endpoint=void 0,this.traceId=void 0,this.error=void 0,this.statusCode=void 0,this.error=e,this.message=e.message,e instanceof n.b&&(null!=e.traceId&&(this.traceId=e.traceId),this.statusCode=e.statusCode),this.endpoint=t}}},"./src/packages/issue/issue-view/src/utils/performance-analytics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./node_modules/@atlassian/browser-metrics/dist/es2019/factory/index.js");const a=n.a.custom({key:"issue-view-load",virtual:!0,timings:[{key:"preview",startMark:"metrics_init",
endMark:"ISSUE_PREVIEW_RENDERED"},{key:"startDataFetch",startMark:"ISSUE_START_FETCHING_DATA",endMark:"ISSUE_FETCHED_MARK"}]}),i=n.a.custom({key:"embedded-issue-view-load",until:a,include:[a]});n.a.pageLoad({key:"service-management.queues.issue"}),n.a.pageLoad({key:"service-management.reports.issue"})},"./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return b}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-resource-router/build/esm/index.js"),i=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-user-auth/index.js"),r=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-upload-permissions/index.js"),o=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-read-permissions/index.js"),c=s("./src/packages/routes/src/ui/spa/issue/resources/issue-gira-data/index.js"),l=s("./src/packages/routes/src/ui/spa/issue/resources/issue-graphql-data/index.js"),u=s("./src/packages/routes/src/ui/spa/issue/resources/issue-forge-data/index.js"),d=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js");let p;const m=()=>{const e=(()=>{var e;return p=null!==(e=p)&&void 0!==e?e:new d.a,p
})(),{data:t,promise:s}=Object(a.n)(i.a),{data:m,promise:b}=Object(a.n)(r.a),{data:f,promise:g}=Object(a.n)(o.a),{data:h,promise:y}=Object(a.n)(c.a),{data:O,promise:j}=Object(a.n)(l.a),{promise:v}=Object(a.n)(u.a);return Object(n.useMemo)((()=>{y&&j&&(e.setAllPromises({mediaUserAuthPromise:s,mediaUploadPermissionPromise:b,mediaReadPermissionPromise:g,issueGiraDataPromise:y,issueGraphqlDataPromise:j}),e.setAllData({mediaUserAuth:t,mediaUploadPermission:m,mediaReadPermission:f,issueGiraData:h,issueGraphqlData:O})),v&&e.setForgePromise(v)}),[v,h,y,O,j,f,g,m,b,t,s,e]),[e]},b=()=>{const e=[Object(a.n)(c.a),Object(a.n)(l.a)];return{loading:e.some((({loading:e})=>e)),error:e.map((({error:e})=>e)).find(Boolean)||null,promise:Promise.all(e.map((({promise:e})=>e))).then((()=>{}))}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js":function(e,t,s){"use strict";t.a=class{constructor(){this.issueMediaUserAuth=null,
this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueGiraData=null,this.issueGraphqlData=null,this.issueForgeData=null,this.allData={},this.getGiraData=()=>this.allData.issueGiraData&&this.allData.issueGiraData.data,this.getGqlData=()=>this.allData.issueGraphqlData&&this.allData.issueGraphqlData.data,this.getMediaUser=()=>this.allData.mediaUserAuth,this.getMediaReadPermission=()=>this.allData.mediaReadPermission,this.getMediaUploadPermission=()=>this.allData.mediaUploadPermission,this.isAllDataReady=()=>!(!this.getGiraData()||!this.getGqlData()),this.containsInitialPromises=()=>!!(this.issueMediaUploadPermission&&this.issueMediaUserAuth&&this.issueMediaReadPermission&&this.issueGiraData&&this.issueGraphqlData)}setAllData(e){this.allData=e}setAllPromises(e){this.issueMediaUserAuth=e.mediaUserAuthPromise,this.issueMediaUploadPermission=e.mediaUploadPermissionPromise,this.issueMediaReadPermission=e.mediaReadPermissionPromise,
this.issueGiraData=e.issueGiraDataPromise,this.issueGraphqlData=e.issueGraphqlDataPromise}setForgePromise(e){this.issueForgeData=e}getAllPromises(){return[this.issueMediaUserAuth,this.issueMediaUploadPermission,this.issueMediaReadPermission,this.issueGiraData,this.issueGraphqlData]}clearAll(){this.allData={},this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueMediaUserAuth=null,this.issueGiraData=null,this.issueForgeData=null,this.issueGraphqlData=null}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");const i=(e,t)=>e?Object(a.isBentoPrefetchErrorFixEnabled)()?n.Observable.fromPromise(e).catch(t):n.Observable.fromPromise(e):t()},"./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/assign-issue-parent-modal/src/async.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),l=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js"),m=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js");function f(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a
}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const g=Object(r.f)((()=>s.e("async-assign-issue-parent-modal").then(s.bind(null,"./src/packages/assign-issue-parent-modal/src/index.js"))),{moduleId:"./src/packages/assign-issue-parent-modal/src/index.js"}),h=e=>{let{isOpen:t}=e,s=f(e,["isOpen"]);return a.a.createElement(c.f,null,t&&a.a.createElement(o.a,{packageName:"issue"},a.a.createElement(g,s)))};h.displayName="ModalWithTransition",t.a=Object(i.b)((e=>{const t=Object(u.b)(e);return{isOpen:Object(b.b)(e),issues:Object(b.a)(e),issueParents:Object(d.B)(e),issueHierarchyLevel:Object(p.collapsedHierarchies)()?Object(m.b)(e):Object(m.f)(e),issueParentTypeIds:Object(m.g)(e),shouldHideUnassignOption:Object(m.e)(e),parentIssueTypeName:Object(m.h)(e)[0],locale:Object(u.A)(e),baseUrl:Object(u.f)(e),projectId:Object(d.C)(e),
analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}),(e=>({onClose:()=>{e(Object(l.d)())},onSubmit:(t,s,n,a)=>{e(Object(l.e)(t,n,a))}})))(h)},"./src/packages/issue/issue-view/src/views/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var r=({renderTopBanner:e,applicationKey:t,isProjectSimplified:s})=>e?e(t,s):null;t.a=Object(n.b)((e=>({applicationKey:Object(a.e)(e),isProjectSimplified:Object(i.u)(e)})),{})(r)},"./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),c=s("./node_modules/@atlaskit/icon/glyph/add.js"),l=s.n(c);class u extends n.Component{render(){const{label:e,onClick:t}=this.props;return a.a.createElement("div",null,a.a.createElement(o.a,{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(l.a,{size:"small",label:e}),onClick:t}))}}u.displayName="SquareAddIconButton",u.defaultProps={onClick:r.a}},"./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js")
;const l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["height:100%;display:flex;flex-direction:column;"]),{Provider:u,Consumer:d}=Object(n.createContext)(!1),p=({children:e,defaultIsCompact:t})=>{const[s,i]=Object(n.useState)(t),d=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:e=>{d(null!=e&&e<=600)}})),a.a.createElement(l,null,a.a.createElement(u,{value:s},e)))},m=d},"./src/packages/issue/issue-view/src/views/common/delete-button/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),r=s.n(i),o=s("./src/packages/issue/issue-view/src/views/common/line-card-hidden-button/index.js");const c=e=>{const{show:t,onClick:s}=e;return a.a.createElement(o.a,{show:t,icon:a.a.createElement(r.a,null),onClick:s})};c.displayName="DeleteButton"},
"./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.displayName||e.name||"Component"},"./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const d=Object(i.b)((e=>({experience:"editIssue",
application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e)})),{})(r.b),p=Object(i.b)(((e,t)=>({field:t.fieldId,isEditing:Object(l.E)(t.fieldId)(e)})),{})(r.a),m=e=>t=>{const s=s=>a.a.createElement(p,{fieldId:e},a.a.createElement(t,s));return s.displayName=`WithEditExperienceTracker(${Object(u.a)(t)})`,s}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return y})),s.d(t,"b",(function(){return O}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const d=e=>e.ui.viewMountStatus.hasIssueViewMounted;var p=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const m="NEVER_TRACKING",b="requestDetailsPanel",f={description:"ALWAYS_TRACKING",ecosystemGlance:m,forgeGlance:m,assignee:m,reporter:m,"com.pyxis.greenhopper.jira:gh-sprint":m,"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":m,"com.pyxis.greenhopper.jira:gh-epic-link":m,fixVersions:m,
versions:m,devSummary:m,releases:m,"com.atlassian.servicedesk.assets-plugin:assetfield":m,ASSET_ONBOARDING:m,"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":m,labels:[b],components:[b],duedate:[b],priority:[b],environment:[b],labels:[b],components:[b],"com.atlassian.servicedesk.approvals-plugin:sd-approvals":[b],KNOWLEDGE_BASE:[b],SLA_PANEL:[b],timeoriginalestimate:[b],timetracking:[b],"com.atlassian.jpo:jpo-custom-field-parent":[b],"com.atlassian.jpo:jpo-custom-field-baseline-start":[b],"com.atlassian.jpo:jpo-custom-field-baseline-end":[b],"com.atlassian.jira.plugin.system.customfieldtypes:labels":[b],"com.atlassian.jira.plugin.system.customfieldtypes:textfield":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:url":[b],"com.atlassian.jira.plugin.system.customfieldtypes:float":[b],"com.pyxis.greenhopper.jira:jsw-story-points":[b],
"com.atlassian.jira.plugin.system.customfieldtypes:select":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":[b],"com.atlassian.jira.plugin.system.customfieldtypes:textarea":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":[b],"com.atlassian.jira.plugin.system.customfieldtypes:version":[b],"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:datetime":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":[b],"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":[b],"com.atlassian.teams:rm-teams-custom-field-team":[b],number:[b],datetime:[b],string:[b],option2:[b],array:[b],"com.atlassian.servicedesk:vp-origin":[b],
"com.atlassian.servicedesk:sd-request-participants":[b],"com.atlassian.servicedesk:sd-customer-organizations":[b],"com.atlassian.servicedesk:sd-request-feedback":[b],"com.pyxis.greenhopper.jira:jsw-issue-color":[b],"com.atlassian.jira.plugin.system.customfieldtypes:people":[b],"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":[b],"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":[b],"com.atlassian.jira.plugin.system.customfieldtypes:project":[b]};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const h=Object(i.b)((e=>({experience:"viewIssue",experienceId:Object(c.y)(e),application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e),isExperienceReady:Object(u.n)(e)&&d(e)})),{})(r.e),y=e=>t=>{const s=s=>a.a.createElement(r.d,{location:e
},(({onExperienceSuccess:e})=>a.a.createElement(t,g({onExperienceSuccess:e},s))));return s.displayName=`WithViewExperienceTracker(${Object(p.a)(t)})`,s},O=e=>t=>{const s=({fieldType:s,ownProps:n})=>{const i=s&&(e=>{const t=f[e];return void 0===t?m:t})(s);if(null==s||"NEVER_TRACKING"===i)return a.a.createElement(t,n);const o=Array.isArray(i)?i:null,c=["field",s,...e?[e]:[]].join("-");return a.a.createElement(r.c,{location:c,parentProviders:o},a.a.createElement(t,n))};return s.displayName=`WithFieldViewExperienceTracker(${Object(p.a)(t)}`,Object(i.b)(((e,t)=>({fieldType:Object(l.r)(t.fieldId)(e)})),null,(({fieldType:e},t,s)=>({fieldType:e,ownProps:s})))(s)}},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/Grid.js"),o=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js");const c={columns:10};t.a=({children:e,isCompact:t=!1,hasMultipleScrollingColumns:s})=>a.a.createElement(i.ThemeProvider,{theme:c},a.a.createElement(o.a,{isCompact:t,hasMultipleScrollingColumns:s},a.a.createElement(r.a,{spacing:"comfortable",layout:"fluid"},e)))},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const i=4*a.e,r=3*a.e,o=n.default.div(["> div{padding:0;margin:0;}",""],(({hasMultipleScrollingColumns:e,isCompact:t})=>e?"\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        \n        > div {\n            flex-wrap: nowrap;\n            height: 100%;\n            /* targets Grid element of @atlaskit/page, which has align-items: flex-start by default */\n            align-items: initial;\n        }\n        ":`\n            padding-left: ${t?0:a.e/2}px;\n            /* Targets <GridColumn> element */\n            > div > div {\n                margin: 0;\n                max-width: 100%;\n            }\n        `))},"./src/packages/issue/issue-view/src/views/common/line-card-hidden-button/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div(["height:100%;margin-left:","px;transform:scale(",");margin-right:","px;"],o.e/4,(({show:e})=>e?1:0),-o.e),l=r.default.div(["display:inline-block;vertical-align:middle;margin-top:","px;width:","px;height:","px;margin-left:","px;"],o.e,4*o.e,3*o.e,o.e),u=e=>{const{show:t,onClick:s,icon:n}=e;return a.a.createElement(c,{show:t},a.a.createElement(l,null,a.a.createElement(i.a,{iconBefore:n,appearance:"subtle",onClick:s,spacing:"none"})))};u.displayName="LineCardHiddenButton"},"./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/icon/glyph/error.js"),o=s.n(r),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const u=i.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],(e=>e.colour),l.e/2),d=i.default.div(["margin-left:","px;"],l.e/2),p={default:null,success:null,error:c.a.R400};class m extends n.Component{render(){const{children:e,validationMessage:t,validationState:s}=this.props;return a.a.createElement("div",null,e,s&&t?a.a.createElement(u,{colour:p[s]},a.a.createElement(o.a,{label:`${s} icon`,role:"presentation"}),a.a.createElement(d,null,t)):null)}}m.displayName="SelectValidationWrapper",m.displayName="SelectValidationWrapper",m.defaultProps={children:null,validationState:"default",validationMessage:null}},
"./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return w}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),d=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),p=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),m=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),f=i.default.div(["position:relative;overflow:hidden;margin:0 -20px;border-left:20px solid ",";border-right:20px solid ",";"],b.a.N0,b.a.N0),g=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js")
;const h=()=>a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(g.a,{fontSize:14,lineHeight:20,intrusion:60}),a.a.createElement(g.a,{fontSize:14,lineHeight:20,intrusion:20}),a.a.createElement(g.a,{fontSize:14,lineHeight:20,intrusion:180}));h.displayName="Description";var y=h;const O=e=>a.a.createElement(c.a,{paddingTop:8,paddingBottom:8},a.a.createElement(g.a,{fontSize:12,lineHeight:20,intrusion:e.labelIntrusion}),a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(g.a,{fontSize:20,lineHeight:20,intrusion:e.fieldIntrusion})));O.displayName="Field";var j=O;const v=()=>a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(g.a,{fontSize:20,lineHeight:24,intrusion:20}),a.a.createElement(g.a,{fontSize:20,lineHeight:24,intrusion:140}));v.displayName="Summary";var E=v;const k=i.default.div(["",""],(({issueMaxWidth:e})=>void 0!==e?`\n        ${Object(d.c)("padding-left",e)}\n        ${Object(d.c)("padding-right",e)}\n    `:""))
;class w extends n.Component{static renderFieldSkeletons(){return a.a.createElement(c.a,{paddingTop:4,paddingBottom:16},a.a.createElement(j,{labelIntrusion:170,fieldIntrusion:20}),a.a.createElement(j,{labelIntrusion:120,fieldIntrusion:60}),a.a.createElement(j,{labelIntrusion:140,fieldIntrusion:40}))}static renderCompactSkeleton(){return a.a.createElement(r.a,null,a.a.createElement(f,null,a.a.createElement(E,null),w.renderFieldSkeletons(),a.a.createElement(y,null),a.a.createElement(o.a,null)))}static renderFullSizeSkeleton(){return[a.a.createElement(r.a,{key:"maincontent",medium:6},a.a.createElement(f,null,a.a.createElement(E,null),a.a.createElement(y,null),a.a.createElement(o.a,null))),a.a.createElement(r.a,{key:"secondarycontent",medium:4},a.a.createElement(f,null,w.renderFieldSkeletons()))]}render(){const{isCompact:e,issueMaxWidth:t}=this.props;return a.a.createElement(k,{issueMaxWidth:t},a.a.createElement(p.a,{isCompact:e
},a.a.createElement(u.a,null,a.a.createElement(l.b,null),e?w.renderCompactSkeleton():w.renderFullSizeSkeleton())))}}w.displayName="Skeleton";t.b=Object(m.a)(w)},"./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:relative;"])},"./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>t=>a.a.createElement(i.a,null,(s=>a.a.createElement(e,r({},t,{isCompact:s}))))},
"./src/packages/issue/issue-view/src/views/common/with-container-width/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=(s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthDetector.js"),s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js"));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function u(e){return t=>{const[s,i]=Object(n.useState)(void 0),u=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:u})),a.a.createElement(e,l({},t,{containerWidth:s})))}}},
"./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/profilecard-next/src/async.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js");t.a=e=>{const t=(e=>e&&(e.accountId||e.id||e.value))(e.userAccount);return t?a.a.createElement(i.a,{TenantContextSubscriber:r.b,accountId:t,analyticsData:e.analyticsData,position:e.position,actions:e.actions},e.children):e.children}},"./src/packages/issue/issue-view/src/views/connect-field.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k}))
;var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./node_modules/uuid/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),l=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsContext.js"),u=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),f=s("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),y=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js")
;function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=Object(n.h)({defaultFallbackInvalidMessage:{id:"issue.field.default-fallback-invalid-message",defaultMessage:"The value could not be saved"}}),k={transformFromStateValue:(e,t,s)=>e,transformToStateValue:e=>e,fallbackInvalidMessage:e=>e.formatMessage(E.defaultFallbackInvalidMessage),
additionalProps:(e,t)=>({}),additionalCallbacks:e=>({}),isOptimistic:!0,canContainMediaContent:!1,shouldSaveDraft:!1,saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a})=>{const i=a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return Object(u.e)(i,{body:JSON.stringify({fields:{[s]:n}})})},shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,fieldId:""},w=(e,t,s,n)=>({baseUrl:e,projectKey:t,issueKey:s,fieldId:n});t.a=(e=>(t,s)=>r=>{const u=(e=>({mapStateToProps:(t,s)=>{const n=e(t,s),a=j(j({},k),n),{fieldId:r,transformFromStateValue:o,transformToStateValue:c,fallbackInvalidMessage:l,additionalProps:u,additionalCallbacks:b,isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:v,onSaveSuccessFlagType:E}=a,S={isRichTextField:Object(p.J)(r)(t),isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,
shouldSaveDraft:O,onSaveFailureFlagType:v,onSaveSuccessFlagType:E},C=Object(i.a)(w),I=Object(i.a)(c),T=Object(i.a)(o);return(e,t)=>j({fieldId:r,fieldOptions:S,memoizedTransformToStateValue:I,additionalCallbacks:b,intl:t.intl,label:Object(p.m)(r)(e),isEditable:Object(p.D)(r)(e)&&"PREVIEW"!==Object(m.w)(e),isEditing:Object(p.E)(r)(e),fieldEditSessionId:Object(p.f)(r)(e),invalidMessage:Object(p.j)(r,l(t.intl))(e),customFieldConfig:Object(p.p)(r)(e),value:T(Object(p.h)(r)(e),C(Object(d.f)(e),Object(d.D)(e),Object(d.y)(e),r),t.intl),isWaiting:!f&&Object(p.G)(r)(e),isMobile:Object(d.s)(e)},u(e,t.intl))},mapDispatchToProps:e=>({initFieldOptions:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.f)(t,s)),onEditRequest:({fieldId:t,fieldOptions:s})=>(...n)=>{if(Object(g.isShortcutMenuEnabled)()){const a=n.length?n[n.length-1]:void 0;e(Object(h.b)(t,s,o.a.v4(),a))}else e(Object(h.b)(t,s,o.a.v4()))},onChange:({fieldId:t,fieldOptions:s,memoizedTransformToStateValue:n})=>a=>e(Object(h.e)(t,n(a),s)),
onConfirm:({fieldId:t,fieldOptions:s,analyticsAttributeIdRetriever:n})=>(...a)=>{const i=a.length>1?a[0]:void 0,r=a.length?a[a.length-1]:void 0;return e(Object(h.d)(t,s,i,r,n))},onBlur:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.c)(t,s)),onCancel:({fieldId:t,fieldOptions:s})=>()=>{e(Object(h.c)(t,s)),e(Object(f.b)({fieldId:t}))},onPaste:({fieldId:t,fieldOptions:s})=>n=>e(Object(h.g)(t,s,n)),getAdditionalCallbacks:({additionalCallbacks:t})=>t(e)}),mergeStateAndDispatchProps:(e,t)=>{const s=Object.keys(t).reduce(((s,n)=>(s[n]=t[n](e),s)),{}),n=t.getAdditionalCallbacks(e);return j(j(j({},e),s),n)}}))(t);return Object(b.a)([Object(c.a)({onConfirm:e=>e({action:"updated",isBoardSearchFieldChangeboardingEnabled:Object(g.isBoardSearchFieldChangeboardingEnabled)(),isBacklogSearchFieldChangeboardingEnabled:Object(g.isBacklogSearchFieldChangeboardingEnabled)()}),onEditRequest:{action:"updateStarted"}}),Object(l.a)({componentName:"issueFields",actionSubject:e
}),Object(a.b)(u.mapStateToProps,u.mapDispatchToProps,u.mergeStateAndDispatchProps),n.i],s)(Object(y.b)()(r))})("issueFields")},"./src/packages/issue/issue-view/src/views/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={ASSIGNEE:{TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.assignee.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.assignee.time-to.reflect-input-results",TIME_TO_REFLECT_SELECTED:"jira.fe.issue.fields.assignee.time-to.reflect-selected",TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT:"jira.fe.issue.fields.assignee.time-to.assign-to-me-via-shortcut"},SUMMARY:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.summary.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.summary.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.summary.time-to.render-read-view-on-cancel"},LABELS:{
TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.labels.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.labels.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.labels.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.labels.time-to.render-read-view-on-cancel",TIME_TO_REFLECT_SELECTED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-selected-existing",TIME_TO_REFLECT_SELECTED_NEW:"jira.fe.issue.fields.labels.time-to.reflect-selected-new",TIME_TO_REFLECT_REMOVED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-removed-existing"},STORY_POINTS:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.story-points.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.story-points.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.story-points.time-to.render-read-view-on-cancel"},ISSUE_LINKS:{
TIME_TO_REFLECT_SELECTED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-selected-issue",TIME_TO_REFLECT_REMOVED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-removed-issue",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.issue-links.time-to.reflect-input-results",TIME_TO_RENDER_LINKED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.render-linked-issue",TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT:"jira.fe.issue.fields.issue-links.time-to.render-new-linked-issue-input"},SPRINT:{TIME_TO_REFLECT_SELECTED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-selected-sprint",TIME_TO_REFLECT_REMOVED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-removed-sprint",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.sprint.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.sprint.time-to.render-read-view",TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.sprint.time-to.render-initial-suggestions"},PRIORITY:{
TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.priority.time-to.render-read-view",TIME_TO_RENDER_SUGGESTIONS:"jira.fe.issue.fields.priority.time-to.render-suggestions",TIME_TO_REFLECT_PRIORITY_UPDATE:"jira.fe.issue.fields.priority.time-to.reflect-priority-update"},COMMENTS:{TIME_TO_RENDER_NEW_COMMENT_EDITOR:"jira.fe.issue.fields.comments.time-to.render-new-comment-editor",TIME_TO_RENDER_SAVED_COMMENT:"jira.fe.issue.fields.comments.time-to.render-saved-comment"},DESCRIPTION:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.description.time-to.render-edit-view",TIME_TO_SAVE_UPDATED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-updated-description",TIME_TO_SAVE_UNCHANGED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-unchanged-description"},EPIC_LINKS:{TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-enabled",
TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_DISABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-disabled"}}},"./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),a=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!!n(e.label,s)||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some((e=>n(e,s)))}},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return oe}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/rxjs/Rx.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/form/dist/es2019/Messages.js"),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/messages.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),f=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),g=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),h=Object(i.h)({empty:{id:"issue.views.field.select.empty",defaultMessage:"No matches found"},failedFetch:{
id:"issue.views.field.select.failed-fetch",defaultMessage:"Search failed."},reloadIssue:{id:"issue.views.field.select.reload-issue",defaultMessage:"Try reloading the issue."}}),y=s("./node_modules/uuid/index.js"),O=s.n(y),j=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),v=s("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),E=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),k=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),S=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),C=s("./src/packages/issue/issue-view/src/feature-flags.js"),I=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),T=s("./node_modules/lodash/flatMap.js"),P=s.n(T)
;const _=e=>P()(e.map((e=>(e=>void 0!==e.options)(e)&&e.options?e.options:e))),x=e=>null==e?[]:Array.isArray(e)?e:[e],D=(e,t=!1)=>Object(C.isSelectFieldPerformanceImprovementEnabled)()?t?e.toString():Object(v.b)(e.toString()).toString():t?e.toString():Object(v.a)(e.toString()).toString(),A=(e,t=!1)=>e.filter((e=>e.value)).map((({value:e})=>D(e,t))),L=e=>{const t=e.map((({id:e})=>e||null));return t.every((e=>null===e))?[]:t},M=e=>e.filter((e=>e.value)).map((({value:e})=>null!=e?`${e}`.length:0));function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const F="",U=Object(I.a)((e=>({label:e(F),isDisabled:!0,isAkSelectOption:!0}))),V=Object(I.a)((e=>({label:e(F),isDisabled:!0,isAkSelectOption:!0}))),K=Object(I.a)(((e,t,s,n)=>!0===e?[...t,s,n]:t));class W extends n.Component{constructor(...e){super(...e),this.formatCreateLabel=e=>{const{footer:t,formatCreateLabel:s}=this.props;return void 0===t?s?s(e):e:"function"==typeof t?t(e):t},this.getShouldShowFooter=()=>{const{footer:e,shouldShowFooter:t}=this.props;return!!e&&t},this.isOptionShownInDropdown=(e,t)=>{const{filterOption:s,noOptionsMessage:n,loadingMessage:a,value:i}=this.props;return s(e,t)&&e.label!==n(F)&&e.label!==a(F)&&!x(i).find((t=>t.value===e.value))},this.filterOptionWithFooterAndShowNoOptionsMessage=(e,t)=>{const{filterOption:s,options:n,isLoading:a,noOptionsMessage:i,loadingMessage:r}=this.props
;return e.label===i(F)?!0!==a&&!_(n).some((e=>this.isOptionShownInDropdown(e,t))):e.label===r(F)?!0===a&&!_(n).some((e=>this.isOptionShownInDropdown(e,t))):s(e,t)}}render(){const e=this.props,{footer:t,onFooterSelect:s,options:n,noOptionsMessage:i,loadingMessage:r,filterOption:o}=e,c=N(e,["footer","onFooterSelect","options","noOptionsMessage","loadingMessage","filterOption"]),l=this.getShouldShowFooter(),u=V(i),d=U(r),p=K(l,n,u,d);return a.a.createElement(j.a,R({},c,{options:p,formatCreateLabel:this.formatCreateLabel,isValidNewOption:this.getShouldShowFooter,onCreateOption:s,filterOption:!0===l?this.filterOptionWithFooterAndShowNoOptionsMessage:o,loadingMessage:r,noOptionsMessage:i,allowCreateWhileLoading:!0}))}}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function $(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}W.displayName="SelectWithFooter",W.defaultProps={shouldShowFooter:!0};const z={onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"},Y=Object(E.a)("select",z)(W),Q=Object(E.a)("select",z)(j.a),J={action:"fake-action"};class Z extends n.Component{constructor(e){super(e),this.getDefaultAnalyticsAttributes=e=>{const{fieldId:t,value:s,isLoading:n,optionValuesSafeForAnalytics:a}=this.props,i={queryLength:e.length,queryHash:""===e?e:Object(v.a)(e)},r=x(s);let o=((e,t)=>e.filter((e=>"string"==typeof e.value&&e.value.toLowerCase().includes((t||"").toLowerCase())||"string"==typeof e.label&&e.label.toLowerCase().includes((t||"").toLowerCase()))))(this.flatOptions,e);const c=o.length;Object(C.isSelectFieldPerformanceImprovementEnabled)()&&(o=o.slice(0,20));return G(G({fieldId:t,componentName:"select",packageName:"@atlaskit/select",options:A(o,a),optionsLength:c,optionsLengths:M(o),optionIds:L(o),selectedOptions:A(r,a),
selectedOptionsLengths:M(r),selectedOptionIds:L(r),sessionId:this.sessionId,truncationSize:20,isLoading:n},i),{},{optionValuesSafeForAnalytics:a},this.props.additionalAnalyticsProps)},this.getItemOrder=e=>{const t=[];return this.flatOptions.forEach(((s,n)=>{const a=s.filterValues||[];(s.value===e.value||a.includes(e.value))&&t.push(n)})),t.length>0?t[0]:-1},this.startSession=()=>{this.sessionId=O.a.v4(),this.sessionStartedAt=w.default.now(),this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},this.endSession=()=>{if(this.sessionId){const e=this.sessionStartedAt?w.default.now()-this.sessionStartedAt:0;this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",G({elapsedTime:e},this.props.additionalAnalyticsProps))}this.sessionStartedAt=0,this.sessionId=void 0},this.flatOptions=[],this.sessionId=void 0,this.queryAtSetValue="",this.query="",this.sessionStartedAt=0,
this.isOpened=!1,this.fireOptionsLoadedEvent=e=>{e.update({action:"loaded",actionSubject:"options"}),this.fireAnalyticsEvent(e,this.query)},this.fireInputChangedEvent=(e,t,s)=>("set-value"===t.action&&(this.queryAtSetValue=this.query),this.query=e,s.update({action:"changed",actionSubject:"filter"}),this.fireAnalyticsEvent(s,this.query),this.sessionId),this.restartSession=()=>{this.endSession(),this.props.menuIsOpen&&(this.isOpened=!0,this.startSession())},this.fireOptionCreatedEvent=(e,t)=>{t.update({action:"created",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOptionRemovedEvent=(e,t)=>{t.update({action:"removed",actionSubject:"option"}),this.fireAnalyticsEvent(t,this.query,{removedItem:e?D(e.value,this.props.optionValuesSafeForAnalytics):void 0})},this.fireOptionSelectedEvent=(e,t)=>{t.update({action:"changed",
actionSubject:"option"});const s=this.sessionId;this.restartSession(),Object(C.isSelectFieldPerformanceImprovementEnabled)()?this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),selectedOptionLength:null!==e.value?`${e.value}`.length:0,sessionId:s}):this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOpenChangedEvent=(e,t)=>{e.isOpen&&!this.isOpened&&this.startSession(),this.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:this.getDefaultAnalyticsAttributes(this.query)}),this.fireAnalyticsEvent(t,this.query)},this.onChange=(e,t,s)=>{const n=Array.isArray(e)?e[e.length-1]:e,a=this.sessionId;switch(t.action){case"create-option":null!==n&&this.fireOptionCreatedEvent(n,s);break;case"remove-value":case"pop-value":
case"deselect-option":this.fireOptionRemovedEvent(t.removedValue||t.option,s);break;case"select-option":null!==n&&this.fireOptionSelectedEvent(n,s)}this.props.onChange&&this.props.onChange(e,t,a)},this.onInputChange=(e,t,s)=>{const{onInputChange:n}=this.props;"input-change"!==t.action&&"set-value"!==t.action||this.fireInputChangedEvent(e,t,s),n(e,t,this.sessionId)},this.onMenuOpen=e=>{this.fireOpenChangedEvent({isOpen:!0},e);const{onMenuOpen:t}=this.props;t&&t(e)},this.onMenuClose=e=>{this.fireOpenChangedEvent({isOpen:!1},e);const{onMenuClose:t}=this.props;t&&t(e)},this.onFocus=e=>{this.props.onFocus(e,this.sessionId)},this.flatOptions=_(this.props.options),this.isOpened=e.menuIsOpen,this.isOpened&&(this.startSession(),this.fireInputChangedEvent("",J,this.props.createAnalyticsEvent({})))}componentDidUpdate(e){this.props.options!==e.options&&(this.flatOptions=_(this.props.options),this.fireOptionsLoadedEvent(this.props.createAnalyticsEvent()))}componentWillUnmount(){this.endSession()}
fireAnalyticsEvent(e,t,s={}){const n=G(G({},this.getDefaultAnalyticsAttributes(t)),s);Object(S.h)(e,n)}fireTrackAnalyticsEvent(e,t,s,n){const a=G(G({},this.getDefaultAnalyticsAttributes(this.query)),n);Object(S.f)(e,`${s} ${t}`,a)}render(){const e=this.props,{canCreateNewItem:t,createAnalyticsEvent:s}=e,n=H(e,["canCreateNewItem","createAnalyticsEvent"]),i=t?Q:Y;return a.a.createElement(i,B({},n,{onFocus:this.onFocus,onChange:this.onChange,onInputChange:this.onInputChange,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))}}Z.displayName="SelectWithAnalyticsView",Z.defaultProps={isLoading:!1,createAnalyticsEvent:c.a,optionValuesSafeForAnalytics:!1,onChange:c.a,onInputChange:c.a,onMenuOpen:c.a,onMenuClose:c.a};var X=Object(k.a)()(Z),ee=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),te=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js");function se(){
return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ae(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ie(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(s),!0).forEach((function(t){re(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ae(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oe={hideSelectedOptions:!0,allowCreateWhileLoading:!0,filterOption:g.a},ce=e=>ie({label:e.content},e),le=(e,t)=>{const{label:s,filterValues:n}=e,a=ie({},ne(e,["label","filterValues"]));return"create-option"===t.action&&void 0===a.content&&(a.content=e.label),a};class ue extends n.Component{constructor(e){var t;super(e),this.onFocus=(e,t)=>{this.query$.next({query:"",sessionId:t,isImmediate:!0})},this.onChange=(e,t,s)=>{const{onChange:n,onChangeMulti:a,isMulti:i}=this.props;if(i){if(!a)return;this.query$.next({query:this.query||"",sessionId:s,isImmediate:!0});a(Array.isArray(e)?e.map((e=>le(e,t))):[],t)}else{if(!n||Array.isArray(e))return;n(e&&le(e,t),t)}
},this.onInputChange=(e,t,s)=>{if("input-change"!==t.action&&"set-value"!==t.action)return;let n=e;this.props.changeQueryValue&&(n=this.props.changeQueryValue(n)),this.query=n,"input-change"===t.action&&(this.setState({isLoading:!0}),this.query$.next({query:n,sessionId:s})),this.props.onInputChange&&this.props.onInputChange(n,t)},this.formatOptionLabel=(e,t)=>void 0!==this.props.formatOptionLabel?this.props.formatOptionLabel(e,t):e.iconUrl?a.a.createElement(ee.e,null,a.a.createElement(ee.d,null,a.a.createElement("img",{src:e.iconUrl,alt:"",width:2*m.e,height:2*m.e,role:"none"})),a.a.createElement(ee.c,null,e.label)):e.label,this.transformItems=e=>e&&e.length>0?e.map(ce):[],this.transformToOptions=e=>1!==e.length||e[0].heading?e.map((e=>{const t=this.transformItems(e.items);return void 0!==e.heading?{label:e.heading,options:t}:{options:t}})):this.transformItems(e[0].items),this.subscription=void 0,this.query$=void 0,this.query=null,
this.getFailedFetchMessage=()=>a.a.createElement(ee.b,null,a.a.createElement("span",null,this.props.intl.formatMessage(h.failedFetch)," ",a.a.createElement("a",{role:"button",href:window.location.href,onClick:()=>window.location.reload()},this.props.intl.formatMessage(h.reloadIssue)))),this.noOptionsMessageDefault=()=>this.props.intl.formatMessage(h.empty),this.loadingMessageDefault=()=>this.props.intl.formatMessage(p.a.loading),this.filterOption=e=>!!this.state.hasLastFetchFailed||this.props.filterOption&&this.props.filterOption(e,this.query||""),this.renderSelectField=()=>{
const e=this.props,{placeholder:t="",noOptionsMessage:s=this.noOptionsMessageDefault,loadingMessage:n=this.loadingMessageDefault,fieldId:i,onChangeMulti:r,invalidMessage:o,isOpen:c,hasAutocomplete:l,portalElement:u,intl:d,fetchSuggestions:p,additionalAnalyticsProps:m,debounceFetchSuggestionsTime:b,changeQueryValue:f,errorMessagePosition:g}=e,h=ne(e,["placeholder","noOptionsMessage","loadingMessage","fieldId","onChangeMulti","invalidMessage","isOpen","hasAutocomplete","portalElement","intl","fetchSuggestions","additionalAnalyticsProps","debounceFetchSuggestionsTime","changeQueryValue","errorMessagePosition"]),y=o?"error":void 0;return a.a.createElement(X,se({},oe,h,{filterOption:this.filterOption,key:i,fieldId:i,options:this.state.options,value:this.getSelectedValue(),styles:Object(te.a)(ee.f,ee.g,this.props.styles),additionalAnalyticsProps:m,isLoading:this.state.isLoading,isSearchable:l,menuIsOpen:c,menuPortalTarget:u,menuPlacement:"auto",placeholder:t,noOptionsMessage:s,
loadingMessage:n,validationState:y,formatOptionLabel:this.formatOptionLabel,onChange:this.onChange,onFocus:this.onFocus,onInputChange:this.onInputChange}))},this.renderErrorMessage=()=>{const{invalidMessage:e,fieldId:t,errorMessagePosition:s}=this.props;return e?a.a.createElement(ee.a,{key:`${t}-error-message`,errorMessagePosition:s},a.a.createElement(l.a,null,e)):null};const{onDataRequest:s,onDataLoaded:n,fetchSuggestions:i,debounceFetchSuggestionsTime:o,additionalAnalyticsProps:c}=this.props;if(this.query$=new r.Subject,this.subscription=this.query$.debounce((({isImmediate:e})=>e?r.Observable.empty():r.Observable.timer(o||0))).switchMap((({query:e,sessionId:t})=>{s&&s({isInitial:null===this.query}),this.setState({isLoading:!0});return i(e,t||void 0).then((e=>(this.setState({hasLastFetchFailed:!1}),e))).catch((e=>(b.h.safeErrorWithoutCustomerData("issue.select.transform-suggestions","Could not fetch or transform suggestions to display in select",new u.a({eventNameSuffix:"issue.error",
type:"js",app:"issue",event:e})),c&&b.h.safeErrorWithoutCustomerData("issue.select.fetch-transform-suggestions.details","Could not fetch or transform retrieved data",ie(ie({},c),{},{message:e.message})),Object(f.a)({meta:{id:"issueSelectFetchFailure",packageName:"jiraIssueView"},error:e,attributes:ie({},null!=c?c:{})}),this.setState({hasLastFetchFailed:!0}),[{items:[{content:this.getFailedFetchMessage(),value:"",isDisabled:!0}]}])))})).subscribe((e=>{this.setState({options:this.transformToOptions(e),isLoading:!1}),n&&n({isInitial:null===this.query})})),null!==(t=this.props.initialData)&&void 0!==t&&t.data){const{data:e,loading:t,error:s}=this.props.initialData;this.state={options:this.transformToOptions(e),isLoading:t,hasLastFetchFailed:s}}else this.state={options:[],isLoading:!0,hasLastFetchFailed:!1}}componentDidUpdate(e){var t,s;if(null!==(t=this.props.initialData)&&void 0!==t&&t.data&&null!==(s=e.initialData)&&void 0!==s&&s.data){
const{loading:t,error:s,data:n}=this.props.initialData;t===e.initialData.loading&&s===e.initialData.error||this.setState({options:this.transformToOptions(n),isLoading:t,hasLastFetchFailed:s})}}componentWillUnmount(){this.subscription.unsubscribe()}getSelectedValue(){const{value:e}=this.props;return e?Array.isArray(e)?e.map(ce):ce(e):null}render(){const{errorMessagePosition:e}=this.props,t=[this.renderSelectField()];return"top"===e?t.unshift(this.renderErrorMessage()):t.push(this.renderErrorMessage()),a.a.createElement(d.b,null,a.a.createElement(a.a.Fragment,null,t))}}ue.displayName="SelectFieldView",ue.displayName="SelectFieldView",ue.defaultProps={isMulti:!1,canCreateNewItem:!1,value:null,placeholder:void 0,autoFocus:!1,debounceFetchSuggestionsTime:0,filterOption:oe.filterOption,errorMessagePosition:"top",optionValuesSafeForAnalytics:!1,onChangeMulti:c.a,onChange:c.a,onInputChange:c.a};t.a=Object(i.i)(ue)},
"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return u})),s.d(t,"g",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={multiValue:e=>c(c({},e),{},{backgroundColor:a.a.N20}),option:(e,t)=>c(c(c(c({},e),Object(i.c)(t)),{},{cursor:"pointer"},t.isFocused&&!t.isSelected?{backgroundColor:a.a.N20}:{}),{},{"&:hover":c(c({},t.isSelected?{}:{backgroundColor:a.a.N20}),t.isDisabled?{backgroundColor:"transparent",cursor:"not-allowed"}:{})}),menu:e=>c(c({},e),{},{zIndex:r.f.modal}),menuPortal:e=>c(c({},e),{},{transform:"translateZ(0)"})},d=r.e/4+"px",p=r.e/2+"px",m={indicatorsContainer:e=>c(c({},e),{},{paddingRight:r.e/2+"px"}),loadingIndicator:e=>c(c({},e),{},{paddingLeft:d,paddingRight:p}),
clearIndicator:e=>c(c({},e),{},{paddingLeft:d,paddingRight:p}),dropdownIndicator:e=>c(c({},e),{},{display:"none"})},b=n.default.span(["display:flex;align-items:center;"]),f=Object(n.default)(b)(["justify-content:center;"]),g=n.default.span(["display:flex;padding-right:","px;"],r.e),h=n.default.span(["display:flex;"]),y=n.default.div(["",";&&& > div{min-height:auto;}"],(e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*r.e}px;`:""))},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return i}));const i=(e,...t)=>{const s=e||{}
;if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach((e=>{e&&Object.keys(e).forEach((t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n}))})),i}},"./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg":function(e,t,s){e.exports=s.p+"assets/default-avatar.b7f1021e538053b2b6f8108284f2ffc4.8.svg"},"./src/packages/issue/issue-view/src/views/field/user/assets/add.png":function(e,t,s){e.exports=s.p+"assets/add.cb4b04e861ca3b9ce2a2c8032dde1c45.8.png"},"./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:absolute;right:0;top:0;width:","px;",";transition:",";overflow:hidden;opacity:",";visibility:",";"],(e=>e.show?e.width:0),(e=>null!=e.height?`height: ${e.height}px`:""),(e=>e.show?"width 0.5s cubic-bezier(0.15, 1, 0.3, 1)":"width 0.5s cubic-bezier(0.15, 1, 0.3, 1), opacity 0, 0.5s, visibility 0, 0.5s"),(e=>e.show?1:0),(e=>e.show?"visible":"hidden")),o=Object(n.forwardRef)(((e,t)=>a.a.createElement(r,i({innerRef:t},e),e.children)));t.a=o},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/confluence-pages-view.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),u=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),p=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),m=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),b=s("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),f=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),g=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),h=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),y=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),j=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),v=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),E=s.n(v),k=s("./node_modules/@atlaskit/icon/glyph/warning.js"),w=s.n(k),S=s("./src/packages/issue/issue-view/src/views/common/delete-button/index.js")
;const C=o.default.div(["display:flex;align-items:center;"]),I=Object(o.default)(C)(["width:100%;height:100%;position:relative;"]),T=o.default.div(["margin-left:-2px;"]),P=o.default.div(["margin-left:-1px;"]),_=o.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],d.e/2),x=o.default.div(["padding-left:","px;overflow:hidden;"],d.e),D=o.default.div(["padding-left:","px;"],d.e);class A extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)},this.authenticateApplink=e=>{const{error:t,repairLinkHref:s,onAuthenticateApplink:n}=this.props;"APPLINK_REQ_AUTH"===t&&s&&n&&n(s),e.stopPropagation()},this.openRepairApplink=e=>{const{repairLinkHref:t}=this.props;t&&window.open(t,"_blank"),e.stopPropagation()},this.openConfluenceLink=e=>{window.open(this.props.href,"_blank"),e.stopPropagation()},this.renderErrorIcon=()=>a.a.createElement(T,null,a.a.createElement(w.a,{
label:"",primaryColor:c.a.Y300})),this.renderPadlockIcon=()=>a.a.createElement(P,null,a.a.createElement(E.a,{label:"",primaryColor:c.a.B300})),this.renderErrorText=()=>a.a.createElement(_,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.loading-error",defaultMessage:"We couldn't load this page."})),this.renderAuthRequiredText=()=>a.a.createElement(_,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.auth-required",defaultMessage:"Authenticate with Confluence to see this page."})),this.renderMissingApplinkText=()=>a.a.createElement(_,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.missing-applink",defaultMessage:"Confluence site not linked."}))}renderIcon(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderPadlockIcon():this.renderErrorIcon()}renderText(){const{error:e}=this.props
;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():"APPLINK_MISSING"===e?this.renderMissingApplinkText():this.renderErrorText()}renderAuthorizationRepairLink(){return a.a.createElement(D,null,a.a.createElement(j.a,{appearance:"link",spacing:"none",onClick:this.authenticateApplink},a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.auth-repair-link",defaultMessage:"Authenticate"})))}renderApplinkRepairLink(){return a.a.createElement(D,null,a.a.createElement(j.a,{appearance:"link",spacing:"none",onClick:this.openRepairApplink},a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.applink-repair-link",defaultMessage:"Repair"})))}renderRepairLink(){const{error:e,href:t,repairLinkHref:s}=this.props;if(s){let s;"APPLINK_MISSING"===e?s=this.renderApplinkRepairLink():"APPLINK_REQ_AUTH"===e&&(s=this.renderAuthorizationRepairLink());const n=t?a.a.createElement(x,null,"\u2022"):null;return a.a.createElement(a.a.Fragment,null,s,n)}return null}
renderLink(){return a.a.createElement(D,null,a.a.createElement(j.a,{appearance:"link",spacing:"none",onClick:this.openConfluenceLink},a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.open-link",defaultMessage:"Open in Confluence"})))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return a.a.createElement(S.a,{show:e||t,onClick:this.onDeleteClick})}render(){return a.a.createElement(I,null,this.renderIcon(),this.renderText(),this.renderRepairLink(),this.renderLink(),this.renderDeleteButton())}}A.displayName="ConfluencePageLineCardError";var L=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),M=s("./node_modules/@atlaskit/icon-object/glyph/blog/16.js"),R=s.n(M),N=s("./node_modules/@atlaskit/icon-object/glyph/page/16.js"),F=s.n(N),U=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js")
;const V=o.default.div(["display:flex;align-items:center;"]),K=Object(o.default)(V)(["padding-left:","px;"],d.e),W=Object(o.default)(V)(["width:100%;height:100%;position:relative;"]),B=o.default.div(["height:","px;padding-right:2px;"],3.5*d.e),H=o.default.div([""," padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.isFocused&&`color: ${c.a.B400};`),d.e);class $ extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)}}renderPageIcon(){const e="blogpost"===this.props.pageType,t=e?a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card.blog-icon",defaultMessage:"Confluence blog post"}):a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card.page-icon",defaultMessage:"Confluence page"});return a.a.createElement(U.a,{content:t,position:"bottom"},e?a.a.createElement(R.a,null):a.a.createElement(F.a,null))}renderPageTitle(){
const{pageTitle:e,isFocused:t}=this.props;return a.a.createElement(H,{isFocused:t},e)}renderLastUpdateAvatar(){const{userDisplayName:e,userAvatarUrl:t}=this.props;return t?e?a.a.createElement(K,null,a.a.createElement(U.a,{content:e,position:"bottom"},a.a.createElement(B,null,a.a.createElement(L.a,{name:e,src:t,size:"small"})))):a.a.createElement(K,null,a.a.createElement(L.a,{src:t,size:"small"})):null}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return a.a.createElement(S.a,{show:e||t,onClick:this.onDeleteClick})}render(){return a.a.createElement(W,null,this.renderPageIcon(),this.renderPageTitle(),this.renderLastUpdateAvatar(),this.renderDeleteButton())}}$.displayName="ConfluencePageLineCard";var G=$;class q extends n.Component{constructor(...e){super(...e),this.state={modalOpen:!1,linkToDeleteId:null},this.onCancelDelete=()=>{this.setState({modalOpen:!1,linkToDeleteId:null})},this.onConfirmDelete=()=>{
const{onDeleteConfluencePageLink:e}=this.props,{linkToDeleteId:t}=this.state;null!=t&&e(t),this.setState({modalOpen:!1,linkToDeleteId:null})},this.onDeleteClick=e=>{this.setState({modalOpen:!0,linkToDeleteId:e})},this.handleErrorLineCardClick=e=>{e.link&&e.link.href&&window.open(e.link.href,"_blank")},this.handleLineCardClick=e=>{e.href&&window.open(e.href,"_blank")},this.handleClick=(e,t)=>{this.props.onClick&&this.props.onClick(e,t),e.error?this.handleErrorLineCardClick(e):this.handleLineCardClick(e)},this.renderErrorLineCard=(e,t,s)=>a.a.createElement(A,{globalId:e.link.globalId,error:e.error,href:e.link.href,repairLinkHref:e.repairLink?e.repairLink.href:null,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s}),this.renderLineCard=(e,t,s)=>a.a.createElement(G,{globalId:e.globalId,pageTitle:e.title,pageType:e.type,userDisplayName:e.lastUpdatedContext&&e.lastUpdatedContext.user.displayName,
userAvatarUrl:e.lastUpdatedContext&&e.lastUpdatedContext.user.avatarUrl,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s})}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{items:this.props.pages,groupId:this.props.groupId,onClick:this.handleClick},((e,t,s,n)=>n.error?this.renderErrorLineCard(n,e,s):this.renderLineCard(n,e,s))),this.state.modalOpen&&a.a.createElement(y.a,{appearance:"danger",headerMessage:a.a.createElement(i.c,{id:"issue.details.confluence-pages.delete-confirmation-modal.title",defaultMessage:"Delete the Confluence page link?"}),contentMessage:a.a.createElement(i.c,{id:"issue.details.confluence-pages.delete-confirmation-modal.content",defaultMessage:"You can add the page later again if you need to."}),confirmActionText:a.a.createElement(i.c,{id:"issue.details.confluence-pages.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"}),cancelActionText:a.a.createElement(i.c,{
id:"issue.details.confluence-pages.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}),onConfirm:this.onConfirmDelete,onCancel:this.onCancelDelete}))}}q.displayName="ConfluencePageLineCardGroup";var z=s("./node_modules/lodash/range.js"),Y=s.n(z),Q=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),J=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),Z=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),X=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");class ee extends n.Component{getItems(){return Y()(this.props.itemCount).map((e=>a.a.createElement(X.a,{key:e,fontSize:20,lineHeight:41,intrusion:0})))}render(){const{paddingTopInPixels:e,paddingBottomInPixels:t}=this.props;return a.a.createElement(Z.a,null,a.a.createElement(J.b,null),a.a.createElement(Q.a,{paddingTop:e,paddingBottom:t},this.getItems()))}}ee.displayName="ItemLineCardGroup",
ee.defaultProps={paddingTopInPixels:0,paddingBottomInPixels:0};var te=s("./node_modules/lodash/noop.js"),se=s.n(te),ne=s("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js");const ae=Object(i.h)({label:{id:"issue.confluence-links-add-label",defaultMessage:"Link a Confluence Page"}}),ie=o.default.span(["margin-left:auto;"]);class re extends n.Component{render(){return a.a.createElement(ie,null,a.a.createElement(ne.a,{label:this.props.intl.formatMessage(ae.label),onClick:this.props.onClick}))}}re.displayName="AddButton",re.defaultProps={onClick:se.a};var oe=Object(i.i)(re),ce=s("./src/packages/platform/utils/types/src/general.js"),le=s("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js"),ue=s("./node_modules/reselect/lib/index.js"),de=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const pe=Object(ue.createSelector)(de.H,h.h,h.j,((e,t=[],s=[])=>{
const n=e.recentlyVisitedConfluencePages||[],a=t.concat(s).map((e=>e.href));return n.filter((e=>!a.includes(e.href)))}));var me=s("./node_modules/lodash/isEmpty.js"),be=s.n(me),fe=s("./node_modules/lodash/trim.js"),ge=s.n(fe),he=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),ye=s("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),Oe=s("./src/packages/issue/issue-view/src/feature-flags.js"),je=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/page.js")),ve=s.n(je),Ee=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/analytics-context/index.js"),ke=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/touchpoint-context/index.js"),we=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/messages.js"),Se=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/ui/common/better-together-button/index.js");const Ce=({intl:{formatMessage:e}})=>{const{isEligible:t,isInExperiment:s,touchpointFlow:n}=Object(ke.b)();return Object(Ee.c)(t),t&&s&&"ACCESS_EXISTS"===n?a.a.createElement(U.a,{content:e(we.a.createNewPageButtonTooltip)},a.a.createElement(Ee.a,null),a.a.createElement(Se.a,{appearance:"subtle",flow:"post-expand",actionSubjectId:"createNewPageBtn",iconBefore:a.a.createElement(ve.a,{
label:"create new page"})},e(we.a.createNewPageButton))):null};Ce.displayName="CreatePageButton";var Ie=Ce;const Te="addconfluencelink.error.duplicate",Pe="addconfluencelink.error.page.forbidden",_e="addconfluencelink.error.issueId.invalid",xe="addconfluencelink.error.no.matching.app.link",De="addconfluencelink.error.pageid.notfound",Ae="addconfluencelink.error.page.unauthorized",Le="addconfluencelink.error.url.invalid",Me="addconfluencelink.error.url.required";var Re=Object(i.h)({fieldLabel:{id:"issue.views.confluence-pages.link.label",defaultMessage:"Search pages or paste in a link"},fieldPlaceholder:{id:"issue.views.confluence-pages.link.placeholder",defaultMessage:"Search pages or paste in a link"},genericErrorText:{id:"issue.views.confluence-pages.link.error.generic",defaultMessage:"We're having trouble. Check your connection and try again."},duplicateErrorText:{id:"issue.views.confluence-pages.link.error.duplicate",defaultMessage:"That page is already linked to this issue."},
forbiddenErrorText:{id:"issue.views.confluence-pages.link.error.forbidden",defaultMessage:"You don't have permission to link to Confluence pages."},issueIdErrorText:{id:"issue.views.confluence-pages.link.error.issue-id",defaultMessage:"We're having trouble. Check your connection and try again."},noMatchingApplinkErrorText:{id:"issue.views.confluence-pages.link.error.no-matching-app-link",defaultMessage:"You don't have an application link set up for that Confluence site."},pageIdNotFoundErrorText:{id:"issue.views.confluence-pages.link.error.page-id-not-found",defaultMessage:"We can't find that page. It might be deleted or restricted."},unauthorizedErrorText:{id:"issue.views.confluence-pages.link.error.unauthorized",defaultMessage:"You need to authorize this pages' Confluence site."},urlInvalidErrorText:{id:"issue.views.confluence-pages.link.error.url-invalid",defaultMessage:"That URL doesn't look right. Try entering it again."},urlRequiredErrorText:{
id:"issue.views.confluence-pages.link.error.url-required",defaultMessage:"That URL doesn't look right. Try entering it again."},linkButton:{id:"issue.views.confluence-pages.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.confluence-pages.link.cancel-button",defaultMessage:"Cancel"}});const Ne={[Te]:Re.duplicateErrorText,[Pe]:Re.forbiddenErrorText,[_e]:Re.issueIdErrorText,[xe]:Re.noMatchingApplinkErrorText,[De]:Re.pageIdNotFoundErrorText,[Ae]:Re.unauthorizedErrorText,[Le]:Re.urlInvalidErrorText,[Me]:Re.urlRequiredErrorText}
;var Fe=e=>Ne[e]||Re.genericErrorText,Ue=s("./node_modules/keycode/index.js"),Ve=s.n(Ue),Ke=s("./node_modules/react-select/dist/base/dist/react-select-cac0a5ae.browser.esm.js"),We=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),Be=s("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js"),He=s("./node_modules/@atlaskit/icon/glyph/link-filled.js"),$e=s.n(He),Ge=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const qe=o.default.div(["display:flex;align-items:center;height:34px;"]),ze=o.default.div(["margin-right:","px;line-height:1;"],2*d.e),Ye=o.default.div(["display:flex;flex-direction:column;"]),Qe=o.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]);class Je extends n.PureComponent{render(){const{href:e,onSelect:t}=this.props;return a.a.createElement(qe,{onClick:()=>t&&t(e)},a.a.createElement(ze,null,a.a.createElement($e.a,{label:"",size:"medium",primaryColor:c.a.B200
})),a.a.createElement(Ye,null,a.a.createElement(Qe,null,a.a.createElement(Ge.a,null,e))))}}Je.displayName="LinkItem";var Ze=Je,Xe=s("./node_modules/@atlaskit/icon-object/glyph/blog/24.js"),et=s.n(Xe),tt=s("./node_modules/@atlaskit/icon-object/glyph/page/24.js"),st=s.n(tt);const nt=o.default.div(["display:flex;align-items:center;height:34px;"]),at=o.default.div(["margin-right:","px;line-height:1;"],2*d.e),it=o.default.div(["display:flex;flex-direction:column;"]),rt=o.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]),ot=o.default.div(["font-size:12px;color:",";"],c.a.N200);class ct extends n.PureComponent{render(){if(!this.props.page)return null;const{title:e,space:t,type:s,href:n}=this.props.page;return a.a.createElement(nt,{onClick:()=>this.props.onSelect&&this.props.onSelect(n)
},a.a.createElement(at,null,"blogpost"===s?a.a.createElement(et.a,null):a.a.createElement(st.a,null)),a.a.createElement(it,null,a.a.createElement(rt,null,a.a.createElement(Ge.a,null,e)),a.a.createElement(ot,null,a.a.createElement(Ge.a,null,t))))}}ct.displayName="ConfluencePageItem";var lt=ct,ut=Object(i.h)({enterOrSelectConfluenceLink:{id:"issue.views.confluence-pages.link.selector.placeholder",defaultMessage:"Search pages or paste in a link"},noOptionsMessage:{id:"issue.views.confluence-pages.link.selector.noOptionsMessage",defaultMessage:"No recently visited pages"}});const dt=o.default.div(["height:46px;"]);function pt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(s),!0).forEach((function(t){bt(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const gt=e=>{const{innerProps:t,innerRef:s,getStyles:n,data:i}=e,r=n("option",e);return a.a.createElement(dt,{style:r},a.a.createElement("div",ft({},t,{ref:s}),i.page?a.a.createElement(lt,ft({key:`item_key-${i.page.href}`},i)):a.a.createElement(Ze,{href:Object(ce.i)(e.value)})))};gt.displayName="Option";class ht extends n.Component{constructor(...e){super(...e),this.state={isMenuOpen:!1,value:void 0},this.onKeyDown=e=>{switch(e.keyCode){
case Ve()("enter"):this.props.onEnter&&!this.state.isMenuOpen&&(this.props.onEnter(),e.stopPropagation())}},this.onMenuOpen=()=>{const{onMenuOpen:e}=this.props;e&&e(),this.setState({isMenuOpen:!0})},this.onMenuClose=()=>this.setState({isMenuOpen:!1}),this.handleChange=e=>{e&&e.page&&this.props.onSelect&&this.props.onSelect(),this.setState({value:e}),this.props.onChange(e?e.value:null)}}render(){const{value:e}=this.state,{options:t,intl:{formatMessage:s},link:n,isLoading:i,filterOption:r=Object(Ke.b)(),customComponents:o={}}=this.props;return a.a.createElement(Be.a,{validationState:this.props.validationState||"default",validationMessage:this.props.validationMessage},a.a.createElement(We.a,{isClearable:!0,isDisabled:i,filterOption:r,isLoading:i,onChange:this.handleChange,value:""!==n&&e?e:null,components:mt({Option:gt},o),options:t,placeholder:s(ut.enterOrSelectConfluenceLink),validationState:this.props.validationState||"default",getOptionLabel:e=>e.page?e.page.href:e.value,
maxMenuHeight:256,autoFocus:!0,menuPlacement:"auto",minMenuHeight:100,onKeyDown:this.onKeyDown,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,noOptionsMessage:()=>s(ut.noOptionsMessage)}))}}ht.displayName="LinkSelect",ht.defaultProps={isLoading:!1,link:void 0};var yt=e=>a.a.createElement(ht,e),Ot=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const jt=Object(Ot.a)(j.a,{target:"eplslgz0"})("margin-left:",d.e,"px !important;"),vt=o.default.div(["display:inline-flex;justify-content:flex-end;"]),Et=o.default.div(["margin-top:","px;display:flex;justify-content:space-between;"],d.e),kt=o.default.div([""]);class wt extends n.Component{constructor(e){super(e),this.onChildContainerRefSet=e=>{this.childContainer=e},this.onChange=e=>{const{isInvalid:t,onInvalidLinkModified:s}=this.props,n=ge()(e),a=be()(n);this.setState({isDisabled:a,link:n}),t&&s()},this.onSubmitClicked=()=>{this.onSubmit(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{
this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.onSubmit(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onSelect=e=>{this.setState({link:e,isDisabled:!1}),this.props.onSelectAnalytics()},this.childContainer=void 0,this.initialState={link:"",isDisabled:!0,showList:!1},this.state=this.initialState}componentDidMount(){Object(ye.a)(this.childContainer),this.props.requestRecentlyViewedPages()}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&Object(ye.a)(this.childContainer),this.props.linkedPagesCount>e.linkedPagesCount&&!this.props.isLoading&&e.isLoading&&this.resetAndFocus()}onSubmit(){const{isDisabled:e,link:t}=this.state,{isLoading:s,onSubmit:n}=this.props;e||s||n(t)}closeAndReset(){this.props.isLoading||(this.reset(),this.props.onCancel())}resetAndFocus(){this.reset()}reset(){this.setState(this.initialState)}render(){
const{intl:e,intl:{formatMessage:t},errorMessage:s,isInvalid:n,isLoading:i,recentlyViewedPages:r}=this.props,{link:o,isDisabled:c}=this.state,l=r.map((e=>({label:e.title,value:e.href,page:e}))),u=Object(Oe.getCrossJoinViaEpicTouchpointFlag)();return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(he.a,{onEscape:this.onEscPressed},a.a.createElement(yt,{options:l,onChange:this.onChange,intl:e,validationMessage:n?t(Fe(s)):void 0,validationState:n?"error":"default",onSelect:this.props.onSelectAnalytics,onEnter:this.onEnterPressed,link:o,isLoading:i})),a.a.createElement(Et,null,a.a.createElement(kt,null,"not-enrolled"!==u&&a.a.createElement(Ie,{intl:e})),a.a.createElement(vt,null,a.a.createElement(jt,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:c,isLoading:i},t(Re.linkButton)),a.a.createElement(jt,{appearance:"subtle",onClick:this.onCancelClicked},t(Re.cancelButton)))))}}wt.displayName="ConfluencePageCreateLinkView"
;var St=Object(f.a)([i.i,Object(l.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked"}),Object(l.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(l.a)("confluencePagesCreateLinkView",{onSubmit:"onSubmit"}),Object(u.a)({onSubmitClickAnalytics:"linkConfluencePage",onCancelClickAnalytics:"cancelLinkConfluencePage",onEnterKeyPressedAnalytics:"linkConfluencePage",onEscapeKeyPressedAnalytics:"cancelLinkConfluencePage"}),Object(l.a)("recentlyVisitedPages",{onSelectAnalytics:"selected"}),Object(u.a)({onSelectAnalytics:"selectConfluencePage"}),Object(r.b)((e=>({linkedPagesCount:Object(h.g)(e),errorMessage:Object(h.b)(e),isInvalid:Object(h.d)(e),isLoading:Object(h.e)(e),createLinkClickedCount:Object(h.a)(e),recentlyViewedPages:pe(e)})),(e=>({onInvalidLinkModified:()=>e(Object(m.b)()),onCancel:()=>e(Object(m.i)()),onSubmit:(t,s)=>e(Object(m.c)(Object(ce.i)(t),s)),requestRecentlyViewedPages:()=>e(Object(le.b)())
})))])(wt);const Ct=o.default.h3([""," margin:0;"],c.d.h200()),It=o.default.div(["margin:","px 0;padding-right:1px;"],d.e);class Tt extends n.Component{constructor(...e){super(...e),this.renderHeading=()=>{const{canLinkConfluencePage:e,onAddButtonClicked:t}=this.props;return a.a.createElement(b.c,null,a.a.createElement(b.e,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.heading",defaultMessage:"Confluence pages"})),a.a.createElement(b.d,null,e&&this.hasLinkedPages()&&a.a.createElement(oe,{onClick:t})))},this.renderLinkedPagesIfAny=()=>this.hasAnyLinkedPageLoaded()&&this.props.linkedPages?a.a.createElement(q,{groupId:"linked-confluence-pages",pages:this.props.linkedPages,onClick:this.props.onLinkedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null,this.renderMentionedPagesIfAny=()=>this.hasAnyMentionedPageLoaded()&&this.props.mentionedPages?a.a.createElement(q,{
groupId:"mentioned-confluence-pages",pages:this.props.mentionedPages,onClick:this.props.onMentionedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null}shouldShowConfluencePages(){return this.props.isCreateLinkedPageOpened||this.hasLinkedPages()||this.hasMentionedPages()}hasLinkedPages(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasMentionedPages(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}hasAnyLinkedPageLoaded(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasAnyMentionedPageLoaded(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}renderLinkedPages(){return a.a.createElement(It,null,this.props.linkedPages?this.renderLinkedPagesIfAny():a.a.createElement(ee,{itemCount:this.props.linkedPagesCachedCount}))}renderMentionedPages(){return a.a.createElement(It,null,a.a.createElement(Ct,null,a.a.createElement(i.c,{
id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.mentionedPages?this.renderMentionedPagesIfAny():a.a.createElement(ee,{itemCount:this.props.mentionedPagesCachedCount}))}renderCreateLinkedPage(){return this.props.isCreateLinkedPageOpened?a.a.createElement(St,null):null}renderConfluencePageFragment(){return a.a.createElement(a.a.Fragment,null,this.renderHeading(),this.hasLinkedPages()&&this.renderLinkedPages(),this.hasMentionedPages()&&this.renderMentionedPages(),this.renderCreateLinkedPage())}render(){return this.props.isConfluencePageLinksEnabled&&this.shouldShowConfluencePages()?this.renderConfluencePageFragment():null}}Tt.displayName="ConfluencePagesView",Tt.defaultProps={isConfluencePageLinksEnabled:!1,linkedPagesCachedCount:0,mentionedPagesCachedCount:0};t.a=Object(f.a)([Object(l.a)("ItemLineCardGroup",{onMentionedPageClicked:"clicked",onLinkedPageClicked:"clicked"}),Object(u.a)({onMentionedPageClicked:"MentionedConfluencePage",
onLinkedPageClicked:"LinkedConfluencePage"}),Object(l.a)("DeleteConfluencePage",{onDeleteConfluencePageLink:"clicked"}),Object(u.a)({onDeleteConfluencePageLink:e=>({name:"onDeleteConfluencePageLink",globalId:e})}),Object(r.b)((e=>({isCreateLinkedPageOpened:Object(h.f)(e),linkedPages:Object(h.h)(e),linkedPagesCachedCount:Object(h.g)(e),mentionedPages:Object(h.j)(e),mentionedPagesCachedCount:Object(h.i)(e),isConfluencePageLinksEnabled:Object(h.c)(e),canLinkConfluencePage:Object(g.a)(e)})),(e=>({onAuthenticateApplink:t=>e(Object(p.a)(t)),onDeleteConfluencePageLink:t=>e(Object(m.f)(t)),onAddButtonClicked:()=>e(Object(m.h)())})))])(Tt)},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={meta:{id:"jiraCrossJoinViaEpicTouchpoint",packageName:"issue",teamName:"cross-flow-growth"}}},
"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/analytics-context/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return C})),s.d(t,"a",(function(){return I}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/growth/cross-flow-utils/src/services/index.js")),r=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),d=s("./src/packages/issue/project-context-service/src/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),m=s("./src/packages/issue/issue-view/src/feature-flags.js"),b=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const O=(e,t)=>{const s=null==e?void 0:e.products[t]
;return s&&"ACTIVE"===s.state?s.edition:null},j=e=>{let{isLicenseInformationReady:t,licenseInformation:s,isSimplifiedProject:n}=e;return g(g({},y(e,["isLicenseInformationReady","licenseInformation","isSimplifiedProject"])),{},{jswEdition:O(s,"jira-software.ondemand"),confluenceEdition:O(s,"confluence.ondemand")})};function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}function w(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const S=Object(n.createContext)({hasConnectedPages:!1,routeName:"",touchpointFlow:null,licenseInformation:null,isSiteAdmin:!1,isLicenseInformationReady:!1,isSimplifiedProject:!1});t.b=e=>{let{isEligible:t,children:s}=e,u=w(e,["isEligible","children"]);const{isSiteAdmin:m,baseUrl:f,cloudId:g}=Object(p.c)(),h=Object(o.g)(),y=Object(d.h)(h),O=Object(d.b)(y),[v,k]=Object(n.useState)(null),[C,I]=Object(n.useState)(!1);Object(n.useEffect)((()=>{t&&null===v&&(async()=>{try{k(await Object(i.a)(f,g))}catch(e){Object(r.a)(E(E({},b.a),{},{error:e}))}finally{I(!0)}})()}),[f,g,t,v]);const T=E(E({},u),{},{isSiteAdmin:m,
licenseInformation:v,isLicenseInformationReady:C,isSimplifiedProject:O});return a.a.createElement(S.Provider,{value:T},a.a.createElement(c.a,{sourceName:"crossJoinViaEpicTouchpoint",sourceType:l.f,attributes:j(T)},s))};const C=e=>{const t=Object(n.useContext)(S);Object(n.useEffect)((()=>{e&&t.isLicenseInformationReady&&Object(m.getCrossJoinViaEpicTouchpointFlag)(!0,E({growthInitiative:"cross-flow",projectConfig:t.isSimplifiedProject?"next-gen":"classic"},j(t)))}),[t,e])},I=()=>{const{isLicenseInformationReady:e}=Object(n.useContext)(S);return e?a.a.createElement(u.b,null):null}},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/cross-join-context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return y})),s.d(t,"b",(function(){return O}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js")),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js"),d=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js");var m=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/touchpoint-context/index.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=Object(n.createContext)({collaborators:[],isFetchingCollaborators:!1,directJoinError:null,isAddingUserToConfluence:!1,addUserToConfluence:async()=>{},triggerPollingAfterBetterTogether:async()=>{}}),y=({children:e})=>{
const{cloudId:t}=Object(l.c)(),{createAnalyticsEvent:s}=Object(o.a)(),{touchpointFlow:b,hasConnectedPages:g,linkedPages:y,linkedPagesCount:O,mentionedPages:j,mentionedPagesCount:v,refreshIssueRemoteData:E,refreshCapability:k}=Object(m.b)(),w=Object(r.g)(),[S,C]=Object(n.useState)(!1),[I,T]=Object(n.useState)([]),[P,_]=Object(n.useState)(!1),[x,D]=Object(n.useState)(null),[A,L]=Object(n.useState)(!1),M=Object(n.useRef)(0),R=Object(n.useRef)(O),N=Object(n.useCallback)((async()=>{_(!0);try{const e=await(async e=>(await Object(p.b)(`/gateway/api/xflow/${e}/confluence/collaborators`)).map((e=>({key:e.id,name:e.name,src:e.avatarUrl}))))(t);T(e),_(!1),Object(c.b)(s({}),"fetchConfluenceCollaborators succeeded")}catch(e){_(!1),Object(c.b)(s({}),"fetchConfluenceCollaborators failed"),Object(i.a)(f(f({},u.a),{},{error:e}))}}),[t,s]),F=Object(n.useCallback)((async()=>{try{L(!0);const e=await(async e=>{const t=`ari:cloud:confluence::site/${e}`
;return(await Object(d.a)("/gateway/api/invitations/v1/access-requests/request",{method:"POST",body:JSON.stringify({resource:t}),credentials:"include"})).results[t]})(t);"ACCESS_GRANTED"===e||"ACCESS_EXISTS"===e?(Object(c.b)(s({}),"userDirectJoinConfluence succeeded"),C(!0)):(Object(c.b)(s({}),"userDirectJoinConfluence failed"),Object(i.a)(f(f({},u.a),{},{error:new Error(`access request returned unexpected response: ${e}`)})),L(!1),D("JOIN_CONFLUENCE"))}catch(e){Object(c.b)(s({}),"userDirectJoinConfluence failed"),Object(i.a)(f(f({},u.a),{},{error:e})),L(!1),D("JOIN_CONFLUENCE")}}),[t,s]),U=Object(n.useCallback)((async()=>{C(!0)}),[]);return Object(n.useEffect)((()=>{let e;const t=!!y&&y.length>0,n=!!j&&j.length>0,a=!!y&&y.length===R.current+1;return S&&(A&&(t||n)||a?(Object(c.b)(s({}),"userPollConfluencePages succeeded"),L(!1),C(!1),M.current=0,R.current+=1):M.current<25?(M.current+=1,e=setTimeout((()=>E(w)),2e3)):(Object(c.b)(s({}),"userPollConfluencePages failed"),
Object(i.a)(f(f({},u.a),{},{error:new Error("Timeout polling for new linked pages")})),D("POLL_CONTENT"),M.current=0,L(!1),C(!1),k())),()=>clearTimeout(e)}),[A,s,w,y,O,j,v,k,E,S]),Object(n.useEffect)((()=>{("DIRECT_ACCESS"===b&&g||"REQUEST_ACCESS"===b)&&N()}),[N,g,b]),a.a.createElement(h.Provider,{value:{collaborators:I,isFetchingCollaborators:P,isAddingUserToConfluence:A,addUserToConfluence:F,directJoinError:x,triggerPollingAfterBetterTogether:U}},e)};y.displayName="CrossJoinProvider";const O=()=>Object(n.useContext)(h)},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/touchpoint-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return M}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/react-resource-router/build/esm/index.js")),l=s("./src/packages/platform/utils/constants/src/spa-routes.js"),u=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),d=s("./src/packages/platform/utils/types/src/general.js"),p=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),m=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),b=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),f=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),g=s("./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js"),h=s("./src/packages/issue/issue-view/src/feature-flags.js"),y=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),O=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js"),j=s("./src/packages/platform/utils/fetch/src/utils/requests.js")
;function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var k=async e=>{const t=`ari:cloud:confluence::site/${e}`,s=(await Object(j.b)(`/gateway/api/invitations/v1/access-requests/capabilities?resource=${t}`)).results[t];return s||(Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:new Error("Could not find user join capability for Confluence product on cloud site, defaulting to FORBIDDEN")
},O.a)),"FORBIDDEN")},w=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/analytics-context/index.js"),S=s("./src/packages/issue/issue-context-service/src/main.js"),C=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),I=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),T=s("./src/packages/issue/project-context-service/src/main.js");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D=Object(n.createContext)({isEligible:!1,isInExperiment:!1,hasConnectedPages:!1,touchpointFlow:null,linkedPages:[],linkedPagesCount:0,mentionedPages:[],mentionedPagesCount:0,refreshIssueRemoteData:()=>{},createLinkClickedCount:0,onDismiss:o.a,hidden:!1,hide:o.a,refreshCapability:async()=>{}}),A=[l.c.RAPIDBOARD_BACKLOG,l.c.RAPIDBOARD_BOARD,l.c.SOFTWARE_BACKLOG,l.c.SOFTWARE_BOARDS,l.c.SOFTWARE_ROADMAP,l.c.ISSUE],L=({linkedPages:e,linkedPagesCount:t,mentionedPages:s,mentionedPagesCount:i,refreshIssueRemoteData:r,createLinkClickedCount:o,onDismiss:l,children:f})=>{const[{route:{name:g}}]=Object(c.o)(),{isEpic:y}=(()=>{
const e=Object(S.g)(),t=Object(d.l)(e),s=Object(T.h)(t),n=Object(h.collapsedHierarchies)(),[a]=Object(C.d)(t),i=void 0!==(null==a?void 0:a["epic-issues"]),r=null==a?void 0:a["hierarchy-level-same-level"],o=Object(T.c)(s,null==r?void 0:r.id);return n?{isEpic:!(!i&&!Object(I.b)(null==r?void 0:r.level))}:{isEpic:!(!i&&1!==o)}})(),{createAnalyticsEvent:j}=Object(p.a)(),{cloudId:v,licensedProducts:E}=Object(b.c)(),[P,x]=Object(n.useState)(null),[L,M]=Object(n.useState)(!1),[R,N]=Object(n.useState)(!1),F=Object(n.useMemo)((()=>Object(h.getCrossJoinViaEpicTouchpointFlag)()),[]),U=Object(n.useCallback)((async()=>{x(await k(v))}),[v]);Object(n.useEffect)((()=>{"not-enrolled"!==F&&M(E.confluence&&y&&A.includes(g))}),[F,y,E.confluence,g]),Object(n.useEffect)((()=>{o>0&&N(!1)}),[o]),Object(n.useEffect)((()=>{L&&(e&&e.length>0||s&&s.length>0?x("ACCESS_EXISTS"):null===P&&(async()=>{try{x(await k(v)),Object(m.b)(j({}),"fetchCapability succeeded")}catch(e){Object(m.b)(j({}),"fetchCapability failed"),
Object(u.a)(_(_({},O.a),{},{error:e}))}})())}),[v,j,E.confluence,L,e,s,P]);const V=t>0||i>0;return a.a.createElement(D.Provider,{value:{touchpointFlow:P,hasConnectedPages:V,isEligible:L,isInExperiment:"experiment"===F,linkedPages:e,linkedPagesCount:t,mentionedPages:s,mentionedPagesCount:i,refreshIssueRemoteData:r,createLinkClickedCount:o,onDismiss:l,hidden:R,hide:()=>N(!0),refreshCapability:U}},a.a.createElement(w.b,{isEligible:L,hasConnectedPages:V,routeName:g,touchpointFlow:P},f))};L.displayName="TouchpointContextProvider";const M=()=>Object(n.useContext)(D);t.a=Object(i.b)((e=>({linkedPages:Object(y.h)(e),linkedPagesCount:Object(y.g)(e),mentionedPages:Object(y.j)(e),mentionedPagesCount:Object(y.i)(e),createLinkClickedCount:Object(y.a)(e)})),(e=>({refreshIssueRemoteData:t=>{e(Object(g.b)(Object(d.l)(t)))},onDismiss:()=>{e(Object(f.i)())}})))(L)},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/messages.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({bannerTitle:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.title",defaultMessage:"Confluence pages"},bannerTitleRequestDenied:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.title-request-denied",defaultMessage:"Confluence pages are not available"},bannerTitleError:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.title-error",defaultMessage:"You\u2019re almost there"},approvedMicrocopy:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.approved-microcopy",defaultMessage:"You\u2019re approved to join Confluence"},approvedTemplateMicrocopy:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.approved-template-microcopy",defaultMessage:"Access approved"},productRequirementsTemplateHeader:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.product-requirements-template-header",defaultMessage:"Product requirements"},productRequirementsTemplateAltText:{
id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.product-requirements-template-alt-text",defaultMessage:"Confluence template depicting the content of the Product requirements template. Includes project details table, project objective, success metrics, assumptions, milestones and more to help plan and discover project requirements"},bannerContentWithLinkedPages:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-with-linked-pages",defaultMessage:"Collaborate on documentation that your team has linked to this epic."},bannerContentWithNoLinkedPages:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-with-no-linked-pages",defaultMessage:"Write documentation and link it to this epic."},bannerContentRequestAccess:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-access",defaultMessage:"Join your team to view, edit, and write documentation linked to this epic."},bannerContentWithError:{
id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-error",defaultMessage:"Something went wrong while trying to join. Wait a few moments and try again."},bannerContentRequestPending:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-pending",defaultMessage:"Your request has been sent to the site admin."},bannerContentRequestDenied:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-denied",defaultMessage:"The site admin denied your request."},bannerContentRequestRevoked:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-revoked",defaultMessage:"The site admin denied you access."},requestAccessButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.request-access-button",defaultMessage:"Request access"},createPageButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.create-page-button",defaultMessage:"Create page"},createNewPageButton:{
id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.create-new-page-button",defaultMessage:"Create new page"},showLinkedPagesButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.show-linked-pages-button",defaultMessage:"Show linked pages"},productRequirementsButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.product-requirements-button",defaultMessage:"Write product requirements"},tryAgainButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.try-again-button",defaultMessage:"Try again"},joinButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.join-button-tooltip",defaultMessage:"Gives you access to Confluence"},requestAccessButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.request-access-button-tooltip",defaultMessage:"Request access to Confluence"},confluenceButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.confluence-button-tooltip",
defaultMessage:"Opens in Confluence"},createNewPageButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.create-new-page-button-tooltip",defaultMessage:"Create a page in Confluence"}})},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/ui/common/better-together-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlassiansox/origin-tracing/dist/es2019/origin-tracer.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/button--next/dist/es2019/button.js")),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/summary/src/services/index.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/project-context-service/src/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),m=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/cross-join-context/index.js");t.a=({flow:e,blueprintModuleCompleteKey:t,appearance:s,iconBefore:b,children:f,actionSubjectId:g,onClick:h,innerRef:y,onLingerStart:O,onLingerEnd:j})=>{
const{atlassianAccountId:v,cloudId:E}=Object(p.c)(),{triggerPollingAfterBetterTogether:k}=Object(m.b)(),w=Object(c.f)(),S=Object(c.g)(),C=Object(d.h)(S),I=Object(d.i)(C),T=Object(o.l)(S),[{value:P}]=Object(l.a)({issueKey:T}),_=Object(n.useMemo)((()=>new i.a({product:"jira"})),[]),x=Object(n.useMemo)((()=>{if(null===v||void 0===w||null===P||void 0===I)return;const s=Object(o.j)(w),n=new URLSearchParams({accountId:v,cloudId:E,flow:e,atlOrigin:_.encode(),sourceContext:"jira",sourceComponent:"cross-join-via-epic-touchpoint",projectKey:C,projectName:I});"request-access"!==e&&(n.append("issueId",s),void 0!==t?(n.append("blueprintModuleCompleteKey",t),n.append("pageName",`Product requirements - ${P}`)):(n.append("createBlank","true"),n.append("pageName",P)));const a=`/gpa-cross-flow/better-together.html?${n.toString()}`;if("join-product"===e||"request-access"===e){return`/login?${new URLSearchParams({"dest-url":a,application:"confluence","permission-violation":"true"}).toString()}`}return a
}),[v,t,E,e,P,_,C,I,w]),[D,A]=Object(n.useState)(!1);Object(n.useEffect)((()=>{let e;return"function"!=typeof O&&"function"!=typeof j||(e=D?setTimeout((()=>{"function"==typeof O&&O()}),200):setTimeout((()=>{"function"==typeof j&&j()}),250)),()=>{clearTimeout(e)}}),[D,O,j]);const L=Object(n.useCallback)((()=>A(!0)),[]),M=Object(n.useCallback)((()=>A(!1)),[]),R=Object(n.useCallback)(((t,s)=>{Object(u.h)(s,g,_.toAnalyticsAttributes({hasGeneratedId:!0})),null==h||h(),"join-product"!==e&&"post-expand"!==e||k()}),[g,e,h,_,k]);return a.a.createElement(r.a,{appearance:s,onClick:R,href:x,target:"_blank",rel:"noopener noreferrer",iconBefore:b,ref:y,onMouseEnter:L,onMouseLeave:M},f)}},"./src/packages/issue/issue-view/src/views/issue-base/context/approval-panel/approval-panel.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),o=s("./src/packages/issue/issue-view-layout/src/services/main.js"),c=s("./src/packages/servicedesk/approval-panel/src/async.js"),l=s("./src/packages/issue/issue-view/src/actions/approval-action/index.js"),u=s("./src/packages/issue/issue-view/src/actions/context-item-actions.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),f=s("./src/packages/issue/issue-view/src/feature-flags.js"),g=s("./src/packages/issue/issue-view/src/selectors/approval-selector/index.js"),h=s("./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js")
;function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const O=e=>{const[,t]=Object(o.b)(),s=Object(n.useCallback)(((e,s)=>{t({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:e}})}),[t]);return a.a.createElement(c.b,y({},e,{onOpenPanel:s}))};O.displayName="ApprovalPanelContainer";const j=Object(b.a)([Object(i.b)((e=>{const t="servicedesk-approvals",s=Object(g.d)(e,t)||"",n=Object(p.D)(s)(e);return{approval:Object(g.e)(e,t),baseUrl:Object(d.f)(e),issueId:Object(d.x)(e),fieldId:t,isSimplifiedProject:Object(m.u)(e),hasLinkedFieldEditPermissions:n,canCurrentUserApprove:Object(g.b)(e,t)}}),(e=>({onOpenPanel:(t,s)=>{e(Object(u.b)({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:t}}))},onSaveApprovalAnswerError:()=>{e(Object(l.c)())},onSaveApprovalAnswerSuccess:()=>{e(Object(l.d)())},
onZeroApprovalRequired:()=>{e(Object(l.f)())}})))])(O);t.a=Object(r.a)(f.isApprovalFieldExtractionEnabled,h.b,j)},"./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return D})),s.d(t,"b",(function(){return A}))
;var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/actions/approval-action/index.js"),i=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),r=s("./node_modules/react/index.js"),o=s.n(r),c=s("./src/packages/platform/ui/flags/src/services/index.js"),l=s("./src/packages/issue/issue-context-service/src/main.js"),u=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),d=s("./src/packages/issue/issue-view-layout/src/services/main.js"),p=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),m=s("./src/packages/servicedesk/approval-panel/src/async.js"),b=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),f=s("./src/packages/issue/issue-view/src/common/util/get-element/index.js"),g=s("./node_modules/react-intl/lib/index.es.js"),h=Object(g.h)({removeApproverError:{
id:"issue-field-approval-panel.approval-glance.remove-approver-error",defaultMessage:"We couldn\u2019t remove the approver"},addApproverError:{id:"issue-field-approval-panel.approval-glance.add-approver-error",defaultMessage:"We couldn\u2019t add the approver"},saveSuccess:{id:"issue-field-approval-panel.approval-panel.save-success",defaultMessage:"We've saved your response."},saveError:{id:"issue-field-approval-panel.approval-panel.save-error",defaultMessage:"We couldn\u2019t save your approval response"}}),y=s("./node_modules/lodash/castArray.js"),O=s.n(y),j=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),v=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),E=s("./src/packages/issue/issue-view/src/selectors/approval-selector/utils/index.js");var k=({issueKey:e,approvalFieldId:t="servicedesk-approvals"})=>{const[{value:s},{saveValue:n}]=Object(j.a)({fieldKey:t,issueKey:e,fieldType:"servicedesk-approvals",
initialValue:null}),a=s&&s.activeApproval,i=a?a.configuration:null,r=i&&i.approvers?i.approvers.customFieldId:"",[o]=Object(v.a)(e,r),{isEditable:c,title:l,autoCompleteUrl:u,schema:d}=o||{},{custom:p}=d||{},[{value:m},{saveValue:b}]=Object(j.a)({fieldKey:r,fieldType:r,issueKey:e,initialValue:null}),f=m?O()(m):[];return{approval:a&&null!==p&&Object(E.a)(a,f,l,p),isEditable:c,saveApprovers:n,saveLinkedFieldValue:b,linkedFieldId:r,autoCompleteUrl:u}};function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){C(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var I=s("./src/packages/issue/project-context-service/src/main.js"),T=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js");function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=(e,t)=>!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some((e=>e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)));const D=Object(n.b)(null,{renderApproverList:i.g,updateApprovalLinkedUserPickerField:a.e})((e=>{
const t=Object(b.a)(),{showFlag:s}=Object(c.f)(),n=Object(l.g)(),a=Object(f.a)()||document.body,[,i]=Object(d.b)(),g=e.payload&&e.payload.approvalFieldId||"servicedesk-approvals",y=Object(r.useCallback)((()=>{i(void 0)}),[i]),O=Object(r.useCallback)((()=>{s({type:"error",title:h.addApproverError})}),[s]),j=Object(r.useCallback)((()=>{s({type:"error",title:h.removeApproverError})}),[s]),{approval:v,linkedFieldId:E,saveLinkedFieldValue:w,autoCompleteUrl:C,isEditable:I}=k({issueKey:n,approvalFieldId:g}),{createAnalyticsEvent:T}=Object(p.a)(),[P]=Object(u.b)({issueKey:n,fieldKey:"status"}),_=S(S({},e),{},{fieldId:E,fieldMetaKey:E,approvalFieldId:g,approval:v,baseUrl:t,issueKey:n,fieldAutoCompleteUrl:C,hasLinkedFieldEditPermissions:I,issueStatusId:P.id,portalElement:a,onRemoveApproverError:j,onAddApproverError:O,onHidePanel:y,renderApproverList:e.renderApproverList,onApproverListUpdated:t=>{w(t,null,T({})),e.updateApprovalLinkedUserPickerField(E,t)}});return o.a.createElement(m.a,_)
})),A=Object(n.b)(null,{setRefreshIssue:i.g})((e=>{const[,t]=Object(d.b)(),{setRefreshIssue:s}=e,n=Object(l.g)(),a=Object(l.f)(),i=Object(l.i)(),{showFlag:u}=Object(c.f)(),p=Object(T.a)(),f=e.payload&&e.payload.approvalFieldId||"servicedesk-approvals",g=Object(r.useCallback)((()=>{s(),u({type:"success",title:h.saveSuccess})}),[u,s]),y=Object(r.useCallback)((()=>{u({type:"error",title:h.saveError})}),[u]),O=Object(I.e)(i),{approval:j,isEditable:v}=k({issueKey:n,approvalFieldId:f}),E=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({approval:j,baseUrl:Object(b.a)(),fieldId:f,isSimplified:(null==O?void 0:O.isSimplified)||!1,hasLinkedFieldEditPermissions:v,canCurrentUserApprove:x(j,p),
onOpenPanel:(e,s)=>{t({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:e}})},issueId:a,onSaveApprovalAnswerSuccess:g,onSaveApprovalAnswerError:y,onZeroApprovalRequired:s},e);return o.a.createElement(m.b,E)}))},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js").b,o=n.default.div(["width:inherit;height:inherit;opacity:1;background-color:",";display:flex;flex-direction:column;position:fixed;overflow:hidden;",";"],a.a.N0,(({top:e})=>null!=e&&`top: ${e}px;`)),c=n.default.div(["display:flex;flex-direction:column;height:100%;padding-left:","px;"],r),l=n.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;height:30px;margin:","px ","px 0;"],i.e,i.e)},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js"),u=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js");class m extends n.Component{constructor(t){super(t),this.state={styles:{panelWidth:0,headerWidth:0,contentWidth:0,contextWidth:0,panelTop:0,panelHeight:0}},this.refFixedPanel=void 0,this.refPanelPositioner=void 0,this.scrollContainerCached=null,
this.scrollContainerResizeObserver=e&&e.ResizeObserver?new window.ResizeObserver((()=>{requestAnimationFrame((()=>{this.updateSidePanelStyles()}))})):null,this.getMemoizedStyles=Object(i.a)(((e,t,s,n,a,i)=>({panelWidth:e,panelTop:t,panelHeight:s,headerWidth:n,contentWidth:a,contextWidth:i}))),this.currentPosition={panelWidth:void 0,headerWidth:void 0,contentWidth:void 0,contextWidth:void 0,panelTop:void 0,panelHeight:void 0},this.updateSidePanelStyles=()=>{if(!this.props||!this.props.isOpen)return;const{refs:e}=this.props,t=document.getElementById("jira-issue-header-actions"),s=e.refPanelColumnElement,n=s&&getComputedStyle(s),a=(e=>e.refVisibilityContainer?e.refVisibilityContainer.offsetWidth:void 0)(e),i=((e,t)=>{const s=e.refPanelColumnElement;if(s&&t)return s.offsetWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)})(e,n),r=((e,t)=>e?e.offsetWidth:t||0+p.d)(t,i),o=this.calculateSidePanelPosition(),c=((e,t)=>{const s=e.refSidePanelContainerElement
;return s&&s instanceof HTMLElement?s.offsetWidth+p.d-(t?parseFloat(t.paddingLeft):0):0})(e,n),l=o&&o.panelTop?o.panelTop:void 0,u=o&&o.panelHeight?o.panelHeight:void 0,d=this.getMemoizedStyles(c,l,u,r,i,a);d!==this.state.styles&&(this.setState({styles:d}),this.setSidePanelPosition(o))},this.getGlanceOffsetTop=e=>{if(!e)return;const t=e.getBoundingClientRect().top;let s=4;const n=document.getElementById("jira-issue-header-actions")||document.getElementById("jira-issue-header");if(n&&e.contains(n)){const e=this.props.refs.refLayoutContainer,a=e?e.getBoundingClientRect().top:0,i=n.getBoundingClientRect();s=(i&&i.bottom<0?a+i.height:i.bottom)+4-t}return s=Math.max(s,4),s},this.setSidePanelPosition=e=>{if(!e)return;const{panelTop:t,panelHeight:s}=e;this.currentPosition.panelTop!==t&&this.refFixedPanel.current&&(this.currentPosition.panelTop=t,this.refFixedPanel.current.style.top=null!=t?`${t}px`:""),
this.currentPosition.panelHeight!==s&&this.refPanelPositioner.current&&(this.currentPosition.panelHeight=s,this.refPanelPositioner.current.style.height=null!=s?`${s}px`:"")},this.calculateSidePanelPosition=()=>{const e=this.getScrollContainer(),t=Object(l.a)(e);if(null===e||null===t)return;const s=Math.min(window.innerHeight,t||0),n=this.getGlanceOffsetTop(e)||0,a=n+e.getBoundingClientRect().top,i=Math.max(s-a,s-n);return i<=0&&c.h.safeErrorWithoutCustomerData("issue.views.issue-base.context.side-panel",`panel height is <= 0: panelHeight='${i}`,new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),{panelTop:a,panelHeight:i<0?void 0:i}},this.updateSidePanelPosition=()=>{this.props.isOpen&&requestAnimationFrame((()=>{const e=this.calculateSidePanelPosition();this.setSidePanelPosition(e)}))},this.refPanelPositioner=Object(n.createRef)(),this.refFixedPanel=Object(n.createRef)()}componentDidMount(){this.updateSidePanelStyles(),this.attachSidePanelListeners(),
this.props&&this.props.refs&&this.scrollContainerResizeObserver&&(this.props.refs.refLayoutContainer&&this.scrollContainerResizeObserver.observe(this.props.refs.refLayoutContainer),this.props.refs.refPanelColumnElement&&this.scrollContainerResizeObserver.observe(this.props.refs.refPanelColumnElement))}componentDidUpdate(e){if(this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.updateSidePanelStyles(),this.scrollContainerResizeObserver){const{refs:{refPanelColumnElement:t,refLayoutContainer:s}}=this.props,{refs:{refPanelColumnElement:n,refLayoutContainer:a}}=e;t&&this.scrollContainerResizeObserver.observe(t),s&&this.scrollContainerResizeObserver.observe(s),t===n&&s===a||(n&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(n),a&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(a),this.detachSidePanelListeners(),this.updateSidePanelPosition(),this.attachSidePanelListeners())}}componentWillUnmount(){
this.detachSidePanelListeners(),this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.disconnect()}getScrollContainer(){return this.props.refs.refSidePanelContainerElement?this.props.refs.refSidePanelContainerElement:(this.scrollContainerCached||(this.scrollContainerCached=Object(u.a)(this.refPanelPositioner.current,!1)),this.scrollContainerCached)}attachSidePanelListeners(){const e=this.getScrollContainer();e&&(e===document.body?document.addEventListener("scroll",this.updateSidePanelPosition):e.addEventListener("scroll",this.updateSidePanelPosition))}detachSidePanelListeners(){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.updateSidePanelPosition)}render(){const{isOpen:e,children:t}=this.props,{styles:s}=this.state,n=s.panelWidth?s.panelWidth:(s.contextWidth||0)+o.e;return a.a.createElement(d.a,{ref:this.refPanelPositioner,width:n,show:e},a.a.createElement(p.a,{innerRef:this.refFixedPanel},a.a.createElement(p.b,null,t(s))))}}
m.displayName="SidePanel",m.displayName="SidePanel"}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Ha}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),l=s("./src/packages/issue/issue-context-service/src/types.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),m=s("./node_modules/react-intl/lib/index.es.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),f=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),y=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),O=s("./node_modules/reselect/lib/index.js"),j=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),v=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js")
;const E=[j.a.FULL_ISSUE,j.a.SERVICEDESK_QUEUES_ISSUE,j.a.SERVICEDESK_REPORTS_ISSUE],k=Object(O.createSelector)(u.b,d.u,v.a,((e,t,s)=>!!e&&(E.includes(e.value)&&!t)&&!s)),w=Object(O.createSelector)(k,(e=>e));var S=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const C=Object(O.createSelector)(u.w,(e=>e&&e.includes("flagActions"))),I=Object(O.createSelector)(S.c,C,((e,t)=>e&&t));var T=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),P=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),_=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js")
;const x=Object(O.createSelector)(u.u,v.a,((e,t)=>Boolean(e)&&!t)),D=Object(O.createSelector)(T.c,T.b,((e,t)=>e||t)),A=Object(O.createSelector)(d.u,D,((e,t)=>t&&e)),L=Object(O.createSelector)(d.i,u.s,((e,t)=>!e&&!t)),M=Object(O.createSelector)(_.c,_.b,P.b,d.m,((e,t,s,n)=>!e&&!t&&s&&n)),R=Object(O.createSelector)(_.c,d.m,((e,t)=>e&&t)),N=Object(O.createSelector)(d.t,y.c,((e,t)=>e||t)),F=Object(O.createSelector)(d.F,(e=>"service_desk"===e)),U=Object(O.createSelector)(d.u,F,y.c,x,v.a,((e,t,s,n,a)=>t?!e&&!a:n&&s))
;var V=s("./node_modules/query-string/index.js"),K=s.n(V),W=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),B=s("./src/packages/platform/ui/error-boundary/src/index.js"),H=s("./node_modules/@atlaskit/popup/dist/es2019/index.js"),$=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),G=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),q=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),z=s("./node_modules/@atlaskit/menu/dist/es2019/components/section/popup-menu-group.js"),Y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Q=s("./node_modules/@atlaskit/menu/dist/es2019/components/section/section.js"),J=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const Z=Y.default.div(["border-top:1px solid ",";"],J.a.N30),X=Object(Y.default)(Q.a)(["[data-ds--menu--heading-item='true']{padding:0 12px;margin:7px 0;}"]),ee=({dropdownGroupData:{items:e,name:t},isFirst:s,onClick:n})=>{const i=t&&t.length>0?t:void 0,r=a.a.createElement(z.a,{minWidth:0},a.a.createElement(X,{title:i},e.map(((e,t)=>a.a.createElement("div",{key:t,onClick:n},e)))));return s?r:a.a.createElement(Z,null,r)};ee.displayName="DropdownGroup";var te=ee,se=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),ne=s("./node_modules/@atlaskit/icon/glyph/more.js"),ae=s.n(ne),ie=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),re=s("./src/packages/platform/controllers/intl/src/index.js"),oe=Object(m.h)({actions:{id:"issue-meatball-menu.dropdown-trigger.actions",defaultMessage:"Actions"}});function ce(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(s),!0).forEach((function(t){ue(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ce(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ue(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function de(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const pe=Object(Y.keyframes)(["to{box-shadow:0 0 0 10px transparent;}"]),me=(e,t)=>{const s=e(t),{buttonStyles:n}=s;return le(le({},de(s,["buttonStyles"])),{},{buttonStyles:le(le({},n),{},{borderRadius:"4px",animation:`${pe} 1.45s 3 cubic-bezier(0.66, 0, 0, 1)`,animationDelay:"0.5s",boxShadow:`0 0 0 0 ${J.a.P300}`})})},be=({isOpen:e,isDisabled:t,isLoading:s,hasPulse:n,onClick:i})=>{const{formatMessage:r}=Object(re.c)(),o=r(oe.actions);return a.a.createElement(ie.a,{content:o,position:"top"},a.a.createElement(se.a,{testId:"issue-meatball-menu.ui.dropdown-trigger.button","aria-label":o,"aria-expanded":e,isDisabled:t,isLoading:s,appearance:"subtle",spacing:"default",iconBefore:a.a.createElement(ae.a,{label:"",size:"medium"}),theme:n?me:void 0,isSelected:e,onClick:i}))};be.displayName="DropdownTrigger",be.defaultProps={hasPulse:!1,isDisabled:!1};var fe=be
;const ge=Y.default.div(["min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}"]),he=({meatballMenuData:e,hasPulse:t,isDisabled:s,isLoading:i})=>{const[r,o]=Object(n.useState)(!1),{createAnalyticsEvent:c}=Object(G.a)(),l=Object(n.useCallback)((()=>{o(!0);const e=c({action:"click",actionSubject:"dropdownItem"});Object(q.h)(e,"issueActionsOpenChanged")}),[c]),u=Object(n.useCallback)((()=>{o(!1);const e=c({action:"click",actionSubject:"dropdownItem"});Object(q.h)(e,"issueActionsOpenChanged")}),[c]);return a.a.createElement(H.a,{boundary:"clippingParents",isOpen:r,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(fe,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i,onClick:r?u:l})),onClose:u,content:()=>a.a.createElement(ge,null,e.filter((({items:e})=>e.length>0)).map(((e,t)=>a.a.createElement(te,{key:e.key,dropdownGroupData:e,isFirst:0===t,
onClick:u})))),zIndex:$.f.modal})};he.displayName="MeatballMenu",he.defaultProps={hasPulse:!1,isDisabled:!1,isLoading:!1};var ye=he,Oe=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),je=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),ve=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ee=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");class ke extends n.Component{constructor(...e){super(...e),this.ecosystemModalLinkRef=void 0,this.setEcosystemModalLinkRef=e=>{this.ecosystemModalLinkRef=e},this.clickEcosystemModalLinkRef=()=>this.ecosystemModalLinkRef&&this.ecosystemModalLinkRef.click(),this.renderEcosystemModalLink=(e,t)=>a.a.createElement("a",{href:e,className:t,ref:this.setEcosystemModalLinkRef,display:"none"},"")}render(){const{id:e,linkText:t,tooltip:s,href:n,styleClass:i}=this.props;return a.a.createElement(Ee.a,{key:e,
onClick:this.clickEcosystemModalLinkRef,title:s},t,this.renderEcosystemModalLink(n,i))}}ke.displayName="EcosystemWebItem",ke.defaultProps={styleClass:null,tooltip:null};var we=s("./src/packages/forge/forge-ui-analytics/src/services/issue-action/index.js"),Se=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),Ce=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),Ie=s("./src/packages/issue/issue-view/src/actions/forge-actions.js");function Te(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Pe=e=>{let{onClick:t,source:s}=e,i=Te(e,["onClick","source"]);const r=Object(n.useMemo)((()=>({source:s})),[s]),o=Object(n.useCallback)((()=>{
Object(we.a)(s),t(i)}),[s,t,i]);return a.a.createElement(Se.a,{attributes:r,shouldFireScreenEvent:!1},a.a.createElement(Ee.a,{key:i.id,onClick:o},a.a.createElement(Ce.a,{extensionName:i.title,extensionEnvType:i.extension.environmentType})))};Pe.displayName="ForgeActionView";const _e=Object(p.a)([Object(i.b)((e=>({source:Object(u.b)(e)})),{onClick:Ie.c})])(Pe),xe=e=>{if("FORGE_ENTITY_TYPE"===e.type){return(e=>({component:()=>a.a.createElement(_e,e),eventName:e.id,key:e.id,isAllowed:!0}))(e)}return(e=>({component:()=>a.a.createElement(ke,{href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip}),eventName:e.name,key:e.name,isAllowed:!0}))(e)};class De extends n.Component{componentDidCatch(e,{componentStack:t}){ve.h.safeErrorWithoutCustomerData("issue.error-boundary.issue-actions-meatball-menu.ecosystem-items","An uncaught error has occurred in issue actions meatball menu ecosystem items",new je.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{
message:e.message,stack:e.stack,componentStack:t}}))}render(){const{ecosystemActions:e}=this.props;return e.map(xe).filter((e=>e.isAllowed)).reduce(((e,t)=>{if(t.component){const s=t,n=s.component,{key:i}=s;e.push(a.a.createElement(n,{key:i}))}return e}),[])}}De.displayName="EcosystemDropdownItems";var Ae=De,Le=Object(i.b)((e=>({ecosystemActions:Object(Oe.j)(e)})),{})(Ae),Me=s("./src/packages/issue/issue-view/src/common/constants/flags.js"),Re=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var Ne=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),Fe=s("./src/packages/issue/issue-view/src/views/connect-field.js");const Ue=Object(m.h)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag"},removeFlag:{id:"issue.flag.remove",defaultMessage:"Remove flag"}});class Ve extends n.Component{constructor(...e){super(...e),this.removeFlag=()=>{this.props.onChange(!1),this.props.onConfirm(),
this.props.onActionSelectedAnalytics("removeFlag")},this.addFlag=()=>{this.props.onChange(!0),this.props.onConfirm(),this.props.onActionSelectedAnalytics("addFlag")}}render(){return this.props.value?a.a.createElement(Ee.a,{key:"removeFlag",onClick:this.removeFlag},this.props.removeFlagMessage):a.a.createElement(Ee.a,{key:"addFlag",onClick:this.addFlag},this.props.addFlagMessage)}}Ve.displayName="FlagIssueActionView",Ve.displayName="FlagIssueActionView";const Ke=({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>Object(Re.a)((e=>`${e}/rest/greenhopper/1.0/xboard/issue/flag/flag.json`)(e),{method:"POST",body:JSON.stringify({flag:s,issueKeys:[t],commentVisibility:"",comment:""})}).toPromise())(e,t,Object(Ne.c)(s));var We=Object(Fe.a)(((e,t)=>({fieldId:Object(Ne.a)(e),shouldDiscardChangeOnFailure:!0,transformFromStateValue:Ne.c,transformToStateValue:Ne.d,saveField:Ke,additionalProps:(e,s)=>({onActionSelectedAnalytics:t.onActionSelectedAnalytics,addFlagMessage:s.formatMessage(Ue.addFlag),
removeFlagMessage:s.formatMessage(Ue.removeFlag)}),onSaveFailureFlagType:Object(Ne.b)(e)?Me.B:Me.A})))(Ve),Be=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),He=s("./src/packages/issue/issue-view/src/common/messages/time.js");const $e=({onLogTimeClick:e})=>{const{formatMessage:t}=Object(re.c)(),{createAnalyticsEvent:s}=Object(G.a)(),i=Object(n.useCallback)((()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(t,"logWork")}),[s,e]);return a.a.createElement(Ee.a,{key:"LogTimeActionView",onClick:i},t(He.a.logWork))};$e.displayName="LogWork";var Ge=$e,qe=Object(i.b)(null,(e=>({onLogTimeClick:()=>{e(Object(Be.T)("ADD_MODAL",null))}})))(Ge);var ze=(e,t)=>({name:"",key:"AddToIssueDropdownGroup",items:[...t?[a.a.createElement(qe,{key:"logWork"})]:[],...e?[a.a.createElement(We,{key:"flagIssue"})]:[],a.a.createElement(Le,{key:"ecosystemItems"})]
}),Ye=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),Qe=s("./node_modules/react-async-component/commonjs/index.js"),Je=s("./src/packages/platform/ui/modal/src/index.js");Object(Qe.asyncComponent)({resolve:()=>s.e("async-jira-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/ui/main.js")),name:"AsyncCloneIssueDialog"});const Ze=({children:e,packageName:t})=>a.a.createElement(Je.a,{id:"clone-issue-dialog",packageName:t},e);Ze.displayName="CloneIssueDialogBoundary";var Xe=s("./node_modules/lodash/isEmpty.js"),et=s.n(Xe),tt=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const st=Object(tt.q)("children-issues"),nt=Object(O.createSelector)(st,(e=>!!e&&!et()(e.value))),at=Object(O.createSelector)(d.H,(e=>e.cloneModal)),it=Object(O.createSelector)(at,(e=>e.isOpen))
;var rt=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),ot=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),ct=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const lt=Object(Ye.f)((()=>s.e("async-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/index.js"))),{moduleId:"./src/packages/issue/clone-issue-dialog/src/index.js"});var ut,dt,pt,mt=Object(i.b)((e=>{const t=Object(ot.d)(e),s=Object(ct.f)(e).length>0,n=Object(rt.g)(e)>0;return{isOpen:it(e),shouldAskChildren:nt(e),shouldAskSubtasks:Object(_.b)(e),shouldAskLinks:t||s||n,shouldShowReporterWarning:!Object(T.e)(e)}}),(e=>({hideModal:()=>e((()=>({type:"HIDE_CLONE_MODAL"}))())})))((({isOpen:e,hideModal:t,shouldAskChildren:s,shouldAskSubtasks:n,shouldAskLinks:i,shouldShowReporterWarning:r})=>e?a.a.createElement(Ze,{packageName:"issue"},a.a.createElement(lt,{shouldAskChildren:s,shouldAskSubtasks:n,shouldAskLinks:i,
shouldShowReporterWarning:r,onClose:t})):null)),bt=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),ft=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),gt=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),ht=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),yt=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),Ot=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),jt=Object(m.h)({delete:{id:"issue.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"issue.delete-heading",defaultMessage:"Delete {issueKey}?"},deleteWithSubtasksHeading:{id:"issue.delete-with-subtasks-heading",defaultMessage:"Delete {issueKey} and its subtasks?"},deleteWithChildrenHeading:{id:"issue.delete-with-children-heading",
defaultMessage:"Delete {issueKey} and its child issues?"},cancel:{id:"issue.delete.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.delete-warning",defaultMessage:"You're about to permanently delete this issue, its comments and attachments, and all of its data."},deleteWithSubtasksWarning:{id:"issue.delete-with-subtasks-warning",defaultMessage:"You're about to permanently delete this issue and all its subtasks, its comments and attachments, and all of its data. You should move any subtasks you don't want to delete to another parent issue."},deleteWithChildrenWarning:{id:"issue.delete-with-children-warning",defaultMessage:"You're about to permanently delete this issue and all its child issues, its comments and attachments, and all of its data. You should move any child issues you don't want to delete to another parent issue."},deleteRecommendation:{id:"issue.delete-recommendation",defaultMessage:"If you're not sure, you can resolve or close this issue instead."}})
;function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let Et=Object(bt.a)("issueDelete",ft.a.MODAL)((pt=dt=class extends n.Component{constructor(...e){super(...e),this.onConfirmDeleteIssue=(e,t)=>{this.props.deleteConfirmAnalytics(t),this.props.triggerDeleteRequest(this.props.issueKey,t)},this.onCancel=(e,t)=>{this.props.deleteCancelAnalytics(t),this.props.triggerCloseDeleteIssueModal()},this.getChildConditionalDeleteHeading=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?jt.deleteWithChildrenHeading:jt.deleteWithSubtasksHeading:jt.deleteHeading,this.getChildConditionalDeleteWarning=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?jt.deleteWithChildrenWarning:jt.deleteWithSubtasksWarning:jt.deleteWarning}UNSAFE_componentWillReceiveProps(e){
!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}render(){const{issueKey:e,isDeletingIssue:t,intl:{formatMessage:s}}=this.props;return this.props.isDeleteIssueModalOpen&&a.a.createElement(yt.b,{headerMessage:a.a.createElement(m.c,vt({},this.getChildConditionalDeleteHeading(),{values:{issueKey:e}})),appearance:"danger",contentMessage:a.a.createElement("span",null,a.a.createElement("p",null,s(this.getChildConditionalDeleteWarning())),a.a.createElement("p",null,s(jt.deleteRecommendation))),confirmActionText:s(jt.delete),cancelActionText:s(jt.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:t,isConfirmDisabled:t,isCancelDisabled:t
},a.a.createElement(gt.a,null))}},dt.displayName="DeleteIssueView",dt.defaultProps={onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a},ut=pt))||ut;var kt=Object(p.a)([m.i,Object(i.b)((e=>{let t;return t=Object(g.collapsedHierarchies)()?Object(d.u)(e)?Object(h.c)(e)&&nt(e):Object(_.b)(e):Object(d.u)(e)?Object(h.d)(e)&&nt(e):Object(_.b)(e),{issueId:Object(d.l)(e),issueKey:Object(u.y)(e),isDeletingIssue:Object(d.p)(e),isDeleteIssueModalOpen:Object(d.o)(e),didIssueDeleteFail:Object(d.c)(e),isSimplifiedProject:Object(d.u)(e),shouldShowChildSpecificCopy:t}}),(e=>({triggerCloseDeleteIssueModal:()=>{e(Object(Ot.a)())},triggerDeleteRequest:(t,s)=>{e(Object(Ot.c)(t,s))}}))),Object(ht.a)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"})])(Et),wt=s("./src/packages/forge/forge-ui-async/src/ui/issue-action/async.js");const St=Y.default.div(["display:none;"]),Ct=({activeAction:e,extensionData:t,onClose:s,onRendered:i,source:r})=>{const o=Object(n.useMemo)((()=>({
source:r})),[r]);if(!e)return null;return a.a.createElement(Se.a,{attributes:o,shouldFireScreenEvent:!0},a.a.createElement(St,{onKeyDown:e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.nativeEvent.stopImmediatePropagation(),s())}},a.a.createElement(wt.a,{extension:e.action.extension,extensionData:t,analyticsAttributes:o,onClose:s,onInitialRender:i})))};Ct.displayName="ForgeActionRendererView";const It=Object(p.a)([Object(i.b)((e=>({activeAction:Object(f.a)(e),extensionData:Object(f.h)(e),source:Object(u.b)(e)})),{onClose:Ie.b,onRendered:Ie.d})])(Ct);var Tt=s("./src/packages/issue/jira-settings-service/src/main.js"),Pt=s("./src/packages/issue/jira-settings-service/src/constants.js"),_t=Object(m.h)({findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"}});const xt=({isServiceDeskProject:e})=>{const{formatMessage:t}=Object(re.c)(),{createAnalyticsEvent:s}=Object(G.a)(),i=Object(n.useCallback)((()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"})
;Object(q.h)(e,"findOutMore")}),[s]),r=e?"//support.atlassian.com/jira-service-desk-cloud/docs/changes-to-requests-in-the-new-issue-view/":"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view";return a.a.createElement(Ee.a,{onClick:i,href:r,target:"_blank",key:"find-out-more"},t(_t.findOutMore))};xt.displayName="FindOutMore";var Dt=xt,At=Object(i.b)((e=>({isServiceDeskProject:"service_desk"===Object(d.F)(e)})),{})(Dt),Lt=Object(m.h)({newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"}}),Mt=s("./src/packages/common-legacy-do-not-add-anything-new/src/urls/old-issue-view-url.js"),Rt=Object(m.h)({seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"}});const Nt=()=>{const{formatMessage:e}=Object(re.c)(),{createAnalyticsEvent:t}=Object(G.a)(),s=Object(n.useCallback)((()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"oldViewClickthrough")}),[t]);return a.a.createElement(Ee.a,{onClick:s,
href:Object(Mt.a)(),key:"old-view-clickthrough"},e(Rt.seeOldView))};Nt.displayName="OldViewClickthrough";var Ft=Nt,Ut=Object(m.h)({turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"}});const Vt=({baseUrl:e})=>{const{formatMessage:t}=Object(re.c)(),{createAnalyticsEvent:s}=Object(G.a)(),i=Object(n.useCallback)((()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"optOut")}),[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return a.a.createElement(Ee.a,{onClick:i,href:r,target:"_blank",key:"opt-out"},t(Ut.turnOffNewIssueView))};Vt.displayName="OptOut";var Kt=Vt,Wt=Object(i.b)((e=>({baseUrl:Object(u.f)(e)})),{})(Kt),Bt=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js")),Ht=Object(m.h)({startTour:{id:"issue.start-changeboarding-tour",defaultMessage:"Take a tour"}});const $t=()=>{
const{formatMessage:e}=Object(re.c)(),{createAnalyticsEvent:t}=Object(G.a)(),[,{setTourIsActive:s}]=Object(Bt.a)(),i=Object(n.useCallback)((()=>{s();const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"startChangeBoardingTour")}),[t,s]);return a.a.createElement(Ee.a,{onClick:i,key:"start-tour","data-test-id":"issue.views.issue-base.foundation.issue-actions.issue-actions-dropdown-group.start-tour"},e(Ht.startTour))};$t.displayName="StartTour";var Gt=$t,qt=Object(m.h)({turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"}});const zt=({baseUrl:e})=>{const{formatMessage:t}=Object(re.c)(),{createAnalyticsEvent:s}=Object(G.a)(),i=Object(n.useCallback)((()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"turnOffForNow")}),[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return a.a.createElement(Ee.a,{onClick:i,href:r,target:"_blank",key:"turn-off-for-now"},t(qt.turnOffForNow))};zt.displayName="TurnOffForNow"
;var Yt=zt,Qt=Object(i.b)((e=>({baseUrl:Object(u.f)(e)})),{})(Yt);var Jt=(e,t,s,n,i,r)=>{const[o]=Object(Tt.b)(),c=void 0!==o&&o.newIssueViewTransitionLockingStatus===Pt.a;return{name:Object(g.isIssueViewMigrationPostMigrationEnabled)()&&c?"":e(Lt.newIssueView),key:"IssueActionsDropdownGroup",items:(()=>c?[...t?[a.a.createElement(Gt,{key:"startTour"})]:[],...s?[a.a.createElement(At,{key:"findOutMore"})]:[],...!Object(g.isIssueViewMigrationPostMigrationEnabled)()&&r?[a.a.createElement(Ft,{key:"oldViewClickthrough"})]:[]]:[...t?[a.a.createElement(Gt,{key:"startTour"})]:[],...s?[a.a.createElement(At,{key:"findOutMore"})]:[],...!Object(g.isIssueViewMigration1stAprilEnabled)()&&n?[a.a.createElement(Qt,{key:"turnOffForNow"})]:[],...!Object(g.isIssueViewMigration1stAprilEnabled)()&&i?[a.a.createElement(Wt,{key:"optOut"})]:[],...r?[a.a.createElement(Ft,{key:"oldViewClickthrough"})]:[]])()}
},Zt=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-broken-safari.js"),Xt=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),es=s("./src/packages/issue/issue-context-service/src/main.js"),ts=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),ss=s("./src/packages/issue/project-context-service/src/main.js"),ns=s("./src/packages/issue/project-permissions-service/src/main.js"),as=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js"),is=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js");const rs=()=>{const{formatMessage:e}=Object(re.c)(),{createAnalyticsEvent:t}=Object(G.a)(),s=Object(n.useCallback)((()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"configureIssue")}),[t]),i=Object(es.g)(),[r]=Object(ts.b)({issueKey:i,
fieldKey:"com.atlassian.servicedesk:vp-origin"}),o=Object(es.l)(),c=(null!=r||""===r)&&0===o,l=Object(as.a)(e),u=Object(es.i)(),d=Object(ss.j)(u),p=Object(ss.b)(u),m=Object(ns.b)(u);return p&&m&&d?a.a.createElement(Ee.a,{onClick:s,href:l,key:"configure"},e(is.a.configure)):a.a.createElement(Ee.a,{onClick:s,href:l,target:"_blank",isDisabled:c,key:"configure"},e(is.a.configure))};rs.displayName="ConfigureIssueFF";var os=rs,cs=Object(m.h)({switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"}});const ls=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(s,"switchToModal")}),[i,t,e]);return a.a.createElement(Ee.a,{key:"switch-to-modal",onClick:r},s(cs.switchToModal))}
;ls.displayName="SwitchToModal",ls.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var us=ls,ds=Object(m.h)({switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"}});const ps=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(s,"switchToSidebar")}),[i,t,e]);return a.a.createElement(Ee.a,{key:"switch-to-sidebar",onClick:r},s(ds.switchToSidebar))};ps.displayName="SwitchToSidebar",ps.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var ms=ps;const bs=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var fs=(e,t,s,n)=>{
const i=n?n.valueOf():null,r=s&&i===j.a.SOFTWARE_ISSUE||e.viewModeSwitchEnabled,o=!0===r&&Object(Xt.b)(e.viewMode),c=!0===r&&!Object(Xt.b)(e.viewMode),l="ON"===Object(g.isHOT94246ModalViewRedirectEnabled)()&&Object(Zt.a)();return{name:"",key:"issueConfigurationDropdownGroup",items:[...!l&&o?[a.a.createElement(us,{key:"switchToModal",emitEventToLegacyApp:bs,viewModeOptions:e})]:[],...!l&&c?[a.a.createElement(ms,{key:"switchToSidebar",emitEventToLegacyApp:bs,viewModeOptions:e})]:[],...t?[a.a.createElement(os,{key:"configureClassic"})]:[]]}},gs=s("./src/packages/shortcuts-dialog/src/controllers/shortcuts-service/index.js"),hs=Object(m.h)({dotDialog:{id:"issue.dot-dialog",defaultMessage:"Actions Menu"}});const ys=Y.default.code(["background:",";border-radius:3px;padding:2px 4px;"],"#F4F5F7"),Os=()=>{const{formatMessage:e}=Object(re.c)(),{createAnalyticsEvent:t}=Object(G.a)(),[,{setShortcutDialogVisibility:s}]=Object(gs.b)(),i=Object(n.useCallback)((()=>{s(!0);const e=t({action:"clicked",
actionSubject:"dropdownItem"});Object(q.h)(e,"dotDialog")}),[t,s]);return a.a.createElement(Ee.a,{key:"dotDialog",onClick:i,elemAfter:a.a.createElement(ys,null,".")},e(hs.dotDialog))};Os.displayName="DotDialog";var js=Os;var vs=e=>({name:"",key:"IssueDotMenuDropdownGroup",items:[...e?[a.a.createElement(js,{key:"dotDialog"})]:[]]}),Es=Object(m.h)({exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"}});const ks=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"exportDoc")}),[i]),o=`${e}/si/jira.issueviews:issue-word/${t}/${t}.doc`;return a.a.createElement(Ee.a,{key:"ExportDocIssueActionView",onClick:r,href:o,target:"_blank"},s(Es.exportDOC))};ks.displayName="ExportIssueDoc";var ws=ks,Ss=Object(i.b)((e=>({baseUrl:Object(u.f)(e),issueKey:Object(u.y)(e)})),{})(ws),Cs=Object(m.h)({exportXML:{id:"issue.export-xml",
defaultMessage:"Export XML"}});const Is=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"exportXml")}),[i]),o=`${e}/si/jira.issueviews:issue-xml/${t}/${t}.xml`;return a.a.createElement(Ee.a,{key:"ExportXmlIssueActionView",onClick:r,href:o,target:"_blank"},s(Cs.exportXML))};Is.displayName="ExportIssueXML";var Ts=Is,Ps=Object(i.b)((e=>({baseUrl:Object(u.f)(e),issueKey:Object(u.y)(e)})),{})(Ts),_s=Object(m.h)({print:{id:"issue.print",defaultMessage:"Print"}});const xs=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"printIssue")}),[i]),o=`${e}/si/jira.issueviews:issue-html/${t}/${t}.html`;return a.a.createElement(Ee.a,{key:"PrintIssueActionView",onClick:r,href:o,
target:"_blank"},s(_s.print))};xs.displayName="PrintIssue";var Ds=xs,As=Object(i.b)((e=>({baseUrl:Object(u.f)(e),issueKey:Object(u.y)(e)})),{})(Ds);var Ls={name:"",key:"issueExportDropdownGroup",items:[a.a.createElement(As,{key:"printIssue"}),a.a.createElement(Ps,{key:"exportIssueXML"}),a.a.createElement(Ss,{key:"exportIssueDoc"})]},Ms=Object(m.h)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const Rs=({onCloneItemClick:e})=>{const{formatMessage:t}=Object(re.c)(),{createAnalyticsEvent:s}=Object(G.a)(),i=Object(n.useCallback)((()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(t,"cloneIssue")}),[s,e]);return a.a.createElement(Ee.a,{key:"clone",onClick:i},t(Ms.clone))};Rs.displayName="CloneIssue";var Ns=Rs,Fs=Object(i.b)(null,(e=>({onCloneItemClick:()=>{e((()=>({type:"SHOW_CLONE_MODAL"}))())}})))(Ns),Us=Object(m.h)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const Vs=({baseUrl:e,issueId:t})=>{
const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"cloneIssue")}),[i]),o=`${e}/secure/CloneIssueDetails!default.jspa?id=${t||""}`;return a.a.createElement(Ee.a,{key:"clone",href:o,onClick:r},s(Us.clone))};Vs.displayName="CloneIssue";var Ks=Vs,Ws=Object(i.b)((e=>({baseUrl:Object(u.f)(e),issueId:Object(d.l)(e)})),{})(Ks),Bs=Object(m.h)({convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}});const Hs=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"convertToIssue")}),[i]),o=`${e}/secure/ConvertSubTask.jspa?id=${t||""}`;return a.a.createElement(Ee.a,{key:"convert-to-issue",href:o,onClick:r},s(Bs.convertToIssue))};Hs.displayName="ConvertToIssue";var $s=Hs,Gs=Object(i.b)((e=>({
baseUrl:Object(u.f)(e),issueId:Object(d.l)(e)})),{})($s),qs=Object(m.h)({convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"}});const zs=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"convertToSubtask")}),[i]),o=`${e}/secure/ConvertIssue.jspa?id=${t||""}`;return a.a.createElement(Ee.a,{key:"convert-to-subtask",href:o,onClick:r},s(qs.convertToSubtask))};zs.displayName="ConvertToSubtask";var Ys=zs,Qs=Object(i.b)((e=>({baseUrl:Object(u.f)(e),issueId:Object(d.l)(e)})),{})(Ys),Js=Object(m.h)({delete:{id:"issue.delete",defaultMessage:"Delete"}});const Zs=({onDeleteIssueClick:e})=>{const{formatMessage:t}=Object(re.c)(),{createAnalyticsEvent:s}=Object(G.a)(),i=Object(n.useCallback)((()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(t,"deleteIssue")}),[s,e])
;return a.a.createElement(Ee.a,{key:"delete",onClick:i},t(Js.delete))};Zs.displayName="DeleteIssue";var Xs=Zs,en=Object(i.b)(null,(e=>({onDeleteIssueClick:()=>{e(Object(Ot.e)())}})))(Xs),tn=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");const sn=Object(O.createSelector)(d.A,(e=>Boolean(e&&e.id)));var nn=Object(m.h)({addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"}});const an=({onLinkToParentClick:e,hasParent:t})=>{const{formatMessage:s}=Object(re.c)(),{createAnalyticsEvent:i}=Object(G.a)(),r=Object(n.useCallback)((()=>{e();const t=i({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(t,"linkToParent")}),[i,e]);return a.a.createElement(Ee.a,{key:"link-to-parent",onClick:r},s(t?nn.changeParentLevel:nn.addToParentLevel))};an.displayName="LinkToParent";var rn=an,on=Object(i.b)((e=>({hasParent:sn(e)})),(e=>({onLinkToParentClick:()=>{
e(Object(tn.h)())}})))(rn),cn=Object(m.h)({move:{id:"issue.move",defaultMessage:"Move"}});const ln=({isSubtask:e,baseUrl:t,issueId:s})=>{const{formatMessage:i}=Object(re.c)(),{createAnalyticsEvent:r}=Object(G.a)(),o=Object(n.useCallback)((()=>{const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(q.h)(e,"moveIssue")}),[r]),c=e?`${t}/secure/MoveSubTaskChooseOperation!default.jspa?id=${s||""}`:`${t}/secure/MoveIssue!default.jspa?id=${s||""}`;return a.a.createElement(Ee.a,{key:"move",href:c,onClick:o},i(cn.move))};ln.displayName="MoveIssue";var un=ln,dn=Object(i.b)((e=>({baseUrl:Object(u.f)(e),issueId:Object(d.l)(e),isSubtask:Object(_.c)(e)})),{})(un);var pn=(e,t,s,n,i,r)=>({name:"",key:"IssueManipulationDropdownGroup",items:[...e?[a.a.createElement(on,{key:"linkToParent"})]:[],...t?[a.a.createElement(Qs,{key:"convertToSubtask"})]:[],...s?[a.a.createElement(Gs,{key:"convertToIssue"})]:[],...n?[a.a.createElement(dn,{key:"moveIssue"
})]:[],...i?Object(g.isInlineCloneEnabled)()?[a.a.createElement(Fs,{key:"cloneIssue"})]:[a.a.createElement(Ws,{key:"cloneIssue"})]:[],...r?[a.a.createElement(en,{key:"deleteIssue"})]:[]]});const mn=({isLoading:e,isForgeLoading:t,shouldShowPulse:s,canLogTime:n,shouldShowFlagAction:i,canLinkToParent:r,shouldShowConvertToSubtask:o,shouldShowConvertToIssue:l,canMoveIssue:u,canCloneIssue:d,canDeleteIssue:p,issueDeleteCallbacks:m,onClose:b,shouldShowActions:f,shouldShowConfiguration:h,isSoftwareProjectType:y,viewModeOptions:O,analyticsSource:j,intl:v,shouldShowStartTour:E,shouldShowFindOutMore:k,shouldShowTurnOffForNow:w,shouldShowOptOut:S,shouldShowOldViewClickthrough:C})=>{if(!f)return null;if(e)return a.a.createElement(ye,{isDisabled:!0,meatballMenuData:[]});const{jql:I,filter:T}=K.a.parse(window.location.search),P=null!=I||null!=T,_=[...Object(g.isShortcutMenuEnabled)()?[vs(!P)]:[],ze(i,n),pn(r,o,l,u,d,p),Ls,Jt(v.formatMessage,E,k,w,S,C),fs(O||{viewModeSwitchEnabled:!1},h,y,j)]
;return a.a.createElement(B.b,null,a.a.createElement(W.a,null,a.a.createElement(c.a,{name:"BOARD_SIDEBAR"},a.a.createElement(ye,{hasPulse:s,isLoading:t,meatballMenuData:_}),a.a.createElement(kt,{onIssueDeleteSuccess:m.onIssueDeleteSuccess,onIssueDeleteFailure:m.onIssueDeleteFailure,onClose:b}),a.a.createElement(It,null),Object(g.isInlineCloneEnabled)()&&a.a.createElement(mt,null))))};mn.displayName="IssueActionsMeatballMenu";var bn=mn;const fn=Object(m.i)(Object(i.b)((e=>{var t;return{isLoading:!Object(d.n)(e),isForgeLoading:!(null===(t=Object(f.a)(e))||void 0===t||!t.isLoading),shouldShowPulse:Object(y.b)(e),canLogTime:Object(b.b)(e),shouldShowFlagAction:I(e),shouldShowConvertToSubtask:M(e),shouldShowConvertToIssue:R(e),canLinkToParent:Object(h.a)(e),canCloneIssue:Object(S.a)(e),canDeleteIssue:Object(S.b)(e),canMoveIssue:Object(S.e)(e),shouldShowActions:L(e),shouldShowStartTour:Object(y.d)(e),shouldShowFindOutMore:N(e),
shouldShowTurnOffForNow:!Object(g.isIssueViewMigration1stAprilEnabled)()&&U(e),shouldShowOptOut:!Object(g.isIssueViewMigration1stAprilEnabled)()&&(e=>(Object(d.t)(e)||!Object(y.c)(e))&&x(e))(e),shouldShowOldViewClickthrough:w(e),shouldShowConfiguration:!!A(e)&&!!Object(d.F)(e),isSoftwareProjectType:"software"===Object(d.F)(e),analyticsSource:Object(u.b)(e)}}),{})(bn)),gn=e=>a.a.createElement(fn,{viewModeOptions:e.viewModeOptions,issueDeleteCallbacks:e.issueDeleteCallbacks,onClose:e.onClose});gn.displayName="IssueActionsMenu";var hn=gn,yn=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js"),On=s("./src/packages/platform/utils/types/src/general.js"),jn=s("./src/packages/project-settings/issue-restrictions/async.js"),vn=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js")
;const En=Object(tt.q)("issuerestriction"),kn=Object(O.createSelector)(En,(e=>e&&e.value&&e.value.issuerestrictions&&e.value.issuerestrictions.projectrole||[])),wn=Object(O.createSelector)(En,(e=>e&&e.value&&e.value.shouldDisplay||!1));const Sn=s("./src/packages/project-settings/issue-restrictions/src/common/types.js").a,Cn=Object(p.a)([Object(i.b)((e=>({currentIssueRestriction:kn(e),isIssueRestrictionDisplayForIssue:wn(e),hasError:!!Object(d.i)(e),projectKey:Object(d.D)(e),issueKey:Object(u.y)(e),edition:Object(vn.a)(e),isSubtask:Object(_.c)(e)})),{})])((({currentIssueRestriction:e,isIssueRestrictionDisplayForIssue:t,hasError:s,issueKey:n,projectKey:i,edition:r,isSubtask:o})=>!s&&t&&(!o||e.length>0)?a.a.createElement(jn.a,{entityKey:Object(On.l)(n),currentRestrictions:e,restrictionType:Sn,projectKeyOrId:Object(On.q)(i),edition:r,isSubtask:o}):null))
;var In=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),Tn=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),Pn=s.n(Tn),_n=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),xn=s.n(_n),Dn=s("./src/packages/issue/fields/security-level/src/common/ui/styled.js");const An=Object(Y.default)(Dn.a)(["color:",";"],J.a.N30),Ln=e=>{const{initialValue:t}=e,s=t?Pn.a:xn.a;return a.a.createElement(In.a,{appearance:"subtle",spacing:"default",isDisabled:!0,iconBefore:a.a.createElement(An,null,a.a.createElement(s,{label:""}))})};Ln.displayName="Loading";var Mn=s("./src/packages/platform/ui/error-boundary/src/main.js");const Rn=({children:e,fallback:t,packageName:s})=>a.a.createElement(Mn.a,{id:"issue-security-level-field",packageName:s,render:()=>t},a.a.createElement(Ye.a,{fallback:t},e));Rn.displayName="IssueSecurityLevelFieldBoundary"
;var Nn=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),Fn=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js");const Un=Object(Ye.f)((()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-field-security-level")]).then(s.bind(null,"./src/packages/issue/fields/security-level/src/index.js"))),{moduleId:"./src/packages/issue/fields/security-level/src/index.js"}),Vn=Object(p.a)([Object(i.b)((e=>({securityLevelItems:Object(Fn.a)(e),isSecurityLevelEnabledForIssue:Object(Fn.d)(e),isSecurityLevelEditable:Object(Fn.c)(e),error:Object(d.i)(e),issueKey:Object(u.y)(e)})),(e=>({onSuccess:t=>e(Object(Nn.e)("security",t))})))])((({securityLevelItems:e,isSecurityLevelEnabledForIssue:t,isSecurityLevelEditable:s,error:n,issueKey:i,onSuccess:r})=>{const[o]=Object(ts.b)({issueKey:i,fieldKey:"security"});if(!n&&t){const t=a.a.createElement(Ln,{initialValue:o});return a.a.createElement(Rn,{
packageName:"issue",fallback:t},a.a.createElement(Un,{issueKey:i,initialValue:o||null,allowedValues:e,isEditable:s,onSuccess:r}))}return null}));var Kn=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),Wn=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),Bn=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-mobile-user-agent.js"),Hn=s("./src/packages/platform/ui/flags/src/services/index.js"),$n=s("./src/packages/platform/observability/product-analytics-web-client/src/main.js"),Gn=s("./src/packages/growth/share-button/src/index.js"),qn=s("./src/packages/growth/share-button/src/constants.js"),zn=s("./src/packages/growth/share-button/src/feature-flags.js"),Yn=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const Qn=()=>a.a.createElement("svg",{width:"16",height:"16",viewBox:"4 4 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{
d:"M7.49805 14.0488C7.49805 14.9467 6.76457 15.6802 5.8667 15.6802C4.96883 15.6802 4.23535 14.9467 4.23535 14.0488C4.23535 13.151 4.96883 12.4175 5.8667 12.4175H7.49805V14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M8.32031 14.0488C8.32031 13.151 9.05379 12.4175 9.95166 12.4175C10.8495 12.4175 11.583 13.151 11.583 14.0488V18.1335C11.583 19.0314 10.8495 19.7649 9.95166 19.7649C9.05379 19.7649 8.32031 19.0314 8.32031 18.1335V14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M9.95166 7.49805C9.05379 7.49805 8.32031 6.76457 8.32031 5.8667C8.32031 4.96883 9.05379 4.23535 9.95166 4.23535C10.8495 4.23535 11.583 4.96883 11.583 5.8667V7.49805H9.95166Z",fill:"#253858"}),a.a.createElement("path",{d:"M9.95139 8.31982C10.8493 8.31982 11.5827 9.0533 11.5827 9.95117C11.5827 10.849 10.8493 11.5825 9.95139 11.5825H5.8667C4.96883 11.5825 4.23535 10.849 4.23535 9.95117C4.23535 9.0533 4.96883 8.31982 5.8667 8.31982H9.95139Z",fill:"#253858"}),a.a.createElement("path",{
d:"M16.5024 9.95117C16.5024 9.0533 17.2359 8.31982 18.1338 8.31982C19.0317 8.31982 19.7651 9.0533 19.7651 9.95117C19.7651 10.849 19.0317 11.5825 18.1338 11.5825H16.5024V9.95117Z",fill:"#253858"}),a.a.createElement("path",{d:"M15.6802 9.95139C15.6802 10.8493 14.9467 11.5827 14.0488 11.5827C13.151 11.5827 12.4175 10.8493 12.4175 9.95139V5.8667C12.4175 4.96883 13.151 4.23535 14.0488 4.23535C14.9467 4.23535 15.6802 4.96883 15.6802 5.8667V9.95139Z",fill:"#253858"}),a.a.createElement("path",{d:"M14.0488 16.502C14.9467 16.502 15.6802 17.2354 15.6802 18.1333C15.6802 19.0312 14.9467 19.7646 14.0488 19.7646C13.151 19.7646 12.4175 19.0312 12.4175 18.1333V16.502H14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M14.0488 15.6802C13.151 15.6802 12.4175 14.9467 12.4175 14.0488C12.4175 13.151 13.151 12.4175 14.0488 12.4175H18.1335C19.0314 12.4175 19.7649 13.151 19.7649 14.0488C19.7649 14.9467 19.0314 15.6802 18.1335 15.6802H14.0488Z",fill:"#253858"}));Qn.displayName="SlackIcon";var Jn=Qn
;const Zn=Object(Ye.e)((()=>s.e("async-share-to-slack").then(s.bind(null,"./node_modules/@atlassian/share-to-slack/dist/es2019/index.js"))),{ssr:!1,moduleId:"./node_modules/@atlassian/share-to-slack/dist/cjs/index.js"}),Xn=Object(Y.default)(Zn)(["margin:-16px -24px;"]),ea=Object(Y.default)(Wn.a)(["width:100%;margin:0 auto;"]),ta=e=>a.a.createElement(Mn.a,{id:"async-share-to-slack",packageName:"share-to-slack"},a.a.createElement(Ye.a,{fallback:a.a.createElement(ea,null)},a.a.createElement(Xn,e)));ta.displayName="ShareToSlack";const sa=e=>{var t;const{summary:s,issueAri:i,issueUrl:r,resourceOwner:o,subProductId:c}=e,{showFlag:l}=Object(Hn.f)(),u=null===(t=Object($n.a)())||void 0===t?void 0:t.analyticsClient,{locale:d}=Object(ve.f)(),p=Object(zn.f)(),m=[];if(d.toLowerCase().startsWith("en")||m.push("notEnglish"),Object(Bn.a)()&&m.push("notDesktop"),u){const e=Object(zn.a)();let t=(null==e?void 0:e.value)||"not-enrolled";m.length&&(t="not-enrolled"),u.sendOperationalEvent({
action:"exposed",actionSubject:"feature",attributes:{flagKey:(null==e?void 0:e.flagKey)||"",value:(null==e?void 0:e.value)||"not-enrolled",cohort:t,ineligibilityReasons:m},source:qn.a.BENTO_ISSUE})}const b=Object(n.useMemo)((()=>p&&0===m.length?[{type:"Slack",Icon:Jn,Content:({onClose:e})=>a.a.createElement(ta,{showFlag:l,product:"jira",channel:"growth",onClose:e})}]:[]),[m.length,p,l]);return a.a.createElement(Gn.b,{integrationType:qn.a.BENTO_ISSUE,triggerButtonStyle:"icon-only",productId:o,subProductId:c,shareLink:r,shareTitle:s,shareContentType:"issue",objectAri:i,shareIntegrations:b,shouldAutoDismissFlag:!1})};sa.displayName="ShareView";var na=Object(p.a)([Object(i.b)((e=>({issueAri:Object(d.v)(e),resourceOwner:Object(d.G)(),summary:Object(tt.o)("summary")(e)||"",subProductId:Object(d.b)(e),issueUrl:Object(Yn.b)(e)})),{})])(sa);const aa=Gn.a,ia=Y.default.div(["flex-shrink:0;"]),ra=Object(p.a)([Object(i.b)((e=>({isLoading:Object(d.r)(e),error:Object(d.i)(e)
})),{})])((({error:e=null,isLoading:t})=>{const s=Object(Kn.a)();return!e&&s?a.a.createElement(ia,null,t?a.a.createElement(aa,{triggerButtonStyle:"icon-only"}):a.a.createElement(na,null)):null}));var oa=s("./node_modules/@atlaskit/icon/glyph/like.js"),ca=s.n(oa);var la=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js"),ua=s("./src/packages/platform/utils/constants/src/status-categories.js"),da=Object(m.h)({addVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.add-vote-disabled-tooltip",defaultMessage:"You can't vote on resolved issues"},removeVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.remove-vote-disabled-tooltip",defaultMessage:"You can't change your vote on resolved issues"}});const pa=()=>{const{formatMessage:e}=Object(re.c)(),t=Object(es.g)(),[s]=Object(ts.b)({issueKey:t,fieldKey:"status"
}),a=Object(n.useMemo)((()=>"DONE"===Object(ua.statusCategoryForId)(null==s?void 0:s.statusCategory.id)),[s]),i=Object(n.useMemo)((()=>a?{addVote:e(da.addVoteDisabledTooltip),removeVote:e(da.removeVoteDisabledTooltip)}:void 0),[e,a]);return{isDisabled:a,tooltips:i}};var ma=s("./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js"),ba=s("./src/packages/issue/fields/voters/src/messages.js"),fa=s("./src/packages/issue/fields/voters/src/ui/button/index.js");const ga=Y.default.div(["[data-role='droplistContent']{overflow:visible;}"]),ha=Y.default.div(["width:240px;min-height:121px;padding:4px 0 0;"]),ya=Y.default.div(["height:121px;display:flex;justify-content:center;align-items:center;"]),Oa=Object(Ye.f)((()=>s.e("async-voters-dropdown").then(s.bind(null,"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"))),{moduleId:"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"}),ja=a.a.createElement(ya,null,a.a.createElement(Wn.a,{size:"medium"
})),va=({setCloseDropdown:e,disableVotingProps:t})=>a.a.createElement(Mn.a,{id:"issue-voters-list",packageName:"issue",render:()=>ja},a.a.createElement(Ye.a,{fallback:ja},a.a.createElement(Oa,{setCloseDropdown:e,disableVotingProps:t})));va.displayName="LazyDropdownContent";const Ea=({disableVotingProps:e})=>{const{formatMessage:t}=Object(re.c)(),s=t(ba.a.voteOptionsTooltip),[i,r]=Object(n.useState)(!1),o=Object(n.useCallback)((()=>{r((e=>!e))}),[]),c=Object(n.useCallback)((()=>{r(!1)}),[]);return a.a.createElement(ga,null,a.a.createElement(H.a,{boundary:"clippingParents",isOpen:i,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(fa.a,{onClick:o,tooltip:s,isSelected:i})),onClose:c,content:()=>a.a.createElement(ha,null,i&&a.a.createElement(va,{setCloseDropdown:c,disableVotingProps:e})),zIndex:$.f.modal}))};Ea.displayName="VoterDropdown";var ka=Ea;const wa=({disableVotingProps:e})=>{const t=Object(es.i)(),[s]=Object(ns.d)(t)
;return s.canViewVoters?a.a.createElement(ka,{disableVotingProps:e}):a.a.createElement(ma.a,{disableVotingProps:e})};wa.displayName="Voters";var Sa=wa;const Ca=()=>{const e=pa();return a.a.createElement(Sa,{disableVotingProps:e})};Ca.displayName="IssueVoters";var Ia=s("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");const Ta=Y.default.div(["display:flex;padding:4px 8px;"]),Pa=()=>Object(Ia.a)(a.a.createElement(Ta,null,a.a.createElement(ca.a,{size:"medium",primaryColor:J.a.N30,label:""}))),_a=({hasError:e,isIssueLoading:t})=>{const s=Object(es.g)(),n=Object(Kn.a)(),[i]=Object(ts.b)({issueKey:s,fieldKey:"votes"});return e||!n?null:t||!i?a.a.createElement(Pa,null):a.a.createElement(Mn.a,{id:"issue.details.vote-action"},a.a.createElement(la.a,{scope:s},a.a.createElement(Ca,null)))};_a.displayName="VotersItem";const xa=Object(i.b)((e=>({hasError:!!Object(d.i)(e),isIssueLoading:Object(d.r)(e)
})),{})(_a),Da=Object(tt.q)("watches"),Aa=Object(O.createSelector)(Da,(e=>!!e));var La=s("./node_modules/@atlaskit/icon/glyph/watch.js"),Ma=s.n(La);const Ra=Y.default.div(["display:flex;margin:4px 25px 4px 8px;"]),Na=()=>Object(Ia.a)(a.a.createElement("div",null,a.a.createElement(Ra,null,a.a.createElement(Ma.a,{label:"",size:"medium",primaryColor:J.a.N30})))),Fa=({children:e,fallback:t,packageName:s})=>a.a.createElement(Mn.a,{id:"issue-watchers",packageName:s,render:()=>t},a.a.createElement(Ye.a,{fallback:t},e));Fa.displayName="IssueWatchersBoundary";const Ua=Object(Ye.f)((()=>s.e("async-issue-watchers").then(s.bind(null,"./src/packages/issue/issue-view/src/views/watchers/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/watchers/index.js"}),Va=({isWatchesPresent:e,isLoading:t,error:s})=>{const n=Object(Kn.a)();return!s&&!!n?!e||t?a.a.createElement(Na,null):a.a.createElement(Fa,{packageName:"issue",fallback:a.a.createElement(Na,null)},a.a.createElement(Ua,null)):null}
;Va.displayName="WatchersItem";const Ka=Object(i.b)((e=>({isWatchesPresent:Aa(e),isLoading:Object(d.r)(e),error:Object(d.i)(e)})),{})(Va);var Wa=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const Ba=({error:e=null,onClose:t=o.a,renderFeedback:s=(()=>null),shouldShowCloseButton:n=!1,issueDeleteCallbacks:i={},viewModeOptions:r={viewModeSwitchEnabled:!1},applicationKey:u})=>{const d=r&&r.viewMode===l.b&&!e;let p;if(s){const e=s(u,!0);null!=e&&(p=a.a.createElement(c.a,{name:"GIVE_FEEDBACK"},a.a.createElement(Wa.a,null,e)))}return a.a.createElement(Wa.b,null,a.a.createElement(Wa.c,{maxResponsiveWidth:d?258:0},n?a.a.createElement(yn.a,{onClose:t}):null,a.a.createElement(hn,{externalId:"issue.opsbar",issueDeleteCallbacks:i,viewModeOptions:r,onClose:t}),a.a.createElement(ra,null),a.a.createElement(xa,null),a.a.createElement(Ka,null),a.a.createElement(Cn,null),a.a.createElement(Vn,null),p))};Ba.displayName="HeaderActionsView",
Ba.displayName="HeaderActionsView";const Ha=Object(p.a)([Object(i.b)((e=>({error:Object(d.i)(e),applicationKey:Object(u.e)(e)})),{})])(Ba)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const i=2.5*a.e,r=n.default.div(["min-height:","px;margin-right:0;margin-left:auto;margin-bottom:","px;height:100%;align-items:center;max-width:100%;display:flex;justify-content:flex-end;padding-right:1px;"],4*a.e,a.e/4),o=n.default.div(["display:flex;flex-flow:row-reverse;"," [dir='rtl'] &{padding-right:","px;padding-left:","px;}"],(e=>e.maxResponsiveWidth?`flex: 1 0 auto; justify-content: space-between; max-width: ${e.maxResponsiveWidth}px;`:`flex-shrink: 0; > * { margin-left: ${a.e}px; &:last-child { margin-left: 0; } }`),2*a.e,i),c=Object(n.default)(o)(["user-select:none;"]),l=n.default.div(["flex-shrink:0;"])},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return yt}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),u=s("./node_modules/react-resource-router/build/esm/index.js"),d=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),p=s("./node_modules/@atlaskit/icon/glyph/arrow-left-circle.js"),m=s.n(p),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),f=s("./src/packages/platform/controllers/intl/src/index.js"),g=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),h=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),y=s("./node_modules/react-intl/lib/index.es.js"),O=Object(y.h)({back:{
id:"issue.views.issue-base.foundation.back-button.back",defaultMessage:"Back"}}),j=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const E=j.default.div(["margin-right:","px;margin-left:-","px;"],1.5*v.e,1.5*v.e);var k=Object(n.memo)((({url:e})=>{const{formatMessage:t}=Object(f.c)(),{createAnalyticsEvent:s}=Object(g.a)(),i=Object(n.useCallback)((()=>{Object(h.h)(s({}),"button clicked","backFromIssueViewButton")}),[s]);return a.a.createElement(E,null,a.a.createElement(d.a,{href:e,appearance:"subtle",onClick:i,component:__SPA__?u.a:void 0,iconBefore:a.a.createElement(m.a,{label:"",size:"small",primaryColor:b.a.N300})},t(O.back)))
})),w=s("./node_modules/lodash/flow.js"),S=s.n(w),C=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),I=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),T=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),P=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),_=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),x=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),D=s("./src/packages/platform/ui/error-boundary/src/main.js"),A=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),L=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js"),M=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),R=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),N=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),F=s("./src/packages/issue/issue-view/src/feature-flags.js"),U=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),V=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),K=s("./src/packages/issue/issue-view/src/selectors/project-selector.js"),W=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),B=s("./node_modules/lodash/isEqual.js"),H=s.n(B),$=s("./node_modules/lodash/noop.js"),G=s.n($),q=s("./node_modules/@atlaskit/breadcrumbs--next/dist/es2019/components/Breadcrumbs.js"),z=s("./node_modules/@atlaskit/breadcrumbs--next/dist/es2019/components/BreadcrumbsItem.js"),Y=s("./src/packages/platform/utils/types/src/general.js"),Q=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),J=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),Z=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),X=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),ee=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),te=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),se=s("./node_modules/@atlaskit/icon/glyph/edit-filled.js"),ne=s.n(se),ae=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),ie=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),re=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),oe=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),ce=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),le=Object(y.h)({
triggerTooltipAddEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-epic",defaultMessage:"{issueTypeName} - Add {target}"},triggerTooltipChangeEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-epic",defaultMessage:"{issueTypeName} - Change {target}"},triggerTooltipAddParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-parent",defaultMessage:"{issueTypeName}Add parent"},triggerTooltipChangeParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-parent",defaultMessage:"{issueTypeName}Change parent"},dropdownEmpty:{id:"issue.details.issue-parent-switcher-dropdown-empty",defaultMessage:"No {target} has been created in this project. Create your first "},dropdownTitleEpic:{id:"issue.details.issue-parent-switcher-dropdown-title-epic",defaultMessage:"Recent {target}"},removeEpic:{id:"issue.details.issue-parent-switcher-remove-epic",defaultMessage:"Remove {target}"},viewEpics:{id:"issue.details.issue-parent-switcher-view-epics",
defaultMessage:"View all {target}"},dropdownTitle:{id:"issue.details.issue-parent-switcher-dropdown-title",defaultMessage:"Recent parents"},removeParent:{id:"issue.details.issue-parent-switcher-remove-parent",defaultMessage:"Remove parent"},viewParents:{id:"issue.details.issue-parent-switcher-view-parents",defaultMessage:"View all parents"}});const ue=j.default.div(["border-bottom:1px solid ",";"],b.a.N30),de=j.default.div(["display:flex;justify-content:center;align-items:center;min-width:","px;min-height:","px;overflow:hidden;"],21*v.e,23.375*v.e),pe=j.default.div(["width:","px;padding:","px;& button,& span{padding:0;margin:0;vertical-align:initial;}"],25*v.e,1.5*v.e);function me(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function be(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const fe=Object(ce.a)("dropdownItem",{onClick:"clicked"})(X.a);class ge extends n.Component{constructor(...e){super(...e),this.state={isOpen:Boolean(this.props.isOpen),isLoading:!this.props.issueParents.length},this.addEpicButtonRef=Object(n.createRef)(),this.focusTimeoutId=null,this.setFocusToAddEpicButtonOnModalClose=()=>{const e=this.addEpicButtonRef.current;e&&(this.focusTimeoutId=setTimeout((()=>e.focus())))},this.onOpenChange=({isOpen:e,event:t},s)=>{const{clickRef:n,onOpenChange:a,onToggle:i}=this.props,r=n&&n.current&&t&&n.current.button.contains(t.target);i(s),this.toggleMenu(e),a&&!r&&a(e)},this.onItemClick=(e,t={})=>(s,n)=>{const{projectId:a,issueTypes:i,issues:r,issueTypeName:o,onSelect:c,setIssueParent:l,onViewAllParentsClick:u,onClick:d}=this.props;switch(e){case"add parent":case"change parent":l(r,t.parentId);break;case"remove parent":l(r);break;case"open modal":u();break;case"create parent":{const e=String((i.find((({name:e})=>e===o))||{}).id)
;a&&e||oe.a.safeErrorWithoutCustomerData("issue-parent-switcher.create.issue.failure","Failed to create the first epic via global issue create",{projectId:a,issueTypeId:e}),((e,t)=>{window.WRM&&window.WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],(()=>{window.JIRA.Forms.createCreateIssueForm({pid:e,issueType:t}).asDialog({id:"software-create-issue-dialog"}).show()}))})(a,e);break}}d(n.update({userAction:e})),c&&c(),!t.keepMenuOpen&&this.toggleMenu(!1)}}componentDidUpdate(e){const{issueParents:t,isOpen:s,isAssignIssueParentModalOpen:n}=this.props;s!==e.isOpen&&s!==this.state.isOpen&&this.toggleMenu(s),t!==e.issueParents&&this.state.isLoading&&this.setState({isLoading:!1}),e.isAssignIssueParentModalOpen&&!n&&this.setFocusToAddEpicButtonOnModalClose()}componentWillUnmount(){clearTimeout(this.focusTimeoutId)}getMessageContent(e,t,s=!0){
const{issueTypeName:n,issueHierarchyLevel:a,intl:{formatMessage:i}}=this.props,r="Epic"!==n?"":`${"Epic".toLowerCase()}${s?"s":""}`;return n&&0===a?i(e,{target:r}):i(t)}getTooltipContent(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,intl:{formatMessage:n}}=this.props;if(t&&0===s){const s="Epic"!==t?t:"Epic".toLowerCase();return n(e?le.triggerTooltipAddEpic:le.triggerTooltipChangeEpic,{issueTypeName:t,target:s})}return n(e?le.triggerTooltipAddParent:le.triggerTooltipChangeParent,{issueTypeName:t?`${t} - `:""})}toggleMenu(e){const{issueParents:t,fetchIssueParents:s}=this.props;this.setState(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?me(Object(s),!0).forEach((function(t){be(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):me(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({isOpen:e},e&&!t.length?{isLoading:!0
}:{}),(()=>{e&&!t.length&&s()}))}renderTriggerButton(){const{isDisabled:e,isOpen:t,isOrphan:s,issueTypeName:n,issueTypeIconUrl:i,text:r}=this.props,o=this.getTooltipContent(),c=a.a.createElement(d.a,{ref:this.addEpicButtonRef,"aria-label":o,"aria-expanded":t,isDisabled:e,spacing:"compact",appearance:"subtle",iconBefore:!s&&i?a.a.createElement(re.a,{alt:n||"",url:i}):a.a.createElement(ne.a,{size:"small",label:""})},r);return s?c:a.a.createElement(ie.a,{position:"top",content:o,delay:0},c)}renderIssueParentItem(e){const{id:t,key:s,summary:n,issueType:{name:i,iconUrl:r}}=e,o=a.a.createElement(re.a,{alt:i||"",url:r});return a.a.createElement(fe,{key:s,elemBefore:o,onClick:this.onItemClick((this.props.isOrphan?"add":"change")+" parent",{parentId:t})},s," ",n)}renderDropdownItemGroup(e){return this.state.isLoading?a.a.createElement(de,null,a.a.createElement(ae.a,{size:"large"})):a.a.createElement(ee.a,{title:this.getMessageContent(le.dropdownTitleEpic,le.dropdownTitle)
},e.map((e=>this.renderIssueParentItem(e))))}renderDropdownMenu(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,issueParents:n,issueKey:i,intl:{formatMessage:r}}=this.props,o=t&&"Epic"!==t?t:"Epic".toLowerCase(),c=(n||[]).filter((e=>e.key!==i)).slice(0,5);return 0!==s||this.state.isLoading||n.length?a.a.createElement(a.a.Fragment,null,(this.state.isLoading||c.length>0)&&a.a.createElement(ue,null,this.renderDropdownItemGroup(c)),a.a.createElement(ee.a,null,!e&&0===s&&a.a.createElement(fe,{onClick:this.onItemClick("remove parent")},this.getMessageContent(le.removeEpic,le.removeParent,!1)),a.a.createElement(fe,{onClick:this.onItemClick("open modal")},this.getMessageContent(le.viewEpics,le.viewParents)))):a.a.createElement(pe,null,r(le.dropdownEmpty,{target:o}),a.a.createElement(d.a,{appearance:"link",spacing:"compact",onClick:this.onItemClick("create parent",{keepMenuOpen:!0})},o),".")}render(){return a.a.createElement(te.a,{isOpen:this.state.isOpen,
trigger:this.renderTriggerButton(),onOpenChange:this.onOpenChange},this.renderDropdownMenu())}}ge.displayName="IssueParentSwitcher",ge.displayName="IssueParentSwitcher",ge.defaultProps={isDisabled:!1,isOrphan:!1,issueTypes:[],issues:[],issueParents:[],isOpen:!1,issueKey:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,clickRef:null,projectId:null,fetchIssueParents:G.a,setIssueParent:G.a,text:"",onOpenChange:G.a,onSelect:G.a,onViewAllParentsClick:G.a};var he=Object(y.i)(ge),ye=Object(c.a)([Object(_.a)({onToggle:"toggled",onClick:"clicked"}),Object(i.b)((e=>({projectId:Object(o.C)(e),issueTypes:Object(Z.d)(e),issues:Object(J.a)(e),issueParents:Object(o.B)(e),isAssignIssueParentModalOpen:Object(J.b)(e)})),(e=>({fetchIssueParents:()=>{e(Object(Q.b)())},setIssueParent:(t,s)=>{e(s?Object(Q.f)(t,s):Object(Q.i)(t))},onViewAllParentsClick:()=>{e(Object(Q.h)())}})))])(he);const Oe=e=>null===e?"":e.length>20?`${e.slice(0,20)}...`:e;var je=Object(y.h)({addParent:{
id:"issue.details.add-parent",defaultMessage:"Add {target}"},copy:{id:"issue.details.copy-to-clipboard",defaultMessage:"Copy link to issue"},rootProjectsLink:{id:"issue.details.root-projects-link",defaultMessage:"Projects"}}),ve=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const Ee=Object(ve.a)("div",{target:"e18k4ulk0"})({name:"sgt9w1",styles:"display:flex;flex-grow:0;overflow:visible;"}),ke=Object(ve.a)("span",{target:"e18k4ulk1"})("padding-right:",v.e,"px;display:flex;"),we=Object(ve.a)("span",{target:"e18k4ulk2"})("border-radius:",v.a,"px;overflow:hidden;"),Se=Object(ve.a)(d.a,{target:"e18k4ulk3"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",Ee,":hover &{opacity:1;transform:translate(0,0);}&:focus{opacity:1;transform:translate(0,0);}"),Ce=Object(ve.a)("div",{target:"e18k4ulk4"
})("display:flex;margin-left:-",v.e/2,"px;",(e=>(e=>!0===e?"\n    & > div:last-child {\n        max-width: 200px;\n    }":"")(e.shouldTruncate))),Ie=Object(ve.a)("div",{target:"e18k4ulk5"})({name:"1id8hns",styles:"max-width:300px;"}),Te=Object(ve.a)("div",{target:"e18k4ulk6"})("color:",b.a.N100,";flex-shrink:0;padding:0 ",v.e,"px;text-align:center;width:",v.e,"px;"),Pe=Ee,_e=ke,xe=we,De=Se,Ae=Ce,Le=Ie,Me=Te;class Re extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.breadcrumbsItemRef=Object(n.createRef)(),this.onOpenChange=e=>{e!==this.state.isOpen&&this.setState({isOpen:e})},this.onClick=e=>{e.preventDefault(),this.setState((e=>({isOpen:!e.isOpen})))}}render(){const{issueTypeName:e,intl:{formatMessage:t}}=this.props,s=e&&"Epic"!==e?e:"Epic".toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-add-parent"},a.a.createElement(ye,{clickRef:this.breadcrumbsItemRef,
isOpen:this.state.isOpen,isOrphan:!0,issueTypeName:e,onOpenChange:this.onOpenChange,text:Oe(t(je.addParent,{target:s}))}),e?a.a.createElement(Me,null,"/"):null))}}Re.displayName="BreadcrumbAddParent",Re.defaultProps={issueTypeName:"Epic"};var Ne=Object(y.i)(Re),Fe=s("./node_modules/@atlaskit/icon/glyph/copy.js"),Ue=s.n(Fe),Ve=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/view.js"),Ke=s("./src/packages/issue/fields/summary/src/services/index.js"),We=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),Be=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),He=s("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js"),$e=s("./node_modules/reselect/lib/index.js");const Ge=Object($e.createSelector)(o.E,U.i,((e,t)=>{const s=e&&e.issueTypes||[];return t.length?s.filter((e=>t.includes(e.id))):s
})),qe=Object($e.createSelector)(o.H,(e=>!(!e.issueType||!e.issueType.shouldShowIssueTypeList)));var ze=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),Ye=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Qe=Object(y.h)({changeType:{id:"issue.details.change-issue-type",defaultMessage:"{issueType} - Change issue type"},changeTypeGroupName:{id:"issue.details.change-issue-type-groupname",defaultMessage:"Change Issue Type"}});const Je=({issueType:e,icon:t,onClick:s})=>{const{formatMessage:n}=Object(f.c)();return a.a.createElement(ie.a,{position:"top",content:n(Qe.changeType,{issueType:e}),delay:0},a.a.createElement(d.a,{"aria-label":n(Qe.changeType,{issueType:e}),spacing:"compact",appearance:"subtle",onClick:s,iconBefore:t}))};Je.displayName="TriggerButton";var Ze=Je;const Xe=({isOpen:e,icon:t,issueTypes:s,issueId:i,showIssueTypeList:o,loadIssueTypes:c,changeIssueType:l})=>{
const{formatMessage:u}=Object(f.c)(),{createAnalyticsEvent:d}=Object(g.a)(),p=Object(r.g)(),[m]=Object(Ye.b)({issueKey:p,fieldKey:"issuetype"}),b=Object(r.i)(),y=Object(n.useCallback)((e=>{null!==i&&(l(p,i,m,e,d({})),o(!1))}),[l,d,m,i,p,o]),O=Object(n.useCallback)((({isOpen:e})=>{o(e)}),[o]),j=Object(n.useCallback)(((t,s)=>{b&&(e||Object(h.h)(s.update({name:"changeIssueTypeDropdown"}),"button clicked","changeIssueTypeDropdownButton"),o(!e))}),[e,b,o]),v=Object(n.useMemo)((()=>{if(s&&0!==s.length){const e=s.filter((e=>e.id!==m.id)).filter((e=>((e,t)=>!e.subtask||t.subtask)(m,e))).map((e=>a.a.createElement(X.a,{key:e.id,elemBefore:a.a.createElement(re.a,{url:e.iconUrl,alt:e.name}),onClick:()=>y(e)},e.name)));return[a.a.createElement(X.a,{key:m.id,elemBefore:a.a.createElement(re.a,{url:m.iconUrl,alt:m.name}),onClick:()=>y(m)},m.name),...e]}return null}),[m,y,s]),E=Object(n.useRef)(!0);return Object(n.useEffect)((()=>{!E.current&&b?c(b):E.current=!1}),[b,e,c]),a.a.createElement(ze.a,{
trigger:a.a.createElement(Ze,{icon:t,issueType:m&&m.name?m.name:"",onClick:j}),appearance:"default",position:"bottom left",onOpenChange:O,isOpen:e,isTriggerNotTabbable:!0},a.a.createElement(ee.a,{title:u(Qe.changeTypeGroupName)},v))};Xe.displayName="ChangeIssueType";var et=Xe,tt=Object(i.b)((e=>({issueTypes:Ge(e),issueId:Object(o.l)(e),isOpen:qe(e)})),(e=>({showIssueTypeList:t=>e(Object(He.d)(t)),loadIssueTypes:t=>e(Object(He.b)(t)),changeIssueType:(t,s,n,a,i)=>e(Object(He.g)(t,s,n,a,i))})))((e=>a.a.createElement(D.a,{id:"change-issue-type",packageName:"issue-view"},a.a.createElement(et,e)))),st=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),nt=Object(y.h)({uneditableIssueType:{id:"issue.details.uneditable-issue-type",defaultMessage:"{issueTypeName} - You cannot edit this issue type in this project."}}),at=Object(y.i)(Object(st.a)()((({intl:e,issueTypeIconUrl:t,issueTypeName:s})=>a.a.createElement(ie.a,{position:"top",
content:e.formatMessage(nt.uneditableIssueType,{issueTypeName:s}),truncate:!0,delay:0},a.a.createElement(d.a,{spacing:"compact",appearance:"subtle",iconBefore:a.a.createElement(re.a,{url:t}),isDisabled:!0})))));const it=({isSimplifiedProject:e=!1,isIssueTypeFieldEditable:t=!1,issueKey:s=Object(Y.l)(""),issueTypeName:n="",issueTypeIconUrl:i="",relativeIssueUrl:r="",fullIssueUrl:o="",onClick:c=G.a,onCopyClick:l=G.a})=>{const{formatMessage:u}=Object(f.c)(),d=u(je.copy),p=a.a.createElement(z.a,{key:"issueKeyBreadcrumbItem",href:r,onClick:c,text:s,target:"_blank"}),m=t?a.a.createElement(tt,{key:"issueTypeChanger",icon:a.a.createElement(re.a,{url:i,alt:n})}):a.a.createElement(at,{issueTypeName:n,issueTypeIconUrl:i}),[{value:b}]=Object(Ke.a)({issueKey:s}),g=b||"",h=e?a.a.createElement(ie.a,{content:`${s}: ${g}`,position:"top",delay:0},p):p;return a.a.createElement(Be.a,null,(e=>a.a.createElement(Ae,{onMouseLeave:e.hide,onMouseEnter:e.show,onFocus:e.show,onBlur:e.hide,
"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-current-issue-container"},m,h,(e=>e?a.a.createElement(We.a,{id:"BreadcrumbCurrentIssue",label:d,fullIssueUrl:o,onCopyClick:l,isVisible:e.isVisible}):a.a.createElement(Ve.a,{label:d,tooltipDelay:0,tooltipLabel:d,tooltipLabelPosition:"top",shouldFitContainer:!0,value:o,hideFieldText:!0,remountOnChange:!0,onCopyClick:l},a.a.createElement(De,{appearance:"subtle-link",iconBefore:a.a.createElement(Ue.a,{size:"small",label:d}),spacing:"compact"})))(e))))};it.displayName="BreadcrumbCurrentIssue";var rt=it;class ot extends n.Component{constructor(...e){super(...e),this.state={isHovered:!1},this.onHoveredChange=e=>()=>{this.setState({isHovered:e})}}renderBreadcrumbsItem(){const{isSimplifiedProject:e,parentIssue:t,issueHierarchyLevel:s,onClick:n}=this.props,{key:i,summary:r,url:o}=t;return a.a.createElement(ie.a,{content:`${i}: ${r}`,position:"top",delay:0},a.a.createElement(z.a,{href:o,onClick:n,text:e?Oe(0===s?r:i):i,
truncationWidth:e?void 0:300,hasSeparator:!0}))}render(){const{isSimplifiedProject:e,isDisabled:t,parentIssue:s,issueHierarchyLevel:n}=this.props,{key:i,issueTypeName:r,issueTypeIconUrl:o}=s,c=this.renderBreadcrumbsItem();return e?a.a.createElement(Ae,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container",onMouseEnter:t?void 0:this.onHoveredChange(!0),onMouseLeave:t?void 0:this.onHoveredChange(!1),shouldTruncate:!0},a.a.createElement(ye,{isDisabled:t,issueKey:i,issueTypeName:r,issueTypeIconUrl:this.state.isHovered?"":o,issueHierarchyLevel:n,onSelect:this.onHoveredChange(!1)}),c):a.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container"},c)}}ot.displayName="BreadcrumbParentIssue",ot.defaultProps={isSimplifiedProject:!1,isDisabled:!0,issueHierarchyLevel:0,onClick:G.a}
;var ct=({isSimplifiedProject:e=!1,shouldShowProjectLevelBreadcrumb:t=!1,projectName:s="",projectUrl:n="",projectAvatarUrl:i="",onClick:r=G.a})=>{const o=Boolean(t&&s&&n),c=a.a.createElement(re.a,{url:i,alt:s}),l=a.a.createElement(_e,null,a.a.createElement(xe,null,c)),u=a.a.createElement(z.a,{href:n,onClick:r,text:e?Oe(s):s,truncationWidth:0,iconBefore:l,hasSeparator:!0});return o&&a.a.createElement(Le,null,a.a.createElement(ie.a,{content:s,position:"top",delay:0},u))};class lt extends n.Component{constructor(...e){super(...e),this.onClick=e=>{this.props.onClick(e)},this.onProjectClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault();const{projectUrl:t,onProjectClick:s}=this.props;t&&s(t,this.props.pushAction)},this.onParentClick=e=>t=>{if(t.ctrlKey||t.metaKey||t.shiftKey)return;t.preventDefault();const{onParentClick:s,issueKey:n}=this.props;s({childIssueKey:n,parentIssueKey:Object(Y.l)(e),onIssueKeyChange:this.props.onIssueKeyChange})},this.onRootBreadcrumbClick=e=>{
if(e.ctrlKey||e.metaKey||e.shiftKey)return;const{onRootBreadcrumbClick:t}=this.props;t()}}componentDidMount(){if(this.props.onExperienceSuccess(),this.props.parentIssues.length>0){const e=this.props.parentIssues.map((e=>e.key));this.props.prefetchParents(e)}}componentDidUpdate(e){const t=this.props.parentIssues.map((e=>e.key)),s=e.parentIssues.map((e=>e.key));this.props.parentIssues.length>0&&!H()(s,t)&&this.props.prefetchParents(t)}render(){const{error:e,isSimplifiedProject:t,isLoadingComplete:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i,projectName:r,projectUrl:o,projectAvatarUrl:c,parentIssues:l,isIssueTypeFieldEditable:u,issueKey:d,issueTypeName:p,issueTypeIconUrl:m,relativeIssueUrl:b,fullIssueUrl:f,onCopyClick:g,intl:{formatMessage:h},canLinkToParent:y,issueHierarchyLevel:O,parentLevelIssueTypeNames:j}=this.props,v=l.length>0,E=y&&null===e&&s,k=t&&0===O&&E,w=Object(F.isProjectsDirectoryPrettyUrlEnabled)()?"/jira/projects":"/secure/BrowseProjects.jspa"
;return a.a.createElement(Pe,null,a.a.createElement(q.a,{maxItems:5},i&&a.a.createElement(z.a,{href:w,text:h(je.rootProjectsLink),onClick:this.onRootBreadcrumbClick}),a.a.createElement(ct,{isSimplifiedProject:t,shouldShowProjectLevelBreadcrumb:n,projectName:r,projectUrl:o,projectAvatarUrl:c,onClick:this.onProjectClick}),v?l.map(((e,s)=>a.a.createElement(ot,{key:s,isSimplifiedProject:t,isDisabled:!E,parentIssue:e,issueHierarchyLevel:O,onClick:this.onParentClick(e?e.key:"")}))):k&&a.a.createElement(Ne,{issueTypeName:j[0]}),a.a.createElement(rt,{isSimplifiedProject:t,isIssueTypeFieldEditable:u,issueKey:d,issueTypeName:p,issueTypeIconUrl:m,relativeIssueUrl:b,fullIssueUrl:f,onClick:this.onClick,onCopyClick:g})))}}function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function dt(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}lt.displayName="IssueBreadcrumbs",lt.displayName="IssueBreadcrumbs",lt.defaultProps={isSimplifiedProject:!1,isLoadingComplete:!1,issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,shouldShowRootProjectsBreadcrumb:!1,error:null,parentIssues:[],onCopyClick:G.a,onExperienceSuccess:G.a};const pt=e=>{let{projectName:t,projectAvatarUrl:s}=e,n=dt(e,["projectName","projectAvatarUrl"]);const{push:i}=Object(u.p)(),o=Object(r.h)(),c=Object(r.g)(),l=Object(f.c)();return a.a.createElement(D.a,{id:"issue.issue-view.foundation.breadcrumbs"},a.a.createElement(lt,ut({pushAction:i,onIssueKeyChange:o,issueKey:c,projectName:t||"",projectAvatarUrl:s||"",intl:l},n)))}
;pt.displayName="IssueBreadcrumbsWithHooks";var mt=S()(Object(I.a)("breadcrumbs",T.a.SCREEN),Object(W.c)("breadcrumbs"),Object(P.a)("breadcrumbsItem",{onParentClick:"clicked",onClick:"clicked"}),Object(_.a)({onCopyClick:"copyUrlLink",onParentClick:"navigateToParentIssue",onClick:"navigateToCurrentIssue"}),Object(C.a)((e=>({onClick:()=>{e("full.issue.view")},onParentClick:()=>{e("parent-issue.view")},onProjectClick:()=>{e("project.view")},onRootBreadcrumbClick:()=>{e("projects-list.view")}}))),Object(i.b)((e=>{const t=Object(o.u)(e);return{error:Object(o.i)(e),isSimplifiedProject:t,isLoadingComplete:Object(o.n)(e),issueSummary:Object(N.o)("summary")(e)||"",relativeIssueUrl:Object(V.i)(e),fullIssueUrl:Object(V.b)(e),issueTypeName:Object(V.g)(e),issueTypeIconUrl:Object(V.e)(e),parentIssues:Object(V.c)(t)(e),projectName:Object(K.e)(e),projectUrl:Object(M.j)(Object(R.f)(e),Object(R.D)(e)),projectAvatarUrl:Object(K.a)(e),isIssueTypeFieldEditable:Object(V.d)(e),canLinkToParent:Object(U.a)(e),
issueHierarchyLevel:Object(F.collapsedHierarchies)()?Object(U.b)(e):Object(U.f)(e),parentLevelIssueTypeNames:Object(U.h)(e)}}),(e=>({onParentClick:({childIssueKey:t,parentIssueKey:s,onIssueKeyChange:n})=>{n&&n({fromIssueKey:t,toIssueKey:s,meta:{location:"breadcrumbs"}}),__SPA__||e(Object(A.c)({fromIssueKey:t,toIssueKey:s}))},onProjectClick:(t,s)=>{e(Object(A.d)(t,s))},prefetchParents:t=>e(Object(L.a)({issueKeys:t}))}))),Object(x.a)((e=>{const t=Object(R.b)(e);return{attributes:{issueHierarchyLevel:Object(F.collapsedHierarchies)()?Object(U.b)(e):Object(U.f)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}})))(pt),bt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js")
;const ft=Object(j.default)(bt.b)(["margin-left:0;"]),gt=j.default.div(["display:flex;align-items:center;flex-grow:1;overflow:visible;font-size:",";[dir='rtl'] &{padding-left:0;padding-right:","px;}"],(e=>e.isCompact?"12px":null),bt.d),ht=({error:e=null,isCompact:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n=!1})=>{const i=Object(r.b)();return null!==e?null:a.a.createElement(ft,null,a.a.createElement(gt,{isCompact:t},void 0!==i&&a.a.createElement(k,{url:i}),a.a.createElement(mt,{externalId:"issue",shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n})))};ht.displayName="HeaderBreadcrumbsView";const yt=Object(c.a)([Object(i.b)((e=>({error:Object(o.i)(e)})),{}),l.a])(ht)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),u=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=2.5*b.e,g=m.default.div(["min-height:","px;margin-right:-","px;margin-bottom:","px;display:flex;justify-content:space-between;height:100%;align-items:center;"],4*b.e,f,b.e/4);class h extends n.Component{render(){
const{shouldShowCloseButton:e,onClose:t,renderFeedback:s,isCompact:n,viewModeOptions:i,issueDeleteCallbacks:r,shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:u}=this.props;return a.a.createElement(l.a,{isCompact:n},a.a.createElement(o.a,{medium:10},a.a.createElement(g,null,a.a.createElement(p.a,{shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:u,isCompact:n}),a.a.createElement(d.a,{renderFeedback:s,issueDeleteCallbacks:r,viewModeOptions:i,onClose:t,shouldShowCloseButton:e,isCompact:n}))))}}h.displayName="HeaderItemWithoutCompactMode",h.displayName="Header",h.defaultProps={issueDeleteCallbacks:{},shouldShowCloseButton:!1,shouldShowProjectLevelBreadcrumb:!1,shouldShowRootProjectsBreadcrumb:!1,renderFeedback:()=>null,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:r.a};t.a=Object(c.a)([u.a])(h)},
"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({configure:{id:"issue.configure",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"}})},"./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),o=s("./node_modules/@atlaskit/icon/glyph/cross.js"),c=s.n(o),l=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const u=Object(i.h)({label:{id:"issue.label-for-modal-close-button",defaultMessage:"Close"}});class d extends n.PureComponent{render(){
const e=this.props.intl.formatMessage(u.label),t=a.a.createElement(c.a,{label:"",size:"medium"});return a.a.createElement("div",null,a.a.createElement(l.a,{content:e,position:"top"},a.a.createElement(r.a,{"aria-label":e,appearance:"subtle",spacing:"default",iconBefore:t,onClick:this.props.onClose})))}}d.displayName="ModalActionsCloseButton",t.a=Object(i.i)(d)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg":function(e,t,s){
e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js":function(e,t,s){"use strict"
;var n=s("./src/packages/platform/utils/constants/src/project-types.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/issue/issue-context-service/src/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),o=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/issue/project-permissions-service/src/main.js"),u=s("./src/packages/project-settings/common/src/urls.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),p=s("./src/packages/issue/issue-view/src/configurations.js"),m=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js"),b=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js");t.a=e=>{
const t=Object(d.a)(),s=Object(i.i)(),f=Object(c.j)(s),g=Object(i.g)(),h=Object(i.l)(),y=Object(c.b)(s),O=Object(l.b)(s),j=y&&O,[v]=Object(r.b)({issueKey:g,fieldKey:"issuetype"}),[E]=Object(o.c)(g);let k="issuetype";y||f!==n.g||null===E||(k=Object(b.a)("com.atlassian.servicedesk:vp-origin",E));const w=void 0!==k?k:"issuetype",[S]=Object(r.b)({issueKey:g,fieldKey:w});if(y&&j&&f){const{pathname:n,search:i}=window.location;return Object(u.a)(Object(a.b)(t),f,s,v.id,{url:`${n}${i}`,title:e(m.a.swiftBacklink,{issueKey:g})})}return!s||null==h||0===h||y?f?p.i[f]:p.i[n.h]:f===n.g?null===S||void 0===S.requestType||void 0===S.requestType.id?p.i[n.g]:`${t}/servicedesk/admin/${s}/request-types/request-type/${S.requestType.id}`:h?`${t}/plugins/servlet/project-config/${s}/issuelayout?screenId=${h}`:f?p.i[f]:p.i[n.h]}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}))
;const n=(e,t)=>Object.keys(t).find((s=>null!==t[s].schema.custom&&t[s].schema.custom===e))},"./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js":function(t,s,n){"use strict"
;var a=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=n("./src/packages/platform/ui/field-config/src/index.js"),r=n("./src/packages/servicedesk/sla-panel/src/main.js"),o=n("./src/packages/issue/issue-view/src/feature-flags.js"),c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/react-intl/lib/index.es.js"),d=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/lodash/flow.js"),m=n.n(p),b=n("./node_modules/lodash/noop.js"),f=n.n(b),g=n("./src/packages/platform/observability/browser-metrics/src/index.js"),h=n("./src/packages/issue/fields/components/field-heading/src/styled.js"),y=n("./src/packages/issue/fields/components/field-pin/src/index.js"),O=n("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),j=n("./src/packages/issue/issue-view/src/common/messages/drafts.js"),v=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),E=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),k=n("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),w=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),S=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),C=n("./src/packages/issue/issue-view/src/views/constants.js"),I=n("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),T=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),P=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const _=T.default.div(["[class*='CompactWrapper']{","}"],(()=>`margin-bottom: ${2*P.e}${Object(o.isGroupingPreEarlyAccessEnabled)()?"px":""};`))
;var x=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),D=n("./src/packages/issue/issue-view/src/actions/editor-actions.js"),A=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),L=n("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),M=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),R=n("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),N=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),F=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),U=n("./src/packages/issue/issue-view/src/common/util/get-element/index.js"),V=n("./node_modules/reselect/lib/index.js"),K=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const W=Object(V.createSelector)(N.x,K.C,((e,t)=>({objectId:e,containerId:t})))
;var B=n("./src/packages/issue/issue-view/src/selectors/tab-selector.js"),H=n("./src/packages/issue/issue-view/src/views/connect-field.js"),$=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),G=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),q=n("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js");const z=T.default.div([""," margin-bottom:","px;"],(e=>e.isEditing?"":"\n        & > div > div > div > div > div {\n            min-height: 32px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0 6px;\n        }\n    "),(e=>!0!==e.isGrouped?3*P.e:0)),Y=e=>l.a.createElement(z,{isEditing:e.isEditing,isGrouped:e.isGrouped,"data-testid":e["data-testid"]},l.a.createElement(q.a,e));Y.displayName="CompactInlineEditStateless";var Q=Y,J=n("./src/packages/issue/issue-view/src/common/component/renderer/index.js"),Z=Object(u.h)({nonEditablePlaceholderText:{
id:"issue.views.field.rich-text.nonEditablePlaceholderText",defaultMessage:"None"}}),X=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),ee=n("./src/packages/issue/issue-view/src/common/component/editor/async.js");const te=T.default.div(["width:100%;"]),se=Object(X.f)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ne extends c.Component{render(){const e=l.a.createElement(ee.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.value});return l.a.createElement(te,{"data-test-id":"issue.views.field.rich-text.editor-container"},l.a.createElement(ee.a,{packageName:"issue",fallback:e},l.a.createElement(se,{baseUrl:this.props.baseUrl,portalElement:this.props.portalElement,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,
mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,emojiProvider:this.props.emojiProvider,externalId:this.props.externalId,defaultValue:this.props.value,onCancel:this.props.onCancel,onBlur:this.props.onBlur,onSave:this.props.onSave,onChange:this.props.onChange,isDisabled:this.props.isDisabled,isInvalid:this.props.isInvalid,isExpanded:this.props.isExpanded,shouldFocus:this.props.shouldFocus,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})))}}ne.displayName="RichTextFieldView",ne.displayName="RichTextFieldView",ne.defaultProps={isDisabled:!1,isInvalid:!1,isExpanded:!1,shouldFocus:!1,value:null,mediaContext:null,mentionEncoder:null,emojiProvider:null,onPaste:f.a};const ae=T.default.div(["width:100%;"]),ie=["isEditable","isEditing","externalId","noValueText","mediaContext","adfValue"];class re extends c.Component{constructor(...e){super(...e),this.onMouseDownEditView=()=>{
this.mouseDownSelection=window.getSelection().toString()},this.onEditRequested=()=>{const e=window.getSelection().toString(),t=e&&0!==e.length,s=this.mouseDownSelection&&0!==this.mouseDownSelection.length;t||s||this.props.onEditRequest()},this.getEditValue=()=>this.props.adfValue,this.getNonEditablePlaceholderText=()=>this.props.intl.formatMessage(Z.nonEditablePlaceholderText),this.mouseDownSelection=void 0}componentDidMount(){this.props.onExperienceSuccess()}shouldComponentUpdate(e){return!ie.every((t=>this.props[t]===e[t]))}renderContent(){return l.a.createElement(ae,null,l.a.createElement(J.a,{mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:Object(G.i)(this.props.adfValue),placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText()}))}renderReadView(){const{intl:e,isEditable:t,isMobile:s,fieldId:n}=this.props
;return l.a.createElement("div",{onMouseDown:this.onMouseDownEditView,role:"presentation","data-test-id":`issue.views.field.rich-text.${n}`},l.a.createElement(Q,{label:"",isLabelHidden:!0,readView:this.renderContent(),onEditRequested:this.onEditRequested,isEditing:!1,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:""}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:""}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:""}),editView:t?l.a.createElement("div",null):null,onConfirm:f.a,onCancel:f.a,isFitContainerWidthReadView:!s}))}renderEditView(){return l.a.createElement(ne,{baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,portalElement:this.props.portalElement,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,contextIdentifier:this.props.contextIdentifier,activityProvider:this.props.activityProvider,externalId:this.props.externalId,isDisabled:void 0,isExpanded:!0,shouldFocus:!0,
value:this.getEditValue(),onCancel:this.props.onCancel,onChange:this.props.onChange,onBlur:this.props.onBlur,onSave:this.props.onConfirm,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})}render(){return this.props.isEditing?this.renderEditView():this.renderReadView()}}re.displayName="RichTextInlineEditView",re.displayName="RichTextInlineEditView",re.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,adfValue:void 0,contextIdentifier:void 0,onExperienceSuccess:f.a};var oe=Object(u.i)(re);const ce=Object(u.h)({noValueText:{id:"issue.placeholder-for-empty-issue-description-field",defaultMessage:"Add a description..."}});function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ue=e=>{const{onEditRequest:t,onConfirm:s,isEditing:n}=e;Object(c.useEffect)((()=>{
n?Object(g.c)().markTimeToFinishTask({key:C.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW}):(Object(g.c)().markTimeToFeedback({key:C.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}),Object(g.c)().markTimeToFeedback({key:C.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION}))}),[n]);const a=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW,cancelExisting:!0}),t()}),[t]),i=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION,cancelExisting:!0}),Object(g.c)().markStartOfInteraction({key:C.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION,cancelExisting:!0}),s()}),[s]);return l.a.createElement(oe,le({},e,{onEditRequest:a,onConfirm:i}))};ue.displayName="DescriptionField";var de=m()(Object(S.b)("description"),Object(H.a)((()=>({fieldId:"description",shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>{
const n=`${e}/rest/internal/3/issue/${t}/description`,a=JSON.stringify(s);return Object(x.e)(n,{body:a})})(e,t,s),canContainMediaContent:!0,onSaveFailureFlagType:A.H,additionalProps:(e,t)=>{const s=Object(N.f)(e);return{baseUrl:s,portalElement:Object(B.a)("description")(e)?Object(U.b)()||document.body:void 0,adfValue:Object(v.g)("description")(e),htmlValue:Object(v.i)("description")(e),isInvalid:Object(v.k)("description")(e),invalidMessage:Object(v.j)("description")(e),mediaContext:Object(F.a)(e),mentionProvider:Object(L.a)(e),contextIdentifier:W(e),mentionEncoder:Object(M.a)(s),activityProvider:Object(R.a)(e),externalId:"issue.descriptionHtml",noValueText:t.formatMessage(ce.noValueText)}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(D.b)()),onSaveFailure:()=>e(Object(D.c)()),onChangeFailure:()=>e(Object(D.a)())})}))))(ue);class pe extends c.Component{componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){
const{isEditing:t,isWaiting:s,hasDraft:n}=this.props,a=!(e.isEditing||t||s||n),i=a&&e.hasDraft&&!e.isWaiting,r=a&&!e.hasDraft&&e.isWaiting;i?Object(g.c)().markTimeToFinishTask({key:C.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}):r&&Object(g.c)().markTimeToFinishTask({key:C.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION})}render(){const{area:e,label:t,fieldId:s,hasDraft:n,isEditing:a,isWaiting:i,intl:r}=this.props,o="content"===e?O.c:h.e,c="content"===e?O.e:h.f,u=Object(I.a)(e);return l.a.createElement(_,null,l.a.createElement(o,null,l.a.createElement(O.b,null,l.a.createElement(c,null,t),!n||a||i?null:l.a.createElement(O.a,null,`\u2022 ${r.formatMessage(j.a.draftIndicator)}`),!0===u&&l.a.createElement(y.a,{fieldId:s,label:t}))),l.a.createElement(de,null))}}pe.displayName="Description",pe.defaultProps={area:"context",onExperienceSuccess:f.a},pe.displayName="Description";var me=m()(u.i,Object(w.c)("description-container"),Object(S.b)("description"),Object(E.a)(),Object(d.b)((e=>({
label:Object(v.m)("description")(e),hasDraft:Object(k.a)("description")(e),isEditing:Object(v.E)("description")(e),isWaiting:Object(v.G)("description")(e)})),{}),Object(E.a)())(pe),be=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),fe=n("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),ge=n("./node_modules/@atlaskit/textarea/dist/es2019/text-area.js");const he=T.default.div(["",";"],Object(fe.f)("textarea")),ye=e=>{const t=(e=>e?e.split(/\r\n|\r|\n/).length:0)(e.value),s=e.scrollRows||t,n="content"===e.area?20:5,a=Math.min(n,Math.max(2,s));return l.a.createElement(he,null,l.a.createElement(ge.a,{value:e.value,onChange:t=>{e.onChange(t.target.value)},isInvalid:!!e.invalidMessage,invalidMessage:e.invalidMessage,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",minimumRows:a}))};ye.displayName="TextAreaField",ye.defaultProps={value:"",invalidMessage:null,scrollRows:null,area:"context"},
ye.displayName="TextAreaField";var Oe=ye;const je=T.default.div(["[class*='CompactWrapper'] > *{margin-left:0;}[class*='ContentWrapper']{padding-left:0;padding-right:0;}"]),ve=Object(T.default)(je)(["[class*='CompactWrapper']{","}"],(()=>`margin-bottom: ${2*P.e}${Object(o.isGroupingPreEarlyAccessEnabled)()?"px":""};`));class Ee extends c.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e)},this.onConfirm=()=>{const{value:e}=this.props;this.props.onChange(Object(G.j)(e)),this.props.onConfirm()},this.readView=void 0}renderReadView(){const{value:e,noValueText:t,area:s}=this.props;return e&&0!==e.trim().length?"content"===s||"content-request"===s?l.a.createElement(fe.d,{innerRef:e=>{this.readView=e}},e&&Object(G.j)(e)):l.a.createElement(fe.c,{innerRef:e=>{this.readView=e},maxRows:5},e):l.a.createElement(fe.b,null,t)}renderEditView(){let e;if(this.readView){
const{scrollHeight:t}=this.readView,s=window.getComputedStyle(this.readView),n=Number.parseFloat(s.getPropertyValue("line-height"));e=Math.round(t/n)}return l.a.createElement(Oe,{value:this.props.value,onChange:this.onChange,invalidMessage:this.props.invalidMessage,scrollRows:e,area:this.props.area})}getField(){return l.a.createElement(be.a,{onEscape:this.props.onCancel},l.a.createElement(Q,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:this.props.intl.formatMessage($.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:this.props.intl.formatMessage($.a.confirmButtonLabel,{fieldName:this.props.label}),
cancelButtonLabel:this.props.intl.formatMessage($.a.cancelButtonLabel,{fieldName:this.props.label})}))}render(){const{area:e,fieldId:t,label:s}=this.props,n="context"===e?ve:je,a=Object(I.a)(e);return l.a.createElement(n,null,"content"===e?l.a.createElement(O.c,null,l.a.createElement(O.e,null,s)):l.a.createElement(h.e,null,l.a.createElement(h.f,null,s),!0===a&&l.a.createElement(y.a,{fieldId:t,label:s})),this.getField())}}Ee.displayName="TextAreaInlineEditView",Ee.displayName="TextAreaInlineEditView",Ee.defaultProps={isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,value:"",label:"",noValueText:null,invalidMessage:null};var ke=Object(u.i)(Ee),we=Object(u.h)({noValue:{id:"issue.common.multi-line-text.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"}}),Se=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(we.noValue),area:t.area})})))(ke),Ce=n("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js")
;const Ie=Object(u.h)({noValueText:{id:"issue.multiline-field.empty-placeholder",defaultMessage:"None"}});function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _e=e=>{const{label:t,area:s,hasDraft:n,intl:a,isEditing:i,containerWidth:r}=e,o=Pe(e,["label","area","hasDraft","intl","isEditing","containerWidth"]),c=n&&!i,u="content"===s?O.c:h.e,d="content"===s?O.e:h.f,p=Object(I.a)(s)
;return l.a.createElement(_,null,l.a.createElement(u,null,l.a.createElement(O.b,null,l.a.createElement(d,null,t),!0===c?l.a.createElement(O.a,null,`\u2022 ${a.formatMessage(j.a.draftIndicator)}`):null,!0===p&&l.a.createElement(y.a,{fieldId:e.fieldId,label:t}))),l.a.createElement(oe,Te({isEditing:i},o)))};_e.displayName="MultilineField";var xe=Object(H.a)(((e,t)=>({fieldId:t.fieldId,shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:s,value:n})=>((e,t,s,n)=>{const a=`${e}/rest/api/3/issue/${t}`;return Object(x.e)(a,{body:JSON.stringify({fields:{[s]:n}})})})(e,s,t.fieldId,n),canContainMediaContent:!0,onSaveFailureFlagType:A.H,additionalProps:(e,s)=>{const n=Object(N.f)(e);return{baseUrl:n,portalElement:Object(B.a)(t.fieldId)(e)?Object(U.b)()||document.body:void 0,adfValue:Object(v.g)(t.fieldId)(e),hasDraft:Object(k.a)(t.fieldId)(e),htmlValue:Object(v.i)(t.fieldId)(e),isInvalid:Object(v.k)(t.fieldId)(e),invalidMessage:Object(v.j)(t.fieldId)(e),mediaContext:Object(F.a)(e),
mentionProvider:Object(L.a)(e),mentionEncoder:Object(M.a)(n),activityProvider:Object(R.a)(e),externalId:`issue.${t.fieldId}`,noValueText:s.formatMessage(Ie.noValueText),area:t.area}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(D.b)()),onSaveFailure:()=>e(Object(D.c)()),onChangeFailure:()=>e(Object(D.a)())})})))(Object(Ce.a)(Object(u.i)(_e)));var De=Object(d.b)(((e,t)=>({isRichTextField:Object(v.J)(t.fieldId)(e)})),{})((e=>{const{isRichTextField:t,fieldId:s,area:n="context"}=e;return t?l.a.createElement(xe,{fieldId:s,area:n}):l.a.createElement(Se,{fieldId:s,area:n})
})),Ae=n("./src/packages/issue/issue-view/src/views/issue-base/context/approval-panel/approval-panel.js"),Le=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),Me=n("./src/packages/servicedesk/approval-panel/src/async.js"),Re=n("./src/packages/issue/issue-view/src/actions/approval-action/index.js"),Ne=n("./src/packages/issue/issue-view/src/actions/context-item-actions.js"),Fe=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),Ue=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),Ve=n("./src/packages/issue/issue-view/src/selectors/approval-selector/index.js"),Ke=n("./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js");function We(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Be(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?We(Object(s),!0).forEach((function(t){He(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):We(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function He(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $e=e=>l.a.createElement(Me.a,e);$e.displayName="AsyncApprovalGlancePanelContainer";const Ge=Object(Ue.a)([Object(d.b)(((e,t)=>{const s=t.payload&&t.payload.approvalFieldId||"",n=Object(Ve.d)(e,s)||"",a=Object(v.D)(n)(e),i=Object(v.o)("status")(e)||{};return{fieldId:n,approvalFieldId:s,approval:Object(Ve.e)(e,s),baseUrl:Object(N.f)(e),issueKey:Object(N.y)(e),fieldMetaKey:Object(v.l)(n)(e)||"",fieldAutoCompleteUrl:Object(v.d)(n)(e)||"",hasLinkedFieldEditPermissions:a,portalElement:Object(U.a)()||document.body,issueStatusId:i.id
}}),(e=>({renderApproverList:()=>{e(Object(Fe.g)())},onApproverListUpdated:(t,s)=>{e(Object(Re.e)(t,s))},onHidePanel:()=>{e(Object(Ne.a)())},onAddApproverError:()=>{e(Object(Re.a)())},onRemoveApproverError:()=>{e(Object(Re.b)())}})),((e,t,s)=>Be(Be(Be(Be({},s),e),t),{},{onApproverListUpdated:s=>{t.onApproverListUpdated(e.fieldId,s)}})))])($e)
;var qe=Object(Le.a)(o.isApprovalFieldExtractionEnabled,Ke.a,Ge),ze=n("./node_modules/lodash/memoize.js"),Ye=n.n(ze),Qe=n("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),Je=n("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),Ze=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Xe=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),et=n("./src/packages/platform/controllers/intl/src/index.js"),tt=n("./src/packages/issue/issue-context-service/src/main.js"),st=n("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),nt=n("./src/packages/issue/project-permissions-service/src/main.js"),at=n("./src/packages/issue/smart-field-prefetch/src/context.js"),it=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js");function rt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ot(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(s),!0).forEach((function(t){ct(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ct(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
var lt=n("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),ut=n("./node_modules/lodash/isNil.js"),dt=n.n(ut),pt=n("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),mt=n("./node_modules/@atlaskit/form/dist/es2019/Messages.js"),bt=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),ft=n("./src/packages/issue/fields/components/user-picker/src/main.js"),gt=n("./src/packages/profilecard-next/src/common/constants.js"),ht=n("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js"),yt=n("./src/packages/issue/issue-view/src/views/field/user/assets/add.png"),Ot=n.n(yt),jt=n("./node_modules/@atlaskit/theme/dist/es2019/index.js"),vt=T.default.div(["padding-right:","px;padding-top:1px;& span[role='img']{background-color:"," !important;}"],P.e,jt.a.N30),Et=T.default.div(["align-items:center;display:flex;padding-top:1px;"]),kt=Object(u.h)({invitePeopleOption:{id:"issue.assignee.invite-people-option",
defaultMessage:"Add teammate to Jira"},invitePeopleOptionAdmin:{id:"issue.assignee.invite-people-option-admin",defaultMessage:"Invite teammate to Jira"}});function wt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function St(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(s),!0).forEach((function(t){Ct(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ct(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class It extends c.Component{constructor(...e){super(...e),this.shouldTrackAssigneeInteractions=()=>"assignee"===this.props.fieldId,
this.onChange=e=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:C.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED,cancelExisting:!0}),this.props.onChange(e)},this.onDataRequest=e=>{!0!==e&&this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:C.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=(e=!0,t=0)=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markTimeToFinishTask({key:e?C.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS:C.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,collectors:[e=>St(St({},e),{},{resultsLength:t})]})},this.onEditRequested=()=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:C.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()}}componentDidUpdate(e){if(this.shouldTrackAssigneeInteractions()){const{value:t,isEditing:s}=this.props;!1===e.isEditing&&!1===s&&e.value!==t&&Object(g.c)().markTimeToFinishTask({
key:C.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT});e.isEditing&&!s&&e.value!==t&&Object(g.c)().markTimeToFinishTask({key:C.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED});!e.isEditing&&s&&setTimeout((()=>{Object(g.c)().markTimeToFeedback({key:C.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}),0)}}getActions(){const{fieldId:e}=this.props;return"reporter"===e?[gt.c,gt.b]:"assignee"===e?[gt.c,gt.a]:void 0}getInvitePeopleOption(){const{intl:e}=this.props,{isAdmin:t}=Object(bt.f)();return{name:e.formatMessage(t?kt.invitePeopleOptionAdmin:kt.invitePeopleOption),avatarUrl:Ot.a}}renderReadView(){const{customReadView:e}=this.props;if(e)return e(this.props.value);const t=this.props.value||this.props.emptyOption||{avatarUrl:"",name:""};return l.a.createElement(ht.a,{userAccount:t,analyticsData:{trigger:this.props.fieldId},position:"left-start",actions:this.getActions()},l.a.createElement(Et,null,l.a.createElement(vt,null,l.a.createElement(pt.a,{borderColor:"transparent",src:t.avatarUrl,size:"small"
})),t.name))}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return dt()(e)?this.renderReadView():l.a.createElement(e,null,this.renderReadView())}renderEditView(){const{portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onConfirm:o,enablePeopleInvite:c}=this.props,u={portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onSelection:o,width:"100%",onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,onChange:this.onChange,enablePeopleInvite:c,invitePeopleOption:!0===c?this.getInvitePeopleOption():null};return l.a.createElement(ft.a,u)}getEditButtonLabel(){const{intl:e,label:t,value:s,emptyOption:n}=this.props;return null!=s&&s.name?e.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:s.name,fieldName:t}):null!=n&&n.name?e.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:n.name,fieldName:t}):e.formatMessage($.a.editButtonLabel,{fieldName:t})}
render(){const{intl:e,label:t,isEditing:s,isEditable:n,isMobile:a,invalidMessage:i,fieldId:r,titleView:o=this.props.label,showPinButton:c,onCancel:u,customReadView:d}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===c&&l.a.createElement(y.a,{fieldId:r,label:t})),l.a.createElement(h.g,{isEditing:s,"data-test-id":`issue.views.field.user.${r}`,fixedHeight:!d},null!=i?l.a.createElement(mt.a,{key:`${r}-error-message`},i):null,l.a.createElement(be.a,{onEscape:u},l.a.createElement(q.a,{editView:n?this.renderEditView():null,readView:this.renderReadViewWithContentWrapper(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:s,isInvalid:!!i,invalidMessage:i,isLabelHidden:!0,label:t,onCancel:f.a,onConfirm:f.a,onEditRequested:this.onEditRequested,onFocus:f.a,isFitContainerWidthReadView:!a,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:t}),
cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:t})}))))}}It.displayName="UserInlineEditView",It.displayName="UserInlineEditView",It.defaultProps={isMobile:!1,label:"",initialOptions:[],emptyOption:null,invalidMessage:null,value:null};var Tt=Object(u.i)(It),Pt=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const _t=(e,t,s,n,a,i)=>{if(null==e)return;const r="access",o="fieldPrefetchCache",c=e({action:r,actionSubject:o,actionSubjectId:n}),l={fieldSelectionSessionId:n,fieldFetchSessionId:i,prefetchSessionId:s,cacheHit:t,fieldId:a};Object(Pt.b)(c,`${o} access`,n,l)},xt=(e,t,s,n,a)=>_t(e,!0,t,s,a,n),Dt=(e,t,s,n)=>_t(e,!1,t,s,n);function At(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lt(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?At(Object(s),!0).forEach((function(t){Mt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):At(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rt=(e,t,s,n,a)=>{const i=Lt(Lt({},a),{},{elapsedTimeMs:Ze.default.now()-s});n&&Object(Pt.b)(n({action:e,actionSubject:t}),`${t} ${e}`,i)},Nt=(e,t,s,n)=>{Rt("succeeded",`${e}Suggestions`,t,s,n)},Ft=(e,t,s,n)=>{Rt("failed",`${e}Suggestions`,t,s,n)},Ut=e=>e?(e=>({avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"],id:e.accountId,name:e.displayName}))(e):null,Vt=e=>e?(e=>({avatarUrls:{"48x48":e.avatarUrl},displayName:e.name,accountId:e.id}))(e):null;function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Wt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Bt=Object(u.h)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me"},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned"}}),Ht=e=>e&&e.accountId,$t=Object(a.a)((e=>({avatarUrl:"",name:e(Bt.unassignedOption)}))),Gt=Object(a.a)(((e,t)=>e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t(Bt.assignToMe)}]:[])),qt=Object(a.a)(((e,t)=>e?[{avatarUrl:"",id:null,name:t(Bt.unassignedOption),displayName:t(Bt.unassignedOption)
}]:[])),zt=Object(a.a)(((e,t,s,n)=>[...!Boolean(t&&e&&e.id===t.accountId)&&n?Gt(e,s):[],...t?qt(e,s):[]])),Yt=(e,t)=>!!e&&t.toLowerCase().startsWith(e.toLowerCase()),Qt=Object(a.a)(((e,t)=>Object(a.a)((s=>{const n=Yt(s,t(Bt.assignToMe));return[...Yt(s,t(Bt.unassignedOption))?qt(e,t):[],...n?Gt(e,t):[]]})))),Jt=Object(a.a)(((e,t,s,n)=>(i,r)=>{if(!e)return Promise.resolve([]);const o=((e,t)=>Object(a.a)((s=>{const n=Yt(s,t(Bt.assignToMe));return[...Yt(s,t(Bt.unassignedOption))?qt(e,t):[],...n?Gt(e,t):[]]})))(t,s)(i),c=null!=r?`&sessionId=${r}`:"",l=Ze.default.now(),u=i.length;return Object(Xe.a)(`${e}${i}${c}`).then((e=>{Nt("assignee",l,n,{sessionId:r,queryLength:u});const t=e.map(Ut).filter(Boolean);return[...o,...t]})).catch((e=>{throw Ft("assignee",l,n,{sessionId:r}),e}))})),Zt=Ye()(((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetchSessionId:a,prefetched:i,fieldValuePromise:r,sessionId:o}=e,{createAnalyticsEvent:c}=t;if(i&&null!==r&&null!==o){const e=t.getDefaultOptions(s)
;xt(c,a,n||"",o,"assignee");const i=Ze.default.now();return r.then((t=>{Nt("assignee",i,c,{sessionId:n,isPrefetched:!0,queryLength:0});const s=t.map(Ut).filter(Boolean);return[...e,...s]})).catch((e=>{throw Ft("assignee",i,c,{sessionId:n,isPrefetched:!0}),e}))}return Dt(c,a,n||"","assignee"),t.fetchSuggestions(s,n)}return t.fetchSuggestions(s,n)}),((e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`)),Xt=e=>{Object(c.useMemo)((()=>e.initFieldOptions()),[]);const t=Object(c.useRef)(null);Object(c.useEffect)((()=>{t.current&&e.isEditing&&Object(lt.a)(t.current)}),[e.isEditing]);const[{value:s}]=Object(st.a)({issueKey:e.issueKey}),n=Object(tt.i)(),[{canBeAssignedToIssues:a,canAssignIssues:i}]=Object(nt.d)(n),r=!!i,{formatMessage:o}=Object(et.c)(),u=zt(e.loggedInUser,s,o,!!a),d=Object(c.useCallback)((()=>{const t=Object(at.a)(e.issueKey,"assignee");return l.a.createElement(t,{fieldId:"assignee"},(t=>{
const n=Zt(t,e),{createAnalyticsEvent:a,getDefaultOptions:i,initFieldOptions:c,intl:d,issueKey:p,loggedInUser:m}=e,b=Wt(e,["createAnalyticsEvent","getDefaultOptions","initFieldOptions","intl","issueKey","loggedInUser"]);return l.a.createElement(Tt,Kt({},b,{fetchSuggestions:n,fieldId:"assignee",value:Ut(s),initialOptions:u,isEditable:r,emptyOption:$t(o)}))}))}),[o,u,r,e,s]);return l.a.createElement(Je.a,{name:"EDIT_FIELD"},l.a.createElement("div",{ref:e=>{t.current=e}},d()))};Xt.displayName="AssigneeView",Xt.displayName="AssigneeView";const es=(e,t)=>`${e}/rest/api/3/user/assignable/search?issueKey=${t}&recommend=true&query=`,ts=({baseUrl:e,issueKey:t,value:s,saveFieldData:n})=>((e,t,s,n)=>Object(x.e)(((e,t,s)=>s?`${e}/rest/api/3/issue/${t}/assignee?sessionId=${s}`:`${e}/rest/api/3/issue/${t}/assignee`)(e,t,n),ot(ot({},it.a),{},{body:JSON.stringify({accountId:s})})))(e,t,null==s?null:s.accountId,n);var ss=m()(Object(Qe.a)(),Object(S.b)("assignee"),Object(H.a)(((e,t)=>(e=>({
fieldId:"assignee",transformFromStateValue:Ut,transformToStateValue:Vt,saveField:ts,additionalProps:(t,s)=>{const n=Object(K.y)(t);return{portalElement:Object(B.a)(e.fieldId)(t)?Object(U.a)()||document.body:void 0,fetchSuggestions:Jt(es(Object(N.f)(t),Object(N.y)(t)),n,s.formatMessage,e.createAnalyticsEvent),issueKey:Object(N.y)(t),getDefaultOptions:Qt(n,s.formatMessage),loggedInUser:n,showPinButton:Object(I.a)(e.area),analyticsAttributeIdRetriever:Ht,enablePeopleInvite:!0}}}))(t))))(Xt),ns=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),as=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),is=n("./src/packages/issue/fields/cascading-select-custom-field/src/ui/main.js");function rs(){return(rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const os=e=>{
const{issueKey:t,fieldKey:s,label:n}=e,[a]=Object(ns.b)({issueKey:t,fieldKey:s}),[i]=Object(as.a)(t,s);return l.a.createElement(is.a,rs({},e,{allowedValues:i&&i.allowedValues||[],isEditable:i&&i.isEditable||!1,label:i&&i.title||n,initialValue:a}))};os.displayName="CascadingSelectView";var cs=Object(Ue.a)([Object(d.b)(((e,{fieldId:t,area:s})=>({fieldKey:t,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",error:Object(K.i)(e),issueKey:Object(N.y)(e),isMobile:Object(N.s)(e),label:Object(v.m)(t)(e),areOptionsOnSameRow:"content"===s||"content-request"===s,showPinButton:Object(I.a)(s)
})),{})])(Object(w.b)()(os)),ls=n("./node_modules/lodash/isEmpty.js"),us=n.n(ls),ds=n("./node_modules/@atlaskit/tag--current/dist/es2019/Tag/index.js"),ps=n("./node_modules/@atlaskit/tag-group/dist/es2019/TagGroup/index.js"),ms=n("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),bs=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js");const fs=T.default.div(["margin:-4px;width:100%;"]);class gs extends c.Component{constructor(...e){super(...e),this.handleTagSelected=e=>{Object(bs.a)(e.target,e.currentTarget)&&(e.stopPropagation(),this.props.onClick&&this.props.onClick())},this.handleTagMouseDown=e=>{e.preventDefault(),Object(bs.a)(e.target,e.currentTarget)&&e.stopPropagation()},this.renderTag=e=>{const t=l.a.createElement(ds.a,{appearance:this.props.tagAppearance,text:void 0!==e.content?e.content:e.label,color:e.color,href:this.props.shouldHideLinks?void 0:e.href,elemBefore:e.elemBefore})
;return this.props.isUserTag?l.a.createElement(ht.a,{userAccount:e,analyticsData:{trigger:"user-tag"},position:"left-start"},t):t}}render(){const{value:e,noValueText:t}=this.props;return e&&!us()(e)?l.a.createElement(fs,null,l.a.createElement(ps.a,null,e.map((e=>l.a.createElement("div",{onClick:this.handleTagSelected,onMouseDown:this.handleTagMouseDown,onKeyPress:this.handleTagSelected,key:null!=e.key?e.key:e.value,role:"presentation"},this.renderTag(e)))))):l.a.createElement(fe.b,null,t)}}gs.displayName="TagView",gs.defaultProps={isUserTag:!1,shouldHideLinks:!1,value:null,noValueText:null,tagAppearance:"default"};var hs=Object(ms.a)("tagView",{onClick:"clicked"})(gs),ys=n("./node_modules/@atlaskit/select/dist/es2019/CheckboxSelect.js"),Os=n("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js");class js extends c.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a}=this.props
;return l.a.createElement(Os.a,{validationState:null!=e?"error":null,validationMessage:e},l.a.createElement(ys.a,{options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0}))}}js.displayName="CheckboxFieldView",js.displayName="CheckboxFieldView",js.defaultProps={value:[],options:[],placeholder:null,invalidMessage:null};class vs extends c.Component{renderReadView(){return l.a.createElement(hs,{value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile})}renderEditView(){return l.a.createElement(js,{value:this.props.value,options:this.props.options,onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage})}render(){const{intl:e,label:t,onCancel:s,isEditable:n,isEditing:a,onConfirm:i,onEditRequest:r,isMobile:o,fieldId:c,showPinButton:u}=this.props
;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===u&&l.a.createElement(y.a,{fieldId:c,label:t})),l.a.createElement(h.g,{isEditing:a},l.a.createElement(be.a,{onEscape:s},l.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:a,onConfirm:i,onCancel:s,onEditRequested:r,isFitContainerWidthReadView:!o,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:t})}))))}}vs.displayName="CheckboxInlineEditView",vs.displayName="CheckboxInlineEditView",vs.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:[],label:"",placeholder:null,noValueText:null,tagAppearance:"default",invalidMessage:null};var Es=Object(u.i)(vs);const ks=Object(u.h)({noValue:{
id:"issue.context-items.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"},version_no_value_placeholder:{id:"issue.version.text-no-value",defaultMessage:"Select version"}}),ws=e=>({label:e.value,value:e.id}),Ss=e=>e?e.map(ws):[],Cs=e=>e&&e.map((e=>({id:e.value,value:e.label}))),Is=Object(u.h)({placeholder:{id:"issue.checkbox-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Ts=Ye()((e=>(e=>e&&e.map(ws)||[])(e)));var Ps=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ss,transformToStateValue:Cs,additionalProps:(e,s)=>({options:Ts(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Is.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)})})))(Es),_s=n("./node_modules/react-async-component/commonjs/index.js"),xs=n("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js");const Ds=Object(_s.asyncComponent)({
resolve:()=>n.e("async-cmdb-object-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/cmdb-object/src/ui/main.js")).then((e=>e.CmdbObjectMain)),name:"AsyncIssueCmdbObjectField"}),As=({children:e,packageName:t})=>l.a.createElement(xs.a,{fallback:"flag",id:"issue-cmdb-object-field",packageName:t},e);As.displayName="IssueCmdbObjectFieldBoundary";const Ls=e=>l.a.createElement(As,{packageName:"issue-cmdb-object"},l.a.createElement(Ds,e));Ls.displayName="AsyncIssueCmdbObjectFieldWithBoundary";var Ms=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),Rs=Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:e=>{var n,a;const i=Object(v.q)(t)(e)||{},r=Object(N.y)(e),o=Object(N.x)(e);return{area:s,issueKey:r,issueId:o,projectKey:Object(Ms.a)(r),cmdbFieldConfig:null===(n=i.configuration)||void 0===n?void 0:n.cmdbFieldConfig,wasInsightRequestSuccessful:null===(a=i.configuration)||void 0===a?void 0:a.wasInsightRequestSuccessful}}
})))(Ls),Ns=n("./src/packages/cache/src/services/components/index.js"),Fs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Us=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Vs=n("./src/packages/platform/utils/constants/src/fetch-default-options.js");function Ks(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ws(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ks(Object(s),!0).forEach((function(t){Bs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ks(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}const Hs=5e3,$s="smarts.fields.ranking";var Gs=(e,t,s,n,a,i)=>!t||t.length<=1?Promise.resolve(t):((e,t,s,n,a,i)=>{let r;const o=new Promise((e=>{r=setTimeout((()=>{bt.h.safeWarnWithoutCustomerData($s,"FRS has timeout after 5000ms"),Ft(n,Hs,i,{sessionId:a}),e(t)}),s)})),c=e().then((e=>(r&&clearTimeout(r),e)));return Promise.race([o,c])})((()=>((e,t,s,n,a,i)=>{const r=t.map((e=>({[e.id]:e}))).reduce(((e,t)=>Ws(Ws({},e),t)),{}),{atlassianAccountId:o,cloudId:c,baseUrl:l}=Object(bt.f)(),u=`${l}/gateway/api/fields/v2/recommendations/`,d=Ze.default.now();return Object(Xe.a)(u,Ws(Ws({},Vs.a),{},{method:"POST",body:JSON.stringify({context:{objectId:s,containerId:n,principalId:o,product:"jira",tenantId:c,sessionId:a},fieldId:e,fieldObjects:t.map((({id:e,name:t})=>({id:e,value:t})))})})).then((({fieldObjects:t})=>(Nt(e,d,i,{sessionId:a}),t.map((({id:e})=>r[e]))))).catch((s=>(Ft(e,d,i,{sessionId:a}),
bt.h.safeErrorWithoutCustomerData($s,`error while ranking ${e} via FRS`,s),t)))})(e,t,s,n,a,i)),t,Hs,e,a,i),qs=Object(u.h)({placeholder:{id:"issue.components.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select component"},createNewItem:{id:"issue.components.create-new-component-message",defaultMessage:"Create new component"},recent:{id:"issue.components.recent-items",defaultMessage:"Recent components"},all:{id:"issue.components.all-items",defaultMessage:"All components"}}),zs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js");function Ys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(s),!0).forEach((function(t){Js(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Js(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zs=(e,{baseUrl:t,projectKey:s})=>e.map((e=>{const n=`project = ${Object(zs.b)(s)} AND component = ${Object(zs.b)(e.name)}`;return{href:Object(zs.a)(t,n),content:e.name,value:e.id}})),Xs=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),en=(e=[],t=[],s,n)=>{const a=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter((e=>e.projectKey===s)).map((t=>{const n=e.find((e=>e.id===t.id));if(n){const e=Qs(Qs({},n),{},{projectKey:s});return Ns.a.update(`${t.id}`,e),Qs(Qs({},e),{},{fromCache:!0})}return Qs(Qs({},t),{},{fromCache:!0})})))(e,t,n));return[{heading:s.formatMessage(qs.recent),items:a.map(Xs)},{heading:s.formatMessage(qs.all),items:e.map(Xs)}]
},tn=e=>e.map((e=>({name:e.content,id:e.value,fromCache:e.fromCache||!1})));var sn=n("./node_modules/@atlaskit/icon/glyph/add.js"),nn=n.n(sn),an=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js");function rn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function on(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(s),!0).forEach((function(t){cn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const ln=T.default.div(["display:flex;align-items:center;"]),un=T.default.span(["margin-left:","px;flex-grow:1;"],P.e),dn=T.default.div(["display:flex;align-items:center;color:",";padding:6px 12px;&:hover{background-color:",";}&:active{background-color:",";}"],jt.a.B400,jt.a.N20,jt.a.B75),pn={option:(e,t)=>on(on(on({},e),!0===t.data.__isNew__?on(on({},t.isFocused?{"> .issue-view__select-footer":{"background-color":jt.a.N20}}:{}),{},{position:"sticky",bottom:0,"background-color":`${jt.a.N0} !important`,"border-top":"2px solid rgba(9, 30, 66, 0.13)",padding:0,"padding-top":`${P.e}px`,"padding-bottom":0,overflow:"visible",":after":{content:'""',display:"block",position:"absolute",bottom:"-8px",left:0,width:"100%",height:"8px","background-color":jt.a.N0,"border-bottom-left-radius":P.e/2+"px","border-bottom-right-radius":P.e/2+"px"}}):{}),!0===t.data.isAkSelectOption?{"text-align":"center","padding-top":`${P.e}px`,"padding-bottom":2*P.e+"px"}:{})}
;var mn=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js");class bn extends c.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{const{onChange:s,onConfirm:n}=this.props;s&&s(e,t),n()}}renderEditView(){const{fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isEditing:i,isMulti:r,invalidMessage:o,hasAutocomplete:c,debounceFetchSuggestionsTime:u,allowEmptyValue:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,onChangeMulti:g,footer:h,onFooterSelect:y,shouldShowFooter:O,filterOption:j,formatOptionLabel:v,onDataRequest:E,onDataLoaded:k,components:w,componentsProps:S,initialData:C}=this.props;return l.a.createElement(mn.a,{initialData:C,componentsProps:S,components:w,fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isOpen:i,invalidMessage:o,hasAutocomplete:c,debounceFetchSuggestionsTime:u,isClearable:d,portalElement:p,canCreateNewItem:m,
formatCreateLabel:b,styles:f,autoFocus:!0,onChange:this.onChange,footer:h,onFooterSelect:y,shouldShowFooter:O,onChangeMulti:g,isMulti:r,filterOption:j,formatOptionLabel:v,onDataRequest:E,onDataLoaded:k,optionValuesSafeForAnalytics:this.props.optionValuesSafeForAnalytics})}renderReadView(){const e=this.props.fieldContentWrapper;return dt()(e)?this.props.renderReadView():l.a.createElement(e,null,this.props.renderReadView())}getEditButtonLabel(){const{value:e,label:t,intl:s,noValueText:n,isMulti:a}=this.props;return!0===a&&(null==e||!e.length)||!1===a&&!e?s.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:n,fieldName:t}):!1===a&&null!==e&&void 0!==e.content?s.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:e.content,fieldName:t}):s.formatMessage($.a.editButtonLabel,{fieldName:t})}render(){
const{intl:{formatMessage:e},label:t,fieldId:s,isEditable:n,isEditing:a,isMobile:i,isMulti:r,showPinButton:o,onCancel:c,onEditRequest:u,onConfirm:d,titleView:p=this.props.label}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===o&&l.a.createElement(y.a,{fieldId:s,label:t})),l.a.createElement(h.g,{isEditing:a},l.a.createElement(be.a,{onEscape:c},l.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!r,isEditing:a,onConfirm:d,onCancel:c,onEditRequested:u,isFitContainerWidthReadView:!i,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e($.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e($.a.cancelButtonLabel,{fieldName:t})}))))}}bn.displayName="SelectInlineEditView",bn.displayName="SelectInlineEditView",bn.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,isMulti:!1,hasAutocomplete:!1,label:"",
noValueText:null,allowEmptyValue:!1,debounceFetchSuggestionsTime:0,onChange:f.a};var fn=Object(u.i)(bn);function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function hn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const yn=e=>{const{validate:t,invalidMessage:s,value:n,onChange:a,tagAppearance:i,onDataRequest:r,onDataLoaded:o,customReadView:c}=e,u=hn(e,["validate","invalidMessage","value","onChange","tagAppearance","onDataRequest","onDataLoaded","customReadView"]);return l.a.createElement(fn,gn({},u,{value:n,isMulti:!0,
onChangeMulti:a,invalidMessage:t(n)||s,renderReadView:()=>{const{value:t,noValueText:s,tagAppearance:n,isMobile:a,customReadView:i}=e;return i?i(t):l.a.createElement(hs,{value:t,noValueText:s,tagAppearance:n,shouldHideLinks:a})},onDataRequest:r,onDataLoaded:o}))};yn.displayName="MultiSelectInlineEditView",yn.displayName="MultiSelectInlineEditView",yn.defaultProps={tagAppearance:"default",validate:()=>null,hasAutocomplete:!0,debounceFetchSuggestionsTime:300};var On=yn;function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function vn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class En extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e)))}renderFooter(){const{intl:e}=this.props;return l.a.createElement(dn,{className:"issue-view__select-footer"},l.a.createElement(nn.a,{label:"",size:"small"}),l.a.createElement(un,null,e.formatMessage(qs.createNewItem)))}render(){const e=this.props,{shouldShowFooter:t,baseUrl:s,projectKey:n,intl:a}=e,i=vn(e,["shouldShowFooter","baseUrl","projectKey","intl"]),{data:r,loading:o,error:c}=this.state,u={data:r,loading:o,error:c};return l.a.createElement(On,jn({},i,{styles:pn,
fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:u,shouldShowFooter:t,footer:this.renderFooter(),onFooterSelect:()=>Object(an.a)(`${s}/plugins/servlet/project-config/${n}/administer-components`,!1),allowEmptyValue:!0,optionValuesSafeForAnalytics:!0}))}}function kn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(s),!0).forEach((function(t){Sn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
En.displayName="View";const Cn=Object(a.a)(((e,t,s,n,a)=>((e,t,s,n,a)=>Gs("components",e,t,s,n,a))(e,t,s,n,a))),In=Object(a.a)(((e,t,s,n,a,i)=>(r,o)=>{const c=Cn(t,s,n,o,a);return Promise.all([c,Ns.a.getAll()]).then((([t,s])=>en(t,s,e,i)))}));var Tn=Object(H.a)(((t,s)=>({fieldId:s.fieldId,transformFromStateValue:Zs,transformToStateValue:tn,additionalProps:(e,t)=>({baseUrl:Object(N.f)(e),projectKey:Object(N.D)(e),fetchSuggestions:In(t,Object(v.c)(s.fieldId)(e),Object(N.x)(e),Object(K.C)(e),s.createAnalyticsEvent,Object(N.D)(e)),placeholder:t.formatMessage(qs.placeholder),noValueText:t.formatMessage(ks.noValue),shouldShowFooter:(Object(Us.c)(e)||Object(Us.b)(e))&&!Object(N.s)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:()=>Ns.a.getAll().then((s=>en([],s,t,Object(N.D)(e))))}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},r,o)=>{
const c=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`,l=Object(N.D)(r);return a.forEach((e=>{try{o.createAnalyticsEvent&&Object(Pt.b)(o.createAnalyticsEvent({}),"componentPickerCache set",{isFromCache:e.fromCache}),e.id&&Ns.a.set(`${e.id}`,wn(wn({},e),{},{projectKey:l}))}catch(t){Fs.a.safeErrorWithoutCustomerData("issue-view.components.cache.set",t.message)}})),Object(x.e)(c,{body:JSON.stringify({fields:{[n]:a}})}).catch((t=>{throw a.forEach((t=>{try{o.createAnalyticsEvent&&Object(Pt.b)(o.createAnalyticsEvent({}),"componentPickerCache removed"),t.id&&Ns.a.remove(`${t.id}`)}catch(e){Fs.a.safeErrorWithoutCustomerData("issue-view.components.cache.remove",e.message)}})),t}))})(...t,s)})))(Object(u.i)(En));var Pn=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),_n=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),xn=Object(u.h)({placeholder:{
id:"issue.customer-request-type.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Request Type"}});const Dn=e=>({issueTypeId:e.issueType.toString(),content:e.name,value:e.id,iconUrl:e.iconUrl}),An=e=>e&&(e=>{if(e.errorMessage)return{hasError:!0};if(!e.requestType)return null;const{icon:t,issueTypeId:s,id:n,name:a}=e.requestType;return{issueTypeId:s,content:a,value:n,iconUrl:t._links.iconUrls["48x48"]}})(e),Ln=e=>({requestType:{icon:{_links:{iconUrls:{"48x48":e.iconUrl||""}}},id:e.value,name:e.content,issueTypeId:e.issueTypeId}}),Mn=e=>[{items:e.validRequestTypes.map(Dn)}];var Rn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),Nn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-with-icon/index.js");function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}const Un=e=>()=>{const{value:t,noValueText:s}=e;if(t&&!Array.isArray(t)){const{iconUrl:e,content:s}=t;return void 0!==e?l.a.createElement(Nn.a,{iconUrl:e},s):s}return l.a.createElement(fe.b,null,s)},Vn=e=>l.a.createElement(fn,Fn({},e,{renderReadView:e.renderReadView||Un(e),isMulti:!1}));Vn.displayName="SingleSelectInlineEditView",Vn.displayName="SingleSelectInlineEditView";var Kn=Vn;const Wn=T.default.div(["display:flex;align-items:center;"]),Bn=T.default.span(["margin-left:","px;"],P.e),Hn=T.default.div(["display:flex;padding-left:","px;padding-right:","px;"],.75*P.e,.75*P.e);function $n(){return($n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Gn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(s),!0).forEach((function(t){zn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Yn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Qn=e=>{
if(null!==e&&void 0!==e.iconUrl)return()=>l.a.createElement(Wn,null,l.a.createElement(Hn,null,l.a.createElement(Rn.a,{url:e.iconUrl})),l.a.createElement(Bn,null,e.content))},Jn=e=>{const{issueTypeId:t}=e,s=Yn(e,["issueTypeId"]),{value:n}=e;if(null!==n&&!0===n.hasError)return null;const a=null!==n&&n&&t!==n.issueTypeId?null:s.value,i=qn(qn({},s),{},{value:a});return l.a.createElement(Kn,$n({},i,{renderReadView:Qn(a)}))};Jn.displayName="RequestTypeField";const Zn=(e,t)=>t?`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types?query=`:null,Xn=Object(a.a)((e=>t=>e?Object(Xe.a)(`${e}${t}`).then(Mn):Promise.resolve([]))),ea=({baseUrl:e,value:t},s)=>{const{requestType:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(x.d)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types/`)(e,t),{body:JSON.stringify({rtId:s})})})(e,Object(N.x)(s),n.id)},ta=e=>e&&e.requestType&&e.requestType.id;var sa=Object(H.a)(((e,t)=>({fieldId:t.fieldId,
transformFromStateValue:An,transformToStateValue:Ln,saveField:ea,additionalProps:(e,s)=>({fetchSuggestions:Xn(Zn(Object(N.f)(e),Object(N.x)(e))),isEditable:Object(_n.c)(e),issueTypeId:Object(Pn.f)(e),hasAutocomplete:!0,placeholder:s.formatMessage(xn.placeholder),noValueText:s.formatMessage(ks.noValue),debounceFetchSuggestionsTime:300,analyticsAttributeIdRetriever:ta,showPinButton:Object(I.a)(t.area)})})))(Jn),na=n("./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js"),aa=n("./src/packages/issue/issue-view/src/common/component/date-time/view.js");class ia extends c.Component{renderEditView(){return l.a.createElement(aa.a,{value:this.props.value,onChange:this.props.onChange,timeZone:this.props.timeZone,parseValue:this.props.parseValue})}renderReadView(){const{value:e,formatDateTime:t}=this.props;return e?t(e):l.a.createElement(fe.b,null,this.props.noValueText)}render(){
const{intl:e,isEditable:t,onCancel:s,label:n,value:a,isEditing:i,invalidMessage:r,onConfirm:o,onEditRequest:c,isMobile:u,fieldId:d,showPinButton:p}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,n),!0===p&&l.a.createElement(y.a,{fieldId:d,label:n})),l.a.createElement(h.g,{isEditing:i},l.a.createElement(be.a,{onEscape:s},l.a.createElement(q.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:a,isEditing:i,invalidMessage:r,isInvalid:!!r,onCancel:s,onConfirm:o,onEditRequested:c,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!u,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:n})}))))}}ia.displayName="DateTimeInlineEditFieldView",ia.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",
noValueText:null,value:null,invalidMessage:null,formatDateTime:e=>e,onConfirm:f.a,onCancel:f.a,onEditRequest:f.a};var ra=Object(u.i)(ia);const oa=Object(a.a)(((e,t)=>s=>Object(na.a)(e,s,t)));var ca=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>{const n=Object(K.z)(e);return{noValueText:s.formatMessage(ks.noValue),formatDateTime:oa(s,n),timeZone:n,parseValue:na.b,showPinButton:Object(I.a)(t.area)}}})))(ra),la=n("./src/packages/issue/fields/date-time-custom-field/src/services/use-date-time-field/index.js"),ua=n("./src/packages/issue/fields/date-time-custom-field/src/ui/main.js");const da=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),pa=({fieldId:e,label:t,area:s})=>{const{formatMessage:n}=Object(et.c)(),a=Object(tt.g)(),i=Object(I.a)(s),[{fieldConfig:r}]=Object(la.a)({issueKey:a,fieldKey:e}),o=(null==r?void 0:r.title)||t
;return l.a.createElement(da,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===i&&l.a.createElement(y.a,{fieldId:e,label:o})),l.a.createElement(h.g,null,l.a.createElement(ua.DateTimeField,{isFitContainerWidthReadView:!0,issueKey:a,fieldKey:e,noValueText:n(ks.noValue)})))};pa.displayName="DateTime";var ma=Object(c.memo)(pa);var ba=Object(Le.a)(o.isDateTimeConsistencyMvpEnabled,ma,ca),fa=n("./node_modules/@atlaskit/inline-dialog/dist/es2019/InlineDialog/index.js"),ga=n("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DatePicker.js"),ha=n("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js");class ya extends c.Component{render(){const{autoFocus:e,isDisabled:t,value:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(ga.a,{autoFocus:e,isDisabled:t,value:s||void 0,onChange:this.props.onChange,placeholder:n(ha.a.placeholderDate)})}}ya.displayName="DateFieldView",ya.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1}
;var Oa=Object(u.i)(ya);class ja extends c.Component{renderEditView(){return l.a.createElement(Oa,{value:this.props.value,onChange:this.props.onChange,autoFocus:!0})}renderReadView(){const{value:e,noValueText:t}=this.props;return e||l.a.createElement(fe.b,null,t)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:a,isEditing:i,onConfirm:r,onEditRequest:o,isMobile:c,invalidMessage:u,fieldId:d,showPinButton:p}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,n),!0===p&&l.a.createElement(y.a,{fieldId:d,label:n})),l.a.createElement(h.g,{isEditing:i},l.a.createElement(be.a,{onEnter:r,onEscape:s},l.a.createElement(fa.a,{content:u,isOpen:!!u,placement:"top"},l.a.createElement(q.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:a,isEditing:i,onCancel:s,onConfirm:r,onEditRequested:o,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!c,areActionButtonsHidden:!0,
editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:n})})))))}}ja.displayName="DateInlineEditFieldView",ja.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:"",invalidMessage:null};var va=Object(u.i)(ja);const Ea=e=>e?e.replace(/-/g,"/"):"",ka=e=>e?e.replace(/\//g,"-"):null;var wa=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ea,transformToStateValue:ka,additionalProps:(e,s)=>({noValueText:s.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)})})))(va),Sa=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ea,transformToStateValue:ka,additionalProps:(e,s)=>({noValueText:s.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)})
})))(va),Ca=n("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),Ia=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),Ta=n.n(Ia),Pa=n("./node_modules/@atlaskit/icon/glyph/shortcut.js"),_a=n.n(Pa),xa=n("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),Da=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),Aa=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),La=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),Ma=n("./src/packages/issue/issue-view-layout/src/services/main.js"),Ra=n("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js"),Na=n("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),Fa=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),Ua=n("./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js"),Va=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Ka=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js")
;const Wa=T.default.div(["position:relative;overflow:hidden;display:flex;border-radius:3px;margin-left:-","px;height:","px;width:100%;transition:background-color 0.2s ease-in-out,border-color 0.2s ease-in-out;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}"],P.e,4*P.e,jt.a.N30,jt.a.B100,jt.a.N30),Ba=T.default.div(["overflow:hidden;margin-top:","px;margin-bottom:","px;margin-left:","px;height:24px;width:24px;align-items:center;padding-left:","px;padding-right:","px;"],.5*P.e,.5*P.e,P.e,.25*P.e,.25*P.e),Ha=T.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;line-height:","px;padding-left:","px;"],4*P.e,P.e),$a=T.default.div(["font-weight:600;display:inline;"]),Ga=T.default.div(["color:",";display:flex;align-items:center;margin-right:","px;"],jt.a.N70,P.e),qa=T.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*P.e,4*P.e,jt.a.N20),za=T.default.div(["position:absolute;right:0;margin:","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],P.e/4,P.e,jt.a.N30,jt.a.N60),Ya=Object(T.keyframes)(["0%{right:-28px;}100%{right:0;}"]),Qa=T.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],Ya)
;var Ja=n("./node_modules/lodash/omitBy.js"),Za=n.n(Ja);function Xa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ei(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xa(Object(s),!0).forEach((function(t){ti(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ti(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const si=e=>["click_through","open_panel"].find((t=>t===e))||"open_panel",ni=e=>{const t=Za()(e,(e=>null==e));return void 0===t.workMode?t:ei(ei({},t),{},{workMode:si(t.workMode)})};function ai(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ii(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class oi extends c.Component{constructor(...e){super(...e),this.state={isHovering:!1,update:void 0},this.onGlanceUpdate=(e,t,s)=>{s.addonKey===this.props.appKey&&s.moduleKey===this.props.moduleKey&&this.setState({update:ni(s.data)})},this.getGlanceIcon=()=>this.state.update&&this.state.update.icon?this.state.update.icon:this.props.icon,this.getGlanceWorkMode=()=>this.state.update&&this.state.update.workMode||this.props.workMode,this.eventHandlers={onMouseEnter:()=>this.setState({
isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.handleOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,status:s,onGlanceShowAnalytics:n,onOpenGlancePanel:a,onClickThroughGlancePanel:i}=this.props,r=this.getGlanceWorkMode();"open_panel"===r?(n(Object(Na.d)(e,t,s)),a(e,t)):"click_through"===r&&i(e,t)},this.container=void 0,this.renderStatus=()=>{const e=this.state.update&&this.state.update.status?this.state.update.status:this.props.status;if(!e)return null;const{value:t,type:s}=e;if(t.label)switch(s){case"lozenge":return l.a.createElement(xa.a,{appearance:t.type},t.label);case"icon":return l.a.createElement(Rn.a,{url:Object(Fa.a)(this.props.glance.options.origin,t.label),alt:t.type,width:24,height:24});case"badge":{const e=parseInt(t.label,10);return e>=0?l.a.createElement(Ca.a,{appearance:"default"},e):null}default:return null}return null},this.renderContent=()=>{
if(this.state.update&&this.state.update.content)return l.a.createElement(Ha,null,this.state.update.content);const{label:e,name:t}=this.props;return e.value===t?l.a.createElement(Ha,null,l.a.createElement(u.c,{id:"issue.ecosystem.context.rich-glance-label",defaultMessage:"Open {label}",values:{label:l.a.createElement($a,null,e.value)}})):l.a.createElement(Ha,null,e.value)}}componentDidMount(){Aa.a.addUpdateIssueGlanceListener(this.onGlanceUpdate)}componentWillUnmount(){Aa.a.removeUpdateIssueGlanceListener(this.onGlanceUpdate)}render(){const{name:e,glance:t}=this.props,s=this.getGlanceIcon();return l.a.createElement(h.d,{"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},l.a.createElement(h.b,null,l.a.createElement(h.c,null,e)),l.a.createElement(h.g,null,l.a.createElement(be.a,{onEnter:this.handleOpenGlancePanel},l.a.createElement(Wa,ri({onClick:this.handleOpenGlancePanel,tabIndex:"0"},this.eventHandlers),s&&l.a.createElement(Ba,null,l.a.createElement(Rn.a,{
url:Object(Fa.a)(t.options.origin,s.url),alt:s.alt,width:24,height:24})),this.renderContent(),l.a.createElement(Ga,null,this.renderStatus()),this.state.isHovering&&l.a.createElement(La.a,{mountAnimation:Qa},l.a.createElement(qa,null,l.a.createElement(za,null,"click_through"===this.getGlanceWorkMode()?l.a.createElement(_a.a,{size:"medium",label:""}):l.a.createElement(Ta.a,{size:"medium",label:""}))))))))}}oi.displayName="ConnectGlance",oi.displayName="ConnectGlance",oi.defaultProps={icon:null,openedGlance:null,status:null,workMode:"open_panel",onGlanceShowAnalytics:f.a};const ci=(e,t)=>{Object(Ua.a)("ISSUE_GLANCE_CONTENT_CLICKED",{addon_key:e,key:t})},li=e=>{const[,t]=Object(Ma.c)();return l.a.createElement(oi,ri({},e,{onOpenGlancePanel:(e,s)=>{t({appKey:e,moduleKey:s}),Object(Ua.a)("ISSUE_GLANCE_OPENED",{addon_key:e,key:s})}}))};li.displayName="ConnectGlanceWithIssueLayout";var ui=Object(Ue.a)([Object(Da.a)((e=>({onGlanceShowAnalytics:t=>e("show",function(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(s),!0).forEach((function(t){ii(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ai(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))}))),Object(d.b)(((e,t)=>({openedGlance:Object(Ka.a)(e),glance:Object(Va.l)(t.appKey,t.moduleKey)(e),onClickThroughGlancePanel:ci})),(e=>({onOpenGlancePanel:(t,s)=>{e(Object(Ra.b)(t,s)),Object(Ua.a)("ISSUE_GLANCE_OPENED",{addon_key:t,key:s})}
})))])(li),di=n("./node_modules/redux/es/index.js"),pi=n("./node_modules/prop-types/index.js"),mi=n.n(pi),bi=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field/index.js"),fi=n("./src/packages/forge/forge-ui-analytics/src/ui/custom-field-edit/index.js"),gi=n("./src/packages/forge/forge-ui-async/src/ui/custom-field/async.js"),hi=n("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),yi=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),Oi=n("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),ji=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field-edit/index.js");function vi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ei(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?vi(Object(s),!0).forEach((function(t){ki(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ki(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var wi=(e,t)=>{switch(t.type){case"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION":return Ei(Ei({},e),{},{isEditing:!0,isLoading:!0});case"FORGE_CUSTOM_FIELD_EDIT_RENDERED":return Ei(Ei({},e),{},{isLoading:!1});case"FORGE_CUSTOM_FIELD_EDIT_CANCEL":return Ei(Ei({},e),{},{isEditing:!1});case"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE":return Ei(Ei({},e),{},{isEditing:!1,editValue:t.payload});case"FORGE_CUSTOM_FIELD_EDIT_FAILED":return Ei(Ei({},e),{},{isEditing:!1,isLoading:!1});default:return e}};function Si(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ci(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(s),!0).forEach((function(t){Ii(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Si(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ii(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ti=({extensionData:e,extension:t,source:s,fieldId:n,value:a,viewComponent:i,onConfirm:r,onCancel:o})=>{const[{isEditing:u,isLoading:d,editValue:p},m]=Object(c.useReducer)(wi,{isEditing:!1,isLoading:!1,editValue:a}),b=Object(c.useCallback)((e=>{r(),m((e=>({type:"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE",payload:e}))(e)),Object(ji.b)(s,{displayType:"modal"})}),[r,s]),f=Object(c.useCallback)((()=>{o(),
m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_CANCEL"}))()),Object(ji.c)(s,{displayType:"modal"})}),[o,s]),g=Object(c.useCallback)((()=>{m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_RENDERED"}))())}),[]),h=Object(c.useCallback)((()=>{m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_FAILED"}))())}),[]),y=Object(c.useCallback)((()=>{Object(ji.d)(s,{displayType:"modal"}),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION"}))())}),[s]),O=Object(c.useMemo)((()=>({source:s})),[s]);return l.a.createElement(l.a.Fragment,null,i(y,p,d),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(gi.b,{extension:t,fieldId:n,extensionData:Ci(Ci({},e),{},{fieldValue:p}),analyticsAttributes:O,onConfirm:b,onCancel:f,onRender:g,onError:h}),l.a.createElement(Oi.a,{attributes:O})))},Pi=n("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js")
;const _i=T.default.div(["position:relative;width:100%;"]),xi=T.default.div(["opacity:",";"],(e=>e.isLoading?"0.7":"1.0")),Di=T.default.div(["position:absolute;top:0;right:0;margin-right:","px;"],P.e/2);var Ai=({children:e,isLoading:t})=>l.a.createElement(_i,null,l.a.createElement(xi,{isLoading:t},e),t&&l.a.createElement(Di,null,l.a.createElement(Pi.a,{size:"small"})));const Li=e=>({content:e.name,value:e.name}),Mi=Object(a.a)((e=>t=>Object(Xe.a)(`${e}/rest/api/2/groups/picker?query=${t}`).then((e=>(e=>e&&e.groups?[{items:e.groups.map(Li)}]:[{items:[]}])(e)))));var Ri=Object(u.h)({placeholder:{id:"issue.forge.group.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}});function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Fi(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ui=e=>{let{extension:t,type:s,value:n,customReadView:i,onChange:r,intl:{formatMessage:o}}=e,u=Fi(e,["extension","type","value","customReadView","onChange","intl"]);const d=Object(a.a)((e=>e?{name:String(e.value)}:null)),p=Object(a.a)((e=>e?{value:String(e.name),content:String(e.name)}:null)),m=Object(c.useCallback)((e=>r(d(e))),[d,r]),b=Object(c.useCallback)(dt()(i)?()=>null:()=>i(n),[i,n]),f=dt()(i)?void 0:b;return l.a.createElement(Kn,Ni({},u,{renderReadView:f,value:p(n),placeholder:o(Ri.placeholder),noValueText:o(ks.noValue),onChange:m,hasAutocomplete:!0}))};Ui.displayName="View";var Vi=m()([u.i,Object(d.b)(((e,{fieldId:t})=>({fetchSuggestions:Mi(Object(N.f)(e)),
allowEmptyValue:!Object(v.F)(t)(e)})),{})])(Ui),Ki=Object(u.h)({placeholder:{id:"issue.forge.groups.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});function Wi(){return(Wi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Bi(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Hi=e=>{let{extension:t,type:s,value:n,onChange:i,customReadView:r,intl:{formatMessage:o}}=e,u=Bi(e,["extension","type","value","onChange","customReadView","intl"]);const d=Object(a.a)((e=>e?e.map((e=>({name:String(e.value)
}))):[])),p=Object(a.a)((e=>e?e.map((e=>({value:String(e.name),content:String(e.name)}))):[])),m=Object(c.useCallback)((e=>i(d(e))),[d,i]),b=Object(c.useCallback)(dt()(r)?()=>null:e=>r(d(e)),[r]),f=dt()(r)?void 0:b;return l.a.createElement(On,Wi({},u,{value:p(n),customReadView:f,placeholder:o(Ki.placeholder),noValueText:o(ks.noValue),onChange:m}))};Hi.displayName="View";var $i=m()([u.i,Object(d.b)(((e,{fieldId:t})=>({fetchSuggestions:Mi(Object(N.f)(e)),allowEmptyValue:!Object(v.F)(t)(e)})),{})])(Hi),Gi=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),n("./src/packages/cache/src/services/labels/index.js")),qi=Object(u.h)({label:{id:"issue.labels.label",defaultMessage:"Labels"},placeholder:{id:"issue.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Label"},createNewItem:{id:"issue.labels.create-new-item-message",defaultMessage:"New label"},recent:{id:"issue.labels.recent-items",defaultMessage:"Recent labels"},all:{id:"issue.labels.all-items",
defaultMessage:"All labels"}});const zi=(e,{baseUrl:t,fieldId:s})=>e?e.map((e=>{const n=encodeURIComponent(`${(e=>{const t="customfield_";if(e.startsWith(t))return`cf[${e.substring(t.length,e.length)}]`;return e})(s)} = ${Object(zs.b)(e)}`);return{content:e,value:e,href:`${t}/issues/?jql=${n}`}})):[],Yi=e=>e.map((e=>e.value)),Qi=e=>({content:e.label,value:e.label}),Ji=(e,t=[],s)=>{const n=e.suggestions||[],a=(e=>e.slice(-5).reverse())(t);return[{heading:s(qi.recent),items:a.map(Qi)},{heading:s(qi.all),items:n.map(Qi)}]},Zi=Ye()(((e,t,s,n,a)=>(i,r)=>{if(null==e)return Promise.resolve([]);let o=`${e}${encodeURIComponent(i)}`;null!=r&&(o=`${o}&sessionId=${r}`),null!=s&&(o=`${o}&fieldEditSessionId=${s}`);const c=Ze.default.now(),l=i.length;return Promise.all([Object(Xe.a)(o),Gi.a.getAll()]).then((([e,s])=>("labels"===t&&Nt("labels",c,n,{sessionId:r,queryLength:l}),Ji(e,s,a)))).catch((e=>{throw"labels"===t&&Ft("labels",c,n,{sessionId:r}),e}))}),((e,t)=>`${e}_${t}`)),Xi=Ye()(((e,t)=>(s,n)=>{
if(!s&&null!=e){const{prefetched:s,fieldValuePromise:a,sessionId:i,prefetchSessionId:r}=e,{createAnalyticsEvent:o}=t;if(s&&null!==a&&null!==i){xt(o,r,n||"",i,"labels");const e=Ze.default.now();return Promise.all([a,Gi.a.getAll()]).then((([s,a])=>(Nt("labels",e,o,{sessionId:n,isPrefetched:!0,queryLength:0}),Ji(s,a,t.formatMessage)))).catch((t=>{throw Ft("labels",e,o,{sessionId:n,isPrefetched:!0}),t}))}Dt(o,r,n||"","labels")}return t.fetchSuggestions(s,n)}),((e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`)),er=e=>{if(e.length>55)return l.a.createElement(u.c,{id:"issue.labels-view.input-too-many-labels",defaultMessage:"Can't have more than {max} labels.",values:{max:55}});return e.map((e=>e.content.trim())).some((e=>e.includes(" ")||e.length>255))?l.a.createElement(u.c,{id:"issue.labels-view.input-label-is-invalid",defaultMessage:"Labels can't have spaces or be more than {max} characters.",values:{max:255}}):void 0};function tr(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(s),!0).forEach((function(t){nr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ar(){return(ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ir(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class rr extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=e=>(t,s)=>e(t,s).then((e=>(this.setState({data:e}),e))),this.onEditRequest=()=>{Object(g.c)().cancel({key:C.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onConfirm=()=>{Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onCancel=()=>{
Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}):"remove-value"===t.action?Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING}):"create-option"===t.action&&Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT})}}componentDidMount(){this.props.initFieldOptions(),this.getDataFromCache()}componentDidUpdate(e){
const{isEditing:t,value:s,fieldId:n}=this.props;if("labels"===n){const n=!e.isEditing&&t,a=e.isEditing&&!t;e.isEditing&&t&&(s.length>e.value.length?(Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}),Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})):s.length<e.value.length&&Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING})),a&&(Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM})),n&&Object(g.c)().markTimeToFeedback({key:C.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}}renderMultiSelectInlineEditView(e){const{initFieldOptions:t,issueKey:s,createAnalyticsEvent:n,formatMessage:a}=e,i=ir(e,["initFieldOptions","issueKey","createAnalyticsEvent","formatMessage"]),r="labels"===this.props.fieldId?{onEditRequest:this.onEditRequest,onConfirm:this.onConfirm,
onCancel:this.onCancel,onChange:this.onChange,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded}:{},{data:o,loading:c,error:u}=this.state,d={data:o,loading:c,error:u},p=this.fetchSuggestions(e.fetchSuggestions);return l.a.createElement(or,ar({debounceFetchSuggestionsTime:400,initialData:d},i,{fetchSuggestions:p},r))}renderWithCachedValue(){const{issueKey:e}=this.props,t=Object(at.a)(e,"labels");return l.a.createElement(t,{fieldId:"labels"},(e=>{const t=Xi(e,this.props),s=sr(sr({},this.props),{},{fetchSuggestions:t});return this.renderMultiSelectInlineEditView(s)}))}render(){return"labels"===this.props.fieldId?this.renderWithCachedValue():this.renderMultiSelectInlineEditView(this.props)}}rr.displayName="LabelsView",rr.displayName="LabelsView";const or=e=>{const t=Object(c.useCallback)(Ye()(e.fetchSuggestions,(t=>`${t}_${e.fieldEditSessionId||""}`)),[e.fetchSuggestions,e.fieldEditSessionId,e.invalidMessage]);return l.a.createElement(On,ar({},e,{fetchSuggestions:t}))}
;or.displayName="MemoizedLabels";var cr=rr,lr=Object(u.h)({placeholder:{id:"issue.forge.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select label"},createNewItem:{id:"issue.forge.labels.create-new-item-message",defaultMessage:"{value} (New label)"}});function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function dr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const pr=e=>{const t=e.map((e=>({value:String(e.value),content:e.content,href:e.href||""})));return er(t)||null},mr=e=>{
let{value:t,type:s,extension:n,baseUrl:a,projectKey:i,onChange:r,customReadView:o,fetchSuggestionsArgs:u}=e,d=dr(e,["value","type","extension","baseUrl","projectKey","onChange","customReadView","fetchSuggestionsArgs"]);const{formatMessage:p}=Object(et.c)(),m=Object(c.useCallback)((e=>p(lr.createNewItem,{value:e})),[p]),b=Object(c.useCallback)((e=>{const t=Yi(e.map((e=>({value:String(e.value),content:e.content,href:e.href||""}))));r(t)}),[r]),g=Object(c.useMemo)((()=>{const e={fieldId:d.fieldId,issueKey:d.issueKey,baseUrl:a,projectKey:i};return zi(t,e).map((e=>({value:String(e.value),content:e.content,href:e.href||""})))}),[a,d.fieldId,d.issueKey,i,t]),h=Object(c.useCallback)(dt()(o)?()=>null:()=>o(t),[o]),y=dt()(o)?void 0:h,O=Zi(u.fieldAutoCompleteUrl,u.fieldId,u.fieldEditSessionId,void 0,p);return l.a.createElement(cr,ur({},d,{formatMessage:p,fetchSuggestions:O,placeholder:p(lr.placeholder),noValueText:p(ks.noValue),customReadView:y,canCreateNewItem:!0,allowEmptyValue:!0,validate:pr,
formatCreateLabel:m,value:g,onChange:b,initFieldOptions:f.a}))};mr.displayName="View";var br=Object(d.b)(((e,{fieldId:t})=>({fetchSuggestionsArgs:{fieldAutoCompleteUrl:Object(v.d)(t)(e),fieldId:t,fieldEditSessionId:Object(v.f)(t)(e)},issueKey:Object(N.y)(e),baseUrl:Object(N.f)(e),projectKey:Object(N.D)(e)})),{})(mr),fr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),gr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-valid-email-address.js"),hr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/prefix-url.js"),yr=n("./node_modules/@atlaskit/field-text/FieldTextStateless.js");const Or=(e,t)=>{const{type:s="text",value:n="",placeholder:a="",invalidMessage:i,onChange:r,compact:o=!1}=e;return l.a.createElement(yr.a,{type:s,value:n,placeholder:a,onChange:r,isInvalid:!!i,invalidMessage:i,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",ref:t,compact:o})};Or.displayName="SingleLineTextField",
Or.displayName="SingleLineTextField";var jr=Object(c.forwardRef)(Or);class vr extends c.Component{constructor(e){super(e),this.onChange=e=>{const{type:t}=this.props;let s;"number"===t?""===e.target.value?s=null:(s=Number(e.target.value),this.setState({displayValue:e.target.value})):s=e.target.value,"url"===t&&this.setState({showValidationMessage:!1,invalidMessage:e.target.validationMessage}),this.props.onChange(s)},this.onConfirm=()=>{this.state.invalidMessage?(this.setState({showValidationMessage:!0}),this.editFieldRef.current&&this.editFieldRef.current.focus()):this.props.onConfirm()},this.onCancel=()=>{"url"===this.props.type&&this.setState({showValidationMessage:!1,invalidMessage:null}),this.props.onCancel()},this.editFieldRef=Object(c.createRef)(),this.state={invalidMessage:null,showValidationMessage:!1,displayValue:null}}componentDidUpdate(e){"number"===this.props.type&&this.props.value!==e.value&&(this.state.displayValue=null)}renderReadView(){
const{value:e,noValueText:t,type:s,customReadView:n}=this.props;if(n)return n(e);if(null==e||""===e)return l.a.createElement(fe.b,null,t);const a=((e,t)=>{switch(e){case"number":return l.a.createElement(u.d,{value:t});case"text":return Object(gr.a)(t)?l.a.createElement("a",{href:`mailto:${t}`},t):Number(t)?t:Object(fr.a)(t)?l.a.createElement("a",{href:Object(hr.a)(t,"//"),target:"_blank"},t):t;case"url":return Object(gr.a)(t)?l.a.createElement("a",{href:`mailto:${t}`},t):l.a.createElement("a",{href:Object(hr.a)(t,"//"),target:"_blank"},t);default:return t}})(s,e);return l.a.createElement(fe.a,null,a)}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return dt()(e)?this.renderReadView():l.a.createElement(e,null,this.renderReadView())}renderEditView(){const{value:e,placeholder:t}=this.props,s=null!=e?this.state.displayValue||e.toString():"";return l.a.createElement(jr,{ref:this.editFieldRef,type:this.props.type,value:s,placeholder:t,onChange:this.onChange,
invalidMessage:this.props.invalidMessage||(this.state.showValidationMessage?this.state.invalidMessage:null)})}render(){const{intl:e,label:t,isEditable:s,isEditing:n,onEditRequest:a,isMobile:i,titleView:r=this.props.label,fieldId:o,showPinButton:c}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,r),!0===c&&l.a.createElement(y.a,{fieldId:o,label:t})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(be.a,{onEnter:this.onConfirm,onEscape:this.onCancel},l.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadViewWithContentWrapper(),editView:s?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:n,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:t})}))))}}
vr.displayName="SingleLineTextInlineEditView",vr.displayName="SingleLineTextInlineEditView",vr.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,value:null,noValueText:null,invalidMessage:null,type:"text",label:""};var Er=Object(u.i)(vr);const kr="properties.data passed to readSchemaTypes is null or undefined",wr=({properties:e})=>{if(Object(o.isForgeCustomFieldNewSchemaEnabled)()){if(e.data){const{type:t,collection:s}=e.data;return{fieldType:t,fieldCollection:s}}return{fieldType:e.type,fieldCollection:e.collection}}if(e.data){const{type:t,collection:s}=e.data;return{fieldType:t,fieldCollection:s}}throw Object(bi.b)(kr),new Error(kr)};function Sr(){return(Sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Cr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ir=e=>{switch(e){case"string":return"text";case"number":case"url":return e;default:return"text"}},Tr=e=>{let{extension:t}=e,s=Cr(e,["extension"]);const{fieldType:n}=wr(t);return l.a.createElement(Er,Sr({},s,{noValueText:null,type:Ir(n)}))};Tr.displayName="View";var Pr=Tr;function _r(){return(_r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Dr=e=>e.users?e.users.map(Ut):[],Ar=Object(a.a)((e=>t=>null===e?Promise.resolve([]):Object(Xe.a)(`${e}${t}`).then(Dr))),Lr=Object(a.a)((e=>({avatarUrl:"",name:e.formatMessage(ks.noValue)}))),Mr=e=>{let{isFieldRequired:t,extension:s,type:n,value:a,isFieldInTab:i}=e,r=xr(e,["isFieldRequired","extension","type","value","isFieldInTab"]);const o=i&&(Object(U.a)()||document.body)||void 0;return l.a.createElement(It,_r({},r,{value:Ut(a),emptyOption:t?void 0:Lr(r.intl),portalElement:o,onChange:e=>{r.onChange(Vt(e))}}))};Mr.displayName="View";var Rr=m()([u.i,Object(d.b)(((e,{fieldId:t})=>({isFieldInTab:Object(B.a)(t)(e),fetchSuggestions:Ar(Object(v.d)(t)(e)),isFieldRequired:Object(v.F)(t)(e)})),{})])(Mr),Nr=Object(u.h)({placeholder:{id:"issue.multi-user.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select User"}
}),Fr=n("./src/packages/platform/utils/types/src/general.js");const Ur="24x24",Vr=Object(a.a)((e=>e&&e.map((e=>({displayName:e.content,accountId:e.accountId,id:Object(Fr.a)(String(e.value)),avatarUrls:{[Ur]:String(e.avatarUrl)}}))))),Kr=Object(a.a)((e=>e?e.map((e=>({content:e.displayName,value:String(e.accountId),key:e.accountId,avatarUrl:e.avatarUrls&&e.avatarUrls["24x24"],accountId:e.accountId,elemBefore:l.a.createElement(pt.a,{size:"xsmall",src:e.avatarUrls&&e.avatarUrls["24x24"]})}))):[])),Wr=Object(a.a)((e=>[{items:(e&&e.users||[]).map((e=>({content:e.displayName,value:String(e.accountId),accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]})))}]));function Br(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Br(Object(s),!0).forEach((function(t){$r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Br(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gr=Ye()((e=>t=>e?Object(Xe.a)(`${e}${t}`).then(Wr):Promise.resolve([]))),qr=(Object(a.a)((e=>t=>e?Object(Xe.a)(`${e}${t}`).then(Wr):Promise.resolve([]))),e=>l.a.createElement(ln,null,e.avatarUrl&&l.a.createElement(pt.a,{size:"small",src:e.avatarUrl}),l.a.createElement(un,null,e.label)));qr.displayName="formatOptionLabel";var zr=Object(H.a)(((e,t)=>Hr(Hr({fieldId:t.fieldId},{transformFromStateValue:Kr,transformToStateValue:Vr}),{},{additionalProps:(e,s)=>({fetchSuggestions:Gr(Object(v.d)(t.fieldId)(e)),placeholder:s.formatMessage(Nr.placeholder),noValueText:s.formatMessage(ks.noValue),
tagAppearance:"rounded",showDropdownOnClick:!1,isUserTag:!0,formatOptionLabel:qr,showPinButton:Object(I.a)(t.area)})})))(On);function Yr(){return(Yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Qr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Jr=e=>l.a.createElement(ln,null,dt()(e.avatarUrl)?null:l.a.createElement(pt.a,{size:"small",src:e.avatarUrl}),l.a.createElement(un,null,e.label));Jr.displayName="formatOptionLabel";const Zr=e=>{
let{isFieldRequired:t,extension:s,type:n,value:a,onChange:i,customReadView:r,intl:{formatMessage:o},isFieldInTab:u}=e,d=Qr(e,["isFieldRequired","extension","type","value","onChange","customReadView","intl","isFieldInTab"]);const p=Object(c.useCallback)((e=>i(Vr(e))),[i]),m=Object(c.useCallback)(dt()(r)?()=>null:e=>r(Vr(e)),[r]),b=dt()(r)?void 0:m;return l.a.createElement(On,Yr({},d,{value:Kr(a),customReadView:b,placeholder:o(Nr.placeholder),noValueText:o(ks.noValue),onChange:p,tagAppearance:"rounded",formatOptionLabel:Jr}))};Zr.displayName="View";const Xr={none:{user:Rr,group:Vi,string:Pr,number:Pr},list:{string:br,group:$i,user:m()([u.i,Object(d.b)(((e,{fieldId:t})=>({fetchSuggestions:Gr(Object(v.d)(t)(e))})),{})])(Zr)}};var eo=Object(a.a)(((e,t="none")=>{const s=Xr[t];return s?s[e]:null}));const to=T.default.div(["width:100%;&:focus{outline:none;}"]),so=e=>{switch(e.type){case"user":return"list"===e.collection?(e=>dt()(e)?null:e.map((e=>({accountId:dt()(e.accountId)?e.id:e.accountId
}))))(e.value):(e=>dt()(e)?null:{accountId:dt()(e.accountId)?e.id:e.accountId})(e.value);case"group":return"list"===e.collection?(e=>null==e?null:e.map((e=>e.name)))(e.value):(e=>null==e?null:e.name)(e.value);case"string":case"number":default:return e.value}};function no(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ao(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function io(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(s),!0).forEach((function(t){
ro(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ao(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ro(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oo=(e,t,s,n="none",i)=>Object(a.a)((a=>l.a.createElement(to,null,l.a.createElement(gi.a,{extension:e,extensionData:io(io({},t),{},{fieldValue:so({type:s,collection:n,value:a})}),analyticsAttributes:i})))),co=e=>{let{hasCustomFieldExtensions:t,isFilteredOut:s,extension:n,extensionData:i,fieldId:r,value:o,source:u}=e,d=no(e,["hasCustomFieldExtensions","isFilteredOut","extension","extensionData","fieldId","value","source"]);const p=Object(c.useMemo)((()=>({source:u})),[u]);if(!t||s)return null;if(!n)return Object(bi.a)(u,{error:Error("Forge extension passed to ForgeCustomField component is null or undefined"),fieldId:r,extensionData:i}),null
;const{fieldType:m,fieldCollection:b}=wr(n),f=Object(a.a)(oo)(n,i,m,b,p),g=l.a.createElement(hi.a,{extensionName:d.label,extensionEnvType:n.environmentType}),h=!dt()(n.properties.function),y=io(io({value:o,fieldId:r,extension:n,titleView:g},h?{customReadView:f}:null),d),O=m?eo(m,b):null;if(!O)return Object(bi.a)(u,{error:Error("Forge extension passed to ForgeCustomField type is not supported"),fieldId:r,requestedType:m}),null;if(n.properties.edit){const e=(e,t,s)=>{const n=({children:e})=>l.a.createElement(Ai,{isLoading:s},e);n.propTypes={children:mi.a.node};const a=io(io({},y),{},{onEditRequest:e,value:t},h?{customReadView:e=>l.a.createElement(Ai,{isLoading:s},f(e))}:{fieldContentWrapper:n});return l.a.createElement(O,a)};return l.a.createElement(fi.a,{attributes:p},l.a.createElement(Ti,{fieldId:r,extension:n,source:u,extensionData:i,value:o,onConfirm:y.onConfirm,onCancel:y.onCancel,viewComponent:e}))}return l.a.createElement(O,y)};co.displayName="ForgeCustomField"
;var lo=Object(di.compose)(Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:()=>({showPinButton:Object(I.a)(s)})}))),Object(d.b)(((e,{fieldId:t})=>({hasCustomFieldExtensions:Object(o.isCustomFieldTypesEnabled)()?Object(yi.n)(e):Object(yi.m)(e),isFilteredOut:Object(yi.o)(t)(e),extension:Object(o.isCustomFieldTypesEnabled)()?Object(yi.c)(t)(e):Object(yi.b)(t)(e),extensionData:Object(yi.h)(e),source:Object(N.b)(e)})),{}))(co),uo=n("./src/packages/forge/forge-ui-analytics/src/services/issue-glance/index.js"),po=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js");function mo(){return(mo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class bo extends c.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({
isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.onOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,onOpenGlancePanel:s,source:n}=this.props;Object(uo.a)(n),s(e,t)}}renderStatus(){const{status:e={}}=this.props;switch(e.type){case"lozenge":return l.a.createElement(xa.a,{appearance:e.value.type},e.value.label);case"badge":{const t=parseInt(e.value.label,10);return t>=0?l.a.createElement(Ca.a,{appearance:"default"},t):null}default:return null}}render(){const{title:e,label:t,extension:{environmentType:s},source:n}=this.props;return l.a.createElement(po.a,{attributes:{source:n}},l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,l.a.createElement(hi.a,{extensionName:e,extensionEnvType:s}))),l.a.createElement(h.g,null,l.a.createElement(be.a,{onEnter:this.onOpenGlancePanel},l.a.createElement(Wa,mo({onClick:this.onOpenGlancePanel,tabIndex:"0"
},this.eventHandlers),l.a.createElement(Ha,null,t),l.a.createElement(Ga,null,this.renderStatus()),this.state.isHovering&&l.a.createElement(La.a,{mountAnimation:Qa},l.a.createElement(qa,null,l.a.createElement(za,null,l.a.createElement(Ta.a,{size:"medium",label:""})))))))))}}bo.displayName="ForgeGlance",bo.displayName="ForgeGlance";const fo=e=>{const[,t]=Object(Ma.c)();return l.a.createElement(bo,mo({},e,{onOpenGlancePanel:(e,s)=>{t({appKey:e,moduleKey:s})}}))};fo.displayName="ForgeGlanceWithIssueLayout";var go=Object(Ue.a)([Object(d.b)((e=>({source:Object(N.b)(e)
})),{})])(fo),ho=n("./node_modules/uuid/index.js"),yo=n.n(ho),Oo=n("./src/packages/cache/src/services/epics/index.js"),jo=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),vo=n("./node_modules/lodash/omit.js"),Eo=n.n(vo),ko=n("./node_modules/@atlaskit/checkbox/dist/es2019/CheckboxIcon.js"),wo=n("./node_modules/react-select/dist/chunk-80640036.browser.esm.js"),So=n("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js");const Co=({onVisibilityChange:e})=>{const[t,s]=Object(c.useState)(!1),n=Object(c.useRef)(),a=Object(c.useRef)();return Object(c.useEffect)((()=>{e(t)}),[t,e]),Object(c.useEffect)((()=>{(()=>{if(window.IntersectionObserver&&a.current){const e=e=>{e.forEach((e=>{e.target===a.current&&s(e.isIntersecting)}))},t={root:null,rootMargin:"0px",threshold:0};n.current=new IntersectionObserver(e,t).observe(a.current)}})();const e=a.current;return()=>{var t;null===(t=n.current)||void 0===t||t.unobserve(e)}}),[]),
l.a.createElement("div",{ref:a})};Co.displayName="Intersection";var Io=Co,To=Object(u.h)({checkboxLabel:{id:"issue.views.field.epic.checkbox.label",defaultMessage:"Show done epics"},doneEpicLabel:{id:"issue.views.field.epic.done.label",defaultMessage:"Done"}});const Po=T.default.div(["min-width:","px;"],1.5*P.e),_o=T.default.div(["display:flex;flex-direction:row;justify-content:flex-end;padding:","px ","px;border-bottom:2px solid ",";"],P.e,1.5*P.e,jt.a.N30),xo=T.default.label(["display:flex;flex-direction:row;align-items:center;"]),Do=T.default.div(["display:flex;flex-direction:row;align-items:center;color:",";font-size:12px;margin-top:","px;"],jt.a.N300,P.e/2),Ao=T.default.span(["overflow:hidden;text-overflow:ellipsis;max-width:100%;"]),Lo=e=>{var t,s,n,a,i
;const{createAnalyticsEvent:r}=Object(So.a)(),o=20===(null===(t=e.options[1])||void 0===t||null===(s=t.options)||void 0===s?void 0:s.length),u=null===(n=e.selectProps.componentsProps)||void 0===n?void 0:n.onChange,d=null===(a=e.selectProps.componentsProps)||void 0===a?void 0:a.isChecked,p=Object(c.useCallback)((e=>{if(e&&o){const e=r({});Object(Pt.f)(e,"intersectionComponent viewed","epicLink")}}),[r,o]),m=Object(c.useCallback)((e=>{if(u){u(e);const t=r({});Object(Pt.f)(t,"doneEpics filtered","epicLink",{includeDone:!d})}}),[r,d,u]);return l.a.createElement(wo.z.MenuList,e,l.a.createElement(_o,{onClick:m},l.a.createElement(xo,null,e.intl.formatMessage(To.checkboxLabel),l.a.createElement(ko.a,{isChecked:null===(i=e.selectProps.componentsProps)||void 0===i?void 0:i.isChecked}))),e.children,o&&l.a.createElement(Io,{onVisibilityChange:p}))};Lo.displayName="Menu"
;var Mo=Object(u.i)(Lo),Ro=n("./node_modules/@atlaskit/icon/glyph/editor/done.js"),No=n.n(Ro),Fo=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Uo=T.default.span(["display:flex;flex-direction:column;margin:0 ","px;padding:","px 0;overflow:hidden;flex-grow:1;"],P.e,P.e/4),Vo=T.default.span(["",";flex-grow:1;"],Fo.a),Ko=T.default.span(["display:inline-block;color:",";font-size:12px;margin-top:","px;"],jt.a.N300,P.e/2);var Wo=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js");const Bo=(e,t)=>l.a.createElement(Do,null,null!=e.description?l.a.createElement(Ao,null,e.description):null,!0===e.isDone?l.a.createElement(l.a.Fragment,null,l.a.createElement(No.a,{primaryColor:jt.a.G500}),l.a.createElement("span",null,t)):null);Bo.displayName="renderOptionDescription";const Ho=({option:e})=>{const{formatMessage:t}=Object(et.c)()
;return l.a.createElement(Wo.e,null,null!=e.elemBefore?e.elemBefore:null,l.a.createElement(Uo,null,l.a.createElement(Vo,null,e.label),Bo(e,t(To.doneEpicLabel))))};Ho.displayName="CustomOption";var $o=Ho;function Go(){return(Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const qo=e=>l.a.createElement(ds.a,{color:e,elemBefore:l.a.createElement(Po,null),text:""});qo.displayName="getOptionColorElem";class zo extends c.Component{constructor(...e){super(...e),this.state={includeDoneEpics:!1,query:"",data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.sessionId="default-session-id",this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,!this.state.includeDoneEpics).then((e=>{this.setState({data:e,loading:!1})}))},this.renderReadView=()=>{
const{value:e,noValueText:t,isMobile:s}=this.props;return l.a.createElement(hs,{value:e?[e]:null,noValueText:t,shouldHideLinks:s})},this.fetchSuggestions=(e,t)=>(null!=t&&""!==t&&(this.sessionId=t),this.setState({query:e}),this.props.fetchSuggestions(e,!this.state.includeDoneEpics,this.sessionId).then((e=>(this.setState({data:e}),e)))),this.onChangeIncludeDone=async()=>{const{query:e,includeDoneEpics:t}=this.state;this.setState({includeDoneEpics:!t,loading:!0},(()=>this.fetchSuggestions(e).then((e=>{this.setState({data:e,loading:!1,error:!1})})).catch((()=>{this.setState({data:[],loading:!1,error:!0})}))))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?l.a.createElement($o,{option:e}):e.label}render(){const{data:e,loading:t,error:s}=this.state,n={data:e,loading:t,error:s},a={MenuList:Mo},i={isChecked:this.state.includeDoneEpics,onChange:this.onChangeIncludeDone};return l.a.createElement(Kn,Go({},Eo()(this.props,"getDataFromCache"),{debounceFetchSuggestionsTime:300,initialData:n,
componentsProps:i,fetchSuggestions:this.fetchSuggestions,additionalAnalyticsProps:{isEpicLink:!0},components:a,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}zo.displayName="EpicInlineEditView",zo.displayName="EpicInlineEditView";var Yo=Object(u.h)({placeholder:{id:"issue.epic.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Epic"},recent:{id:"issue.epic.text-for-heading-in-recent-group",defaultMessage:"Recent epics"},allEpics:{id:"issue.epic.text-for-heading-in-all-epics-group",defaultMessage:"All epics"}}),Qo=n("./src/packages/issue/epic-color/src/common/constants.js");const Jo=e=>{const t=e.color?e.color.key:Qo.c[e.colorKey];return t?Qo.b[t]:null},Zo=(e,{baseUrl:t})=>e&&((e,t)=>({content:e.name,value:e.key,isDone:e.done,color:Jo(e),href:`${t}/browse/${e.key}`,fromCache:e.fromCache}))(e,t),Xo=(e,t)=>e.filter((e=>!(t&&e.done)&&e.key&&e.name&&e.color&&e.color.key)).slice(-5).reverse(),ec=(e,t=!1)=>{
const s=Qo.b[e.color.key];return{color:s,content:e.name,value:e.key,id:e.id,description:e.key,elemBefore:qo(s),filterValues:[e.name,e.key],isDone:e.done,fromCache:t}},tc=e=>{if(!e)return null;const t=Object.keys(Qo.b),s=t.find((t=>Qo.b[t]===e.color))||t[0];return{name:e.content,key:e.value,done:e.isDone,id:e.id,color:{key:s},fromCache:e.fromCache}},sc=(e,t,s)=>{const n=(null==e?void 0:e.values)||[],a=((e,t)=>t.map((t=>{const s=e.find((e=>e.key===t.key));return s?(Oo.a.update(t.key,s),s):t})))(n,t);return[{heading:s.formatMessage(Yo.recent),items:a.map((e=>ec(e,!0)))},{heading:s.formatMessage(Yo.allEpics),items:n.map((e=>ec(e,!1)))}]},nc=Object(a.a)(((e,t,s)=>(n,a,i)=>{const r=yo()(),{markTimeToFinishTask:c}=Object(g.c)().markStartOfInteraction({key:C.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r,cancelExisting:!0
}),l=Object(o.isSmartEpicRankingEnabled)()?`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=20&query=${n}&sessionId=${i}&shouldRank=true`:`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=20&query=${n}`,u=Object(Xe.a)(l).then((e=>(c({}),e))).catch((e=>{throw Object(g.c)().cancel({key:C.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r},!0),e}));return Promise.all([u,Oo.a.getAll()]).then((([e,t])=>{const n=Xo(t,a);return sc(e,n,s)}))}));var ac=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Zo,transformToStateValue:tc,additionalProps:(e,s)=>({fetchSuggestions:nc(Object(N.f)(e),Object(N.D)(e),s),placeholder:s.formatMessage(Yo.placeholder),noValueText:s.formatMessage(ks.noValue),allowEmptyValue:!0,getDataFromCache:e=>Oo.a.getAll().then((t=>Xo(t,e))).then((e=>sc(void 0,e,s))),showPinButton:Object(I.a)(t.area)}),
saveField:({baseUrl:e,issueKey:s,fieldMetaKey:n,value:a})=>(t.createAnalyticsEvent&&null!=a&&a.key&&(Object(Pt.b)(t.createAnalyticsEvent({}),"epicPickerCache set",{isFromCache:a.fromCache}),Oo.a.set(a.key,a)),Object(x.e)(Object(jo.e)(e,s),{body:JSON.stringify({fields:{[n]:a?a.key:null}})}).catch((e=>{throw t.createAnalyticsEvent&&null!=a&&a.key&&(Object(Pt.b)(t.createAnalyticsEvent({}),"epicPickerCache removed"),(null==a?void 0:a.key)&&Oo.a.remove(a.key)),e})))})))(zo),ic=Object(u.h)({placeholder:{id:"issue.multi-group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});const rc=e=>e&&Li(e),oc=e=>e&&{name:e.value},cc=e=>e?(e=>e.map((e=>rc(e))))(e):[],lc=e=>e?e.map((e=>oc(e))):[];var uc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:cc,transformToStateValue:lc,additionalProps:(e,s)=>({fetchSuggestions:Mi(Object(N.f)(e)),placeholder:s.formatMessage(ic.placeholder),noValueText:s.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)
})})))(On),dc=Object(u.h)({placeholder:{id:"issue.group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}}),pc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:rc,transformToStateValue:oc,additionalProps:(e,s)=>({fetchSuggestions:Mi(Object(N.f)(e)),placeholder:s.formatMessage(dc.placeholder),noValueText:s.formatMessage(ks.noValue),allowEmptyValue:!Object(v.F)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})})))(Kn),mc=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance/main.js");var bc=Object(Ue.a)([Object(d.b)(((e,t)=>({itemId:t.itemId,isVisible:Object(Us.f)(e),baseUrl:Object(N.f)(e),issueKey:Object(N.y)(e),locale:Object(N.A)(e),issueId:Object(N.x)(e),projectKey:Object(N.D)(e),isAdmin:"admin"===Object(N.I)(e),showPinButton:Object(I.a)(t.area)})),{})])((({isVisible:e=!0,onOpenPanel:t,baseUrl:s,issueKey:n,locale:a,issueId:i,projectKey:r,isAdmin:o,itemId:c,showPinButton:u})=>e&&l.a.createElement(mc.a,{
baseUrl:s,locale:a,issueKey:n,onOpenPanel:t,issueId:i,projectKey:r,isAdmin:o,itemId:c,showPinButton:u}))),fc=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance-panel/main.js"),gc=n("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),hc=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),yc=n("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js");function Oc(){return(Oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const jc=e=>{const[t]=Object(Ma.b)();return l.a.createElement(fc.a,Oc({},e,{isPanelOpen:void 0!==t}))};jc.displayName="KbGlancePanelContainer";var vc=Object(Ue.a)([Object(d.b)((e=>({isEditorOpen:Object(hc.w)(e),isPanelOpen:Object(yc.b)(e)})),{onShareAsComment:gc.b
})])(jc),Ec=n("./node_modules/lodash/get.js"),kc=n.n(Ec),wc=n("./node_modules/lodash/isEqual.js"),Sc=n.n(wc),Cc=n("./src/packages/platform/utils/constants/src/analytics-sources.js"),Ic=n("./src/packages/issue/fields/components/error-flag/src/main.js"),Tc=n("./src/packages/issue/fields/components/inline-edit/src/main.js");var Pc=n("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),_c=n("./src/packages/platform/services/issue/src/model/issue-system-fields.js");var xc=n("./src/packages/issue/fields/labels/src/ui/edit/main.js"),Dc=n("./src/packages/issue/fields/labels/src/ui/edit/utils.js"),Ac=Object(u.h)({errorTitle:{id:"issue-field-labels.error-title",defaultMessage:"We couldn't set the labels value"},errorMessage:{id:"issue-field-labels.error-message",defaultMessage:"Check your connection, then give it another try."},noValueText:{id:"issue-field-labels.no-value-text",defaultMessage:"None"}})
;const Lc=T.default.div(["padding:0;"]),Mc=T.default.div(["padding:0px;& > div > span:first-child{margin-left:0;}"]);var Rc=n("./node_modules/@atlaskit/tag--next/dist/es2019/tag/internal/removable/index.js");const Nc=(e,t)=>`/issues/?jql=${encodeURIComponent(`${(e=>{if(e.startsWith("customfield_"))return`cf[${e.substring("customfield_".length,e.length)}]`;return e})(e)} = ${Object(zs.b)(t)}`)}`,Fc=e=>{const{fieldId:t,placeholder:s,value:n}=e;return us()(n)?l.a.createElement("span",null,s):l.a.createElement(ps.a,null,n.map((e=>l.a.createElement(Rc.a,{key:e,isRemovable:!1,text:e,href:Nc(t,e)}))))};Fc.displayName="LabelsView";var Uc=Fc;function Vc(){return(Vc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Kc(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Wc=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,label:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:u,onUpdate:d,readView:p,editView:m,showPinButton:b,isEditing:f}=e,g=Kc(e,["fieldKey","issueKey","label","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","showPinButton","isEditing"]),h=Object(tt.a)(),{formatMessage:y}=Object(et.c)(),[O,{addToCache:j,removeFromCache:v}]=(()=>{const{createAnalyticsEvent:e}=Object(So.a)(),[t,s]=Object(c.useState)([]),n=Object(c.useCallback)((t=>{t.forEach((async t=>{try{const s=await Gi.a.get(t);Object(Pt.b)(e({}),"labelPickerCache set",{isFromCache:Boolean(null==s?void 0:s.label)}),t&&Gi.a.set(`${t}`,{label:t})}catch(w){
Fs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.set",w.message)}}))}),[e]),a=Object(c.useCallback)((t=>{t.forEach((async t=>{try{const s=await Gi.a.get(t);s&&(Object(Pt.b)(e({}),"labelPickerCache removed"),s&&Gi.a.remove(`${s.label}`))}catch(w){Fs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.remove",w.message)}}))}),[e]);return Object(c.useEffect)((()=>{(async()=>{const e=(e=>e.map((({label:e})=>({label:e,value:e}))))((e=>e.slice(-5).reverse())(await Gi.a.getAll()));s(e)})()}),[]),[t,{addToCache:n,removeFromCache:a}]})(),E=Object(c.useCallback)((e=>{null!==e&&j(e),d&&d(e)}),[j,d]),k=Object(c.useCallback)(((e,t)=>{null!==t&&v(t)}),[v]),[{error:w,fieldConfig:S,value:C},{resetError:I,saveValue:T}]=(e=>{const{fieldKey:t,issueKey:s,onSuccess:n,onFailure:a}=e,[i]=Object(as.a)(s,t),r=kc()(i,"schema.type","array"),[{error:o,value:c},{resetError:l,saveValue:u}]=Object(Pc.a)({fieldType:r,issueKey:s,onSuccess:n,onFailure:a,initialValue:null,fieldKey:t||_c.o});return[{
error:o,value:c,fieldConfig:i},{resetError:l,saveValue:u}]})({fieldKey:t,onSuccess:E,onFailure:k,issueKey:Object(Fr.l)(s)}),[P,_]=Object(c.useState)(f||!1),[x,D]=Object(c.useState)(C),A=kc()(S,"autoCompleteUrl",""),L=kc()(S,"isEditable",!1),M=h&&h.value===Cc.a.MOBILE_ISSUE;Object(c.useEffect)((()=>{w&&_(!0)}),[w]);const R=Object(c.useCallback)((e=>{Sc()(x,C)||T(x,null,e),_(!1),Object(Pt.h)(e)}),[T,x,C]),N=Object(c.useCallback)((e=>{I(),_(!1),D(C),Object(Pt.h)(e)}),[I,C]),F=Object(c.useCallback)((e=>{N(e),a&&a(e)}),[N,a]),U=Object(c.useCallback)((e=>{R(e),o&&o(e)}),[o,R]),V=Object(c.useCallback)((e=>{_(!0),Object(Pt.h)(e),i&&i(e)}),[i]),K=Object(c.useCallback)((e=>{N(e),r&&r(e)}),[N,r]),W=Object(c.useCallback)((e=>{const t=e&&e.length>0?e.map((e=>e.value)):e;I(),D(t)}),[I,D]);return l.a.createElement(l.a.Fragment,null,w&&(()=>w?l.a.createElement(Ic.a,{error:w,title:Ac.errorTitle,description:Ac.errorMessage}):null)(),l.a.createElement(Tc.a,Vc({isEditable:L,isEditing:P,
isFitContainerWidthReadView:!M,label:n,readView:(()=>void 0!==p?p:l.a.createElement(Mc,null,l.a.createElement(Uc,{fieldId:t,placeholder:y(Ac.noValueText),value:C})))(),editView:L?(()=>void 0!==m?m:l.a.createElement(Lc,null,l.a.createElement(xc.a,{autoFocus:!0,spacing:"compact",autoCompleteUrl:A,onChange:W,cachedOptions:O,value:Object(Dc.a)(x)})))():null,onCancel:F,onConfirm:U,onEdit:V,onEscape:K},g)))}));const Bc=Ye()((e=>t=>`${t} (${e.formatMessage(qi.createNewItem)})`)),Hc=Object(u.i)(Object(H.a)(((e,t)=>{const s=Bc(t.intl),n=()=>Gi.a.getAll().then((e=>Ji({},e,t.intl.formatMessage))),a=Object(v.d)(t.fieldId),i=Object(v.f)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:zi,transformToStateValue:Yi,additionalProps:(e,r)=>({fetchSuggestions:Zi(a(e),t.fieldId,i(e),t.createAnalyticsEvent,r.formatMessage),formatMessage:r.formatMessage,placeholder:r.formatMessage(qi.placeholder),noValueText:r.formatMessage(ks.noValue),formatCreateLabel:s,canCreateNewItem:!0,allowEmptyValue:!0,
validate:er,issueKey:Object(N.y)(e),showPinButton:Object(I.a)(t.area),getDataFromCache:n}),saveField:(...e)=>(({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a},i,r)=>{const o=void 0!==a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return n.forEach((e=>{Gi.a.get(e).then((t=>{r.createAnalyticsEvent&&Object(Pt.b)(r.createAnalyticsEvent({}),"labelPickerCache set",{isFromCache:Boolean(null==t?void 0:t.label)}),e&&Gi.a.set(`${e}`,(e=>({label:e}))(e))})).catch((e=>{Fs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.set",e.message)}))})),Object(x.e)(o,{body:JSON.stringify({fields:{[s]:n}})}).catch((e=>{throw n.forEach((e=>{Gi.a.get(e).then((e=>{null!=e&&e.label&&r.createAnalyticsEvent&&(Object(Pt.b)(r.createAnalyticsEvent({}),"labelPickerCache removed"),e&&Gi.a.remove(`${e.label}`))})).catch((e=>{Fs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.remove",e.message)}))})),e}))})(...e,t)}}))(cr)),$c=e=>{
const{area:t,fieldId:s}=e,n=Object(tt.g)(),{formatMessage:a}=Object(et.c)(),i=a(qi.label),r=Object(I.a)(t);return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,i),!0===r&&l.a.createElement(y.a,{fieldId:s,label:i})),l.a.createElement(h.g,null,l.a.createElement(Wc,{fieldKey:s,issueKey:n,label:i,showPinButton:r})))};$c.displayName="ExtractedLabelsField";var Gc=Object(Le.a)(o.isExtractedLabelsFieldEnabled,$c,Hc),qc=n("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/async.js"),zc=e=>l.a.createElement(qc.a,e),Yc=Object(u.h)({placeholder:{id:"issue.multi-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}});const Qc=e=>({value:e.id,content:e.value}),Jc=e=>e?e.map(Qc):[],Zc=e=>e&&e.map((e=>({id:e.value,value:e.content}))),Xc=e=>e&&[{items:e.map(Qc)}]||[],el=Object(a.a)((e=>()=>Promise.resolve(e).then(Xc)));var tl=Object(H.a)(((e,t)=>{const s=Object(v.c)(t.fieldId);return{fieldId:t.fieldId,
transformFromStateValue:Jc,transformToStateValue:Zc,additionalProps:(e,n)=>({fetchSuggestions:el(s(e)),placeholder:n.formatMessage(Yc.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:n.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)})}}))(On),sl=n("./src/packages/issue/fields/number/src/ui/main.js"),nl=n("./src/packages/issue/fields/number/src/services/index.js");const al=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),il=({fieldId:e,label:t,area:s})=>{const{formatMessage:n}=Object(et.c)(),a=Object(tt.g)(),i=Object(I.a)(s),[{value:r,fieldConfig:o}]=Object(nl.a)({issueKey:a,fieldKey:e}),u=(null==o?void 0:o.title)||t,d=Object(c.useCallback)((()=>null===r||""===r?l.a.createElement(fe.b,null,n(ks.noValue)):r.toString()),[n,r]);return l.a.createElement(al,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,u),!0===i&&l.a.createElement(y.a,{fieldId:e,label:u})),l.a.createElement(h.g,null,l.a.createElement(sl.default,{
label:u,issueKey:a,fieldKey:e,noValueText:n(ks.noValue),readView:d(),isFitContainerWidthReadView:!0})))};il.displayName="View";var rl=Object(c.memo)(il),ol=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),cl=n("./src/packages/issue/fields/number/src/ui/async.js");const ll=Object(T.default)(h.g)(["& > div > div > div > div > div > div{width:100%;}"]),ul=Object(X.f)((()=>n.e("async-issue-field-number").then(n.bind(null,"./src/packages/issue/fields/number/src/index.js"))),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),dl=({issueKey:e,fieldId:t,label:s,noValueText:n,onUpdate:a,showPinButton:i})=>{const[{value:r}]=Object(nl.a)({issueKey:e,fieldKey:t}),{formatMessage:o}=Object(et.c)(),c=null===r||""===r?l.a.createElement(fe.b,null,n):l.a.createElement(Ca.a,null,r.toString());return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,s),!0===i&&l.a.createElement(y.a,{fieldId:t,label:s
})),l.a.createElement(ll,null,l.a.createElement(cl.b,{packageName:"issue",fallback:c},l.a.createElement(ul,{label:s,issueKey:e,fieldKey:t,readView:c,isFitContainerWidthReadView:!0,onUpdate:a,editButtonLabel:(()=>o($.a.extendedEditButtonLabel,{inputFieldValue:null!==r?r:n,fieldName:s}))()}))))};dl.displayName="NumberView";var pl=Object(c.memo)(dl),ml=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.y)(e),noValueText:s.formatMessage(ks.noValue),type:"number",showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ol.e)(t.fieldId,s))})})))(pl),bl=n("./node_modules/@atlaskit/icon/glyph/people-group.js"),fl=n.n(bl);var gl=Object(u.h)({placeholder:{id:"issue.organizations.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Organizations"},organizationIconLabel:{id:"issue.organizations.organization-icon-label",defaultMessage:"Organization icon"}});const hl=e=>({value:e.id,content:e.name,
elemBefore:l.a.createElement(fl.a,{label:""})}),yl=e=>e?e.map(hl):[],Ol=e=>e&&e.map((e=>({id:e.value,name:e.content}))),jl=e=>[{items:e.map(hl)}],vl=Object(a.a)((e=>t=>e?Object(Xe.a)(`${e}${t}`).then(jl):Promise.resolve([]))),El=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>((e,t,s,n)=>Object(x.e)(Object(jo.e)(e,t),{body:JSON.stringify({fields:{[s]:n.map((e=>Number(e.id)))}})}))(e,t,s,n),kl=e=>e&&Array.isArray(e)?e.map((e=>e.id)).join(","):e;var wl=Object(H.a)(((e,t)=>{const s=Object(v.d)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:yl,transformToStateValue:Ol,saveField:El,additionalProps:(e,n)=>({tagAppearance:"rounded",formatOptionLabel:e=>l.a.createElement(ln,null,l.a.createElement(fl.a,{label:n.formatMessage(gl.organizationIconLabel)}),l.a.createElement(un,null,e.content)),fetchSuggestions:vl(s(e)),placeholder:n.formatMessage(gl.placeholder),noValueText:n.formatMessage(ks.noValue),analyticsAttributeIdRetriever:kl,showPinButton:Object(I.a)(t.area)})}
}))(On),Sl=n("./src/packages/platform/utils/xsrf-token/src/index.js"),Cl=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),Il=n("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js"),Tl=n("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),Pl=n("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),_l=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),xl=n("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js");const Dl=e=>t=>Object(Tl.a)(e.daysPerWeek,e.hoursPerDay)(t||0),Al=e=>t=>{let s=t.trim();if(Object(xl.a)(s)){const{defaultUnit:t}=e;s=`${s}${Object(Il.a)(t)}`}return s},Ll=e=>t=>{const s=Al(e)(t);return""===s||Object(Pl.a)(s)},Ml=e=>t=>{const s=Al(e)(t);return Ll(e)(s)?Object(_l.a)(e.daysPerWeek,e.hoursPerDay)(s):0};var Rl=Object(u.h)({errorTitle:{
id:"issue-field-original-estimate.error-title",defaultMessage:"We couldn't set the original estimate value"},errorMessage:{id:"issue-field-original-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}}),Nl=n("./node_modules/query-string/index.js");const Fl=({issueKey:e,issueId:t,fieldId:s,timeTrackingValue:n,onSuccess:a,onFailure:i})=>{const[r]=Object(as.a)(e,s),o=(null==r?void 0:r.schema.system)||"",[{value:c,error:l},{saveValue:u,resetError:d}]=Object(Pc.a)({fieldKey:s,issueKey:e,fieldType:o,initialValue:null,saveField:(e,s,a,i)=>(async({issueId:e,newValue:t,baseUrl:s,timeTrackingValue:n})=>{const a=n&&null!=n.remainingEstimateSeconds;return Object(x.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(Nl.stringify)({issueId:e,timetracking_originalestimate:null!==t?t/60+"m":null,timetracking_targetsubfield:a?"timetracking_originalestimate":void 0,
fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(Sl.a)()})})})({issueId:t,newValue:a,baseUrl:i,timeTrackingValue:n}),onSuccess:a,onFailure:i});return[{value:c,error:l,fieldConfig:r},{saveValue:u,resetError:d}]},Ul=T.default.div(["width:","px;cursor:auto;"],8.5*P.e),Vl=({isInvalidInput:e,invalidTimeFormatMessage:t,placeholder:s,value:n,onChange:a})=>l.a.createElement(Ul,null,l.a.createElement(jr,{compact:!0,type:"text",value:n,placeholder:s,onChange:a,invalidMessage:e?t:void 0}));Vl.displayName="OriginalEstimateEdit";var Kl=Vl,Wl=n("./src/packages/issue/fields/original-estimate/src/ui/view/main.js");function Bl(){return(Bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Hl(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var $l=Object(c.memo)((e=>{var t;const{isMobile:s,config:n,editView:a,fieldId:i,issueId:r,issueKey:o,onUpdate:u,placeholder:d,readView:p,timeTrackingValue:m,invalidTimeFormatMessage:b,onCancel:f,onConfirm:g,onEdit:h,onEnter:y,onEscape:O}=e,j=Hl(e,["isMobile","config","editView","fieldId","issueId","issueKey","onUpdate","placeholder","readView","timeTrackingValue","invalidTimeFormatMessage","onCancel","onConfirm","onEdit","onEnter","onEscape"]),[{value:v,error:E,fieldConfig:k},{saveValue:w,resetError:S}]=Fl({fieldId:i,issueId:r&&Object(Fr.j)(r),issueKey:Object(Fr.l)(o),onSuccess:u,timeTrackingValue:m}),[C,I]=Object(c.useState)(!1),[T,P]=Object(c.useState)(null),_=Object(c.useMemo)((()=>Dl(n)(T)),[n,T]),[x,D]=Object(c.useState)(""),[A,L]=Object(c.useState)(!1)
;Object(c.useEffect)((()=>{D(_)}),[_]),Object(c.useEffect)((()=>{P(v)}),[v]),Object(c.useEffect)((()=>{E&&I(!0)}),[E]);const M=null!==(t=null==k?void 0:k.isEditable)&&void 0!==t&&t,R=Object(c.useCallback)((e=>{if(x!==_)if(Ll(n)(x)){const t=Ml(n)(x);w(t,null,e),Object(Pt.h)(e),L(!1),I(!1)}else L(!0),I(!0);else I(!1)}),[x,_,n,w]),N=Object(c.useCallback)((e=>{S(),L(!1),I(!1),D(_),P(v),Object(Pt.h)(e)}),[v,S,_]),F=Object(c.useCallback)((e=>{N(e),null==f||f(e)}),[f,N]),U=Object(c.useCallback)((e=>{R(e),null==g||g(e)}),[R,g]),V=Object(c.useCallback)((e=>{I(!0),Object(Pt.h)(e),null==h||h(e)}),[h]),K=Object(c.useCallback)((e=>{N(e),null==O||O(e)}),[O,N]),W=Object(c.useCallback)((e=>{R(e),null==y||y(e)}),[y,R]),B=Object(c.useCallback)((e=>{const{value:t}=e.target;L(!1),S(),D(t)}),[S,D]),H=Object(c.useCallback)((()=>l.a.createElement(Wl.a,{value:_})),[_]),$=Object(c.useCallback)((()=>l.a.createElement(Kl,{isInvalidInput:A,invalidTimeFormatMessage:b,placeholder:d,value:x,onChange:B
})),[x,b,A,B,d]);return l.a.createElement(l.a.Fragment,null,E&&(()=>E?l.a.createElement(Ic.a,{error:E,title:Rl.errorTitle,description:Rl.errorMessage}):null)(),l.a.createElement(Tc.a,Bl({actionSubject:"originalEstimateInlineEdit",isEditable:M,isEditing:C,readView:H(),editView:M?$():null,onCancel:F,onConfirm:U,onEdit:V,onEscape:K,onEnter:W},j)))}));const Gl=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),ql=({isEditable:e,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:c,timeTrackingValue:u,showPinButton:d,onUpdate:p})=>l.a.createElement(Gl,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===d&&l.a.createElement(y.a,{fieldId:n,label:o})),l.a.createElement(h.g,null,l.a.createElement($l,{isEditable:e,isFitContainerWidthReadView:!0,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:c,timeTrackingValue:u,onUpdate:p})))
;ql.displayName="OriginalEstimate";var zl=Object(c.memo)(ql);const Yl=Object(u.h)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m"}}),Ql=l.a.createElement(u.c,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:l.a.createElement("b",null,"2w 4d 6h 45m")}});var Jl=Object(H.a)(((e,t)=>({fieldId:t.fieldId,isOptimistic:!1,additionalProps:(e,s)=>({config:Object(Cl.h)(e),placeholder:s.formatMessage(Yl.placeholder),issueKey:Object(N.y)(e),issueId:Object(N.x)(e),timeTrackingValue:Object(v.h)("timetracking")(e),isEditable:Object(v.D)(t.fieldId)(e)&&!!Object(Sl.a)(),showPinButton:Object(I.a)(t.area),invalidTimeFormatMessage:Ql}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ol.e)(t.fieldId,s))})
})))(zl),Zl=n("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js"),Xl=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js"),eu=n("./node_modules/lodash/debounce.js"),tu=n.n(eu),su=n("./node_modules/@atlaskit/select/dist/es2019/AsyncSelect.js"),nu=Object(u.h)({menuHeader:{id:"issue.views.field.parent.edit.menuHeader",defaultMessage:"To set an epic as a parent, use the epic link instead."},noMatches:{id:"issue.views.field.parent.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.parent.edit.placeholder",defaultMessage:"Choose a parent to assign this issue to."}});const au=T.default.img(["margin-right:","px;"],P.e),iu=T.default.div(["display:flex;flex-direction:row;overflow:hidden;"]),ru=T.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),ou=T.default.div(["padding:","px ","px ","px;"],P.e,2*P.e,2*P.e),cu=T.default.div(["color:",";"],jt.a.N90);function lu(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function uu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lu(Object(s),!0).forEach((function(t){du(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function du(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pu=Object(u.i)((e=>l.a.createElement(wo.z.MenuList,e,l.a.createElement(ou,null,e.intl.formatMessage(nu.menuHeader)),e.children))),mu=e=>{const t=e.data.data;if(t){const{issueType:s,summary:n,key:a}=t,{iconUrl:i}=s;return l.a.createElement(wo.z.Option,e,l.a.createElement(iu,null,l.a.createElement(au,{src:i
})," ",l.a.createElement(ru,null,a," ",n)))}return null},bu=Object(u.i)((e=>{const{data:t}=e.data,s=t?t.label:l.a.createElement(cu,null,e.intl.formatMessage(nu.placeholder));return l.a.createElement(wo.z.SingleValue,e,s)}));class fu extends c.Component{constructor(...e){super(...e),this.onChange=e=>{const{hasEpicLinkFieldDependency:t,showField:s}=this.props.value,n=null!=e?e.data:null,a=uu(uu({data:n,value:n?n.key:null},{hasEpicLinkFieldDependency:t}),{showField:s});this.props.onChange(a),this.props.onConfirm(a)},this.debouncedLoadOptions=tu()(((e,t)=>{this.props.loadOptions(e).then(t,(()=>{t([])}))}),300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(su.a,{value:e,autoFocus:!0,defaultOptions:!0,components:{MenuList:pu,Option:mu,SingleValue:bu},menuPortalTarget:t,menuPlacement:s,onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e.data,
noOptionsMessage:()=>n(nu.noMatches),cacheOptions:!0})}}fu.displayName="EditableParentLinkField";var gu=Object(u.i)(fu),hu=Object(u.h)({label:{id:"issue.views.field.parent.label",defaultMessage:"Parent link"}}),yu=Object(u.h)({epicLinkExists:{id:"issue.views.field.parent.epic-link-exists-message.epicLinkExists",defaultMessage:"Cannot use parent link when epic link is set."}});const Ou=T.default.div(["color:",";"],jt.a.N90),ju=e=>{const{intl:{formatMessage:t}}=e;return l.a.createElement(Ou,null,t(yu.epicLinkExists))};ju.displayName="EpicLinkExistsMessage";var vu=Object(u.i)(ju);const Eu=T.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;"]),ku=T.default.a(["margin-right:","px;cursor:pointer;"],P.e),wu=T.default.div(["overflow:hidden;text-overflow:ellipsis;"]),Su=T.default.img(["margin-right:","px;"],P.e),Cu=e=>{const{showError:t,value:s,noValueText:n}=e;if(t)return l.a.createElement(vu,null);if(s.data){
const{key:e,summary:t,issueType:{iconUrl:n},url:a}=s.data;return l.a.createElement(Eu,null,l.a.createElement(Su,{src:n}),l.a.createElement(ku,{href:a,target:"_blank"},e),l.a.createElement(wu,null,t))}return l.a.createElement(fe.b,null,n)};Cu.displayName="ParentViewField";var Iu=Cu;class Tu extends c.Component{constructor(...e){super(...e),this.shouldShowError=()=>this.props.hasEpic&&this.props.value.hasEpicLinkFieldDependency}renderEditableField(){const{onChange:e,onConfirm:t,fetchSuggestions:s,value:n,portalElement:a,menuPlacement:i}=this.props;return this.shouldShowError()?null:l.a.createElement("span",null,l.a.createElement(gu,{value:n,loadOptions:s,portalElement:a,menuPlacement:i,onChange:e,onConfirm:t}))}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:o,isEditable:c,fieldId:u,showPinButton:d}=this.props,p=e(hu.label)
;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===d&&l.a.createElement(y.a,{fieldId:u,label:p})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(be.a,{onEscape:i},l.a.createElement(q.a,{isLabelHidden:!0,label:p,readView:l.a.createElement(Iu,{noValueText:s,value:t,showError:this.shouldShowError()}),editView:c?this.renderEditableField():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o}))))}}Tu.displayName="ParentField";var Pu=Object(u.i)(Tu);const _u=e=>e;function xu(){return(xu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Du(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Au=Object(a.a)(((e,t,s,n)=>a=>s?Object(x.d)(`${e}/rest/jpo/1.0/parent/suggest`,{body:JSON.stringify({query:a,projectId:t,issueTypeId:s,maxResults:100})}).then((t=>((e,t,s)=>{if(!e||!e.issues||e.issues.length<=0)return[];const{projects:n}=e,a=e.issueTypes;return e.issues.map((e=>{const i=`${n.filter((t=>t.id===e.projectId))[0].key}-${e.issueKey}`,{iconUrl:r}=a.filter((t=>+t.id===e.issueTypeId))[0];return{data:{key:i,summary:e.issueSummary,value:i,label:`${i} ${e.issueSummary}`,issueType:{id:e.issueTypeId,iconUrl:`${t}${r}`},url:`${t}/browse/${i}`},hasEpicLinkFieldDependency:s.hasEpicLinkFieldDependency,showField:s.showField,value:i}}))})(t,e,n))):[])),Lu=e=>{let{epic:t,isVisible:s,intl:n}=e,a=Du(e,["epic","isVisible","intl"]);if(!s)return null;const i=null!=t;return l.a.createElement(Pu,xu({
hasEpic:i},a))};Lu.displayName="ParentView";var Mu=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:(e,t)=>((e,t)=>((e,t)=>({hasEpicLinkFieldDependency:e.hasEpicLinkFieldDependency,showField:e.showField,value:e.data&&e.data.key?e.data.key:null,data:e.data?{key:e.data.key,value:e.data.key,summary:e.data.summary,url:`${t}/browse/${e.data.key}`,label:`${e.data.key} ${e.data.summary}`,issueType:e.data.issueType?{iconUrl:`${t}${e.data.issueType.iconUrl}`,id:e.data.issueType.id}:e.data.issueType}:null}))(e,t.baseUrl))(e,t),transformToStateValue:_u,additionalProps:(e,s)=>({fetchSuggestions:Au(Object(N.f)(e),Object(K.C)(e),Object(Pn.f)(e),Object(v.n)(t.fieldId)(e)),noValueText:s.formatMessage(ks.noValue),epic:Object(Xl.a)(e),isVisible:Object(Zl.d)(t.fieldId)(e),portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>Object(x.e)(Object(jo.e)(e,t),{
body:JSON.stringify({fields:{[s]:n&&n.data?n.data.key:null}})})})))(Lu);const Ru="24x24",Nu=e=>e.map((e=>({id:Object(Fr.a)(e.id),accountId:Object(Fr.a)(e.id),displayName:e.name,avatarUrls:{[Ru]:e.avatarUrl}}))),Fu=e=>Array.isArray(e)?e.reduce(((e,t)=>{const s=(e=>{if(!e||"object"!=typeof e||!e.accountId||!e.displayName)return null;let t="";return e.avatarUrls&&"object"==typeof e.avatarUrls&&(t=String(e.avatarUrls["24x24"])),{id:String(e.accountId),name:String(e.displayName),type:"user",fixed:!1,avatarUrl:t}})(t);return s?[...e,s]:e}),[]):[];var Uu=n("./src/packages/project-settings/people-field/src/index.js"),Vu=Object(u.h)({placeholderMulti:{id:"issue.people.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Choose people"},placeholderSingle:{id:"issue.people.text-for-edit-view-when-no-value-is-provided-single-mode",defaultMessage:"Choose a person"},singleValueValidationError:{id:"issue.people.single-value-validation-error",
defaultMessage:"You can only add one person to this field"}});const Ku=Object(a.a)((e=>e.map((e=>({value:e.id,content:e.name,elemBefore:l.a.createElement(pt.a,{size:"xsmall",src:e.avatarUrl})}))))),Wu=e=>!e||!1!==e.isMulti;class Bu extends c.Component{isValid(){const{configuration:e,value:t}=this.props;return!Wu(e)&&t.length>1}renderReadView(){const{value:e,intl:t,isMobile:s}=this.props;return l.a.createElement(hs,{value:Ku(e),noValueText:t.formatMessage(ks.noValue),tagAppearance:"rounded",shouldHideLinks:s,isUserTag:!0})}renderEditView(){const{onChange:e,value:t,baseUrl:s,intl:n,configuration:a}=this.props,i=Wu(a)||t.length>1;return l.a.createElement(Uu.a,{baseUrl:s,isMulti:i,autoFocus:!0,isInvalid:this.isValid(),isInputDisabled:this.isValid(),invalidMessage:n.formatMessage(Vu.singleValueValidationError),placeholder:n.formatMessage(i?Vu.placeholderMulti:Vu.placeholderSingle),isDisabled:!1,appearance:"compact",onChange:e,value:t})}render(){
const{label:e,isEditable:t,isEditing:s,isMobile:n,onConfirm:a,onCancel:i,onEditRequest:r,intl:o,value:c,configuration:u,fieldId:d,showPinButton:p}=this.props,m=!Wu(u)&&c.length<=1;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===p&&l.a.createElement(y.a,{fieldId:d,label:e})),l.a.createElement(h.g,{isEditing:s},l.a.createElement(be.a,{onEscape:i},l.a.createElement(q.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:a,onCancel:i,areActionButtonsHidden:m,onEditRequested:r,isFitContainerWidthReadView:!n,editButtonLabel:o.formatMessage($.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:o.formatMessage($.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:o.formatMessage($.a.cancelButtonLabel,{fieldName:e})}))))}}Bu.displayName="People",Bu.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,
label:""};var Hu=Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,transformFromStateValue:Fu,transformToStateValue:Nu,additionalProps:e=>{const n=Object(v.q)(t)(e)||{};return{baseUrl:Object(Fr.b)(Object(N.f)(e)),configuration:n.configuration||{},showPinButton:Object(I.a)(s)}}})))(Object(u.i)(Bu));const $u=e=>({content:e.name,value:e.id,iconUrl:e.iconUrl}),Gu=e=>e&&$u(e),qu=e=>e&&{name:e.content,id:e.value,iconUrl:e.iconUrl},zu=e=>[{items:e.map($u)}];function Yu(){return(Yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Qu=Object(u.h)({placeholder:{id:"issue.priority.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select priority"}}),Ju=Object(a.a)((e=>()=>Promise.resolve(e).then(zu))),Zu=()=>{Object(g.c)().markTimeToFeedback({key:C.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},Xu=()=>{Object(g.c)().markTimeToFinishTask({
key:C.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},ed=e=>{const{isEditing:t,value:s,onChange:n,onEditRequest:a,onConfirm:i,onCancel:r}=e,o=Object(c.useRef)(!1);Object(c.useEffect)((()=>{Object(g.c)().markTimeToFinishTask({key:C.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE})}),[s]),Object(c.useEffect)((()=>{t||Object(g.c)().markTimeToFinishTask({key:C.a.PRIORITY.TIME_TO_RENDER_READ_VIEW})}),[t]);const u=Object(c.useCallback)((e=>{o.current=!0,Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE,cancelExisting:!0}),n(e)}),[n]),d=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS,cancelExisting:!0}),a()}),[a]),p=Object(c.useCallback)((()=>{o.current||Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),o.current=!1,i()}),[i]),m=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),r()
}),[r]);return l.a.createElement(Kn,Yu({},e,{onEditRequest:d,onConfirm:p,onCancel:m,onChange:u,onDataRequest:Zu,onDataLoaded:Xu,renderReadView:Qn(s)}))};ed.displayName="PriorityView";var td=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Gu,transformToStateValue:qu,additionalProps:(e,s)=>({fetchSuggestions:Ju(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Qu.placeholder),noValueText:s.formatMessage(ks.noValue),portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)})})))(ed);const sd=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[a]=Object(as.a)(e,t),i=kc()(a,"schema.type","com.atlassian.jira.plugin.system.customfieldtypes:project"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(Pc.a)({fieldKey:t,issueKey:e,fieldType:i,initialValue:null,onSuccess:s,onFailure:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]}
;var nd=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),ad=n("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),id=n("./node_modules/@atlaskit/select/dist/es2019/Select.js"),rd=n("./src/packages/issue/base-components/base-select/src/ui/format-option-label/index.js");const od=e=>{const[t,s]=Object(c.useState)(!1),{value:n,options:a,onChange:i,onFocus:r,onBlur:o,placeholder:u="",autoFocus:d,isInvalid:p}=e,m=Object(c.useCallback)((e=>{s(!0),r&&r(e)}),[r]),b=Object(c.useCallback)((e=>{s(!1),o&&o(e)}),[o]);return l.a.createElement(id.a,{value:n,options:a,placeholder:u,onChange:i,onFocus:m,onBlur:b,autoFocus:d,formatOptionLabel:rd.a,isClearable:!0,hideSelectedOptions:!0,menuIsOpen:t,spacing:"compact",validationState:!0===p?"error":null})};od.displayName="ProjectEditView";const cd=e=>({label:e.name,value:e.key,iconUrl:e.avatarUrls["48x48"]}),ld=e=>e.map(cd),ud=({label:e,value:t,iconUrl:s})=>({key:t,
name:e,avatarUrls:{"48x48":s}});var dd=Object(u.h)({placeholder:{id:"issue-field-project.placeholder",defaultMessage:"Select project"},errorTitle:{id:"issue-field-project.error-title",defaultMessage:"We couldn't set the project value"},errorMessage:{id:"issue-field-project.error-message",defaultMessage:"Check your connection, then give it another try."}})
;const pd=T.default.div([""," & > div > div > div > div > div > div > div{",";",";}& > div > div > div > div > div > div{",";}"," & > div > div > div > div{width:100%;}"," & > div > div > div > div > div{width:100%;}"],"",(e=>e.isEditing?"":"padding: 0;"),(e=>e.isEditing?"":`height: ${4*P.e}px;`),(e=>e.isEditing?"":"min-height: 0;"),"",""),md=T.default.span(["color:",";"],jt.a.N200),bd=T.default.div(["padding:0px;width:100%;height:","px;display:flex;align-items:center;padding-left:","px;padding-right:","px;"," max-width:","px;"],4*P.e,P.e,P.e,"",25*P.e),fd=T.default.div(["padding-left:","px;padding-right:","px;"],.75*P.e,.75*P.e),gd=T.default.div(["margin-right:","px;display:flex;"],P.e),hd=T.default.div(["& > a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;max-width:100%;}display:inline-flex;min-width:0;margin-right:","px;"],P.e),yd=({value:e,baseUrl:t,noValueText:s})=>{if(null==e)return l.a.createElement(fd,null,l.a.createElement(md,null,s||""))
;const n=e=>{e.stopPropagation()};return l.a.createElement(bd,null,Boolean(e.avatarUrls["48x48"])&&l.a.createElement(gd,null,l.a.createElement(pt.a,{appearance:"square",size:"xsmall",src:e.avatarUrls["48x48"],borderColor:"transparent"})),l.a.createElement(hd,null,l.a.createElement("a",{onClick:n,onKeyPress:n,href:`${t}/projects/${e.key}`},e.name)))};function Od(){return(Od=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function jd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}yd.displayName="ProjectReadView"
;const vd=Object(nd.a)("ProjectPicker",{onChange:"changed"})(Tc.a);var Ed=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,onCancel:n,onEdit:a,onEscape:i,onConfirm:r,onEnter:o,readView:u,editView:d,noValueText:p}=e,m=jd(e,["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","readView","editView","noValueText"]),[b,f]=Object(c.useState)(!1),{formatMessage:g}=Object(et.c)(),h=Object(ad.a)(),[{value:y,error:O,fieldConfig:j},{saveValue:v}]=sd({issueKey:Object(Fr.l)(s),fieldKey:t}),E=(null==j?void 0:j.allowedValues)||[],[k,w]=Object(c.useState)(y),S=!!j&&j.isEditable;Object(c.useEffect)((()=>{O&&f(!0),b||w(y)}),[O,b,y]);const C=Object(c.useCallback)(((e,t)=>{e!==y&&v(e,null,t),f(!1),Object(Pt.h)(t)}),[v,y]),I=Object(c.useCallback)((e=>{f(!1),Object(Pt.h)(e)}),[]),T=Object(c.useCallback)((e=>{I(e),n&&n(e)}),[I,n]),P=Object(c.useCallback)((e=>{f(!0),Object(Pt.h)(e),a&&a(e)}),[a]),_=Object(c.useCallback)((e=>{I(e),i&&i(e)}),[i,I]),x=Object(c.useCallback)(((e,t,s)=>{
w(e?ud(e):e),C(e?ud(e):e,s)}),[C]);return l.a.createElement(pd,{isEditing:b},O&&l.a.createElement(Ic.a,{error:O,title:dd.errorTitle,description:dd.errorMessage}),l.a.createElement(vd,Od({actionSubject:"projectInlineEdit",isEditable:S,isEditing:b,readView:(()=>void 0!==u?u:l.a.createElement(yd,{value:y,baseUrl:h,noValueText:p}))(),editView:S?(()=>void 0!==d?d:l.a.createElement(od,{value:null===k?null:cd(k),autoFocus:!0,options:ld(E),onChange:x,placeholder:g(dd.placeholder),isInvalid:!!O,errorMessage:g(dd.errorMessage)}))():null,onConfirm:T,onEdit:P,onEscape:_,areActionButtonsHidden:!0},m)))}));const kd=Object(T.default)(h.d)([""," & > div > div > div > div > div > div > div > div{padding:0;}"],""),wd=({fieldId:e,area:t,label:s})=>{const{formatMessage:n}=Object(et.c)(),a=Object(tt.g)(),i=Object(I.a)(t),[{fieldConfig:r}]=sd({issueKey:a,fieldKey:e}),o=(null==r?void 0:r.title)||s
;return l.a.createElement(kd,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===i&&l.a.createElement(y.a,{fieldId:e,label:o})),l.a.createElement(h.g,null,l.a.createElement(Ed,{issueKey:a,fieldKey:e,noValueText:n(ks.noValue)})))};wd.displayName="View";var Sd=Object(c.memo)(wd),Cd=n("./node_modules/@atlaskit/select/dist/es2019/RadioSelect.js");class Id extends c.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a,portalElement:i}=this.props;return l.a.createElement(Os.a,{validationState:null!=e?"error":null,validationMessage:e},l.a.createElement(Cd.a,{menuPortalTarget:i,options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0}))}}Id.displayName="RadioFieldView",Id.displayName="RadioFieldView",Id.defaultProps={value:null,options:[],placeholder:null,invalidMessage:null};class Td extends c.Component{constructor(...e){super(...e),this.emptyOption={label:this.props.intl.formatMessage(ks.noValue)}}getOptions(){
const{options:e,value:t}=this.props;return t?[this.emptyOption,...e]:e}renderReadView(){const{value:e,noValueText:t}=this.props;return e?e.label:l.a.createElement(fe.b,null,t)}renderEditView(){return this.props.isEditable?l.a.createElement(Id,{portalElement:this.props.portalElement,value:this.props.value,options:this.getOptions(),onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage}):null}render(){const{label:e,onCancel:t,isEditing:s,onConfirm:n,onEditRequest:a,isMobile:i,fieldId:r,showPinButton:o,intl:c}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===o&&l.a.createElement(y.a,{fieldId:r,label:e})),l.a.createElement(h.g,{isEditing:s},l.a.createElement(be.a,{onEscape:t},l.a.createElement(q.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:t,
onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:c.formatMessage($.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:c.formatMessage($.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:c.formatMessage($.a.cancelButtonLabel,{fieldName:e})}))))}}Td.displayName="RadioInlineEditView",Td.displayName="RadioInlineEditView",Td.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null};var Pd=Object(u.i)(Td);const _d=e=>({label:e.value,value:e.id}),xd=e=>e?_d(e):null,Dd=e=>e&&void 0!==e.value?{id:e.value,value:e.label}:null,Ad=Object(u.h)({placeholder:{id:"issue.radio-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Ld=Ye()((e=>(e=>e&&e.map(_d)||[])(e)));var Md=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:xd,transformToStateValue:Dd,additionalProps:(e,s)=>({portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,
options:Ld(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Ad.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)})})))(Pd);const Rd=({issueKey:e,fieldKey:t})=>{const[s]=Object(as.a)(e,t),[n]=Object(ns.b)({fieldKey:t,issueKey:e});return[{value:n,fieldConfig:s},{}]},Nd=T.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),Fd=({value:e})=>l.a.createElement(Nd,null,e||"\xa0");Fd.displayName="ReadOnlyFieldView";var Ud=({fieldKey:e,readView:t})=>{const s=Object(tt.g)(),[{value:n}]=Rd({issueKey:s,fieldKey:e});return null!=t&&"function"==typeof t?Object(c.createElement)(t,{value:n}):l.a.createElement(Fd,{value:n})};const Vd=Object(T.default)(h.d)(["align-items:center;"]),Kd=({fieldId:e,label:t,area:s})=>{const n=Object(tt.g)(),{formatMessage:a}=Object(et.c)(),[{fieldConfig:i}]=Rd({issueKey:n,fieldKey:e
}),r=(null==i?void 0:i.title)||t,{noValue:o}=ks,u=Object(c.useCallback)((({value:e})=>null==e?l.a.createElement(fe.b,null,a(o)):l.a.createElement(Fd,{value:e})),[a,o]),d=Object(I.a)(s);return l.a.createElement(Vd,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,r),!0===d&&l.a.createElement(y.a,{fieldId:e,label:r})),l.a.createElement(h.g,null,l.a.createElement(Ud,{fieldKey:e,readView:u})))};Kd.displayName="ReadOnlyView";var Wd=Kd;const Bd=Object(a.a)((e=>({avatarUrl:"",name:e,id:null}))),Hd=Object(a.a)((e=>[Bd(e)]));var $d=Object(a.a)(((e,t,s)=>async n=>{if(!e)return[];return[...!s&&((e,t)=>!!e&&!!t&&t.toLowerCase().startsWith(e.toLowerCase()))(n,t)?[Bd(t)]:[],...(await Object(Xe.a)(`${e}${n}`)).map(Ut)]}));const Gd=Object(u.h)({noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous"}});var qd=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ut,transformToStateValue:Vt,additionalProps:(e,s)=>{
const n=Object(v.F)(t.fieldId)(e),a=s.formatMessage(Gd.noReporter);return{portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,fetchSuggestions:$d(Object(v.d)(t.fieldId)(e),a,n),emptyOption:n?void 0:Bd(a),initialOptions:n?void 0:Hd(a),fieldId:"reporter",showPinButton:Object(I.a)(t.area)}}})))(Tt),zd=n("./node_modules/lodash/range.js"),Yd=n.n(zd),Qd=n("./node_modules/@atlaskit/icon/glyph/star.js"),Jd=n.n(Qd),Zd=n("./node_modules/@atlaskit/icon/glyph/star-filled.js"),Xd=n.n(Zd);Object(V.createSelector)(K.f,(e=>e.requestPanelMetadata.channel)),Object(V.createSelector)(K.f,(e=>e.requestPanelMetadata.requestUrl||""))
;const ep=Object(V.createSelector)(K.f,(e=>e.requestPanelMetadata.csatComment||"")),tp=Object(v.e)("com.atlassian.servicedesk:sd-request-feedback-date"),sp=Object(V.createSelector)(tp,(e=>e&&e.renderedValue)),np=T.default.div(["max-width:220px;padding-right:","px;margin-right:-","px;margin-bottom:","px;max-height:240px;overflow:auto;",";"],P.e,2*P.e,P.e,Object(fe.f)("&")),ap=T.default.div(["height:20px;color:#6c798f;",";"],(e=>!e.hasComment&&Object(T.css)(["margin:-","px 0;padding:10px 0;"],2*P.e)));var ip=Object(Ue.a)([Object(d.b)((e=>({feedbackDate:sp(e),comment:ep(e)})),{})])((e=>{const{feedbackDate:t,comment:s}=e;return l.a.createElement(l.a.Fragment,null,s&&l.a.createElement(np,null,s),t&&l.a.createElement(ap,{hasComment:!!s},t))}));P.e;const rp=T.default.div(["margin-top:","px;cursor:pointer;"],.5*P.e);class op extends c.Component{constructor(...e){super(...e),this.state={shouldShowDetails:!1},this.onToggle=()=>this.setState({shouldShowDetails:!this.state.shouldShowDetails}),
this.renderStar=e=>{const t=Yd()(5).map((t=>t<e?l.a.createElement(Xd.a,{label:"",key:t,primaryColor:jt.a.Y300}):l.a.createElement(Jd.a,{label:"",key:t,primaryColor:jt.a.N60})));return l.a.createElement(l.a.Fragment,null,t)}}render(){const{fieldName:e,rating:t,isVisible:s,fieldId:n,showPinButton:a}=this.props;return s&&l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===a&&l.a.createElement(y.a,{fieldId:n,label:e})),l.a.createElement(h.g,null,l.a.createElement(fa.a,{onClose:this.onToggle,content:l.a.createElement(ip,null),isOpen:this.state.shouldShowDetails},l.a.createElement(rp,{onClick:this.onToggle},this.renderStar(t)))))}}op.displayName="RequestFeedback",op.defaultProps={isVisible:!0};const cp=(e,t)=>{const s=Object(v.o)(t)(e);return s&&s.rating};var lp=Object(Ue.a)([Object(d.b)(((e,t)=>({fieldId:t.fieldId,rating:cp(e,t.fieldId),fieldName:Object(v.m)(t.fieldId)(e),isVisible:Object(Zl.e)(t.fieldId)(e),showPinButton:Object(I.a)(t.area)})),{})])(op)
;var up=Object(u.h)({placeholder:{id:"issue.request-language.placeholder",defaultMessage:"Select Request language"},languageUnknown:{id:"issue.request-language.languageUnknown",defaultMessage:"Language unknown"}});const dp=e=>({content:e.displayName,value:e.languageCode}),pp=Object(a.a)((e=>({displayName:e.formatMessage(up.languageUnknown),languageCode:""}))),mp=(e,t,s)=>dp(e||pp(s)),bp=e=>({displayName:e.content,languageCode:e.value.toString()});function fp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const gp=Object(a.a)(((e,t)=>()=>Promise.resolve(((e,t)=>[{items:[pp(t),...e].map(dp)}])(e,t)))),hp=({baseUrl:e,value:t},s)=>{const{languageCode:n}=t;return(async(e,t,s)=>{
if(!t)throw new Error("Issue ID not available");return Object(x.e)(((e,t)=>`${e}/rest/servicedesk/lingo-integration/1/request-language/${t}`)(e,t),{body:JSON.stringify({languageCode:s})})})(e,Object(N.x)(s),n)},yp=e=>e&&e.languageCode;var Op=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:mp,transformToStateValue:bp,saveField:hp,additionalProps:(e,s)=>({fetchSuggestions:gp(Object(v.c)(t.fieldId)(e),s),shouldHide:!Object(Zl.f)(t.fieldId)(e),hasAutocomplete:!0,placeholder:s.formatMessage(up.placeholder),analyticsAttributeIdRetriever:yp,showPinButton:Object(I.a)(t.area)})})))((e=>{const{shouldHide:t}=e,s=fp(e,["shouldHide"]);return t?null:l.a.createElement(Kn,s)})),jp=Object(u.h)({placeholder:{id:"issue.request-participants.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Request Participants"}});const vp="24x24",Ep=e=>e?e.map((e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrls["24x24"],elemBefore:l.a.createElement(pt.a,{
size:"xsmall",src:e.avatarUrls["24x24"]})}))):[],kp=e=>e&&e.map((e=>({displayName:e.content,id:Object(Fr.a)(e.value),accountId:Object(Fr.a)(e.value),avatarUrls:{[vp]:e.avatarUrl}}))),wp=e=>[{items:(e&&e.users||[]).map((e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrl})))}],Sp=Object(a.a)((e=>t=>e?Object(Xe.a)(`${e}${t}`).then(wp):Promise.resolve([]))),Cp=e=>e&&Array.isArray(e)?e.map((e=>e.accountId)).join(","):e,Ip=e=>l.a.createElement(ln,null,e.avatarUrl&&l.a.createElement(pt.a,{size:"small",src:e.avatarUrl}),l.a.createElement(un,null,e.content));Ip.displayName="formatOptionLabel";var Tp=Object(H.a)(((e,t)=>{const s=Object(v.d)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:Ep,transformToStateValue:kp,additionalProps:(e,n)=>({fetchSuggestions:Sp(s(e)),placeholder:n.formatMessage(jp.placeholder),noValueText:n.formatMessage(ks.noValue),tagAppearance:"rounded",analyticsAttributeIdRetriever:Cp,showPinButton:Object(I.a)(t.area),formatOptionLabel:Ip})}
}))(On),Pp=n("./src/packages/platform/ui/error-boundary/src/main.js"),_p=n("./src/packages/servicedesk/incident-management/issue-view/responders/src/ui/responders-glance/index.js");const xp=({isVisible:e=!0,onOpenPanel:t,itemId:s,showPinButton:n})=>l.a.createElement(Pp.a,null,e&&l.a.createElement(_p.a,{onOpenPanel:t,itemId:s,showPinButton:n}));xp.displayName="RespondersGlanceContainer";var Dp=Object(d.b)(((e,t)=>({itemId:t.itemId,isVisible:Object(Us.f)(e),showPinButton:Object(I.a)(t.area)})),{})(xp);var Ap=n("./src/packages/servicedesk/incident-management/issue-view/responders/src/ui/responders-glance-panel/main.js"),Lp=()=>{const[e]=Object(Ma.b)(),[t]=(()=>{const e=Object(tt.g)(),[t]=Object(as.c)(e),[s,n]=Object(c.useState)("");Object(c.useEffect)((()=>{if(null!=t){const e=Object.keys(t).find((e=>"com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype"===t[e].schema.custom));null!=e&&n(e)}}),[t]);const[a]=Object(ns.b)({issueKey:e,fieldKey:s})
;return[a]})(),s=Object(tt.g)(),[{value:n}]=Object(st.a)({issueKey:s});return l.a.createElement(Pp.a,null,l.a.createElement(Ap.a,{responders:t,isPanelOpen:void 0!==e,currentAssignee:n}))},Mp=Object(u.h)({placeholder:{id:"issue.service-entity.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select a service"}});const Rp=e=>encodeURIComponent((e=>e.startsWith("b:")?e:`b:${window.btoa(e)}`)(e)),Np=(e,t,s)=>`${((e,t)=>void 0===t?`${e}/jira/servicedesk/services`:`${e}/jira/servicedesk/projects/${t}/services`)(e,t)}/${Rp(s)}`,Fp=(e,{baseUrl:t,projectKey:s})=>e?e.map((e=>({value:e.id,content:e.name,href:Np(t,s,e.id)}))):[],Up=e=>e.map((e=>({id:String(e.value),name:e.content}))),Vp=(e,t,s)=>e.services.map((e=>({value:e.id,content:e.name,href:Np(t,s,e.id)})));var Kp=n("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js");function Wp(){return(Wp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Bp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Hp=e=>{const{initFieldOptions:t,resolveServiceUrl:s,baseUrl:n,projectKey:a}=e,i=Bp(e,["initFieldOptions","resolveServiceUrl","baseUrl","projectKey"]),[r,o]=Object(c.useState)(!1),[u,d]=Object(c.useState)(null),[p,m]=Object(c.useState)([]),{createAnalyticsEvent:b}=Object(So.a)(),f="jiraIssueView",g="serviceEntityFetch";return Object(c.useEffect)((()=>{t()}),[t]),Object(c.useEffect)((()=>{o(!0);const t=e.value.map((e=>e.value));if(!t||!t.length)return m([]),void o(!1);Object(Xe.a)(s,{method:"POST",
body:JSON.stringify({ids:t})}).then((e=>{o(!1),m(Vp(e,n,a))})).then((()=>{Object(Pt.b)(b({}),`jiraIssueView.${g} succeeded`)}),(e=>{Object(Kp.a)({meta:{id:g,packageName:f},error:e}),d(e),o(!1)}))}),[n,b,a,e.value,s]),l.a.createElement(On,Wp({},i,{value:p}))};Hp.displayName="ServiceEntityView";var $p=Hp;const Gp=Ye()(((e,t,s,n)=>(a,i)=>{if(null==e)return Promise.resolve([]);let r=`${e}${encodeURIComponent(a)}`;return null!=i&&(r=`${r}&sessionId=${i}`),null!=t&&(r=`${r}&fieldEditSessionId=${t}`),Object(Xe.a)(r).then((e=>((e,t,s)=>[{items:Vp(e,t,s)}])(e,s,n)))}),((e,t,s,n)=>`${e||""}_${t}_${s}_${n}`));var qp=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Fp,transformToStateValue:Up,additionalProps:(e,s)=>({baseUrl:Object(N.f)(e),projectKey:Object(N.D)(e),fetchSuggestions:Gp(Object(v.d)(t.fieldId)(e),Object(v.f)(t.fieldId)(e),Object(N.f)(e),Object(N.D)(e)),placeholder:s.formatMessage(Mp.placeholder),noValueText:s.formatMessage(ks.noValue),canCreateNewItem:!1,
allowEmptyValue:!0,resolveServiceUrl:Object(v.d)(t.fieldId)(e),showPinButton:Object(I.a)(t.area),additionalAnalyticsProps:{source:"service-selector"}})})))($p);const zp=Object(_s.asyncComponent)({resolve:()=>n.e("async-services-entity-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/service-entity/src/ui/main.js")).then((e=>e.ServiceEntityMain)),name:"AsyncServiceEntityField"}),Yp=({children:e,packageName:t})=>l.a.createElement(xs.a,{id:"issue-service-entity-field",packageName:t,fallback:"flag"},e);Yp.displayName="IssueServiceEntityFieldBoundary";var Qp=n("./src/packages/servicedesk/insight-common/insight-shared-ui/src/common/types/index.js");const Jp=e=>{const{fieldId:t,area:s}=e,n=Object(tt.i)();return l.a.createElement(Yp,{packageName:"issue-service-entity-field"},l.a.createElement(zp,{area:s,fieldId:Object(Qp.a)(t),projectKey:n}))};Jp.displayName="View";var Zp=Jp,Xp=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({
noValueText:s.formatMessage(ks.noValue),type:"text",showPinButton:Object(I.a)(t.area)})})))(Er);const em=e=>({value:e.id,content:e.value,iconUrl:e.iconUrl}),tm=e=>e&&em(e),sm=e=>e&&{id:e.value,value:e.content,iconUrl:e.iconUrl},nm=e=>e&&[{items:e.map(em)}]||[],am=Object(u.h)({placeholder:{id:"issue.single-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),im=Ye()((e=>()=>Promise.resolve(e).then(nm)));var rm=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:tm,transformToStateValue:sm,additionalProps:(e,s)=>({fetchSuggestions:im(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(am.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(ks.noValue),allowEmptyValue:!0,hasAutocomplete:!0,portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)})})))(Kn),om=n("./src/packages/servicedesk/sla-panel-old/src/index.js")
;const cm=Object(V.createSelector)((e=>e.sla),(e=>e.issueUpdatedTimestamp)),lm=T.default.div(["order:'-1';"]);class um extends c.Component{render(){const{isVisible:e,baseUrl:t,issueKey:s,locale:n,issueUpdatedTimestamp:a}=this.props;return e&&l.a.createElement(lm,{id:"sla-panel"},l.a.createElement(om.a,{baseUrl:t,issueKey:s,locale:n,issueUpdatedTimestamp:a}))}}um.displayName="SlaPanelOld",um.defaultProps={isVisible:!0};var dm=Object(Ue.a)([Object(d.b)((e=>({baseUrl:Object(N.f)(e),issueKey:Object(N.y)(e),locale:Object(N.A)(e),issueUpdatedTimestamp:cm(e),isVisible:Object(Us.f)(e)})),{})])(um),pm=n("./src/packages/cache/src/services/sprints/index.js"),mm=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");const bm=e=>Object(V.createSelector)(Us.h,K.n,Object(v.D)(e),((e,t,s)=>e.canScheduleIssues&&t&&s)),fm=(e,t)=>`${e}/secure/GHGoToBoard.jspa?sprintId=${t}`;var gm=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js")
;const hm=({option:e})=>l.a.createElement(Wo.e,null,null!=e.elemBefore?e.elemBefore:null,l.a.createElement(Uo,null,l.a.createElement(Vo,null,e.label),null!=e.description?l.a.createElement(Ko,null,e.description):null));hm.displayName="RichOptionView";var ym=n("./node_modules/@atlaskit/button--next/dist/es2019/button.js");const Om=T.default.div(["margin-left:","px;"],P.e),jm=T.default.span(["padding:","px;"],P.e/2),vm=T.default.div(["margin-top:","px;display:flex;justify-content:space-between;max-width:300px;"],P.e),Em=T.default.span(["font-weight:500;"]),km=`\n    margin-right: ${3*P.e}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`,wm=T.default.a(["",";"],km),Sm=T.default.span(["",";"],km),Cm=T.default.div(["white-space:nowrap;"]);class Im extends c.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1},this.handleButtonClick=e=>{this.setState({isDialogOpen:!this.state.isDialogOpen}),e.stopPropagation()},this.handleDialogClose=e=>{
this.setState({isDialogOpen:e.isOpen})},this.handleDialogClick=e=>{e.stopPropagation()},this.handleDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.renderInlineDialogContent=()=>l.a.createElement("div",null,l.a.createElement(Em,null,this.props.closedSprintsLabel),this.props.closedSprints.map((e=>l.a.createElement(vm,{key:e.name},this.props.shouldHideLinks?l.a.createElement(Sm,null,e.name):l.a.createElement(wm,{href:e.href},e.name),l.a.createElement(Cm,null,e.endDate)))))}render(){return l.a.createElement(Om,{onClick:this.handleDialogClick,onMouseDown:this.handleDialogMouseDown},l.a.createElement(fa.a,{content:this.renderInlineDialogContent(),isOpen:this.state.isDialogOpen,onClose:this.handleDialogClose,placement:"bottom"},l.a.createElement(ym.a,{onClick:this.handleButtonClick,spacing:"none",isSelected:this.state.isDialogOpen},l.a.createElement(jm,null,`+${this.props.closedSprints.length}`))))}}Im.displayName="ClosedSprintsView",Im.defaultProps={shouldHideLinks:!1,
closedSprints:[],closedSprintsLabel:null};const Tm=T.default.div(["display:flex;align-items:center;width:100%;"]),Pm=T.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function _m(){return(_m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Dm extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t
;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,this.props.intl).then((e=>{this.setState({data:e,loading:!1})}))},this.onSprintClick=e=>{const{rapidViewId:t,value:s,onSprintClicked:n}=this.props;void 0!==t&&s&&n(s.value),e.stopPropagation()},this.onEditRequest=()=>{Object(g.c)().cancel({key:C.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onChange=(e,t)=>{t&&("select-option"===t.action?Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):"clear"===t.action&&Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT})),this.props.onChange(e)},this.onConfirm=()=>{Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onConfirm()},this.onCancel=()=>{Object(g.c)().markStartOfInteraction({
key:C.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onCancel()},this.onDataRequest=({isInitial:e})=>{e||Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT})},this.renderSprintContent=()=>{const{baseUrl:e,rapidViewId:t,value:s}=this.props;return Object(gm.a)()&&"number"==typeof t&&t>0?s&&s.content:l.a.createElement("a",{href:null==t&&s?fm(e,s.value):void 0,onClick:this.onSprintClick},s&&s.content)},this.renderReadView=()=>{const{value:e,noValueText:t,closedSprints:s,closedSprintsLabel:n,isMobile:a}=this.props;return l.a.createElement(Tm,null,l.a.createElement(Pm,null,e?this.renderSprintContent():l.a.createElement(fe.b,null,t)),s.length>0&&l.a.createElement(Im,{closedSprints:s,closedSprintsLabel:n,
shouldHideLinks:a}))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?l.a.createElement(hm,{option:e}):e.label,this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e)))}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;!e.isEditing&&t&&Object(g.c)().markTimeToFeedback({key:C.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}),e.isEditing&&!t&&(e.value!==s?s?Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT}):Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_RENDER_READ_VIEW}))}render(){const e=this.props,{baseUrl:t,closedSprints:s,closedSprintsLabel:n,rapidViewId:a,onSprintClicked:i,intl:r,getDataFromCache:o}=e,c=xm(e,["baseUrl","closedSprints","closedSprintsLabel","rapidViewId","onSprintClicked","intl","getDataFromCache"]),{data:u,loading:d,error:p}=this.state,m={data:u,loading:d,error:p}
;return l.a.createElement(Kn,_m({},c,{fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:m,onEditRequest:this.onEditRequest,onChange:this.onChange,onConfirm:this.onConfirm,onCancel:this.onCancel,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0,optionValuesSafeForAnalytics:!0}))}}Dm.displayName="SprintInlineEditView",Dm.displayName="SprintInlineEditView",Dm.defaultProps={closedSprints:[],closedSprintsLabel:null};const Am=e=>{let{rapidViewId:t}=e,s=xm(e,["rapidViewId"]);const n=Object(tt.j)();return l.a.createElement(Dm,_m({},s,{rapidViewId:n}))};Am.displayName="SprintInlineEditViewWithHooks",Am.defaultProps={closedSprints:[],closedSprintsLabel:null};var Lm=Am,Mm=Object(u.h)({placeholder:{id:"issue.sprint.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Sprint"},activeSprints:{id:"issue.sprint.active-heading",
defaultMessage:"Active"},recentSprints:{id:"issue.sprint.recent-heading",defaultMessage:"Recent sprints"},futureSprints:{id:"issue.sprint.future-heading",defaultMessage:"Future"},closedSprintsLabel:{id:"issue.sprint.text-for-closed-sprints-inline-dialog",defaultMessage:"{count} completed {count, plural, one {sprint} other {sprints}}"}});const Rm=e=>(e?e.find((e=>e.state&&"active"===e.state.toLowerCase())):null)||null;function Nm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(s),!0).forEach((function(t){Um(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e
}function Um(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vm=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Km=e=>{const t=Rm(e),s=(e=>(e?e.find((e=>e.state&&"future"===e.state.toLowerCase())):null)||null)(e);return t&&Vm(t)||s&&Vm(s)},Wm=e=>t=>{if(!t)return e;const s={name:t.content,id:t.value,state:"active",fromCache:t.fromCache||!1};return e.concat(s)},Bm=e=>({content:e.name,value:e.id,description:e.boardName,id:e.id,fromCache:e.fromCache||!1}),Hm=(e,t=[],s)=>{const n=e.suggestions||[],a=e.allMatches||[],i=n.concat(a),r=i.filter((e=>"ACTIVE"===e.stateKey)).map(Bm),o=i.filter((e=>"FUTURE"===e.stateKey)).map(Bm),c=(e=>e.slice(-5).reverse())(((e,t)=>t.map((t=>{const s=e.find((e=>e.id===t.id));return s?(pm.a.update(`${t.id}`,s),Fm(Fm({},s),{},{fromCache:!0})):Fm(Fm({},t),{},{fromCache:!0})})))(i,t)).map(Bm);return[{heading:s.formatMessage(Mm.recentSprints),items:c},{
heading:s.formatMessage(Mm.activeSprints),items:r},{heading:s.formatMessage(Mm.futureSprints),items:o}]},$m=Object(a.a)(((e,t,s)=>({id:s.id,name:s.name,href:fm(t,s.id),endDate:e.formatDate(s.endDate,{day:"2-digit",month:"short",year:"numeric"})}))),Gm=(e,t)=>{const s=e.length;return s>0?t.formatMessage(Mm.closedSprintsLabel,{count:s}):null},qm=Object(a.a)(((e,t)=>(s,n)=>{let a=`${t}/rest/greenhopper/1.0/sprint/picker?query=${s}&maxResults=10&maxActiveSprints=5`;if(Object(o.isSmartSprintRankingEnabled)()){a=`url&sessionId=${""!==n&&null!=n?n:"default-session-id"}&shouldRank=true`}const i=Object(Xe.a)(a);return Promise.all([i,pm.a.getAll()]).then((([t,s])=>Hm(t,s,e)))})),zm=Object(a.a)(((e,t,s)=>((e,t,s)=>e.map((e=>$m(s,t,e))))(e,t,s))),Ym=e=>pm.a.getAll().then((t=>Hm({},t,e)));var Qm=Object(H.a)(((t,s)=>{const n=(e=>Object(V.createSelector)(Object(v.q)(e),(e=>e&&e.value?e.value.filter((e=>"closed"===e.state||"CLOSED"===e.state)):[])))(s.fieldId)(t);return{fieldId:s.fieldId,
transformFromStateValue:Km,transformToStateValue:Wm(n),additionalProps:(e,t)=>({fetchSuggestions:qm(t,Object(N.f)(e)),closedSprints:zm(n,Object(N.f)(e),t),closedSprintsLabel:Gm(n,t),placeholder:t.formatMessage(Mm.placeholder),noValueText:t.formatMessage(ks.noValue),allowEmptyValue:!0,baseUrl:Object(N.f)(e),isEditable:bm(s.fieldId)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:Ym}),additionalCallbacks:e=>({onSprintClicked:t=>e(Object(mm.e)(t))}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a},i,r)=>{const o=Rm(a);return a.forEach((e=>{try{r.createAnalyticsEvent&&Object(Pt.b)(r.createAnalyticsEvent({}),"sprintPickerCache set",{isFromCache:e.fromCache}),e.id&&pm.a.set(`${e.id}`,e)}catch(t){Fs.a.safeErrorWithoutCustomerData("issue-view.sprints.cache.set",t.message)}})),Object(x.e)(Object(jo.e)(t,s),{body:JSON.stringify({fields:{[n]:o?o.id:null}})}).catch((t=>{throw a.forEach((t=>{try{
r.createAnalyticsEvent&&Object(Pt.b)(r.createAnalyticsEvent({}),"sprintPickerCache removed"),t.id&&pm.a.remove(`${t.id}`)}catch(e){Fs.a.safeErrorWithoutCustomerData("issue-view.sprints.cache.remove",e.message)}})),t}))})(...t,s)}}))(Lm),Jm=Object(u.h)({errorTitle:{id:"issue-field-classic-story-point.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-classic-story-point.error-message",defaultMessage:"Check your connection, then give it another try."},negativeNumbersNotAllowed:{id:"issue-field-classic-story-point.negative-numbers-not-allowed",defaultMessage:"Time for some positivity. Story point estimates can't be negative."}});const Zm=({issueKey:e,issueId:t,fieldKey:s,onSuccess:n})=>{const[a]=Object(as.a)(e,s),i=kc()(a,"schema.type","number"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(Pc.a)({fieldKey:s,issueKey:e,fieldType:i,initialValue:null,
saveField:(e,n,a,i)=>(async(e,t,s,n)=>null!==s&&s<0?Promise.reject(new Error(Jm.negativeNumbersNotAllowed.id)):Object(x.d)(`${n}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(Nl.stringify)({[t]:s,issueId:e,skipScreenCheck:!0,atl_token:Object(Sl.a)(),singleFieldEdit:!0})}))(Object(Fr.l)(t.toString()),s,a,i),onSuccess:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]},Xm=T.default.div(["width:","px;cursor:auto;"],8.5*P.e);function eb(){return(eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function tb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var sb=Object(c.memo)((e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,a=tb(e,["isInvalid","type","defaultValue"]),i=null===n?"":n;return l.a.createElement(Xm,null,l.a.createElement(yr.a,eb({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:i},a)))}));const nb=T.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],jt.a.N800,jt.a.N90);var ab=({isEditable:e,noValueText:t,value:s})=>{const n={min:-1*Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER};if(null===s)return l.a.createElement(fe.b,null,t);const a=l.a.createElement(Ca.a,n,s);return e?l.a.createElement(nb,null,a):a};function ib(){return(ib=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
function rb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var ob=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:u,onUpdate:d,readView:p,editView:m,noValueText:b,label:f}=e,g=rb(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","label"]),[{value:h,error:y,fieldConfig:O},{saveValue:j,resetError:v}]=Zm({issueKey:Object(Fr.l)(s),issueId:n&&Object(Fr.j)(n),fieldKey:t,onSuccess:d}),E=kc()(O,"schema.type","number"),[k,w]=Object(c.useState)(!1),[S,C]=Object(c.useState)(h),I=!!O&&O.isEditable,{formatMessage:T}=Object(et.c)()
;Object(c.useEffect)((()=>{y&&w(!0)}),[y]);const P=Object(c.useCallback)((e=>{S!==h&&j(S,null,e),w(!1),Object(Pt.h)(e)}),[j,S,h]),_=Object(c.useCallback)((e=>{v(),w(!1),C(h),Object(Pt.h)(e)}),[v,h]),x=Object(c.useCallback)((e=>{_(e),a&&a(e)}),[a,_]),D=Object(c.useCallback)((e=>{P(e),o&&o(e)}),[o,P]),A=Object(c.useCallback)((e=>{w(!0),Object(Pt.h)(e),i&&i(e)}),[i]),L=Object(c.useCallback)((e=>{_(e),r&&r(e)}),[r,_]),M=Object(c.useCallback)((e=>{P(e),u&&u(e)}),[u,P]),R=Object(c.useCallback)((e=>{v();const t=""===e.target.value?null:Number(e.target.value);C(t)}),[v,C]);return l.a.createElement(l.a.Fragment,null,y&&(()=>{if(!y)return null;const e=y.message===Jm.negativeNumbersNotAllowed.id?Jm.negativeNumbersNotAllowed:Jm.errorMessage;return l.a.createElement(Ic.a,{error:y,title:Jm.errorTitle,description:e})})(),l.a.createElement(Tc.a,ib({editButtonLabel:(()=>T($.a.extendedEditButtonLabel,{inputFieldValue:null!==h?h:b,fieldName:f}))(),actionSubject:"numberInlineEdit",isEditable:I,
isEditing:k,readView:(()=>void 0!==p?p:l.a.createElement(ab,{isEditable:I,value:h,noValueText:b}))(),editView:I?(()=>void 0!==m?m:l.a.createElement(sb,{defaultValue:S,onChange:R,type:E,isInvalid:!!y}))():null,onCancel:x,onConfirm:D,onEdit:A,onEscape:L,onEnter:M},g)))}));const cb=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),lb=({issueKey:e,fieldId:t,showPinButton:s,issueId:n,label:a,noValueText:i,onUpdate:r})=>l.a.createElement(cb,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,a),!0===s&&l.a.createElement(y.a,{fieldId:t,label:a})),l.a.createElement(h.g,null,l.a.createElement(ob,{label:a,issueKey:e,issueId:n,fieldKey:t,noValueText:i,isFitContainerWidthReadView:!0,onUpdate:r})));lb.displayName="View";var ub=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.y)(e),issueId:Object(N.x)(e),noValueText:s.formatMessage(ks.noValue),
isEditable:Object(v.D)(t.fieldId)(e)&&"PREVIEW"!==Object(K.w)(e)&&!!Object(Sl.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ol.e)(t.fieldId,s))})})))(lb),db=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),pb=Object(u.h)({errorTitle:{id:"issue-field-team.error-title",defaultMessage:"We couldn't set the team value"},errorMessage:{id:"issue-field-team.error-message",defaultMessage:"Check your connection, then give it another try."}});const mb=({issueKey:e,fieldKey:t,onSuccess:s})=>{const[n]=Object(as.a)(e,t),a=kc()(n,"schema.type","array"),[{value:i,error:r},{saveValue:o,resetError:c}]=Object(Pc.a)({fieldKey:t,issueKey:e,fieldType:a,initialValue:null,onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]};var bb=n("./node_modules/@atlaskit/user-picker/dist/es2019/components/smart-user-picker/components/index.js");const fb=e=>{
const{fieldId:t,siteId:s,defaultValue:n,isMulti:a=!0,isClearable:i=!0,debounceTime:r=300,onChange:o,placeholder:c}=e;return l.a.createElement(bb.a,{width:"100%",autoFocus:!0,appearance:"compact",debounceTime:r,fieldId:t,includeGroups:!1,includeTeams:!0,includeUsers:!1,isClearable:i,isMulti:a,productKey:"jira",siteId:s,value:n,onChange:o,placeholder:c})};fb.displayName="TeamPickerEdit";var gb=fb,hb=n("./node_modules/@atlaskit/theme/dist/es2019/constants.js");const yb=T.default.div(["display:flex;font-size:","px;height:","em;line-height:",";max-width:100%;padding:0px;"],Object(hb.fontSize)(),2.5*Object(hb.gridSize)()/Object(hb.fontSize)(),2.5*Object(hb.gridSize)()/Object(hb.fontSize)()),Ob=T.default.div(["padding:0px;"]);var jb=e=>{const{defaultValue:t,placeholder:s}=e;return dt()(t)?l.a.createElement(yb,null,s):l.a.createElement(Ob,null,l.a.createElement(ps.a,null,(e=>e.map((e=>l.a.createElement(ds.a,{appearance:"rounded",text:e.name,key:e.id,elemBefore:l.a.createElement(pt.a,{
appearance:"circle",size:"xsmall",src:e.avatarUrl})}))))(t)))};function vb(){return(vb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Eb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var kb=e=>{var t,s
;const{fieldKey:n,issueKey:a,issueId:i,onCancel:r,onEdit:o,onEscape:u,onConfirm:d,onEnter:p,onUpdate:m,readView:b,editView:f,noValueText:g="DEFAULT PLACEHOLDER MESSAGE",useTeamField:h=mb}=e,y=Eb(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","useTeamField"]),O=Object(db.c)().cloudId,[{value:j,error:v,fieldConfig:E},{saveValue:k,resetError:w}]=h({issueKey:Object(Fr.l)(a),fieldKey:n,onSuccess:m}),[S,C]=Object(c.useState)(!1),[I,T]=Object(c.useState)(j),P=null!==(t=null==E?void 0:E.isEditable)&&void 0!==t&&t,_=(null!==(s=kc()(E,"schema.configuration"))&&void 0!==s?s:[]).reduce(((e,t)=>(e[t.key]=t.value,e)),{}),x="false"!==(null==_?void 0:_.isMulti);Object(c.useEffect)((()=>{v&&C(!0)}),[v]);const D=Object(c.useCallback)((e=>{Sc()(I,j)||k(I,null,e),C(!1),Object(Pt.h)(e)}),[k,I,j]),A=Object(c.useCallback)((e=>{w(),C(!1),T(j),Object(Pt.h)(e)}),[w,j]),L=Object(c.useCallback)((e=>{A(e),r&&r(e)
}),[A,r]),M=Object(c.useCallback)((e=>{D(e),d&&d(e)}),[d,D]),R=Object(c.useCallback)((e=>{C(!0),Object(Pt.h)(e),o&&o(e)}),[o]),N=Object(c.useCallback)((e=>{A(e),u&&u(e)}),[A,u]),F=Object(c.useCallback)((e=>{D(e),p&&p(e)}),[p,D]),U=Object(c.useCallback)((e=>{w(),T(Array.isArray(e)?e:[e])}),[w,T]);return l.a.createElement(l.a.Fragment,null,v&&(()=>v?l.a.createElement(Ic.a,{error:v,title:pb.errorTitle,description:pb.errorMessage}):null)(),l.a.createElement(Tc.a,vb({areActionButtonsHidden:!x,shouldConfirmOnEnter:!x,actionSubject:"teamInlineEdit",isEditable:P,isEditing:S,readView:(()=>void 0!==b?b:l.a.createElement(jb,{defaultValue:I,placeholder:g}))(),editView:P?(()=>void 0!==f?f:l.a.createElement(gb,{defaultValue:I,fieldId:n,siteId:O,onChange:U,placeholder:g,isMulti:x}))():null,onCancel:L,onConfirm:M,onEdit:R,onEscape:N,onEnter:F},y)))};const wb=e=>{const{label:t,issueKey:s,fieldId:n,issueId:a,onUpdate:i,noValueText:r,showPinButton:o}=e
;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===o&&l.a.createElement(y.a,{fieldId:n,label:t})),l.a.createElement(h.g,null,l.a.createElement(kb,{label:t,issueKey:s,issueId:a,fieldKey:n,onUpdate:i,noValueText:r,isFitContainerWidthReadView:!0})))};wb.displayName="View";var Sb=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.y)(e),issueId:Object(N.x)(e),noValueText:s.formatMessage(ks.noValue),isEditable:Object(v.D)(t.fieldId)(e)&&"PREVIEW"!==Object(K.w)(e)&&!!Object(Sl.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(ol.e)(t.fieldId,s))})})))(wb),Cb=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");var Ib=Object(u.h)({menuHeader:{id:"issue.views.field.team.edit.menuHeader",defaultMessage:"Plan-specific teams can only be selected through a plan."},noMatches:{id:"issue.views.field.team.edit.noMatches",defaultMessage:"No Matches"},placeholder:{
id:"issue.views.field.team.edit.placeholder",defaultMessage:"Choose a team to assign this issue to."},sharedTeam:{id:"issue.context-items.team.shared-team",defaultMessage:"Shared Team"},menuFooter:{id:"issue.context-items.team.edit.menuFooter",defaultMessage:"Showing 100 results. To display more results, please refine your search."}});const Tb=T.default.img(["width:","px;height:","px;margin-right:","px;"],2*P.e,2*P.e,P.e),Pb=T.default.div(["display:flex;flex-direction:row;overflow:hidden;align-items:center;justify-content:start;padding:0 ","px;"],P.e/2),_b=T.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),xb=T.default.div(["padding:","px ","px ","px;"],P.e,2*P.e,2*P.e),Db=T.default.div(["padding:0 ","px ","px ","px;color:",";font-weight:bold;font-size:12px;"],2*P.e,P.e,2*P.e,jt.a.DN30),Ab=T.default.div(["color:",";font-size:12px;padding:","px ","px;"],jt.a.N90,P.e,2*P.e),Lb=e=>{
const{intl:{formatMessage:t},options:s}=e,n=s.length>0&&s[0].moreResultsAvailable?l.a.createElement(Ab,null,t(Ib.menuFooter)):null;return l.a.createElement(wo.z.MenuList,e,l.a.createElement(xb,null,t(Ib.menuHeader)),e.children,n)};Lb.displayName="MenuListComponent";var Mb=Object(u.i)(Lb),Rb=n("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),Nb=n.n(Rb);var Fb=e=>{const t=e.data;if(t){const{avatarUrl:s}=t;return l.a.createElement(wo.z.Option,e,l.a.createElement(Pb,null,l.a.createElement(Tb,{src:s||Nb.a})," ",l.a.createElement(_b,null,e.children)))}return null};const Ub=e=>{const{data:t,intl:{formatMessage:s}}=e,n=t?t.label:l.a.createElement(fe.b,null,s(Ib.placeholder));return l.a.createElement(wo.z.SingleValue,e,n)};Ub.displayName="SingleValueComponent";var Vb=Object(u.i)(Ub);const Kb=e=>l.a.createElement(Mb,e);Kb.displayName="MenuList";const Wb=e=>l.a.createElement(Vb,e);Wb.displayName="SingleValue";const Bb=e=>l.a.createElement(Fb,e)
;Bb.displayName="Option";const Hb=Object(u.i)((e=>l.a.createElement(Db,null,e.intl.formatMessage(Ib.sharedTeam))));class $b extends c.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e),this.props.onConfirm(e)},this.debouncedLoadOptions=tu()(((e,t)=>{this.props.loadOptions(e).then(t,(()=>{t([])}))}),300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(su.a,{value:e,autoFocus:!0,defaultOptions:!0,menuPortalTarget:t,menuPlacement:s,components:{MenuList:Kb,Option:Bb,SingleValue:Wb,GroupHeading:Hb},onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e,noOptionsMessage:()=>n(Ib.noMatches),placeholder:n(Ib.placeholder),cacheOptions:!0})}}$b.displayName="EditableTeamField";var Gb=Object(u.i)($b),qb=Object(u.h)({label:{id:"issue.views.field.team.label",defaultMessage:"Team"}}),zb=n("./node_modules/@atlaskit/icon/glyph/share.js"),Yb=n.n(zb)
;const Qb=T.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;align-items:center;justify-content:start;"]),Jb=T.default.div(["overflow:hidden;text-overflow:ellipsis;margin-right:","px;display:inline-block;"],P.e),Zb=T.default.img(["vertical-align:middle;width:","px;height:","px;margin-right:","px;display:inline-block;"],3*P.e,3*P.e,P.e),Xb=T.default.span(["width:","px;height:","px;color:",";"],2*P.e,2*P.e,jt.a.R500),ef=e=>{const{value:t,noValueText:s}=e;if(t){const{label:e,isShared:s,avatarUrl:n}=t,a=s?l.a.createElement(Xb,null,l.a.createElement(Yb.a,{label:"",size:"small"})):null;return l.a.createElement(Qb,null,l.a.createElement(Zb,{src:n||Nb.a}),l.a.createElement(Jb,null,e),a)}return l.a.createElement(fe.b,null,s)};ef.displayName="TeamViewField";var tf=ef;class sf extends c.Component{renderEditableField(){const{isEditable:e,isSubTask:t,fetchSuggestions:s,onChange:n,onConfirm:a,value:i,portalElement:r,menuPlacement:o}=this.props
;return e&&!t?l.a.createElement("span",null,l.a.createElement(Gb,{value:i,loadOptions:s,portalElement:r,menuPlacement:o,onChange:n,onConfirm:a})):null}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:o,fieldId:c,showPinButton:u}=this.props,d=e(qb.label);return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,d),!0===u&&l.a.createElement(y.a,{fieldId:c,label:d})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(be.a,{onEscape:i},l.a.createElement(q.a,{isLabelHidden:!0,label:d,readView:l.a.createElement(tf,{noValueText:s,value:t}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o}))))}}sf.displayName="TeamField";var nf=Object(u.i)(sf);const af=(e,t)=>e?((e,t)=>({value:e.id,label:e.title,isShared:e.isShared,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""
}))(e,t.baseUrl):null,rf=e=>e?(e=>({id:e.value,title:e.label,isShared:e.isShared,avatarUrl:e.avatarUrl?e.avatarUrl:""}))(e):null,of=Object(a.a)((e=>t=>Object(x.d)(`${e}/rest/teams/1.0/teams/find`,{body:JSON.stringify({query:t,excludedIds:[],maxResults:100})}).then((t=>((e,t)=>[{options:e.teams.map((e=>({value:e.id,label:e.title,isShared:e.shareable,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""}))),moreResultsAvailable:e.moreResultsAvailable}])(t,e))))),cf=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>{const a=n&&n.id?n.id.toString():null;return Object(x.e)(Object(jo.e)(e,t),{body:JSON.stringify({fields:{[s]:a}})})};var lf=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:af,transformToStateValue:rf,additionalProps:(e,s)=>({fetchSuggestions:of(Object(N.f)(e)),noValueText:s.formatMessage(ks.noValue),portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,isSubTask:Object(Cb.c)(e),showPinButton:Object(I.a)(t.area)}),saveField:cf
})))(nf),uf=n("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),df=n("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),pf=n("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),mf=n("./src/packages/issue/worklog/src/services/context/index.js"),bf=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),ff=n("./src/packages/issue/issue-view/src/selectors/status-selector.js"),gf=Object(u.h)({timeRemainingFieldLabel:{id:"issue.context.time-remaining-field.label",defaultMessage:"Time remaining"},includeSubtasksLabel:{id:"issue.time-tracking.include-subtasks",defaultMessage:"Include subtasks"},includeChildrenLabel:{id:"issue.time-tracking.include-children",defaultMessage:"Include child issues"},timeSpentRemainingLabel:{id:"issue.context.time-remaining-spent.label",
defaultMessage:"{timeSpent} logged, {timeRemaining} remaining- edit {fieldName}"},extendedTimeRemainingLabel:{id:"issue.context.extended-time-remaining-field.label",defaultMessage:"No time logged, {timeRemaining} remaining- edit {fieldName}"},extendedTimeSpentLabel:{id:"issue.context.extended-time-spent-field.label",defaultMessage:"{timeSpent} logged- edit {fieldName}"},noTimeLoggedLabel:{id:"issue.context.no-time-logged-field.label",defaultMessage:"No time logged- edit {fieldName}"}}),hf=n("./node_modules/@atlaskit/checkbox/dist/es2019/Checkbox.js"),yf=Object(u.h)({errorTitle:{id:"issue-field-remaining-estimate.error-title",defaultMessage:"We couldn't set the remaining estimate value"},errorMessage:{id:"issue-field-remaining-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}});const Of=({issueId:e,issueKey:t,onSuccess:s})=>{
const[n]=Object(as.a)(t,"timetracking"),a=(null==n?void 0:n.schema.type)||"timetracking",[{value:i,error:r},{saveValue:o,resetError:c}]=Object(Pc.a)({fieldKey:"timetracking",issueKey:t,fieldType:a,initialValue:{originalEstimateSeconds:0,timeSpentSeconds:0,remainingEstimateSeconds:0},saveField:(t,s,n,a)=>(async({issueId:e,newValue:t,baseUrl:s})=>{const n=t.remainingEstimateSeconds;return Object(x.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(Nl.stringify)({issueId:e,timetracking_remainingestimate:void 0!==n?n/60+"m":null,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(Sl.a)()})})})({issueId:e,newValue:n,baseUrl:a}),onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]},jf=T.default.div(["width:","px;cursor:auto;"],8.5*P.e),vf=e=>{
const{defaultValue:t,placeholderMessage:s,onChange:n,isInvalidInput:a,invalidTimeFormatMessage:i}=e;return l.a.createElement(jf,null,l.a.createElement(jr,{compact:!0,type:"text",value:t,placeholder:s,onChange:n,invalidMessage:a?i:void 0}))};vf.displayName="RemainingEstimateEdit";var Ef=vf;const kf=T.default.div(["padding:0px;"]),wf=e=>{const{defaultValue:t}=e;return l.a.createElement(kf,null,l.a.createElement(Ca.a,null,t))};wf.displayName="RemainingEstimateView";var Sf=wf;function Cf(){return(Cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function If(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?If(Object(s),!0).forEach((function(t){Pf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):If(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function _f(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var xf=e=>{
const{config:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:u,onUpdate:d,readView:p,editView:m,placeholderMessage:b,invalidTimeFormatMessage:f,useRemainingEstimateField:g=Of}=e,h=_f(e,["config","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","placeholderMessage","invalidTimeFormatMessage","useRemainingEstimateField"]),y=Object(tt.i)(),[O]=Object(nt.d)(y),j=O.canLogWork,[{value:v,error:E},{saveValue:k,resetError:w}]=g({issueId:n,issueKey:Object(Fr.l)(s),onSuccess:d}),S=v.remainingEstimateSeconds||0,[C,I]=Object(c.useState)(!1),[T,P]=Object(c.useState)(!1),_=Object(c.useMemo)((()=>Dl(t)(S)),[t,S]),[x,D]=Object(c.useState)(_);Object(c.useEffect)((()=>{D(_)}),[_]),Object(c.useEffect)((()=>{E&&P(!0)}),[E]);const A=Object(c.useCallback)((e=>{if(Sc()(x,_))P(!1);else if(Ll(t)(x)){const s=Tf(Tf({},v),{},{remainingEstimateSeconds:Ml(t)(x)||0});k(s,null,e),Object(Pt.h)(e),I(!1),P(!1)}else I(!0),P(!0)
}),[t,_,k,v,x]),L=Object(c.useCallback)((e=>{w(),I(!1),P(!1),D(_),Object(Pt.h)(e)}),[_,w]),M=Object(c.useCallback)((e=>{L(e),a&&a(e)}),[L,a]),R=Object(c.useCallback)((e=>{A(e),o&&o(e)}),[o,A]),N=Object(c.useCallback)((e=>{P(!0),Object(Pt.h)(e),i&&i(e)}),[i]),F=Object(c.useCallback)((e=>{L(e),r&&r(e)}),[L,r]),U=Object(c.useCallback)((e=>{A(e),u&&u(e)}),[u,A]),V=Object(c.useCallback)((e=>{I(!1),w(),D(e.target.value)}),[w,D]);return l.a.createElement(l.a.Fragment,null,E&&(()=>E?l.a.createElement(Ic.a,{error:E,title:yf.errorTitle,description:yf.errorMessage}):null)(),l.a.createElement(Tc.a,Cf({actionSubject:"remainingEstimateInlineEdit",isEditable:j,isEditing:T,readView:(()=>void 0!==p?p:l.a.createElement(Sf,{defaultValue:_}))(),editView:j?(()=>void 0!==m?m:l.a.createElement(Ef,{defaultValue:x,placeholderMessage:b,onChange:V,invalidTimeFormatMessage:f,isInvalidInput:C}))():null,onCancel:M,onConfirm:R,onEdit:N,onEscape:F,onEnter:U},h)))
},Df=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Af=n("./src/packages/issue/issue-view/src/common/component/logged-time/view.js");const Lf=e=>void 0===e,Mf=e=>{if(!e)return Object.seal({});const{remainingEstimateSeconds:t,timeSpentSeconds:s}=e;return Za()({loggedTime:s,remainingTime:t},Lf)},Rf=Object(a.a)(((e,t,s,n)=>{const{timeSpentSeconds:a,remainingEstimateSeconds:i}=n,r=Dl(s)(a||0),o=Dl(s)(i||0),c=!!a,l=!!i;switch(!0){case c&&l:return e(gf.timeSpentRemainingLabel,{timeSpent:r,timeRemaining:o,fieldName:t});case l&&!c:return e(gf.extendedTimeRemainingLabel,{timeRemaining:o,fieldName:t});case c&&!l:return e(gf.extendedTimeSpentLabel,{timeSpent:r,fieldName:t});default:return e(gf.noTimeLoggedLabel,{fieldName:t})}})),Nf=T.default.div(["margin-bottom:","px;margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],(e=>e.sideBySideMode?0:3*P.e),P.e/2,P.e/2,jt.a.N500);class Ff extends c.Component{renderReadView(){
const{value:e,isDone:t,config:s}=this.props;return l.a.createElement(Af.a,{value:Mf(e),estimatedTime:e.originalEstimateSeconds,isDone:t,config:s})}renderRemainingEstimateView(){const{config:e,fieldId:t,issueKey:s,issueId:n,showPinButton:a,invalidTimeFormatMessage:i,placeholderMessage:r,timeRemainingFieldLabel:o}=this.props;return n?l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===a&&l.a.createElement(y.a,{fieldId:t,label:o})),l.a.createElement(h.g,null,l.a.createElement(xf,{config:e,issueKey:s,issueId:n,value:"",placeholderMessage:r,invalidTimeFormatMessage:i,isFitContainerWidthReadView:!0}))):null}renderRollUpToggle(){const{rollupLabel:e,isRollingUpData:t,onToggleRollingUpData:s}=this.props;return l.a.createElement(Nf,{sideBySideMode:!0},l.a.createElement(hf.a,{isChecked:t,onChange:({target:{checked:e}},t)=>{s(e,t)},label:e,name:"include-subtasks-children-in-time-tracking-toggle-from-context"}),l.a.createElement(Df.a,{action:"exposed",
actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromContext"}))}render(){const{isVisible:e,label:t,isEditable:s,isMobile:n,onEditRequest:a,confirmButtonLabel:i,cancelButtonLabel:r,fieldId:o,showPinButton:c,shouldDisplayRollUpDataControl:u,formatMessage:d,config:p,value:m}=this.props;if(!e)return this.renderRemainingEstimateView();const b=Rf(d,t,p,m);return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===c&&l.a.createElement(y.a,{fieldId:o,label:t})),l.a.createElement(h.g,{"data-testid":"issue.views.issue-base.context.time-tracking.value"},l.a.createElement(be.a,null,l.a.createElement(q.a,{label:t,readView:this.renderReadView(),editView:s?l.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n,isLabelHidden:!0,onEditRequested:a,editButtonLabel:b,confirmButtonLabel:i,cancelButtonLabel:r}),u&&this.renderRollUpToggle())))}}Ff.displayName="TimeTrackingView",
Ff.displayName="TimeTrackingView";var Uf=Ff;function Vf(){return(Vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Kf(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Wf=Object(uf.a)({onToggleRollingUpData:"toggleRollingUpData"})(Object(df.b)("worklog")(Uf)),Bf=e=>{const{timeTrackingCalculationSelector:t,area:s,intl:n}=e,a=Kf(e,["timeTrackingCalculationSelector","area","intl"]),[i,{markRollingUpData:r,unmarkRollingUpData:o}]=Object(mf.a)(),u=Object(c.useCallback)((e=>{e?r():o()}),[r,o]);return l.a.createElement(Wf,Vf({},a,{
value:t(i),isRollingUpData:i,onToggleRollingUpData:u}))};Bf.displayName="WrappedTimeTrackingView";const Hf=l.a.createElement(u.c,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:l.a.createElement("b",null,"2w 4d 6h 45m")}}),$f=Object(d.b)(((e,t)=>{const{intl:{formatMessage:s},area:n,fieldId:a}=t,i=Object(v.m)(t.fieldId)(e);return{formatMessage:s,fieldId:a,timeTrackingCalculationSelector:Object(Cl.j)(e),config:Object(Cl.h)(e),issueKey:Object(N.y)(e),issueId:Object(N.x)(e),isDone:"DONE"===Object(ff.a)(e),isEditable:Object(Cl.b)(e),isMobile:Object(N.s)(e),isVisible:Object(Cl.c)(e),label:i,editButtonLabel:s($.a.editButtonLabel,{fieldName:i}),confirmButtonLabel:s($.a.confirmButtonLabel,{fieldName:i}),cancelButtonLabel:s($.a.cancelButtonLabel,{fieldName:i}),timeRemainingFieldLabel:s(gf.timeRemainingFieldLabel),rollupLabel:Object(K.m)(e)?s(gf.includeSubtasksLabel):s(gf.includeChildrenLabel),
showPinButton:Object(I.a)(n),shouldDisplayRollUpDataControl:Object(Cl.f)(e),placeholderMessage:"2w 4d 6h 45m",invalidTimeFormatMessage:Hf}}),(e=>({onEditRequest:()=>{e(Object(bf.T)("ADD_MODAL",null))}})))(Bf);var Gf=e=>{const t=Object(et.c)();return l.a.createElement(Pp.a,{id:"issue.issue-view.context.time-tracking-field"},l.a.createElement(pf.a,{id:"context.time-tracking-field",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},l.a.createElement($f,Vf({},e,{intl:t}))))},qf=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(ks.noValue),type:"url",showPinButton:Object(I.a)(t.area)})})))(Er);const zf=e=>e.users?e.users.map(Ut):[],Yf=Object(a.a)((e=>t=>e?Object(Xe.a)(`${e}${t}`).then(zf):Promise.resolve([]))),Qf=Object(a.a)((e=>({avatarUrl:"",name:e.formatMessage(ks.noValue)})));var Jf=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ut,transformToStateValue:Vt,additionalProps:(e,s)=>({
portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,fetchSuggestions:Yf(Object(v.d)(t.fieldId)(e)),emptyOption:Object(v.F)(t.fieldId)(e)?void 0:Qf(s),showPinButton:Object(I.a)(t.area)})})))(Tt),Zf=n("./src/packages/cache/src/services/versions/index.js"),Xf=Object(u.h)({createNewItem:{id:"issue.fix-versions.create-new-component-message",defaultMessage:"Create new version"},recent:{id:"issue.fix-versions.create-new-component-message.recent",defaultMessage:"Recent versions"},releasedHeading:{id:"issue.fix-versions.released-message",defaultMessage:"Released"},unreleasedHeading:{id:"issue.fix-versions.unreleased-message",defaultMessage:"Unreleased"}});function eg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?eg(Object(s),!0).forEach((function(t){sg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ng=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),ag={versions:"affectedVersion",fixVersions:"fixVersion"},ig=(e,{baseUrl:t,projectKey:s,fieldId:n})=>e.map((e=>{const a=`project = ${Object(zs.b)(s)} AND ${(e=>ag[e]||"fixVersion")(n)} = ${Object(zs.b)(e.name)}`;return{href:Object(zs.a)(t,a),content:e.name,value:e.id}})),rg=e=>e?e.map(ng):[],og=e=>e.map((e=>({name:e.content,id:e.value,fromCache:e.fromCache}))),cg=(e,t,s,n)=>{
const a=e.filter((e=>!e.archived)),i=a.filter((e=>!e.released)).map(ng),r=a.filter((e=>e.released)).map(ng),o=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter((e=>e.projectId===s)).map((t=>{const n=e.find((e=>e.id===t.id));if(n){const e=tg(tg({},n),{},{projectId:s});return Zf.a.update(`${t.id}`,e),tg(tg({},e),{},{fromCache:!0})}return tg(tg({},t),{},{fromCache:!0})})))(e,t,n));return[{heading:s.formatMessage(Xf.recent),items:o.map(ng)},{heading:s.formatMessage(Xf.unreleasedHeading),items:i},{heading:s.formatMessage(Xf.releasedHeading),items:r}]};var lg=Object(u.h)({placeholder:{id:"issue.single-version-picker.text-for-dropdown-when-nothing-selected",defaultMessage:"Select version"}});const ug=e=>e&&{name:e.content,id:e.value},dg=e=>e&&{content:e.name,value:e.id},pg=Object(a.a)(((e,t,s)=>()=>Promise.resolve(e).then((e=>cg(e,[],t,s)))));var mg=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:dg,transformToStateValue:ug,additionalProps:(e,s)=>({
fetchSuggestions:pg(Object(v.c)(t.fieldId)(e),s,Object(K.C)(e)),placeholder:s.formatMessage(lg.placeholder),noValueText:s.formatMessage(ks.noValue),allowEmptyValue:!Object(v.F)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})})))(Kn);const bg=Object(a.a)(((e,t,s)=>()=>Promise.resolve(e).then((e=>cg(e,[],t,s)))));var fg=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:rg,transformToStateValue:og,additionalProps:(e,s)=>({fetchSuggestions:bg(Object(v.c)(t.fieldId)(e),s,Object(K.C)(e)),placeholder:s.formatMessage(ks.version_no_value_placeholder),noValueText:s.formatMessage(ks.noValue),showPinButton:Object(I.a)(t.area)})})))(On),gg=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),hg=n("./src/packages/releases/versions/src/create-version-modal/index.js");function yg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s])
;return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Og(){return(Og=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class jg extends c.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1,data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e))),this.openDialog=()=>{this.setState({isDialogOpen:!0})},this.closeDialog=()=>{this.setState({isDialogOpen:!1})},this.onSuccess=e=>{
const{onChange:t,value:s,onVersionCreated:n,versionFieldIds:a}=this.props;t([...s,{content:e.name,value:e.id}]),this.closeDialog(),n(e,a)}}renderSelect(e){const{canAdministerProject:t,canAdministerJira:s,createNewItemMessage:n}=this.props,a=t||s,{data:i,loading:r,error:o}=this.state,c={data:i,loading:r,error:o};return l.a.createElement(On,Og({},e,{styles:pn,shouldShowFooter:a,footer:l.a.createElement(dn,{className:"issue-view__select-footer"},l.a.createElement(nn.a,{label:"",size:"small"}),l.a.createElement(un,null,n)),onFooterSelect:this.openDialog,allowEmptyValue:!0,optionValuesSafeForAnalytics:!0,fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:c}))}render(){
const e=this.props,{baseUrl:t,projectId:s,createNewItemMessage:n,canAdministerProject:a,canAdministerJira:i,locale:r,onVersionCreated:c,versionFieldIds:u}=e,d=yg(e,["baseUrl","projectId","createNewItemMessage","canAdministerProject","canAdministerJira","locale","onVersionCreated","versionFieldIds"]),{isDialogOpen:p}=this.state;return l.a.createElement(l.a.Fragment,null,p&&l.a.createElement(hg.a,{locale:Object(o.isRemoveUnusedAppBasePropsEnabled)()?void 0:r,baseUrl:t,projectId:s,onCancel:this.closeDialog,onError:this.closeDialog,onSuccess:this.onSuccess}),this.renderSelect(d))}}jg.displayName="FixVersionsView";function vg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Eg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(s),!0).forEach((function(t){kg(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wg=Object(a.a)(((e,t,s,n,a,i)=>((e,t,s,n,a,i)=>Gs(e,t,s,n,a,i))(e,t,s,n,a,i))),Sg=Object(a.a)(((e,t,s,n,a,i)=>(r,o)=>{const c=wg(s,e,n,a,o,i);return Promise.all([c,Zf.a.getAll()]).then((async([e,s])=>cg(e,s,t,a)))}));var Cg=Object(H.a)(((t,s)=>({fieldId:s.fieldId,transformFromStateValue:ig,transformToStateValue:og,additionalProps:(e,t)=>({fetchSuggestions:Sg(Object(v.c)(s.fieldId)(e),t,s.fieldId,Object(N.x)(e),Object(K.C)(e),s.createAnalyticsEvent),canAdministerProject:Object(Us.c)(e),canAdministerJira:Object(Us.b)(e),createNewItemMessage:t.formatMessage(Xf.createNewItem),baseUrl:Object(N.f)(e),projectId:Object(K.C)(e),isMobile:Object(N.s)(e),
placeholder:t.formatMessage(ks.version_no_value_placeholder),noValueText:t.formatMessage(ks.noValue),versionFieldIds:Object(v.w)(e),onTagClick:e=>Object(Pt.h)(e,{name:s.fieldId}),showPinButton:Object(I.a)(s.area),getDataFromCache:()=>Zf.a.getAll().then((s=>cg([],s,t,Object(K.C)(e))))}),additionalCallbacks:e=>({onVersionCreated:(t,s)=>{s.forEach((s=>{e(Object(gg.a)(s,[t]))}))}}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},r,o)=>{const c=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`,l=Object(K.C)(r);return a.forEach((e=>{try{o.createAnalyticsEvent&&Object(Pt.b)(o.createAnalyticsEvent({}),"versionPickerCache set",{isFromCache:e.fromCache}),e.id&&Zf.a.set(`${e.id}`,Eg(Eg({},e),{},{projectId:l}))}catch(t){Fs.a.safeErrorWithoutCustomerData("issue-view.versions.cache.set",t.message)}})),Object(x.e)(c,{body:JSON.stringify({fields:{[n]:a}})}).catch((t=>{throw a.forEach((t=>{try{
o.createAnalyticsEvent&&Object(Pt.b)(o.createAnalyticsEvent({}),"versionPickerCache removed"),t.id&&Zf.a.remove(`${t.id}`)}catch(e){Fs.a.safeErrorWithoutCustomerData("issue-view.versions.cache.remove",e.message)}})),t}))})(...t,s)})))(jg);const Ig=({children:e,id:t,fallback:s=l.a.createElement(l.a.Fragment,null)})=>l.a.createElement(Pp.a,{id:t,packageName:"issue",render:()=>s},l.a.createElement(X.a,{fallback:s},e));Ig.displayName="Boundary";const Tg=Object(X.f)((()=>n.e("async-all-dev-panel").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"}),Pg=Object(X.f)((()=>n.e("async-releases-context-panel").then(n.bind(null,"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"))),{moduleId:"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"
}),_g=Object(X.f)((()=>n.e("async-assets-glance").then(n.bind(null,"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"))),{moduleId:"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"}),xg=Object(X.f)((()=>n.e("async-assets-panel").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"}),Dg=Object(X.f)((()=>n.e("async-assets-onboarding").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"}),Ag=e=>l.a.createElement(Ig,{id:"all-dev-panel"},l.a.createElement(Tg,e));Ag.displayName="AllDevPanel";const Lg=e=>l.a.createElement(Ig,{id:"releases-context-panel"},l.a.createElement(Pg,e))
;Lg.displayName="ReleasesContextPanel";const Mg=e=>l.a.createElement(Ig,{id:"assets-glance"},l.a.createElement(_g,e));Mg.displayName="AssetsGlance";const Rg=e=>l.a.createElement(Ig,{id:"assets-panel"},l.a.createElement(xg,e));Rg.displayName="AssetsPanel";const Ng=e=>l.a.createElement(Ig,{id:"assets-onboarding"},l.a.createElement(Dg,e));Ng.displayName="AssetsOnboarding";s.a=Object(a.a)((()=>{const e=Object(i.W)();return{[e.ASSIGNEE_TYPE]:{item:ss},[e.DUE_DATE_TYPE]:{item:Sa},[e.PRIORITY_TYPE]:{item:td},[e.REPORTER_TYPE]:{item:qd},[e.DESCRIPTION_TYPE]:{item:me},[e.LABELS_TYPE]:{item:Gc},[e.COMPONENTS_TYPE]:{item:Tn},[e.SPRINT_TYPE]:{item:Qm},[e.STORY_POINTS_TYPE]:{item:ub},[e.TEAMS_PLATFORM_CF_TYPE]:{item:Object(o.isTeamsCustomFieldTypeEnabled)()?Sb:()=>null},[e.EPIC_TYPE]:{item:ac},[e.FIX_VERSIONS_TYPE]:{item:Cg},[e.AFFECTS_VERSIONS_TYPE]:{item:Cg},[e.TIME_ESTIMATE_TYPE]:{item:Jl},[e.TIME_TRACKING_TYPE]:{item:Gf},[e.ENVIRONMENT_TYPE]:{item:De},[e.DEV_SUMMARY_TYPE]:{item:Ag,panel:Lg},
[e.APPROVALS_PANEL_TYPE]:{item:Ae.a,panel:qe},[e.KNOWLEDGE_BASE_TYPE]:{item:bc,panel:vc},[e.SLA_PANEL_TYPE]:{item:Object(o.isExtractedSlaPanelEnabled)()?r.a:dm},[e.LINKED_ALERTS_TYPE]:{item:zc},[e.ASSETS_CF_TYPE]:{item:Rg,panel:Mg},[e.RESPONDERS_CF_TYPE]:{item:Object(o.isJsmRespondersEnabled)()?Dp:()=>null,panel:Object(o.isJsmRespondersEnabled)()?Lp:()=>null},[e.COLOR_CF_TYPE]:{item:()=>null},[e.EPIC_COLOR_TYPE]:{item:()=>null},[e.RELEASES_TYPE]:{item:()=>null},[e.PARENT_CF_TYPE]:{item:Mu},[e.BASELINE_START_CF_TYPE]:{item:wa},[e.BASELINE_END_CF_TYPE]:{item:wa},[e.LABELS_CF_TYPE]:{item:Gc},[e.TEXT_CF_TYPE]:{item:Xp},[e.MULTI_USER_CF_TYPE]:{item:zr},[e.URL_CF_TYPE]:{item:qf},[e.NUMBER_CF_TYPE]:{item:rl},[e.STORY_POINT_ESTIMATE_CF_TYPE]:{item:ml},[e.SELECT_CF_TYPE]:{item:rm},[e.EPIC_STATUS_TYPE]:{item:Object(o.isEpicStatusEnabled)()?rm:()=>null},[e.MULTI_SELECT_CF_TYPE]:{item:tl},[e.ECOSYSTEM_GLANCE_TYPE]:{item:ui},[e.FORGE_CUSTOM_FIELD_TYPE]:{item:lo},[e.ISSUE_FIELD_USER_CF_TYPE]:{
item:Jf},[e.ISSUE_FIELD_GROUPS_CF_TYPE]:{item:uc},[e.ISSUE_FIELD_STRINGS_CF_TYPE]:{item:Gc},[e.FORGE_GLANCE_TYPE]:{item:go},[e.TEXT_AREA_CF_TYPE]:{item:De},[e.MULTI_VERSION_CF_TYPE]:{item:fg},[e.VERSION_CF_TYPE]:{item:mg},[e.DATE_CF_TYPE]:{item:wa},[e.GROUP_CF_TYPE]:{item:pc},[e.MULTI_GROUP_CF_TYPE]:{item:uc},[e.USER_CF_TYPE]:{item:Jf},[e.DATETIME_CF_TYPE]:{item:ba},[e.MULTI_CHECKBOXES_CF_TYPE]:{item:Ps},[e.RADIO_BUTTONS_CF_TYPE]:{item:Md},[e.TEAM_CF_TYPE]:{item:lf},[e.ISSUE_FIELD_NUMBER_CF_TYPE]:{item:rl},[e.ISSUE_FIELD_DATETIME_CF_TYPE]:{item:ba},[e.ISSUE_FIELD_STRING_CF_TYPE]:{item:Xp},[e.ISSUE_FIELD_SINGLE_SELECT_CF_TYPE]:{item:rm},[e.ISSUE_FIELD_MULTI_SELECT_CF_TYPE]:{item:tl},[e.REQUEST_TYPE_CF_TYPE]:{item:sa},[e.SERVICE_ENTITY_CF_TYPE]:{item:Object(o.isUpdatedAffectiveServiceFieldEnabled)()?Zp:qp},[e.REQUEST_PARTICIPANTS_CF_TYPE]:{item:Tp},[e.ORGANIZATIONS_CF_TYPE]:{item:wl},[e.REQUEST_FEEDBACK_CF_TYPE]:{item:lp},[e.PEOPLE_CF_TYPE]:{item:Hu},[e.REQUEST_LANGUAGE_CF_TYPE]:{item:Op
},[e.ASSET_ONBOARDING_TYPE]:{item:Ng},[e.APPROVERS_LIST_CF_TYPE]:{item:Hu},[e.CASCADING_SELECT_CF_TYPE]:{item:cs},[e.PROJECT_PICKER_CF_TYPE]:{item:Sd},[e.CMDB_OBJECT_CF_TYPE]:{item:Object(o.isCmdbIntegrationFieldEnabled)()?Rs:()=>null},[e.READ_ONLY_CF_TYPE]:{item:Wd}}}))},"./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js":function(e,t,s){"use strict";t.a=e=>"context"===e},"./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js":function(t,s,n){"use strict";var a=n("./node_modules/lodash/flow.js"),i=n.n(a),r=n("./src/packages/platform/services/issue/src/components/context/consumer.js"),o=n("./node_modules/react/index.js"),c=n.n(o),l=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
var d=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js"),p=n("./src/packages/platform/utils/app-base/src/index.js"),m=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/redux-disposable/index.js"),f=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),g=n("./src/packages/growth/cross-flow/src/services/cross-flow-provider/index.js"),h=n("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),y=n("./src/packages/issue/issue-context-service/src/main.js"),O=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),j=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),v=n("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js"),E=n("./src/packages/issue/issue-scroll/src/services/main.js"),k=n("./src/packages/issue/issue-tabs/src/services/main.js"),w=n("./src/packages/issue/user-preferences-services/src/main.js"),S=n("./src/packages/issue/ecosystem-service/src/services/main.js"),C=n("./src/packages/issue/forge-service/src/services/main.js"),I=n("./src/packages/issue/issue-view-layout/src/services/main.js"),T=n("./src/packages/issue/workflow-transitions-services/src/main.js"),P=n("./src/packages/issue/workflow-transitions-services/src/context.js"),_=n("./src/packages/platform/utils/router/src/index.js"),x=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/dynamic-contextual-analytics-data.js"),D=n("./src/packages/issue/project-context-service/src/main.js"),A=n("./src/packages/issue/project-permissions-service/src/main.js"),L=n("./src/packages/platform/services/issue/src/service/index.js"),M=n("./src/packages/issue/jira-settings-service/src/main.js"),R=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),N=n("./src/packages/issue/worklog/src/services/store/index.js")
;const F=e=>({type:"SET_CONTEXT",payload:e});var U=n("./src/packages/issue/issue-view/src/actions/external-actions.js"),V=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),K=n("./src/packages/issue/issue-view/src/common/metrics/index.js"),W=n("./src/packages/issue/issue-view/src/feature-flags.js"),B=n("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js"),H=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),$=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),G=n("./node_modules/react-sweet-state/lib/esm/components/hook.js");const q=e=>!!(e&&e.savedAt>Date.now()-36e5),z=()=>({setState:e,getState:t})=>{const s=t();Object.entries(s).forEach((([t,s])=>{q(s)||e({[t]:void 0})}))},Y={setRecentIssue:(e,t)=>({setState:s,dispatch:n})=>{n(z()),s({[String(e)]:{issueState:t,savedAt:Date.now()}})},getRecentIssue:e=>({getState:t,dispatch:s})=>{s(z());const n=t()[e]
;return q(n)?null==n?void 0:n.issueState:void 0},getRecentIssuesCount:()=>({getState:e})=>{const t=e();return Object.values(t).filter(Boolean).length}},Q=Object($.a)({name:"recent-issues",initialState:{},actions:Y}),J=Object(G.a)(Q,{selector:null});var Z=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js"),X=n("./node_modules/react-redux/es/index.js");const ee=e=>({type:"FETCH_SCREENID_SUCCESS",payload:e&&e.data});var te=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var se=Object(X.b)((e=>({isSimplifiedProject:Object(te.u)(e)})),{fetchScreenIdRequest:()=>({type:"FETCH_SCREENID_REQUEST"})})((e=>{const{fetchScreenIdRequest:t,isSimplifiedProject:s}=e;return Object(o.useEffect)((()=>{s||t()}),[t,s]),null
})),ne=n("./node_modules/lodash/join.js"),ae=n.n(ne),ie=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),re=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),oe=n("./src/packages/realtime/src/common/constants/events.js"),ce=n("./src/packages/realtime/src/index.js");var le=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),ue=n("./node_modules/reselect/lib/index.js"),de=n("./src/packages/realtime/src/common/utils/pubsub.utils.js");const pe=Object(ue.createSelector)(le.i,te.C,((e,t)=>[Object(de.a)(e,t)]));function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const fe=[oe.g,oe.b];var ge=Object(X.b)((e=>({channels:pe(e),cloudId:Object(le.i)(e),projectId:Object(te.C)(e),issueId:Object(le.x)(e)})),{realtimeUpdateCurrentIssue:e=>({type:"REALTIME_UPDATE_CURRENT_ISSUE",payload:e})},((e,t)=>({channels:e.channels,events:fe,cloudId:e.cloudId,projectId:e.projectId,onJoin:(t,s)=>{Object(re.b)(s,"channel joined","Realtime",{cloudId:new ie.a(e.cloudId),projectId:e.projectId,issueId:new ie.a(e.issueId),channels:new ie.a(ae()(e.channels))})},onReceive:(s,n)=>{s&&s.payload.issueId===Number(e.issueId)&&(t.realtimeUpdateCurrentIssue({atlassianId:s.payload.atlassianId,updateType:s.type}),Object(re.b)(n,"event received","Realtime",{cloudId:new ie.a(e.cloudId),projectId:e.projectId,issueId:new ie.a(e.issueId),
eventType:new ie.a(s.type)}))},onLeave:(t,s)=>{Object(re.b)(s,"channel left","Realtime",{cloudId:new ie.a(e.cloudId),projectId:e.projectId,issueId:new ie.a(e.issueId),channels:new ie.a(ae()(e.channels))})}})))((e=>{let{cloudId:t,projectId:s}=e,n=be(e,["cloudId","projectId"]);return t&&s?c.a.createElement(ce.a,me({appId:"issue-view"},n)):null})),he=n("./node_modules/history/createBrowserHistory.js"),ye=n.n(he),Oe=n("./src/packages/platform/utils/constants/src/status-categories.js"),je=n("./src/packages/platform/utils/types/src/general.js"),ve=n("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js");const Ee=e=>({type:"UPDATE_PREVIEW_REQUEST",payload:e});var ke=n("./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js");const we=(e,t)=>({type:"FETCH_LOGGED_IN_USER_SUCCESS",payload:{user:e,applicationRoles:t}});var Se=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js");const Ce=e=>({
type:"PREVIEW_DATA_FETCHED",payload:e});var Ie=n("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),Te=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js"),Pe=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),_e=n("./src/packages/platform/utils/fetch/src/utils/as-json.js");function xe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function De(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Ae="@atlassian.polaris.project.enabled",Le=(e,t,s,n)=>"product_discovery"===s?Promise.resolve(!0):Object(_e.a)(((e,t,s)=>null!=s?`${e}/rest/api/2/project/${t}/properties/${Ae}?sessionId=${s}`:`${e}/rest/api/2/project/${t}/properties/${Ae}`)(e,t,n),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(s),!0).forEach((function(t){De(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Te.a)).then((e=>!(!e||!("key"in e)||e.key!==Ae||!0!==e.value)||(Pe.a.safeWarnWithoutCustomerData("isPolarisProjectCheck","Request succeed but response is not expected",e),!1))).catch((e=>(404!==e.statusCode&&Pe.a.safeErrorWithoutCustomerData("isPolarisProjectCheck",`Request failed with code: ${e.statusCode}`,e),!1)))
;var Me=n("./node_modules/redux/es/index.js"),Re=n("./node_modules/redux-batched-actions/lib/index.js"),Ne=n("./node_modules/redux-observable/lib/es/index.js"),Fe=n("./node_modules/lodash/noop.js"),Ue=n.n(Fe),Ve=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ke=n("./node_modules/rxjs/Rx.js"),We=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),Be=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),He=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),$e=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");const Ge=e=>"string"==typeof e?""!==e.trim():!Object(Be.g)(e);var qe=e=>{const{comment:t}=e;return!!t&&("string"==typeof t?""!==t.trim():!Object(Be.g)(t))},ze=n("./node_modules/moment/moment.js"),Ye=n.n(ze);const Qe=e=>{const{accountId:t,displayName:s=null,avatarUrls:n=null}=e;return{accountId:t,displayName:s,
avatarUrl:n&&n["48x48"]}},Je=e=>{const{id:t,author:s=null,updateAuthor:n=null,timeSpent:a,started:i,created:r,updated:o,comment:c=null}=e,l=o!==r;return{id:t,author:s&&Qe(s),timeSpent:a,started:Ye()(i).valueOf(),updated:l?Ye()(o).valueOf():null,updateAuthor:l&&n?Qe(n):null,comment:Object(Be.h)(c)}},Ze=e=>e.map(Je);var Xe=n("./node_modules/lodash/omitBy.js"),et=n.n(Xe),tt=n("./node_modules/query-string/index.js"),st=n("./src/packages/platform/utils/fetch/src/utils/requests.js");const nt=(e,t)=>`${e}/rest/internal/3/issue/${t}/worklog`,at=({startAt:e=0,orderBy:t,worklogId:s,maxResults:n,issueKey:a,worklogAmount:i})=>{const r=null!=s?`, worklogId: "${s}"`:""
;return`query {\n        viewIssue(issueKey: "${a}") {\n            worklogs (${`startAt: ${e}`}${""===r&&null!=n?`, maxResults: ${n}`:""}${null!=t?`, orderBy: "${t}"`:""}${r}${null!=i?`, worklogAmount: ${i}`:""}) {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                timeSpent\n                started\n                updated\n                created\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                comment\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }`},it=e=>!e;var rt=n("./src/packages/platform/utils/xsrf-token/src/index.js"),ot=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js");function ct(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(s),!0).forEach((function(t){ut(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ct(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ut(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var dt=Object(Ne.combineEpics)(((e,t)=>e.ofType(ot.a).switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(je.l)(Object(le.y)(s)),i=Object(He.h)(s),r=Object(He.i)(s),o=Object($e.a)(i.daysPerWeek,i.hoursPerDay),{payload:{values:c},meta:{analyticsEvent:l}}=e,{timeRemaining:u,workDescription:d}=c||{},p=!!Ge(d)&&Object(Be.d)(d)
;return Ke.Observable.from(((e,t,s)=>{const{timeLogged:n,workDescription:a,timeRemaining:i,dateStarted:r}=s||{},o=et()({adjustEstimate:i?"new":"auto",newEstimate:i},it),c=`${nt(e,t)}?${Object(tt.stringify)(o)}`;return Object(st.d)(c,{body:JSON.stringify({timeSpent:n,comment:a,started:s.dateStarted?Ye()(r).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0})})})(n,a,c)).mergeMap((e=>{const t=Je(e),s=qe(t);Object(We.a)(l,{action:"added",actionSubjectId:t.id,attributes:{withComment:s}});const n=(r.timeSpentSeconds||0)+e.timeSpentSeconds,a=o(u),i=lt(lt({},r),{},{timeSpentSeconds:n},null!==a?{remainingEstimateSeconds:a}:{});return Ke.Observable.of(Object(ot.r)(e.id,i,{shouldFetchViewContext:p}),Object(ot.M)(e.id))})).catch((e=>{const{timeLogged:t}=c,s={logTimeLength:t&&t.length,remainingTimeLength:u&&u.length};return Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.add-worklog",`Failed to save new worklog with input lengths: ${JSON.stringify(s)}`,e),Ke.Observable.of(Object(ot.p)())}))
}))),((e,t)=>e.ofType(ot.o).switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(te.l)(s),i=Object(He.h)(s),r=Object($e.a)(i.daysPerWeek,i.hoursPerDay),{payload:{timeRemaining:o},meta:{analyticsEvent:c}}=e;return Ke.Observable.from(((e,t,s)=>Object(st.d)(`${e}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(tt.stringify)({issueId:t,timetracking_remainingestimate:s,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(rt.a)()})}))(n,a,o)).do((()=>{Object(We.a)(c,{action:"time-remaining-updated"})})).map((()=>Object(ot.X)(r(o)))).catch((e=>{const t=o&&o.length;return Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.update-time-remaining",`Failed to update time remaining with input length: ${t}`,e),Ke.Observable.of(Object(ot.V)())}))
})))),pt=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),mt=n("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),bt=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(st.a)(`${nt(e,t)}/${s}?adjustEstimate=${a?`new&newEstimate=${n}`:"leave"}`))(e,t,s,n,a);const ft=(e,t)=>e.ofType(ot.c).switchMap((()=>{const e=t.getState();if(Object(He.g)(e).length>0)return Ke.Observable.empty();const s=Object(le.f)(e),n=Object(le.y)(e),a=Object(He.n)(e),i=Object(He.k)(e);if(Object(W.isActivitySortingEnabled)()){const t=Object(mt.b)(e);if(a>0)return"NEWEST_FIRST"===t?Ke.Observable.of(Object(ot.A)()):Ke.Observable.of(Object(ot.E)());if(i>a)return"NEWEST_FIRST"===t?Ke.Observable.of(Object(ot.E)()):Ke.Observable.of(Object(ot.A)())}else{if(a>0)return Ke.Observable.of(Object(ot.C)(s,n));if(i>a)return Ke.Observable.of(Object(ot.G)(s,n))}return Ke.Observable.empty()
})),gt=e=>(t,s)=>t.ofType(ot.b).switchMap((({payload:{worklogId:t,timeRemaining:n,isAdjustTimeRemainingChecked:a},meta:{analyticsEvent:i}})=>{const r=s.getState(),o=Object(le.f)(r),c=Object(je.l)(Object(le.y)(r)),l=Object(He.m)(r)[t],u=l&&l.comment,d=null!==u&&Object(Be.d)(u);return Ke.Observable.from(bt(o,c,t,n,a)).map((()=>{const s=Object(He.m)(r)[t];return d&&e.refreshAttachments(Object(je.l)(c)),Object(ot.v)(t,((e,t,s)=>{const n=Object(He.h)(e),a=Object($e.a)(n.daysPerWeek,n.hoursPerDay);return{timeSpentSecondsDelta:-(a(t.timeSpent)||0),newRemainingEstimateSeconds:a(s)}})(r,s,n))})).do((()=>Object(We.a)(i,{action:"deleted",actionSubjectId:t,attributes:{timeAdjusted:a}}))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.delete-worklog",`Could not delete worklog '${t}'`,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(ot.t)()))))}));const ht=()=>({type:"FETCH_VIEW_CONTEXT_REQUEST"}),yt=e=>({
type:"FETCH_VIEW_CONTEXT_SUCCESS",payload:e}),Ot=e=>({type:"FETCH_VIEW_CONTEXT_FAILURE",payload:{error:e}}),jt=()=>({type:"MARK_TOKEN_AS_OUTDATED"});var vt=n("./node_modules/lodash/isUndefined.js"),Et=n.n(vt);var kt=(e,t,s,n)=>Object(st.e)(((e,t,s,n)=>{const a=n.timeRemaining?`?adjustEstimate=new&newEstimate=${n.timeRemaining}`:"?adjustEstimate=leave";return`${nt(e,t)}/${s}${a}`})(e,t,s,n),(e=>({body:JSON.stringify(et()({timeSpent:e.timeLogged,started:e.dateStarted?Ye()(e.dateStarted).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0,comment:e.workDescription},Et.a))}))(n));function wt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function St(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(s),!0).forEach((function(t){Ct(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ct(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var It=(e,t)=>e.ofType(ot.d).switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(je.l)(Object(le.y)(s)),i=Object(He.m)(s),{payload:{worklogId:r,values:o},meta:{analyticsEvent:c}}=e;let l=!1;return Ge(o.workDescription)&&(l=Object(Be.e)(i[r].comment,o.workDescription),l&&t.dispatch(jt())),Ke.Observable.from(((e,t,s,n)=>kt(e,t,s,n).then((e=>Je(e))))(n,a,r,o)).do((e=>{const t=qe(e);Object(We.a)(c,{action:"edited",actionSubjectId:r,attributes:{withComment:t}})})).mergeMap((e=>{const t=St(St({},i),{},{[r]:e}),n=Object(ot.z)(t,e.id,((e,t,s)=>{const n=Object(He.h)(e),a=Object($e.a)(n.daysPerWeek,n.hoursPerDay),i=Object(He.m)(e)[t.id]
;if(!i)return Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.edit-worklog","Could not find existing worklog with matching ID when editing a worklog and calculating time tracking deltas."),{timeSpentSecondsDelta:0,newRemainingEstimateSeconds:a(s)};const r=a(i.timeSpent)||0;return{timeSpentSecondsDelta:(a(t.timeSpent)||0)-r,newRemainingEstimateSeconds:a(s)}})(s,e,o.timeRemaining),{shouldFetchViewContext:l});return e.started!==i[r].started?Ke.Observable.of(n,Object(ot.M)(r)):Ke.Observable.of(n)})).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.edit-worklog","Failed to save edited worklog:",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(ot.x)()))))})),Tt=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-operational-event.js")
;const Pt=(e,t,s)=>`\n    query {\n        viewIssue(issueKey: "${e}") {\n            worklogs (startAt: ${t}, maxResults: ${s}, orderBy: "-started") {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                timeSpent\n                started\n                updated\n                created\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                comment\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }\n`,_t=(e,t)=>`\n    query {\n        viewIssue(issueKey: "${e}") {\n            worklogs (worklogId: "${t}", orderBy: "-started") {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }\n`
;function xt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(s),!0).forEach((function(t){At(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function At(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Lt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Mt=e=>{const{totalCount:t,nodes:s,startIndex:n}=e.data.viewIssue.worklogs,a=s.map((e=>{let{updateAuthor:t=null,updated:s,comment:n,created:a}=e;const i=s!==a;return Dt(Dt({},Lt(e,["updateAuthor","updated","comment","created"])),{},{updated:i?s:null,updateAuthor:i&&t?t:null,comment:Object(Be.a)(n)})}));return{totalWorklogs:t,sortedWorklogIds:a.map((e=>e.id)).reverse(),worklogs:a.reduce(((e,t)=>Dt(Dt({},e),{},{[t.id]:t})),{}),startIndex:n||0}},Rt=(e,t,s)=>((e,t,s)=>Object(st.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:_t(t,s),variables:{issueKey:t}})}))(e,t,s).then(Mt);var Nt=(e,t,s,n)=>((e,t,s,n)=>Object(st.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:Pt(t,s,n),variables:{issueKey:t}})}))(e,t,s,n).then(Mt);const Ft=(e,t,s,n,a,i)=>Ke.Observable.from(Nt(e,t,n,a)).do((e=>{s&&Object(Tt.a)(s,{attributes:{worklogItemCount:e.worklogs.length}})
})).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s})=>i(s,e,t))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-worklogs","Could not fetch more worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(ot.P)())))),Ut=(e,t)=>e.ofType(ot.h).switchMap((({payload:{baseUrl:e,issueKey:s,analyticsEvent:n}})=>{const a=t.getState(),i=Object(He.n)(a),r=Object(He.g)(a).length;return Ft(e,s,n,i+r,10,ot.H)})),Vt=(e,t)=>e.ofType(ot.f).switchMap((({payload:{baseUrl:e,issueKey:s,analyticsEvent:n}})=>{const a=t.getState(),i=Object(He.n)(a);return Ft(e,s,n,i>10?i-10:0,i>10?10:i,ot.D)}));var Kt=n("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),Wt=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");var Bt=({startAt:e,orderBy:t,baseUrl:s,issueKey:n,maxResults:a})=>Object(Wt.a)(`${s}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:at({startAt:e,orderBy:t,
maxResults:a,issueKey:n})})});function Ht(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $t(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(s),!0).forEach((function(t){Gt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ht(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function qt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const zt={NEWEST_FIRST:"-started",OLDEST_FIRST:"started"},Yt=e=>{const{totalCount:t,nodes:s,startIndex:n}=e.viewIssue.worklogs,a=s.map((e=>{let{updateAuthor:t=null,updated:s,comment:n,created:a}=e;const i=s!==a;return $t($t({},qt(e,["updateAuthor","updated","comment","created"])),{},{updated:i?s:null,updateAuthor:i&&t?t:null,comment:Object(Be.a)(n)})})),i=a.reduce(((e,t)=>$t($t({},e),{},{[t.id]:t})),{});return{sortedWorklogIds:a.map((e=>e.id)),totalWorklogs:t,worklogs:i,startIndex:n||0}};function Qt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(s),!0).forEach((function(t){Zt(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Xt=(e,t,s,n,a,i,r)=>Bt({baseUrl:e,issueKey:t,maxResults:s,orderBy:zt[n],startAt:a}).map(Kt.a).map((e=>Object(Kt.b)("issue.worklogs.fetch.epic.gira",e))).map(Yt).map((e=>((e,t,s,n)=>{let a;return a=t===ot.e?Math.max("NEWEST_FIRST"===s?n-e.sortedWorklogIds.length:n,0):Math.max("NEWEST_FIRST"===s?n:n-e.sortedWorklogIds.length,0),Jt(Jt({},e),{},{startIndex:a})})(e,i,n,r)));const es=(e,t,s,n,a)=>{let i=0,r=0;return e===ot.g?(r="NEWEST_FIRST"===a?t+n:Math.max(t-100,0),{maxResults:"NEWEST_FIRST"===a?Math.min(s-r,100):t-r,startAt:r}):(r="NEWEST_FIRST"===a?Math.max(0,t-100):t+n,i="NEWEST_FIRST"===a?t-r:Math.min(s-r,100),{maxResults:i,startAt:r})
},ts=(e,t)=>e.ofType(ot.g).switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.y)(e),a=Object(mt.b)(e),i=Object(He.n)(e),r=Object(He.k)(e),o=Object(He.g)(e).length,{maxResults:c,startAt:l}=es(ot.g,i,r,o,a);return Xt(s,n,c,a,l,ot.g,i).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(ot.F)({worklogs:e,totalWorklogs:t,startIndex:n,sortedWorklogIds:s,selectedSortOrder:a}))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-sorted-worklogs","Could not fetch more sorted worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(ot.I)()))))})),ss=(e,t)=>e.ofType(ot.e).switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.y)(e),a=Object(mt.b)(e),i=Object(He.n)(e),r=Object(He.k)(e),o=Object(He.g)(e).length,{maxResults:c,startAt:l}=es(ot.e,i,r,o,a);return Xt(s,n,c,a,l,ot.e,i).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(ot.B)({
worklogs:e,totalWorklogs:t,startIndex:n,sortedWorklogIds:s,selectedSortOrder:a}))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-sorted-worklogs","Could not fetch more sorted worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(ot.I)()))))}));var ns=n("./src/packages/platform/ui/flags/src/services/index.js"),as=n("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),is=n("./src/packages/issue/issue-scroll/src/services/types.js"),rs=n("./src/packages/platform/utils/permalinks/src/index.js"),os=n("./src/packages/platform/utils/permalinks/src/constants.js"),cs=n("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),ls=n("./src/packages/issue/issue-view/src/common/messages/flags.js");var us=({orderBy:e,baseUrl:t,issueKey:s,worklogAmount:n,worklogId:a})=>Object(Wt.a)(`${t}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:at({orderBy:e,worklogAmount:n,issueKey:s,
worklogId:a})})});const ds=(e,t)=>{const s=Object(le.f)(e),n=Object(je.l)(Object(le.y)(e));if(Object(W.isActivitySortingEnabled)()){const a=Object(mt.b)(e);return((e,t,s,n,a)=>us({baseUrl:e,issueKey:t,worklogAmount:s,orderBy:zt[n],worklogId:a}).map(Kt.a).map((e=>Object(Kt.b)("issue.worklogs.fetch.epic.gira",e))).map(Yt))(s,n,Math.floor(5),a,t)}return Ke.Observable.from(Rt(s,n,t))},ps=(e,t)=>e.ofType(ot.k).switchMap((e=>{const s=t.getState(),{payload:n}=e;return ds(s,n.worklogId).map((({totalWorklogs:e,worklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(ot.O)(s,t,n||0,e))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after adding new worklog",e),Ke.Observable.of(Object(ot.N)()))))}));var ms=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(st.b)(`${nt(e,t)}?startAt=${s}&reverseSortOrder=${a?"true":"false"}${n?`&maxResults=${n}`:""}`))(e,t,s,n,a).then((e=>(e=>({totalWorklogs:e.total,worklogs:Ze(e.worklogs)}))(e)))
;function bs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(s),!0).forEach((function(t){gs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hs=(e,t,s,n,a)=>Ke.Observable.from(ms(e,t,n,a,!0)).do((e=>Object(Tt.a)(s,{attributes:{worklogItemCount:e.worklogs.length}}))).map((({totalWorklogs:e,worklogs:t})=>Object(ot.S)(t.map((e=>e.id)),t.reduce(((e,t)=>fs(fs({},e),{},{[t.id]:t
})),{}),e))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklogs","Could not fetch worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(ot.P)())))),ys=(e,t)=>e.ofType(ot.l,ot.n).switchMap((({payload:{baseUrl:e,issueKey:s},meta:{analyticsEvent:n}})=>{const a=t.getState(),i=Object(He.g)(a).length;return hs(e,s,n,i,10)})),Os=e=>e.ofType(ot.m).switchMap((({payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}})=>hs(e,t,s,0,5)));var js=({baseUrl:e,issueKey:t,maxResults:s,orderBy:n})=>Object(Wt.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:at({maxResults:s,issueKey:t,orderBy:n})})});const vs=(e,t)=>e.ofType(ot.i,ot.j).switchMap((()=>{const e=t.getState();return((e,t,s,n)=>js({baseUrl:e,issueKey:t,maxResults:s,orderBy:zt[n]
}).map(Kt.a).map((e=>Object(Kt.b)("issue.worklogs.fetch.epic.gira",e))).map(Yt))(Object(le.f)(e),Object(le.y)(e),100,Object(mt.b)(e)).map((({worklogs:e,totalWorklogs:t,startIndex:s,sortedWorklogIds:n})=>Object(ot.L)({worklogs:e,totalWorklogs:t,startIndex:s,sortedWorklogIds:n}))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-sorted-worklogs","Could not fetch sorted worklogs:",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(ot.I)()))))})),Es=(e,t)=>Object(Ne.combineEpics)(dt,ys,Os,ps,(e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_WORKLOG").switchMap((()=>{const t=s.getState(),n=e.getScrollTargetId(is.a.WORKLOG);return null===n?Ke.Observable.of():ds(t,n).flatMap((({totalWorklogs:t,worklogs:s,sortedWorklogIds:a,startIndex:i})=>{const r={key:"Worklog",type:"Worklog",name:as.a.worklog.defaultMessage};return window.history.replaceState({},null,Object(rs.c)(n,os.b.WORKLOG)),e.setScrollTarget(null),
Ke.Observable.of(Object(ot.O)(a,s,i||0,t),Object(W.isActivitySortingEnabled)()?Object(cs.a)(r):Object(cs.b)(r),Object(ot.U)(!1))})).catch((e=>{Ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after attempting worklog attachment fetch",e);const{showFlag:t}=Object(ns.f)();return t({type:"error",title:[ls.a.commentWorklogAttachmentFetchFailedTitle,{field:"worklog"}],description:ls.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),Ke.Observable.of(Object(ot.N)())}))})))(t),It,(e=>Object(Ne.combineEpics)(gt(e),ft))(e),Vt,Ut,vs,ss,ts),ks=(e,t)=>Es(e,t);var ws=n("./node_modules/rxjs/operators.js"),Ss=n("./node_modules/lodash/curry.js");const Cs=({meta:{batch:e}={}})=>!0===e,Is=n.n(Ss)()(((e,{type:t})=>e.includes(t)))
;var Ts=(...e)=>t=>t.pipe(Object(ws.filter)((t=>Cs(t)?t.payload.some(Is(e)):e.includes(t.type))),Object(ws.flatMap)((t=>Cs(t)?Ke.Observable.from(t.payload.filter(Is(e))):Ke.Observable.of(t)))),Ps=n("./node_modules/icepick/icepick.js"),_s=n("./src/packages/platform/utils/constants/src/issue-link-types.js"),xs=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),Ds=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),As=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),Ls=n("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),Ms=e=>/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e);function Rs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ns(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(s),!0).forEach((function(t){Fs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Rs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Us=Object(Ve.i)("comment","description"),Vs=e=>{switch(e){case"AUTHENTICATION_ERROR":return"AUTHENTICATION";case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return"PERMISSION";case"UNKNOWN_ERROR":case"CONNECTIVITY_ERROR":default:return"GENERIC"}
},Ks=Object(Ve.i)("AUTHENTICATION","PERMISSION","GENERIC"),Ws=Object(Ve.i)("assignee","labels","priority","components","fixVersions","versions","com.pyxis.greenhopper.jira:gh-sprint","duedate","com.pyxis.greenhopper.jira:gh-epic-link","reporter","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","description","watches","summary","timeoriginalestimate","timetracking","com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:flagged","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk:vp-origin","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:project"),Bs=e=>t=>({
eventData:Object(H.a)(t),eventNameSuffix:e}),Hs=e=>e.startsWith("comment")?"comment":e,$s=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!==n&&Hs(n);return{eventNameSuffix:e,eventData:{type:Us(a)}}},Gs=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!=n?Hs(n):n;return{eventNameSuffix:e,eventData:{type:Us(a)}}},qs=e=>["updatedField","oldValId","newValId","oldValName","newValName"].filter((t=>e&&Object.hasOwnProperty.call(e,t))).reduce(((t,s)=>{const n=e[s]?{[s]:e[s]}:{};return Ns(Ns({},t),n)}),{}),zs=e=>({eventData:{commentCount:Object(As.K)(e)}}),Ys=e=>{const t=(e=>e?JSON.stringify(e).length:0)(e.bodyAdf);return{isInternal:e.isInternal,charactersInCommentCount:t}};var Qs={SAVE_LINKED_ISSUE_REQUEST:(e,t)=>Object(Ps.merge)(Bs("issue-links.save.request"),((e,t)=>{
const{payload:{newIssueLinks:{issueLinkType:s,issueLinks:n}}}=t,a=(null!=n&&null!==n.linkedIssues&&void 0!==n.linkedIssues&&Object.keys(n.linkedIssues).length>0?Object.keys(n.linkedIssues).map((e=>n.linkedIssues[e].issueId)):[""])[0];return{eventData:{issueLinkTypeId:s.id,issueLinkTypeName:new ie.a(Object(_s.a)(s.label)),issueLinkLinkedIssueId:a}}})(0,t)),SAVE_REMOTE_LINKED_ISSUE_REQUEST:Bs("issue-links.save.request"),DELETE_LINKED_ISSUE_REQUEST:(e,t)=>Object(Ps.merge)(Bs("issue-links.delete.request"),(e=>({eventData:{issueLinkTypeId:e.typeId,issueLinkTypeName:new ie.a(Object(_s.a)(e.typeName))}}))(Object(Ls.f)(t.payload.linkedIssueId)(e))),SAVE_LINKED_ISSUE_SUCCESS:Bs("issue-links.save.success"),SAVE_LINKED_ISSUE_FAILURE:Bs("issue-links.save.failure"),SAVE_REMOTE_LINKED_ISSUE_SUCCESS:Bs("issue-links.save.success"),SAVE_REMOTE_LINKED_ISSUE_FAILURE:Bs("issue-links.save.failure"),SAVE_LINKED_ISSUE_RETRY:Bs("issue-links.save.retry"),
SAVE_REMOTE_LINKED_ISSUE_RETRY:Bs("issue-links.save.retry"),SAVE_LINKED_ISSUE_CANCEL:Bs("issue-links.save.cancel"),SHOW_DELETE_COMMENT_MODAL:Bs("comment.delete.linkclicked"),FETCH_OLDER_COMMENTS_REQUEST:Bs("comment.fetcholder.click"),FETCH_NEWER_COMMENTS_REQUEST:Bs("comment.fetchnewer.click"),EDIT_COMMENT_BEGIN:e=>Bs("comment.edit.linkclicked")(e),SAVE_COMMENT_SUCCESS:(e,t)=>Object(Ps.merge)(Bs("comment.save.success")(e),{eventData:Ns(Ns({},qs(t.payload)),{},{actionSubjectId:new ie.a(t.payload.comment.id),actionSubjectOptimisticId:new ie.a(t.payload.optimisticId)},Ys(t.payload.comment))}),DELETE_COMMENT_REQUEST:(e,t)=>Object(Ps.merge)(Bs("comment.delete.modal.confirm")(e),{eventData:Ns(Ns({},qs(t.payload)),{},{actionSubjectId:new ie.a(t.payload.id)})}),PASTED_INTO_COMMENT_FORM:(e,t)=>Object(Ps.merge)(Bs("comment.paste")(e),{eventData:{isNewComment:"NEW_OPTIMISTIC_COMMENT"===t.payload.id,pastedContentLength:(t.payload.pastedContent||"").length,
containsEmailAddress:Ms(t.payload.pastedContent)}}),FETCH_ISSUE_SUCCESS:e=>Object(Ps.merge)(Bs("fetchissue.succeeded")(e),zs(e)),REFRESH_ISSUE_SUCCESS:e=>Object(Ps.merge)(Bs("refreshissue.succeeded")(e),zs(e)),REFRESH_ISSUE_REQUEST:Bs("refreshissue.request"),FETCH_ISSUE_REQUEST:Bs("fetchissue.request"),LOAD_NEW_ISSUE:Bs("load-new-issue"),FETCH_ISSUE_FAILURE:(e,t)=>({eventNameSuffix:"fetchissue.failed",eventData:{error:Ks(Vs(Object(te.i)(e))),statusCode:t.payload.statusCode,analyticsSource:Object(le.b)(e)}}),DELETE_DRAFT_REQUEST:$s("issue.delete-draft.request"),DELETE_DRAFT_SUCCESS:$s("issue.delete-draft.success"),DELETE_DRAFT_FAILURE:$s("issue.delete-draft.failure"),DELETE_DRAFT_NEWER_CONTENT_FOUND:$s("issue.delete-draft.replaced-by-new-content"),LOAD_DRAFT_SUCCESS:Gs("issue.load-draft.success"),LOAD_DRAFT_FAILURE:Gs("issue.load-draft.failure"),LOGIN_SUCCESSFUL:e=>({eventNameSuffix:"login.succeeded",eventData:{analyticsSource:Object(le.b)(e)}}),
FIELD_EDIT_BEGIN:(e,t)=>Object(Ps.merge)(Bs("field.edit")(e),{eventData:{fieldType:Ws(Object(xs.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ie.a(t.payload.fieldEditSessionId),isReusableField:!0}}),FIELD_SAVE_REQUEST:(e,t)=>Object(Ps.merge)(Bs("field.save")(e),{eventData:Ns({fieldType:Ws(Object(xs.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ie.a(Object(xs.f)(t.payload.fieldId)(e)),isReusableField:!0,issueHierarchyLevel:Object(W.collapsedHierarchies)()?Object(Ds.b)(e):Object(Ds.f)(e)},qs(t.payload.eventData))}),FIELD_EDIT_CANCEL:(e,t)=>Object(Ps.merge)(Bs("field.cancel")(e),{eventData:{fieldType:Ws(Object(xs.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ie.a(Object(xs.f)(t.payload.fieldId)(e)),isReusableField:!0}}),FIELD_PASTE:(e,t)=>Object(Ps.merge)(Bs("field.paste")(e),{eventData:{fieldType:Ws(Object(xs.r)(t.payload.fieldId)(e)),isReusableField:!0,pastedContentLength:t.payload.pastedContent.length,containsEmailAddress:Ms(t.payload.pastedContent)}})
},Js=Object(Ve.m)("issue");function Zs(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Xs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function en(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(s),!0).forEach((function(t){tn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function tn(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const sn=({eventNameSuffix:e,eventData:t,analyticsEvent:s})=>{if(s)try{const e=((e,t)=>{const s=t.payload&&t.payload.action||"updated",{actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l}=e;return{action:s,actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l,attributes:Zs(e,["actionSubjectId","name","tags","containerType","containerId","objectType","objectId"])}})(t,s);Object(We.a)(s,e)}catch(a){Pe.a.safeErrorWithoutCustomerData("issue.instrumentation.trigger-analytics-action","Failed to send action track event",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:a}))}const n=(e=>{if(e&&e.attributes){const{attributes:t}=e,s=Zs(e,["attributes"]);return en(en({},t),s)}return e})(t);Js(e,n)},nn=Object.keys(Qs);var an=(e,t)=>e.pipe(Ts(...nn),Object(ws.map)((e=>((e,t)=>Qs[t.type]&&en({
analyticsEvent:t.payload&&t.payload.analyticsEvent},Qs[t.type](e,t)))(t.getState(),e))),Object(ws.filter)((e=>!!e)),Object(ws.tap)(sn),Object(ws.ignoreElements)()),rn=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visibility/index.js");const on=(e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}/credentials`;var cn=n("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");var ln=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),un=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),dn=n("./src/packages/issue/issue-view/src/common/util/errors/index.js");const pn=e=>((e,t,s)=>e.delay(t.delay,s||void 0).take(t.take).concat(e.flatMap((e=>Ke.Observable.throw(e)))))(e,{delay:5e3,take:3});var mn=n("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js"),bn=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,
tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4});const fn=e=>Ke.Observable.of(Object(mn.b)(e)),gn=(e,t,s)=>Object(ln.a)(s,(()=>((e,t)=>Object(Wt.a)(on(e,t)).catch((e=>{throw new cn.a(e,on("{baseUrl}","{issueKey}"))})))(e,t))).map(bn).map(mn.d).catch((e=>{if(403===e.statusCode)return fn(e);throw e})).retryWhen(pn).catch(fn),hn=()=>({type:"FETCH_USER_AUTH_REQUEST"}),yn=e=>({type:"FETCH_USER_AUTH_SUCCESS",payload:e}),On=e=>({type:"FETCH_USER_AUTH_FAILURE",payload:{statusCode:e}}),jn=e=>`${e}/rest/internal/2/media/user/credentials`,vn=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,tokenIssueTimestamp:Date.now()-1e4}),En=e=>Ke.Observable.of(On(e.statusCode)),kn=(e,t)=>Object(ln.a)(t,(()=>(e=>Object(Wt.a)(jn(e)).catch((e=>{throw new cn.a(e,jn("{baseUrl}"))})))(e))).map(vn).map(yn).catch((e=>{if(403===e.statusCode)return En(e);throw e})).retryWhen(pn).catch(En)
;var wn=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),Sn=n("./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js");const Cn=e=>Ke.Observable.of(Ot(e)),In=(e,t,s,n,a)=>Object(ln.a)(a,(()=>Object(wn.b)(e,t,s,n))).map(Sn.a).map(yt),Tn=(e,t,s,n,a)=>In(e,t,s,n,a).catch((e=>{if(403===e.statusCode)return Cn(e);throw e})).retryWhen(pn).catch(Cn);var Pn=(e,t,s,n)=>Object(Ne.combineEpics)(((e,t)=>Object(Ne.combineEpics)(((s,n)=>s.ofType("FETCH_UPLOAD_CONTEXT_REQUEST").switchMap((()=>{const s=n.getState(),a=e(s),i=t(s);return gn(a,i)}))),((e,t)=>e.pipe(Ts("FETCH_UPLOAD_CONTEXT_SUCCESS","CHECK_UPLOAD_CONTEXT"),Object(ws.switchMap)((()=>{const e=t.getState(),s=Object(un.b)(e);if(null==s||!Object(rn.a)())return Ke.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Ke.Observable.of(Object(mn.c)()).delay(r)
})))),(e=>e.ofType("FETCH_UPLOAD_CONTEXT_FAILURE").filter((({payload:e})=>403!==e.error.statusCode)).do((({payload:e})=>{const{error:t}=e;Object(dn.a)("issue.media.fetch-upload-context-error","Error when fetching media upload context",t,new pt.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))})).ignoreElements()),(()=>Ke.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(rn.a)()?Ke.Observable.of(Object(mn.a)()):Ke.Observable.empty())))))(e,t),((e,t,s,n)=>Object(Ne.combineEpics)(((a,i)=>a.ofType("FETCH_VIEW_CONTEXT_REQUEST").switchMap((()=>{const a=i.getState(),r=e(a),o=t(a),c=n.getMaxTokenLength();return s.refreshAttachments(Object(je.l)(o)),In(r,o,c).retryWhen(pn).catch((e=>Ke.Observable.of(Ot(e))))}))),((e,t)=>e.pipe(Ts("FETCH_VIEW_CONTEXT_SUCCESS","CHECK_VIEW_CONTEXT"),Object(ws.switchMap)((()=>{const e=t.getState(),s=Object(un.d)(e)
;if(null==s||!Object(rn.a)())return Ke.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Ke.Observable.of(ht()).delay(r)})))),(e=>e.ofType("FETCH_VIEW_CONTEXT_FAILURE").do((({payload:e})=>{const{error:t}=e;Object(dn.a)("issue.media.fetch-view-context-error","Error when fetching media view context",t,new pt.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))})).ignoreElements()),(()=>Ke.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(rn.a)()?Ke.Observable.of((()=>({type:"CHECK_VIEW_CONTEXT"}))()):Ke.Observable.empty())))))(e,t,s,n),(e=>Object(Ne.combineEpics)(((t,s)=>t.ofType("FETCH_USER_AUTH_REQUEST").switchMap((()=>{const t=s.getState(),n=e(t);return kn(n)}))),((e,t)=>e.pipe(Ts("FETCH_USER_AUTH_SUCCESS","CHECK_USER_AUTH"),Object(ws.switchMap)((()=>{const e=t.getState(),s=Object(un.c)(e)
;if(null==s||!Object(rn.a)())return Ke.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Ke.Observable.of(hn()).delay(r)})))),(e=>e.ofType("FETCH_USER_AUTH_FAILURE").filter((({payload:e})=>403!==e.statusCode)).do((({payload:e})=>{Object(dn.a)("issue.media.fetch-user-auth-error","Error when fetching media user auth",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:e.statusCode}}))})).ignoreElements()),(()=>Ke.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(rn.a)()?Ke.Observable.of((()=>({type:"CHECK_USER_AUTH"}))()):Ke.Observable.empty())))))(e)),_n=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js"),xn=n("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),Dn=n("./src/packages/issue/issue-view/src/drafts/draft-utils.js");let An;const Ln=(e,t)=>{const{payload:{fieldId:s,draftKey:n}}=e
;if(s)return((e,t)=>{const s=Object(le.y)(e),n=Object(le.a)(e),a=Object(Dn.c)(n,s,t),i=Object(Dn.b)(a);return An.remove(a),An.remove(i),Ke.Observable.of(Object(xn.c)(t))})(t,s);const a=Object(Dn.d)(n);return n?(e=>{const t=Object(Dn.b)(e);return An.remove(e),An.remove(t),Ke.Observable.of(Object(xn.c)(e))})(a).catch((e=>(Object(dn.a)("issue.draft.delete","Failed to delete a draft.",e),Ke.Observable.of(Object(xn.a)(a,e))))):Ke.Observable.empty()};var Mn=(e,t)=>(An=Object(_n.b)("issue-drafts"),e.ofType("DELETE_DRAFT_REQUEST").mergeMap((e=>Ln(e,t.getState()))).catch((e=>(e=>Ke.Observable.of(Object(xn.a)(null,e)))(e))));let Rn;var Nn=e=>(Rn=Object(_n.b)("issue-drafts"),e.ofType("LOAD_DRAFT_REQUEST").mergeMap((e=>(e=>{const{payload:{fieldId:t,draftKey:s,draftHandler:n}}=e,a=Object(Dn.d)(s),i=Rn.get(s);if(i){const e=n?Ke.Observable.of(n(t,i)):Ke.Observable.empty(),s=Ke.Observable.of(Object(xn.f)(a,i))
;return Ke.Observable.concat(e,s).catch((e=>(Object(dn.a)("issue.draft.fetch","Failed to fetch issue draft",e),Ke.Observable.of(Object(xn.d)(a,e)))))}return Ke.Observable.empty()})(e))).catch((e=>(e=>Ke.Observable.of(Object(xn.d)(null,e)))(e))));let Fn;var Un=(e,t)=>(Fn=Object(_n.b)("issue-drafts"),e.ofType("SAVE_DRAFT_REQUEST").throttleTime(1e3,Ke.Scheduler.default,{leading:!0,trailing:!0}).switchMap((e=>((e,t)=>{const{payload:{fieldId:s,value:n}}=e,a=Object(le.y)(t),i=Object(le.a)(t),r=Object(Dn.c)(i,a,s);return Fn.set(r,n),Ke.Observable.of(Object(xn.i)(r,n))})(e,t.getState()))).catch((e=>(e=>(Object(dn.a)("issue.save-draft","Failed to save draft",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(xn.g)(e))))(e)))),Vn=n("./src/packages/issue/issue-view/src/actions/comment-actions.js");var Kn=(e,t)=>e.ofType("SELECT_ACTIVITY_SORT_ORDER","SELECT_ACTIVITY_ITEM").switchMap((()=>{const e=t.getState(),s=Object(mt.a)(e)
;return window.history.replaceState({},null,Object(Ve.k)(["focusedCommentId","focusedWorklogId"])),null===s?Ke.Observable.empty():"Comments"===s.type||"JSDComments"===s.type?Ke.Observable.of(Object(Vn.v)()):"Worklog"===s.type?Ke.Observable.of(Object(ot.J)()):Ke.Observable.empty()}));const Wn=e=>`\n    mutation {\n        setActivitySortOrder(orderBy: ${e}) {\n            success\n            errors {\n                message\n            }\n        }\n    }\n`,Bn="issue.activity-feed.sort.save.gira",Hn=e=>{const{errors:t}=e.setActivitySortOrder;if(t&&t.length>0){const e={eventNameSuffix:"issue.error",type:"update",app:"issue",event:new Error(t[0].message)};Pe.a.safeErrorWithoutCustomerData(Bn,"Error present in gira response when calling to update setActivitySortOrder",new pt.a(e))}return e.setActivitySortOrder},$n=(e,t)=>Object(Wt.a)(`${e}/rest/gira/1/`,(e=>({method:"POST",body:JSON.stringify({query:Wn(e)})}))(t)).map((e=>Object(Kt.b)(Bn,e))).map(Hn)
;var Gn=(e,t)=>e.ofType("UPDATE_ACTIVITY_SORT_ORDER_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s);return $n(n,e.payload).ignoreElements()})).catch((e=>(Object(dn.a)("issue.activity-feed.sort.save.epic","Could not save sort order in jira issue view",e),Ke.Observable.empty()))),qn=n("./src/packages/common-legacy-do-not-add-anything-new/src/authenticate-using-app-links/index.js"),zn=n("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),Yn=(e,t)=>e.ofType("APPLINK_AUTHENTICATION_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=e.payload,{analyticsEvent:i}=e.meta,r=Object(qn.a)(`${n}${a}`);return i&&Object(re.f)(i,"applink authenticate",{authStatus:"start"}),r?Ke.Observable.fromPromise(r).map((()=>(i&&Object(re.f)(i,"applink authenticate",{authStatus:"success"}),Object(zn.b)()))).catch((e=>(Object(dn.a)("issue-applink-authentication-epic","Failed to authenticate with applinks",e,new pt.a({eventNameSuffix:"issue.error",type:"js",
app:"issue",event:e})),Ke.Observable.empty()))):Ke.Observable.empty()})),Qn=n("./node_modules/lodash/get.js"),Jn=n.n(Qn),Zn=n("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");var Xn=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const ea=(e,t)=>`project=${e} AND issuetype in (${t.join(",")}) ORDER BY lastViewed DESC, updated DESC, priority DESC`,ta=({issues:e})=>e.map((({id:e,key:t,fields:{summary:s,issuetype:n}})=>({id:Object(je.j)(e),key:Object(je.l)(t),summary:s,issueType:n})));function sa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function na(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(s),!0).forEach((function(t){aa(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ia=e=>e.reduce(((e,t)=>na(na({},e),{},{[t.id]:t.parentId})),{});var ra=Object(Ne.combineEpics)(((e,t)=>e.ofType("FETCH_ISSUE_PARENTS_REQUEST").mergeMap((()=>{const e=t.getState();return((e,t,s)=>t?Object(Wt.a)(Object(Xn.o)(e),{method:"POST",body:JSON.stringify({jql:ea(t,s)})}).map(ta):Ke.Observable.of([]))(Object(le.f)(e),Object(te.C)(e),Object(Ds.g)(e))})).map(Zn.c).catch((e=>(Object(dn.a)("issue.fetch-parent.failure","",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Object(Zn.a)())))),((e,t)=>e.ofType("SET_PARENT_REQUEST","SET_PARENT_OPTIMISTIC").mergeMap((e=>{
const s=t.getState(),{payload:{issues:n}}=e,a="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue&&e.payload.parentIssue.id:e.payload.parentId,i=Object(te.B)(s),r="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue:i.find((e=>e.id===a)),o=n.filter((e=>e.parentId!==a&&e.id)).map((e=>Number(e.id))),c=ia(n.filter((e=>o.includes(Number(e.id)))));if(!o.length)return Ke.Observable.empty();const l=Object(le.f)(s),u=Object(te.C)(s);return("SET_PARENT_OPTIMISTIC"===e.type?Ke.Observable.fromPromise(e.payload.requestPromise):((e,t,s,n)=>t?Object(Wt.a)(((e,t,s)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`)(e,t,s),{method:"POST",body:JSON.stringify(n)}):Ke.Observable.throw("Missing Project Id"))(l,u,e.payload.parentId,{issueIds:o})).flatMap((()=>r?Ke.Observable.of(Object(Zn.g)(r,c)):Ke.Observable.of(Object(Zn.j)(c)))).catch((e=>(Object(dn.a)("issue.set-parent.failure","",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
Ke.Observable.empty())))}))),((e,t)=>e.ofType("UNSET_PARENT_REQUEST").mergeMap((e=>{const s=t.getState(),{payload:{issues:n}}=e,a=n.filter((e=>e.parentId&&e.id)).map((e=>Number(e.id))),i=ia(n.filter((e=>a.includes(Number(e.id)))));if(0===a.length)return Ke.Observable.empty();return((e,t,s)=>t?Object(Wt.a)(((e,t)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/delete-parents`)(e,t),{method:"POST",body:JSON.stringify(s)}):Ke.Observable.throw("Missing Project Id"))(Object(le.f)(s),Object(te.C)(s),{issueIds:a}).flatMap((()=>Ke.Observable.of(Object(Zn.j)(i)))).catch((e=>(Object(dn.a)("issue.unset-parent.failure","",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty())))}))),(e=>e.ofType("SET_PARENT_SUCCESS","UNSET_PARENT_SUCCESS").map((e=>((e,t=null)=>({type:"ISSUE_RELATIONSHIP_UPDATE_SUCCESS",payload:{oldParentIdsByIssueIds:e,parentIssueId:t}
}))(Jn()(e,"payload.oldParentIdsByIssueIds",null),Jn()(e,"payload.parentIssue.id",null)))))),oa=n("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),ca=n("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js");const la=(e,t,s,n)=>{const a=((e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}`)(t,s),i=(e=>({method:"POST",body:JSON.stringify({fileId:e.id})}))(e);return Object(Wt.a)(a,i).map((t=>((e,t,s)=>({id:`${e.attachmentId}`,mediaApiFileId:t.id,createdDate:t.createdDate,author:s,mimetype:t.mimetype,filename:t.filename}))(t,e,n)))};var ua=Object(Ne.combineEpics)(((e,t)=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.y)(s),i=Object(le.a)(s),r=Object(ca.b)(e.payload.id)(s);return la(r,n,a,i).retry(3).map(oa.b).catch((e=>(Object(dn.a)("issue.attachment.jira-create-error","Could not create attachment in Jira",e),Ke.Observable.of(Object(oa.a)(r,e.statusCode)))))
}))),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").do((e=>{Pe.a.safeErrorWithoutCustomerData("issue.attachment.jira-create-error","Could not create attachment in Jira",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{statusCode:e.payload.statusCode}}))})).ignoreElements()),(e=>e.ofType("MEDIA_PICKER_ERROR","ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR").do((e=>{const{description:t,name:s,fileId:n}=e.payload;Pe.a.safeErrorWithoutCustomerData("issue.attachment.media-services-upload-error","Could not upload attachment to Media Services",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{description:t,name:s,fileId:n}}))})).ignoreElements()));var da=Object(Ne.combineEpics)((e=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mapTo(jt())),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").mapTo((()=>({type:"MARK_TOKEN_AS_UP_TO_DATE"
}))())),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_SUCCESS").mapTo(ht()))),pa=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),ma=n("./src/packages/issue/issue-view/src/actions/card-cover-actions.js"),ba=n("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js");const fa=Xn.d,ga=(e,t)=>{const s=`[${t}]`;return pa.a`query {
            agile {
                board {
                    additionalBoardData(rapidViewId: ${e}) {
                        isMediaOnCardsEnabled
                    }
                    media(issueIds: ${s}) {
                        cardMedia {
                            issueId
                            attachmentId
                            availableAttachmentIds
                        }
                    }
                }
            }
    }`},ha=e=>(Object(dn.a)("issue.card-cover.fetch",e.message,e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(ma.a)()));var ya=(e,t)=>e.pipe(Ts("FETCH_ISSUE_SUCCESS","ATTACHMENT_JIRA_CREATE_SUCCESS"),Object(ws.filter)((()=>Object(ba.b)(t.getState()))),Object(ws.flatMap)((()=>(e=>{const t=Object(le.E)(e),s=Object(te.l)(e);return null==t||null==s?Ke.Observable.empty():Object(Wt.a)(fa(Object(le.f)(e)),{method:"POST",body:JSON.stringify({query:ga(t,s)})})})(t.getState()).flatMap((e=>e.errors?ha(e):(e=>{const t=Jn()(e,"data.agile.board.additionalBoardData.isMediaOnCardsEnabled",!1),s=Jn()(e,"data.agile.board.media.cardMedia[0].attachmentId",null),n=Jn()(e,"data.agile.board.media.cardMedia[0].availableAttachmentIds",[]);return Ke.Observable.of(Object(ma.b)({isEnabled:t,attachmentId:s,availableAttachmentIds:n}))})(e))).catch((e=>ha(e))))));var Oa=(e,t)=>e.ofType("CARD_COVER_UPDATE_REQUEST").flatMap((e=>((e,t)=>{
const s=Object(le.f)(e),n=Object(te.l)(e),{attachmentId:a}=t.payload;if(null==n)return Ke.Observable.empty();const i={method:a?"PUT":"DELETE"};return Object(Wt.a)(((e,t,s)=>{const n=`${e}/rest/greenhopper/1.0/xboard/work/media/${t}`;return s?`${n}?attachmentId=${s}`:n})(s,n,a),i)})(t.getState(),e).flatMap((()=>(()=>Ke.Observable.of(Object(ma.e)()))())).catch((t=>((e,t)=>(Ve.h.safeErrorWithoutCustomerData("issue.card-cover.update",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),Ke.Observable.of(Object(ma.c)(t.payload.currentAttachmentId))))(t,e))))),ja=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),va=n("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js");const Ea=e=>e.issueTypes,ka=(e,t,s)=>((e,t,s)=>Object(Wt.a)(`${e}/rest/internal/2/issue/${t}/changeissuetype`,{method:"post",body:JSON.stringify({targetIssueTypeId:s})}))(e,t,s).map((e=>e.changeSuccessful))
;var wa=n("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js");const Sa=(e,t,s,n)=>{const a=((e,t,s)=>({action:e,actionSubjectId:Object(ie.c)(t)(t),attributes:s}))(t,s,n);Object(We.a)(e,a)};var Ca=Object(Ne.combineEpics)(((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST").switchMap((e=>{const s=Object(le.f)(t.getState()),{issueKey:n,targetType:a,issueId:i,analyticsEvent:r,currentType:o}=e.payload;return!o.subtask&&a.subtask?(Sa(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Ke.Observable.of(Object(va.f)(i,o,a))):ka(s,n,a.id).map((e=>e?(Sa(r,"updated","simpleChangeIssueTypeSuccess"),Object(va.h)(n,a.name)):(Sa(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Object(va.f)(i,o,a)))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("change.issue.type.simplechange",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(va.e)(e)))))
}))),((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS").switchMap((()=>Object(wa.c)(t.getState()).flatMap((e=>Ke.Observable.of(Object(V.d)(e))))))),((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED").do((e=>{const s=Object(le.f)(t.getState()),{issueId:n,currentType:a,targetType:i}=e.payload;a.subtask&&i.subtask?Object(ja.a)(`${s}/secure/MoveSubTaskChooseOperation!default.jspa?id=${n}`,!1):!a.subtask&&i.subtask?Object(ja.a)(`${s}/secure/ConvertIssue.jspa?id=${n}`,!1):Object(ja.a)(`${s}/secure/MoveIssue!default.jspa?id=${n}`,!1)})).ignoreElements())),Ia=n("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js");const Ta=e=>(Pe.a.safeErrorWithoutCustomerData("jira.user.issue.changeboarding.lastinteracted","Error saving last interacted changeboarding timestamp",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty());var Pa=Object(Ne.combineEpics)((e=>e.ofType("CHANGEBOARDING_BANNER_SEEN").do((e=>{
Object(Ia.c)(e.payload.currentSeenTimes+1),e.payload.firstSeenTimestamp||Object(Ia.b)(Date.now())})).ignoreElements()),((e,t)=>e.ofType("CHANGEBOARDING_TOUR_BEGIN","CHANGEBOARDING_BANNER_DISMISS").mergeMap((e=>Ke.Observable.of(e).mergeMap((()=>((e,t)=>{const s=Object(le.f)(e),n=Object(Xn.b)(s);return Object(st.e)(n,{body:`${t}`})})(t.getState(),e.payload))).catch(Ta))).ignoreElements()),((e,t)=>e.ofType("OPT_OUT_REQUEST").switchMap((e=>{const s=`${Object(le.f)(t.getState())}/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup`,{analyticsEvent:n}=e.payload;return Ke.Observable.from(Object(st.e)(s,{body:JSON.stringify({isEnabled:!1})})).map((()=>(n&&Object(re.b)(n,"changeboarding optedOut"),window.location.reload()))).catch((e=>(Pe.a.safeErrorWithoutCustomerData("jira.issue.details.changeboarding.optout","Could not opt-out from new issue view",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty())))}))));function _a(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(s),!0).forEach((function(t){Da(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Da(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Aa=(e,t)=>Object.entries(e).reduce(((e,[s,{value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l,configuration:u}])=>({fieldValues:xa(xa({},e.fieldValues),{},{[s]:n}),fieldConfigs:xa(xa({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,
schema:c,title:l,configuration:u}})})),{fieldValues:{},fieldConfigs:{}}),La=(e,t)=>{const s=[],n=[],a=e.map((e=>{const{fieldValues:a,fieldConfigs:i}=((e,t)=>e.reduce(((e,{key:s,value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l})=>({fieldValues:xa(xa({},e.fieldValues),{},{[s]:void 0!==n?n:null}),fieldConfigs:xa(xa({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,schema:c,title:l}})})),{}))(e.fields,t);return s.push({[e.key]:a}),n.push({[e.key]:i}),{id:e.id,key:e.key}}));return{issuesFieldsValues:s,issueFieldsConfigurations:n,childrenKeyList:a}},Ma=(e,t,s,n,a=!1)=>{
const{setIssue:i,mergeIssue:r,setIssues:o,mergeIssues:c}=t,{setIssueConfig:l,setIssuesConfig:u,mergeIssueConfig:d,mergeIssuesConfig:p}=s,{fieldValues:m,fieldConfigs:b}=Aa(e,a),f=m["children-issues"]||[],g=m["epic-issues"]||[],h=m["children-issues"],y=m["epic-issues"],{issuesFieldsValues:O,issueFieldsConfigurations:j,childrenKeyList:v}=La(f,a),{issuesFieldsValues:E,issueFieldsConfigurations:k,childrenKeyList:w}=La(g,a),S=xa(xa(xa({},m),h&&{"children-issues":v}),y&&{"epic-issues":w});a?r(n,S):i(n,S),a?d(n,b):l(n,b),c(E),a?c(O):o(O),p(k),a?p(j):u(j)};var Ra=(e,t)=>s=>s.ofType("CHILD_ISSUE_ADD_SUCCESS").switchMap((s=>{const{childIssue:n,fieldsData:a}=s.payload;if(!a)return Ke.Observable.empty();const{fieldValues:i,fieldConfigs:r}=Aa(a,!1);return e.setIssue(n.issueKey,i),t.setIssueConfig(n.issueKey,r),Ke.Observable.empty()}));const Na=["ADD_COMMENT_FORM_CANCEL","EDIT_COMMENT_CANCEL","SAVE_COMMENT_SUCCESS","DELETE_COMMENT_SUCCESS"];var Fa=e=>e.ofType(...Na).mergeMap((e=>(e=>{
if("ADD_COMMENT_FORM_CANCEL"===e.type||e.payload.isNewComment)return Ke.Observable.of(Object(xn.b)({fieldId:Object(Dn.a)("NEW_OPTIMISTIC_COMMENT")}));const t=(e=>{const t=(e.id||e.optimisticId).toString();return-1!==t.indexOf("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":t})(e.payload),s=Object(Dn.a)(t);return Ke.Observable.of(Object(xn.b)({fieldId:s}))})(e))).catch((e=>(e=>(Pe.a.safeErrorWithoutCustomerData("issue.comment-delete-draft",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty()))(e)));const Ua={method:"DELETE"},Va=(e,t,s)=>{const n=Object(le.f)(e),a=Object(je.l)(Object(le.y)(e)),i=((e,t,s)=>`${e}/rest/api/2/issue/${t}/comment/${s}`)(n,a,t),{bodyAdf:r}=Object(As.t)(e)[t],o=!!r&&Object(Be.d)(r);return Object(Wt.a)(i,Ua).map((()=>(o&&s.refreshAttachments(a),Object(Vn.h)(t)))).catch((e=>((e,t)=>(Object(dn.a)("issue.comment.delete","Could not delete a comment",e),
Ke.Observable.of(404===e.statusCode?Object(Vn.h)(t):Object(Vn.f)(t))))(e,t)))};var Ka=e=>(t,s)=>t.ofType("DELETE_COMMENT_REQUEST").mergeMap((t=>{const n=s.getState(),a=t.payload.id;return Va(n,a,e)})),Wa=n("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js");const Ba=(e,t,s)=>{const n=Object(le.a)(t),a=Object(le.y)(t);return Object(As.n)(t).map((i=>{const r=Object(Dn.a)(i),o=Object(Dn.c)(n,a,r),c=Object(As.f)(i)(t),l=null!=c?c:void 0;return Ke.Observable.of(Object(xn.e)(i,o,((e,t,s)=>e&&t===s.payload.id?Vn.l:null)(s,i,e),l))}))},Ha=e=>(Object(dn.a)("issue.comment-load-draft",e.message,e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty())
;var $a=Object(Ne.combineEpics)(((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").mergeMap((e=>Ke.Observable.merge(...Ba(e,t.getState(),!0)))).catch((e=>Ha(e)))),((e,t)=>e.pipe(Ts("FETCH_ISSUE_SUCCESS","REFRESH_ISSUE_SUCCESS","FETCH_MORE_COMMENTS_SUCCESS","FETCH_LATEST_COMMENTS_SUCCESS"),Object(ws.mergeMap)((e=>e.payload.comments?Ke.Observable.merge(...Ba(e,t.getState(),!1)):Ke.Observable.empty())),Object(ws.catchError)((e=>Ha(e))))));var Ga=e=>e.ofType("SAVE_COMMENT_SUCCESS").filter((e=>e.meta.shouldFetchViewContext)).mapTo(ht());var qa=(e,t)=>e.ofType("EDIT_COMMENT_UPDATE").switchMap((e=>((e,t)=>{const{payload:{id:s,value:n}}=e,a=Object(As.f)(s)(t);return Ke.Observable.of(Object(xn.h)(Object(Dn.a)(s),n,a))})(e,t.getState()))).catch((e=>(e=>(Object(dn.a)("issue.comment-save-draft",e.message,e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
Ke.Observable.empty()))(e))),za=n("./src/packages/platform/utils/fetch/src/utils/errors.js"),Ya=n("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");function Qa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ja(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qa(Object(s),!0).forEach((function(t){Za(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Za(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xa=(e,t,s,n,a)=>{const i=((e,t)=>{const s=e.getState();if(Object(le.t)(s))return{properties:[{
key:"sd.public.comment",value:{internal:Object(As.C)(t)(s)}}]};return{}})(e,t),r=((e,t)=>Object(As.z)(e.getState())?{visibility:"public"===t.type?null:t}:{})(e,a);return{method:n?"POST":"PUT",body:JSON.stringify(Ja(Ja({body:s},i),r))}},ei=t=>{if(t instanceof za.b&&t.message)try{const e=JSON.parse(t.message);return e.errorMessages?e.errorMessages.join("; "):void 0}catch(e){return void Object(dn.a)("issue.save.comment","Failed to parse FetchError",e)}},ti=(e,{id:t,bodyAdf:s,isNewComment:n,analyticsEvent:a,visibility:i},{shouldFetchViewContext:r})=>Object(Wt.a)(((e,t,s)=>{const n=e.getState();return(({baseUrl:e,issueKey:t,id:s="",isNewComment:n=!1})=>`${e}/rest/api/3/issue/${t}/comment${n?"":`/${s}`}`)({baseUrl:Object(le.f)(n),issueKey:Object(le.y)(n),id:t,isNewComment:s})})(e,t,n),Xa(e,t,s,n,i)).map(Ya.d).map(Ya.a).map((e=>Object(Vn.D)(e,t,n,a,{shouldFetchViewContext:r}))).catch((e=>(Object(dn.a)("issue.save.comment","Failed to save a comment",e),Ke.Observable.of(Object(Vn.A)({
optimisticId:t,isServerValidationError:!!e&&400===e.statusCode,invalidMessage:ei(e)})))));var si=Object(Ne.combineEpics)(((e,t)=>e.ofType("SAVE_COMMENT_RETRY").map((e=>{const s=t.getState(),{optimisticId:n,isNewComment:a}=e.payload;return Object(Vn.B)(Ja(Ja({},Object(As.H)(n)(s)),{},{isNewComment:a}))}))),((e,t)=>e.ofType("SAVE_COMMENT_REQUEST").groupBy((e=>e.payload.comment.id)).mergeMap((e=>e.concatMap((e=>{const{id:s,bodyAdf:n,isNewComment:a,visibility:i}=e.payload.comment,{analyticsEvent:r}=e.payload;if(!n||Object(Be.g)(n))return Ke.Observable.empty();let o=!1;if(a)o=Object(Be.d)(n);else{const e=Object(As.t)(t.getState());o=Object(Be.e)(e[s].bodyAdf,n)}return o&&t.dispatch(jt()),ti(t,{id:s,bodyAdf:n,isNewComment:a,analyticsEvent:r,visibility:i},{shouldFetchViewContext:o}).mergeMap((e=>{if("SAVE_COMMENT_FAILURE"===e.type)return Ke.Observable.of(e);if(a){if(Object(W.isActivitySortingEnabled)()){
const s=t.getState(),n=Object(As.K)(s),a=Object(As.F)(s),i=Object(As.J)(s),r=Object(mt.b)(s),{numPrevCommentsToLoad:o,numNextCommentsToLoad:c}=Object(Wa.a)(n,a,i);return"NEWEST_FIRST"===r&&o>0||"OLDEST_FIRST"===r&&c>0?Ke.Observable.zip(Ke.Observable.of(e),Ke.Observable.of(Object(Vn.v)(e.payload.comment.id))).mergeMap((e=>Ke.Observable.from(e))):Ke.Observable.zip(Ke.Observable.of(e)).mergeMap((e=>Ke.Observable.from(e)))}return Ke.Observable.zip(Ke.Observable.of(e),Ke.Observable.of(Object(Vn.o)())).mergeMap((e=>Ke.Observable.from(e)))}return Ke.Observable.zip(Ke.Observable.of(e)).mergeMap((e=>Ke.Observable.from(e)))}))})))))),ni=e=>e.ofType("ADD_COMMENT_FORM_EXPAND","EDIT_COMMENT_BEGIN","PASTED_INTO_COMMENT_FORM","SAVE_COMMENT_SUCCESS").groupBy((e=>{switch(e.type){case"ADD_COMMENT_FORM_EXPAND":return"NEW_OPTIMISTIC_COMMENT";case"EDIT_COMMENT_BEGIN":case"PASTED_INTO_COMMENT_FORM":return e.payload.id;case"SAVE_COMMENT_SUCCESS":
return e.payload.optimisticId.startsWith("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":e.payload.optimisticId;default:return null}})).map((e=>{const t=e.filter((({type:e})=>"ADD_COMMENT_FORM_EXPAND"===e||"EDIT_COMMENT_BEGIN"===e));return e.window(t).map((e=>{const t=e.filter((({type:e})=>"SAVE_COMMENT_SUCCESS"===e)),s=e.filter((({type:e})=>"PASTED_INTO_COMMENT_FORM"===e)).takeUntil(t).reduce(((e,t)=>[...e,t.payload.pastedContent]),[]);return t.withLatestFrom(s).mergeMap((([e,t])=>{const{comment:s}=e.payload;return 0===t.length?Ke.Observable.empty():Ke.Observable.of(Object(Vn.E)(s,t))}))})).mergeAll()})).mergeAll(),ai=n("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");var ii=e=>Object(Wt.a)(Object(Xn.c)(e)),ri=(e,t)=>e.ofType("FETCH_CONFLUENCE_APP_LINKS_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e)
;return ii(s).map(ai.c).catch((e=>(Object(dn.a)("issue.fetch.confluence-app-links-epic","FETCH_CONFLUENCE_APP_LINKS_REQUEST: Failed to fetch confluence app links data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(ai.b)()))))})),oi=n("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js");const ci=e=>"blogpost"===e?"blogpost":"page",li=e=>{if(e.object.status.resolved){return{id:Object(je.e)(e.id),globalId:Object(je.s)(e.globalId),href:Object(je.i)(e.object.url),title:e.object.title,type:ci(e.object.icon.title),lastUpdatedContext:{user:{displayName:Object(je.f)(e.object.status.icon.title),avatarUrl:Object(je.i)(e.object.status.icon.url16x16)}}}}return{id:Object(je.g)(e.id),error:e.object.status.icon.url16x16?"APPLINK_REQ_AUTH":"REMOTE_SERVER",link:{id:Object(je.g)(e.id),globalId:Object(je.s)(e.globalId),href:Object(je.i)(e.object.url)},repairLink:{href:Object(je.i)(e.object.status.icon.url16x16)}}}
;var ui=n("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const di=["blogpost","page"],pi=e=>!e.includes("http")&&window&&window.location?`${window.location.protocol}//${window.location.host}${e}`:e;var mi=e=>((e,t)=>e.map((e=>e.filter((e=>di.includes(e.type))).map((e=>({id:Object(je.e)(e.id.toString()),globalId:Object(je.s)(""),href:Object(je.i)(pi(`${t}/wiki${e.url}`)),title:e.title,type:ci(e.contentType),space:e.space}))))))((e=>Object(Wt.a)((e=>`${e}/wiki/rest/recentlyviewed/1.0/recent?limit=20`)(e)))(e),e);const bi="issue.fetch.confluence-pages-epic",fi="addconfluencelink.error.issueId.invalid";var gi=Object(Ne.combineEpics)(((e,t)=>e.ofType("CREATE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),{pageHref:i}=e.payload,{analyticsEvent:r}=e.meta
;return a?Ke.Observable.from((({baseUrl:e,issueId:t,pageHref:s})=>Object(st.d)(`${(e=>`${e}/rest/confluenceIssueLink/1/confluence`)(e)}${((e,t)=>`?issueId=${e}&pageUrl=${t}`)(t,s)}`,{body:JSON.stringify({})}).then(li))({baseUrl:n,pageHref:i,issueId:Object(je.j)(a.toString())})).do((e=>{Object(We.a)(r,{action:"created",actionSubjectId:e.id,attributes:{createdWithError:!!Jn()(e,"error"),needsAuthorization:!!Jn()(e,"repairLink.href")}})})).map((e=>Object(oi.d)(e))).catch((e=>(Object(dn.a)(bi,"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(oi.a)(e.message))))):(Ve.h.safeErrorWithoutCustomerData(bi,"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(fi)})),Ke.Observable.of(Object(oi.a)(fi)))}))),((e,t)=>e.ofType("DELETE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap((e=>{
const s=t.getState(),n=Object(le.f)(s),a=Object(le.y)(s),{globalId:i}=e.payload;return Ke.Observable.fromPromise(((e,t,s)=>Object(st.a)(`${e}/rest/api/2/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`))(n,a,i)).map(oi.g).catch((e=>(Object(dn.a)(bi,"DELETE_CONFLUENCE_PAGE_LINK_REQUEST: Failed to delete confluence page link",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(oi.e)()))))}))),((e,t)=>e.ofType("FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e);return mi(s).map(ui.c).catch((e=>{const t={eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e};return Ve.h.safeErrorWithoutCustomerData("issue.fetch.confluence-recently-viewed-epic","FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST: Failed to fetch recently viewed confluence pages",new pt.a(t)),Ke.Observable.of(Object(ui.a)())}))})))),hi=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js")
;var yi=(e,t)=>e.ofType("SET_CONTEXT").map((()=>Object(le.l)(t.getState()))).pairwise().mergeMap((([e,t])=>((e,t)=>e!==t?Ke.Observable.of(Object(hi.c)({fromIssueKey:e,toIssueKey:t})):Ke.Observable.empty())(e.issueKey,t.issueKey))),Oi=n("./src/packages/issue/issue-view/src/actions/issue-links-actions.js");const ji={method:"DELETE"};var vi=(e,t)=>e.ofType("DELETE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=e.payload.linkedIssueId,i=((e,t)=>`${e}/rest/api/2/issueLink/${t}`)(n,a),r=Object(Ls.f)(a)(s),o=Object(Ls.h)(r.linkedIssueKey)(s);return Object(Wt.a)(i,ji).map((()=>Object(Oi.f)(a,{issueId:o.id,direction:r.direction}))).catch((e=>(Object(dn.a)("issue.issue-links.delete-issue-link-error","Error when removing issue link",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(Oi.d)(a)))))})),Ei=n("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js");const ki={method:"DELETE"
},wi=(e,t,s)=>Object(Wt.a)(((e,t,s)=>`${e}/rest/api/3/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`)(e,t,s),ki),Si=(e,t)=>e.ofType("DELETE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.y)(s),{globalId:i,analyticsEvent:r}=e.payload;return wi(n,a,i).map((()=>(r&&Object(re.b)(r,"remoteLinkedIssue deleted"),Object(Ei.c)(i)))).catch((e=>(Object(re.b)(r,"remoteLinkedIssue deleteFailed"),Object(dn.a)("issue.issue-links.delete-issue-link-error","remote",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(Ei.a)(i)))))}))
;var Ci=n("./node_modules/uuid/index.js"),Ii=n.n(Ci),Ti=n("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),Pi=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/limit-failed/index.js"),_i=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/generic-error/index.js"),xi=n("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Di=n("./src/packages/forge/forge-ui/src/utils/errors/index.js"),Ai=n("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),Li=n("./src/packages/issue/issue-view/src/actions/forge-actions.js"),Mi=n("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js");const Ri=(e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`
;var Ni=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Fi=n("./node_modules/lodash/fp/pipe.js"),Ui=n.n(Fi),Vi=n("./node_modules/lodash/isBoolean.js"),Ki=n.n(Vi),Wi=n("./node_modules/lodash/isNumber.js"),Bi=n.n(Wi),Hi=n("./node_modules/lodash/isString.js"),$i=n.n(Hi);function Gi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(s),!0).forEach((function(t){zi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}const Yi=e=>t=>{if(404===t.statusCode)return e();throw t},Qi=(e,t,s="none")=>e.added===t&&("none"===s||e.id===s),Ji=(e,t,s)=>{const n=((e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`)(e,t,s);return{get:()=>(e=>Object(st.b)(e).then((({value:e})=>(Array.isArray(e)?e:[]).map((({added:e,id:t,collapsed:s})=>({added:e,id:t,collapsed:s}))).filter((({added:e,id:t,collapsed:s})=>Bi()(e)&&(null==t||$i()(t))&&(null==s||Ki()(s)))))).catch(Yi((()=>[]))))(n),update:e=>((e,t)=>Object(st.e)(e,{body:JSON.stringify(t)}).then((()=>t)))(n,e),deleteEntry:()=>(e=>Object(st.a)(e).then((()=>[])).catch(Yi((()=>[]))))(n)}},Zi=Ui()([async(e,{issueKey:t,extensionId:s,added:n,id:a},i)=>{const{get:r,update:o}=Ji(e,t,s),c=await r();if(0===c.length)return[];const l=c.map((e=>qi(qi({},e),{},{collapsed:Qi(e,n,a)?i:e.collapsed})));return o(l).then((()=>l))},Ke.Observable.fromPromise]),Xi=Ui()([async(e,t,s,n,a,i)=>{const{get:r,update:o}=Ji(e,t,s),c=await r(),l={added:n,id:i,collapsed:!1}
;if(0===c.length)return o([l]).then((()=>[l]));if(a){if(c.length>=5)throw new Di.a("Multiple issue panel installation limit reached.");return o([...c,l]).then((()=>[...c,l]))}return[c[0]]},Ke.Observable.fromPromise]),er=Ui()([async(e,t,s,n,a)=>{const{get:i,update:r,deleteEntry:o}=Ji(e,t,s),c=await i();if(0===c.length)return[];const l=c.filter((e=>!Qi(e,n,a)));return 0===l.length?o():r(l)},Ke.Observable.fromPromise]);var tr=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function sr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(s),!0).forEach((function(t){ar(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ar(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ir="issue.ecosystem.ecosystem-content-panel-epic",rr=(e,t)=>({addonModuleKey:t,baseUrl:Object(le.f)(e),parentIssueKey:Object(le.y)(e)}),or=(e,t)=>{const s=Object(tr.l)(t)(e);if(s)return s.name},cr=(e,t,s)=>{const n=Object(Mi.b)(s,10);return((e,t,s)=>{const n=Ri(e,t,s);return Ke.Observable.fromPromise(Object(st.e)(n,{body:JSON.stringify({added:s})}))})(e,t,n).map((()=>Object(Ai.c)(n))).catch((e=>(Pe.a.safeErrorWithoutCustomerData(ir,`saveExtensionToIssue failed: ${e}`,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(Ai.a)(e)))))}
;var lr=Object(Ne.combineEpics)(((e,t)=>e.ofType("ADD_CONTENT_PANEL_REQUEST").flatMap((e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=rr(t.getState(),e.payload),i=t.getState(),r=Object(Ni.p)(i),o=Object(tr.k)(i),c=Object(Ni.f)(i),l=Object(Ni.n)(i),u=!Object(Ni.o)(i),d=Object(le.b)(i);if(Object(xi.a)(e.payload)){const t=o.find((t=>Object(xi.e)(t.appKey,t.moduleKey)===e.payload)),i=t?t.name:void 0,r=!(null==t||!t.allowMultiple);return((e,t,s,n,a)=>{const i=Date.now(),r=Ii.a.v4().substring(0,8);return Xi(e,t,s,i,n,r).mergeMap((e=>{const t=e[e.length-1],n=Object(xi.f)(s,r,t.added),i=Ke.Observable.of(Object(Li.e)(n),Object(Ai.c)(n));return Object(Ti.h)(a),i}))})(n,a,s,r,d).catch((e=>{Object(Ti.d)(d,{error:e});const{showFlag:t}=Object(ns.f)();return e instanceof Di.a?t(Object(Pi.a)(i)):t(Object(_i.a)(i)),Ke.Observable.of(Object(Ai.a)(e))}))}return!l&&u?Ke.Observable.merge(...c.map((e=>`${e.appKey}_${e.moduleKey}`)).filter((e=>!r.includes(e))).map((e=>cr(n,a,e)))):cr(n,a,s)
}))),(e=>e.ofType("ADD_CONTENT_PANEL_SUCCESS").switchMap((e=>{const t=e.payload;return Ke.Observable.of(Object(Ai.d)(t))}))),((e,t)=>e.ofType("REMOVE_CONTENT_PANEL_REQUEST").flatMap((e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=rr(t.getState(),e.payload),i=Object(Mi.b)(s,10),r=t.getState(),o=Object(Ni.p)(r),c=Object(le.b)(r);if(Object(xi.a)(s)){const t=or(r,e.payload);return((e,t,s,n)=>{const a=Object(Mi.a)(s);if(null==a)return Object(Ti.c)(n,{error:Error(`Panel key doesn't match regexp: ${s}`)}),Ke.Observable.of(Object(Ai.g)());const{extensionId:i}=a,{id:r}=a,o=a.added;return er(e,t,i,o,r).mergeMap((()=>(Object(Ti.g)(n),Ke.Observable.of(Object(Ai.i)(s),Object(Li.f)(s)))))})(n,a,s,c).catch((e=>{Object(Ti.c)(c,{error:e});const{showFlag:s}=Object(ns.f)();return s(Object(_i.a)(t)),Ke.Observable.of(Object(Ai.g)(e))}))}if(!o.includes(s)&&!o.includes(i)){const e=Object(Ni.g)(r)
;return Ke.Observable.merge(...e.map((e=>`${e.appKey}_${e.moduleKey}`)).filter((e=>e!==s)).map((e=>cr(n,a,e))))}const l=o.includes(s)?s:i;return((e,t,s)=>{const n=Ri(e,t,s);return Ke.Observable.fromPromise(Object(st.a)(n))})(n,a,l).map((()=>Object(Ai.i)(l))).catch((e=>(Pe.a.safeErrorWithoutCustomerData(ir,`removeExtensionFromIssue failed: ${e}`,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(Ai.g)(e)))))}))),((e,t)=>e.ofType("ADD_CONTENT_PANEL_SUCCESS","CONTENT_PANELS_CUSTOMISED_REQUEST").flatMap((e=>{const{baseUrl:s,parentIssueKey:n}=rr(t.getState(),e.payload);return Object(Ni.n)(t.getState())?Ke.Observable.empty():((e,t)=>{const s=Ri(e,t,"issue.content.panel.customised.flag");return Ke.Observable.fromPromise(Object(st.e)(s,{body:JSON.stringify({createdOn:new Date})}))})(s,n).map((()=>Object(Ai.f)())).catch((e=>(Pe.a.safeErrorWithoutCustomerData(ir,`saveIssueCustomised failed: ${e}`,new pt.a({eventNameSuffix:"issue.error",type:"js",
app:"issue",event:e})),Ke.Observable.empty())))}))),((e,t)=>e.ofType("FORGE_ISSUE_PANEL_UPDATE_REQUEST").flatMap((e=>{const s=Object(le.f)(t.getState()),n=Object(le.b)(t.getState()),{issueKey:a,panelKey:i,collapsed:r}=e.payload,o=Object(Mi.a)(i);if(null==o)return Object(Ti.e)(n,{error:Error(`Panel key doesn't match regexp: ${i}`)}),Ke.Observable.empty();const c=nr(nr({},o),{},{issueKey:a});return Zi(s,c,r).map((()=>(Object(Ti.i)(n),Object(Li.h)({panelKey:i,collapsed:r})))).catch((e=>{Object(Ti.e)(n,{error:e});const s=t.getState(),a=or(s,i),{showFlag:r}=Object(ns.f)();return r(Object(_i.a)(a)),Ke.Observable.empty()}))})))),ur=n("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),dr=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js");var pr=(e,t)=>e.ofType("REFRESH_ECOSYSTEM_REQUEST").switchMap((()=>{const e=t.getState();return((e,t,s)=>{const n=`${e}/rest/internal/2/issue/${t}/extension`
;return Object(Wt.a)(n,{perf:ur.b,headersProcessor:s&&s(ur.b.key)}).map(dr.b).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.fetch.ecosystem-extensions-fetch-server","fetchEcosystemExtensions: Failed to fetch extensions",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of({}))))})(Object(le.f)(e),Object(le.y)(e)).map(V.f).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.fetch.ecosystem-refresh-epic","REFRESH_ECOSYSTEM_REQUEST: Failed to refresh ecosystem data",new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.empty())))})),mr=e=>t=>t.ofType("FETCH_ISSUE_FAILURE").do((t=>e&&e(t.payload.error))).ignoreElements(),br=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js");const fr="VALIDATION_ERROR"
;var gr=e=>e instanceof za.a?fr:e instanceof za.b?e.statusCode>=400&&e.statusCode<500?fr:"SERVER_ERROR":"CONNECTIVITY_ERROR",hr=n("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js");function yr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Or(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yr(Object(s),!0).forEach((function(t){jr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const vr=["summary","description","assignee"],Er=({payload:e})=>vr.includes(e.fieldId),kr=e=>Object(le.b)(e)||"unknown",wr=(...e)=>Object(br.a)((({state:e,hasSuccess:t,fieldId:s,hasEdit:n,errorMessage:a})=>({experience:"editIssue",analyticsSource:kr(e),application:Object(hr.b)(e),edition:Object(hr.a)(e),wasExperienceSuccesful:t,field:s,hasEdit:n,additionalAttributes:Or({},null!=a?{errorMessage:a}:{})}))(...e));var Sr=Object(Ne.combineEpics)(((e,t)=>e.ofType("FIELD_EDIT_CANCEL").filter(Er).filter((({payload:e})=>{const s=t.getState();return!Object(xs.G)(e.fieldId)(s)})).do((e=>{const s=t.getState(),{fieldId:n}=e.payload;return wr({state:s,hasSuccess:!0,fieldId:n,hasEdit:!1})})).ignoreElements()),((e,t)=>e.ofType("FIELD_UPDATED").filter(Er).do((e=>{const s=t.getState(),{fieldId:n}=e.payload;return wr({state:s,hasSuccess:!0,fieldId:n,hasEdit:!0})})).ignoreElements()),((e,t)=>e.ofType("FIELD_SAVE_FAILURE").filter(Er).filter((({payload:e})=>"CONNECTIVITY_ERROR"!==gr(e.error))).do((e=>{
const s=t.getState(),{fieldId:n,error:a}=e.payload,i=gr(a);return wr({state:s,hasSuccess:"SERVER_ERROR"!==i,fieldId:n,hasEdit:!0,errorMessage:`${a.statusCode||i} - ${a.message}`})})).ignoreElements())),Cr=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const Ir="issue.issue-view.get-create-linked-issue-permission.epic";var Tr=(e,t)=>e.ofType("FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(te.F)(e);return Object(Cr.a)(e)&&("business"===s||"service_desk"===s)?(e=>Object(Wt.a)(`${e}/rest/api/3/permissions/project`,{method:"POST",body:JSON.stringify({permissions:["CREATE_ISSUES"]})}).retry(2).flatMap((e=>{if(e&&e.projects){const t=e.projects.length>0;return Ke.Observable.of(Object(Oi.q)(t))}return Pe.a.safeErrorWithoutCustomerData(Ir,"The permission endpoint does not return the expected data"),Ke.Observable.of(Object(Oi.q)(!1))})).catch((e=>(Pe.a.safeErrorWithoutCustomerData(Ir,e),
Ke.Observable.of(Object(Oi.q)(!1))))))(Object(le.f)(e)):Ke.Observable.of(Object(Oi.q)(!1))})),Pr=n("./node_modules/lodash/uniq.js"),_r=n.n(Pr),xr=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const Dr=["assignee","project"],Ar="issue.issuelinks.fetch.linked.issues.epic",Lr=({id:e,key:t,fields:s})=>({id:e,assigneeUrl:s.assignee&&Object(xr.c)(s.assignee).avatarUrl,assigneeDisplayName:s.assignee&&Object(xr.c)(s.assignee).displayName,projectType:s.project&&s.project.projectTypeKey,issueKey:t}),Mr=(e,t)=>Object(wa.b)(e,t,Dr).map((e=>e.map(Lr).reduce(((e,t)=>Object.assign(e,{[t.issueKey]:t})),{})));var Rr=Object(Ne.combineEpics)(((e,t)=>e.ofType("FETCH_LINKED_ISSUES_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(Ls.g)(e);return Mr(s,n).flatMap((e=>Ke.Observable.of(Object(Oi.k)(e)))).catch((e=>(Object(dn.a)(Ar,"Error while fetching linked issues",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),
Ke.Observable.of(Object(Oi.j)(e)))))}))),((e,t)=>e.ofType("SAVE_LINKED_ISSUE_SUCCESS").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.y)(e),a=Object(Ls.i)(e),i=_r()(Object.values(a).map((e=>e.linkedIssueKey))),r=Object.values(a).filter((e=>e.isSaved)).map((e=>e.id));return Ke.Observable.zip(Object(wa.d)(s,n),Mr(s,i),((e,t)=>Object(Oi.i)(e,t,r,a))).catch((e=>(Object(dn.a)(Ar,"Error while fetching new issue links and their details",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(Oi.h)(r,e)))))})))),Nr=n("./src/packages/forge/forge-ui-analytics/src/common/utils/get-error-type/index.js"),Fr=n("./src/packages/forge/forge-ui-analytics/src/services/fetch-modules/index.js"),Ur=n("./src/packages/forge/forge-ui/src/utils/can-fetch-forge/index.js"),Vr=n("./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js")
;const Kr=async(e,t,s)=>s||Object(Vr.a)(e,t),Wr=(e,t)=>Kr(Object(le.f)(e),Object(le.i)(e),t),Br={FETCH_ISSUE_REQUEST:"fetch",REFRESH_ISSUE_REQUEST:"refresh",LOAD_NEW_ISSUE:"load-new",FETCH_FORGE_REQUEST:"fetch-forge"},Hr=Object.keys(Br);var $r=(e,t)=>(s,n)=>s.ofType(...Hr).switchMap((s=>{const a=Object(le.b)(n.getState());if(!Object(Ur.a)())return Ke.Observable.empty();let i,r,o=!1,c=!1;const l=Br[s.type],u=null==e?void 0:e.issueForgeData,d=!!u,p=e=>{const t={actionType:l,isPrefetched:d};return d&&(t.isPrefetchedDataResolved=c,t.isPrefetchedDataValid=r),e&&(t.errorType=Object(Nr.a)(e),t.error=e),t};return Object(Fr.f)(a,p()),null==u||u.then((e=>{o=!0,i=e})),Ke.Observable.fromPromise(Promise.resolve().then((()=>(c=o,o&&(r=!!i),!d||!r&&c?Wr(n.getState()):Wr(n.getState(),u))))).map((e=>(Object(Fr.e)(a,p()),Object(W.isForgeAndEcosystemSweetStateEnabled)()&&t.setForge(e),Object(Li.a)(e)))).catch((e=>(Object(Fr.d)(a,p(e)),Ke.Observable.empty())))
})),Gr=n("./src/packages/platform/services/issue/src/model/errors.js");const qr=(e,t,s,n,a,i,r)=>(o,c)=>o.ofType("UPDATE_PREVIEW_REQUEST").switchMap((o=>{if(o.payload){const l=o.payload;return e.getIssue$(l).flatMap((({error:e,issue:o})=>{if(e){const t=(e=>{if(e instanceof Gr.a)return{error:"NOT_FOUND_OR_NO_PERMISSION_ERROR",errorMessage:e.message};const{statusCode:t,message:s,traceId:n}=e;return{error:t?"UNKNOWN_ERROR":"CONNECTIVITY_ERROR",statusCode:t,errorMessage:s,traceId:n}})(e);return Ve.h.safeWarnWithoutCustomerData("issue.data.provider.epic",`UPDATE_PREVIEW_REQUEST: dataProvider issue data lookup failed ${t.error}`),Ke.Observable.of((e=>({type:"ISSUE_PREVIEW_FAILURE",payload:e}))(t))}if(o){var u;Ma(Object(Ie.a)(o),t,s,l,!0),n.setIssueViewLayout(o.issueSections);const e=null===(u=o.fields.get("project"))||void 0===u?void 0:u.value;return e&&i.mergeProjectProperty(Object(Se.a)(l),e),o.id&&r.mergeIssueContext({issueId:Object(je.j)(String(o.id))}),
o.viewScreenId&&r.mergeIssueContext({viewScreenId:o.viewScreenId}),a.setUserPreferences(o.myPreferences),"COMPLETE"!==Object(te.w)(c.getState())?Ke.Observable.of(Ce(o)):Ke.Observable.empty()}return Ke.Observable.empty()}))}return Ke.Observable.empty()}));var zr=(e,t,s,n,a,i,r)=>Object(Ne.combineEpics)(qr(e,t,s,n,a,i,r),(e=>t=>t.ofType("FETCH_ISSUE_REMOTE_DATA_REQUEST").switchMap((t=>{if(t.payload){const s=t.payload;return e.getIssueRemoteData$(s).flatMap((e=>Ke.Observable.of(Object(ke.c)(e))))}return Ke.Observable.of(Object(ke.a)())})))(e),(e=>(t,s)=>t.ofType("APPLINK_AUTHENTICATION_SUCCESS","SAVE_REMOTE_LINKED_ISSUE_SUCCESS").switchMap((()=>{const t=s.getState(),n=Object(le.y)(t);return n?e.getIssueRemoteData$(n).flatMap((e=>Ke.Observable.of(Object(ke.c)(e)))):Ke.Observable.empty()})))(e)),Yr=n("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js");const Qr=(e,t,s,n)=>{const a={action:t,actionSubjectId:Object(ie.c)(s)(s)};n?Object(We.b)(e,a):Object(We.a)(e,a)}
;var Jr=(t,s)=>t.ofType("DELETE_ISSUE_REQUEST").mergeMap((({payload:t})=>{const{issueKey:n,analyticsEvent:a}=t;return((e,t)=>{const s=((e,t)=>`${e}/rest/api/3/issue/${t}?deleteSubtasks=true`)(e,t);return Object(Wt.a)(s,{method:"DELETE"})})(Object(le.f)(s.getState()),n).map((()=>(Qr(a,"deleted","issueDeleted"),Object(Yr.d)(n)))).catch((t=>(Ve.h.safeErrorWithoutCustomerData("issue.delete.issue-delete-epic","Failed to delete issue",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Qr(a,"deletedError","issueDeletedError",t),Ke.Observable.of(Object(Yr.b)(n,(t=>{try{return JSON.parse(t.message).errorMessages[0]}catch(e){return"Failed to delete issue"}})(t))))))})),Zr=n("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js");const Xr=e=>t=>s=>{e.dispatch(((e,t)=>({type:"SAVE_SERVER_TIME",payload:{key:e,serverTime:t}}))(t,Number(s.get("atl-vtm-backend-time"))))};function eo(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function to(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function so(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const no=(e,t)=>{let s="UNKNOWN_ERROR";if(401===e.statusCode?s="AUTHENTICATION_ERROR":403===e.statusCode||404===e.statusCode?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e.statusCode?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",e instanceof cn.a){const t=e,{endpoint:n,traceId:a,statusCode:i,message:r}=t;return{
errorMessage:i?`${r}, endpoint: ${n}, status code: ${i}`:`${r}, endpoint: ${n}`,endpoint:n,traceId:a,statusCode:i,error:s}}if(e instanceof za.b){const t=e,{message:n,statusCode:a,traceId:i}=t;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?to(Object(s),!0).forEach((function(t){so(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):to(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:s,statusCode:a,errorMessage:`${n}, status code: ${a}`},i?{traceId:i}:{})}return{error:s,statusCode:void 0}}
;var ao=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,ecosystemActions:n,userPreferenceActions:a,issueTabsActions:i,permissionActions:r,attachmentActions:o,projectContextActions:c,prefetchedResourceManager:l,jiraSettingsActions:u,issueContextActions:d})=>(p,m)=>p.ofType("FETCH_ISSUE_REQUEST","LOAD_NEW_ISSUE").switchMap((()=>{Object(Zr.a)();const p=m.getState(),b=Object(le.a)(p),f=Object(le.f)(p),g=Object(le.y)(p),h=d.getMaxTokenLength();return Object(wa.a)(p,l).do((({issue:{fields:n,tabs:l,id:p,viewScreenId:m},myPreferences:b,permissions:h,attachments:y,jiraSettings:O,issueSections:j,project:v})=>{if(i.setIssueTabs(l),Ma(n,e,t,g),s.setIssueViewLayout(j),a.setUserPreferences(b),h&&v&&r.setProjectPermissions(Object(je.q)(v.projectKey),h),void 0!==y&&(o.setTotalCount(g,y.totalCount),"number"==typeof y.deletableCount&&o.setDeletableCount(g,y.deletableCount),o.setVisibleAttachments(g,y.nodes)),O&&u.setJiraSettings(O),
v&&c.setProjectContext(Object(je.q)(v.projectKey),v),Object(W.isPolarisInsightsTabEnabled)()&&v){const{projectKey:e,projectType:t}=v;Le(f,e,t).then((t=>c.mergeProjectProperty(Object(je.q)(e),{isPolarisProject:t})))}p&&d.mergeIssueContext({issueId:Object(je.j)(String(p))}),d.mergeIssueContext({viewScreenId:m})})).mergeMap((e=>{const{viewContext:t,uploadContext:s,userAuth:a}=e,i=eo(e,["viewContext","uploadContext","userAuth"]),r=t?Ke.Observable.of(yt(t)):Tn(f,g,h,Xr(m),null==l?void 0:l.issueMediaReadPermission);let o;return s?null!=s.error?o=Object(mn.b)(new Error(s.error)):null!=s.clientId&&null!=s.serviceHost&&null!=s.token&&null!=s.tokenLifespanInMs&&null!=s.collection&&null!=s.tokenIssueTimestamp&&(o=Object(mn.d)({clientId:s.clientId,serviceHost:s.serviceHost,token:s.token,tokenLifespanInMs:s.tokenLifespanInMs,collection:s.collection,tokenIssueTimestamp:s.tokenIssueTimestamp})):o=Object(mn.c)(),r.map((e=>(Object(W.isForgeAndEcosystemSweetStateEnabled)()&&n.setEcosystem(i.ecosystem),
[e,o,a?yn(a):hn(),Object(V.d)(i)])))})).flatMap((e=>(Object(K.c)(),l&&l.clearAll(),Ke.Observable.of(Object(Re.batchActions)(e))))).catch((e=>{const t=no(e,b);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(dn.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(V.b)(t))}))})),io=n("./src/packages/platform/utils/constants/src/fetch-default-options.js"),ro=n("./src/packages/platform/utils/fetch/src/utils.js");function oo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function co(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(s),!0).forEach((function(t){lo(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const uo=co(co({},io.a),{},{method:"POST"}),po=(e,t,s)=>"OUTWARD"===e.direction?{type:{id:e.id},inwardIssue:{key:t},outwardIssue:{key:s}}:{type:{id:e.id},inwardIssue:{key:s},outwardIssue:{key:t}},mo=e=>201===e.status?Promise.resolve(null):Promise.reject(new ro.a(e.status,`Error server response: ${e.status}`)),bo=(e,t,s,n)=>Ke.Observable.fromPromise(((e,t)=>fetch(e,co(co({},uo),t)).then(mo))(Object(Xn.m)(e),{body:JSON.stringify(po(t,s,n))})),fo=(e,t,s,n,a)=>{const i=Object(le.f)(e),r=Object(le.y)(e);return bo(i,n,r,s).map((()=>Object(Oi.p)(t,a.update({action:"succeeded"
})))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.issuelinks.save.linked.issues.epic","Error while adding linked issues",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(Oi.m)(t,e,null==a?void 0:a.update({action:"failed"}))))))};var go=Object(Ne.combineEpics)(((e,t)=>e.ofType("SAVE_LINKED_ISSUE_RETRY").mergeMap((e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=Object(Ls.f)(n)(s),r=i&&i.linkedIssueKey,o=i&&{direction:i.direction,id:i.typeId};return fo(s,n,r,o,a)}))),((e,t)=>e.ofType("SAVE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),{optimisticId:n,linkedIssueKey:a,issueLinkType:i}=e.payload.newIssueLinks,{requestAnalyticsEvent:r}=e.payload;return fo(s,n,a,i,r)})))),ho=n("./node_modules/lodash/identity.js"),yo=n.n(ho),Oo=n("./node_modules/lodash/isEqual.js"),jo=n.n(Oo);const vo=(e,t)=>{const s=document.getElementById("ghx-issue-fragment")
;window.AJS&&s?window.AJS.$(s).trigger(e,t):Pe.a.safeErrorWithoutCustomerData("issue.rapid-board","Could not find container to send event for rapid board",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}))},Eo="refresh-sprints-on-board",ko="hide";var wo=e=>vo(Eo,{sprintIds:[e]}),So=()=>vo(ko);const Co=({pathname:e,search:t})=>e+t,Io=(e,t,s,n)=>(a,i)=>{const r={},o=a.ofType("NAVIGATE_TO_NEW_ISSUE").pluck("payload").do((({toIssueKey:e})=>{n.mergeIssueContext({issueKey:Object(je.l)(e)})})).do((({toIssueKey:e})=>{const a=i.getState(),r=Object(le.b)(a),o=n.getIsLoadedWithPage(),c=s.getRecentIssuesCount(),l=s.getRecentIssue(e);Object(K.a)({analyticsSource:String(r),isLoadedWithPage:o,isRecentIssue:!!l,recentIssuesCount:c,isSPA:!0,store:i,dataProvider:t}),Object(K.g)()})).do((({fromIssueKey:t,toIssueKey:s})=>{if(e){r[Co(window.location)]=t;const n=((e,t,s)=>{const n=new RegExp(`${t}(?![\\d])`,"g"),a=e.match(n);return null===a||1!==a.length?null:e.replace(t,s)
})(Co(window.location),t,s);n&&(r[n]=s,e.push(n))}})),c=e?Ke.Observable.create((t=>e.listen(((e,s)=>{t.next({location:e,action:s})})))).filter((({action:e})=>"POP"===e)).filter((()=>!n.getIsSpaEnabled())).map((({location:e})=>r[Co(e)])).filter(yo.a).map((e=>({fromIssueKey:Object(le.y)(i.getState()),toIssueKey:e}))).filter((({fromIssueKey:e,toIssueKey:t})=>e!==t)):Ke.Observable.empty();return Ke.Observable.merge(o,c).distinctUntilChanged(((e,t)=>jo()(e,t))).flatMap((({toIssueKey:e})=>{Object(Zr.a)();const t=s.getRecentIssue(e);return t?Ke.Observable.of(Object(hi.b)(e,t)):Ke.Observable.of(Object(hi.a)(e),Ee(e),Object(ke.b)(e))})).takeUntil(a.last().catch((()=>Ke.Observable.of(!0)))).catch((e=>Pe.a.safeErrorWithoutCustomerData("issue.issue-navigation-epic","Unexpected error in issue-navigation-epic",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))))},To=e=>e.ofType("NAVIGATE_TO_PROJECT").do((e=>{Object(ja.a)(e.payload.projectUrl,!1,e.payload.pushAction)
})).ignoreElements(),Po=e=>e.ofType("NAVIGATE_TO_SPRINT").do((e=>{wo(e.payload.sprintId),So()})).ignoreElements();var _o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visiblity-stream/page-visibility-stream.js");const xo=["FORGE_ENTITY_TYPE","CONNECT_ENTITY_TYPE"];var Do=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const Ao=(e,t)=>{const s=t.getState(),{atlassianId:n}=e.payload,a=Object(te.y)(s),i=!!a&&n!==a.id;if(Object(W.isActivitySortingEnabled)()){const e=Object(mt.a)(s),t=xo.includes(null==e?void 0:e.type);return!(Object(Ni.g)(s).length>0||t||!!Object(Do.a)(s))&&i}return!(Object(Ni.g)(s).length>0||!!Object(mt.a)(s)||!!Object(Do.a)(s))&&i}
;var Lo=Object(Ne.combineEpics)(((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").filter((()=>Object(rn.a)())).switchMap((e=>Ao(e,t)?Ke.Observable.of(Object(V.g)()):Ke.Observable.empty()))),((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").bufferToggle(_o.a.filter((e=>!e)),(()=>_o.a.filter((e=>e)))).switchMap((e=>e.some((e=>Ao(e,t)))?Ke.Observable.of(Object(V.g)()):Ke.Observable.empty()))));var Mo=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,attachmentActions:a,permissionActions:i,issueTabsActions:r,projectContextActions:o,issueContextActions:c})=>(l,u)=>l.ofType("REFRESH_ISSUE_REQUEST").switchMap((()=>{const l=u.getState(),d=Object(le.f)(l),p=Object(le.y)(l),m=c.getMaxTokenLength();return Ke.Observable.zip(Tn(d,p,m),Object(wa.a)(l).do((({issue:{fields:l,tabs:u,id:m,viewScreenId:b},myPreferences:f,attachments:g,permissions:h,issueSections:y,project:O})=>{if(r.setIssueTabs(u),Ma(l,e,t,p),s.setIssueViewLayout(y),n.setUserPreferences(f),
h&&O&&i.setProjectPermissions(Object(je.q)(O.projectKey),h),g&&a.setTotalCount(p,g.totalCount),g&&"number"==typeof g.deletableCount&&a.setDeletableCount(p,g.deletableCount),g&&a.setVisibleAttachments(p,g.nodes),O&&o.setProjectContext(Object(je.q)(O.projectKey),O),Object(W.isPolarisInsightsTabEnabled)()&&O){const{projectKey:e,projectType:t}=O;Le(d,e,t).then((e=>o.mergeProjectProperty(Object(je.q)(O.projectKey),{isPolarisProject:e})))}m&&c.mergeIssueContext({issueId:Object(je.j)(String(m))}),c.mergeIssueContext({viewScreenId:b})})).map(V.h)).mergeMap(Ke.Observable.from).catch((e=>(Ve.h.safeErrorWithoutCustomerData("issue.fetch.issue-refresh-epic","REFRESH_ISSUE_REQUEST: Failed to refresh issue data",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty())))}));const Ro=(e,t)=>Object(Wt.a)((e=>`${e}/rest/graphql/1/`)(e),(e=>({method:"POST",body:JSON.stringify({query:pa.a`query {
            issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
                id
                viewScreenId
            }
        }`})}))(t));var No=(e,t)=>e.ofType("FETCH_SCREENID_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.a)(e),n=Object(le.f)(e),a=Object(le.y)(e);return Ro(n,a).map(ee).catch((e=>{const t=((e,t)=>{let s="UNKNOWN_ERROR";return 401===e?s="AUTHENTICATION_ERROR":403===e||404===e?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",{error:s,statusCode:e}})(e.statusCode,s);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(dn.a)("issue.fetch.issue-screenid-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of((e=>({type:"FETCH_SCREENID_FAILURE",payload:e}))(t))}))})),Fo=n("./node_modules/lodash/size.js"),Uo=n.n(Fo);const Vo=e=>({type:"SET_ISSUE_TYPES",payload:e});var Ko=n("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function Wo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(s),!0).forEach((function(t){Ho(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ho(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $o=new Map;var Go=(e,t)=>e.ofType("SUBTASK_QUICK_ADD_CLICKED","ISSUE_IN_EPIC_QUICK_ADD_CLICKED","CHILD_ISSUE_QUICK_ADD_CLICKED","CHILD_ISSUE_PANEL_ADD_CLICKED").mergeMap((()=>{const e=t.getState(),s=Object(le.D)(e),n=$o.get(s)||{time:new Date};if(n&&n.data&&new Date-n.time<18e5)return Ke.Observable.of(Vo(n.data));$o.set(s,n);const a=Object(le.f)(e),i=Xr(t)
;return Ke.Observable.concat(Ke.Observable.of((()=>({type:"FETCHING_ISSUE_TYPES"}))()),Object(Ko.a)(a,s,i).mergeMap((e=>{const t=e&&e.issueTypes;return Uo()(t)?($o.set(s,Bo(Bo({},n),{},{data:t})),Ke.Observable.of(Vo(t))):($o.delete(s),Ke.Observable.of((()=>({type:"FETCH_ISSUE_TYPES_FAILED"}))()))})))})),qo=n("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");var zo=(e,t)=>Object(Wt.a)(Object(Xn.h)(e,t)),Yo=(e,t)=>e.ofType("FETCH_JIRA_APP_LINKS_REQUEST","APPLINK_AUTHENTICATION_SUCCESS").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.y)(e);return zo(s,n).map(qo.c).catch((e=>(Object(dn.a)("issue.fetch.jira-app-links-epic","FETCH_JIRA_APP_LINKS_REQUEST: Failed to fetch jira app links data",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of(Object(qo.b)()))))})),Qo=n("./src/packages/issue/issue-view/src/actions/login-actions.js"),Jo=(e,t)=>e.ofType("LOGIN").switchMap((()=>{
const e=Object(le.B)(t.getState());if(e){const s=`${Object(le.f)(t.getState())}/login.jsp?os_destination=${encodeURIComponent(e)}`,n=window.open(s,"_blank");return Ke.Observable.fromEvent(window,"message").filter((e=>e.origin===window.location.origin)).filter((e=>e.source===n)).filter((e=>e.data&&"log-in-successful"===e.data.status&&e.data.accountId)).do((e=>e.source.close())).mergeMap((e=>Ke.Observable.of(Object(Qo.b)({accountId:e.data.accountId}),Object(V.c)())))}return Ke.Observable.empty()}));const Zo=(e,{fieldId:t,commentId:s},n=!1)=>{const a=Object(xs.u)(e).filter((e=>e!==t)),i=Object(As.u)(e).filter((e=>e!==s)),r=!n&&Object(As.w)(e);return a.length>0||i.length>0||r?((e,t,s)=>({type:"MULTILINE_FIELD_EDIT_BEGIN",payload:{multilineFieldIdsToClose:e,commentIdsToClose:t,shouldCloseAddCommentForm:s}}))(a,i,r):null};var Xo=Object(Ne.combineEpics)(((e,t)=>e.ofType("FIELD_EDIT_BEGIN").filter((e=>Object(xs.H)(e.payload.fieldId)(t.getState()))).map((e=>Zo(t.getState(),{
fieldId:e.payload.fieldId}))).filter(Boolean)),((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").map((e=>Zo(t.getState(),{commentId:e.payload.id}))).filter(Boolean)),((e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").map((()=>Zo(t.getState(),{},!0))).filter(Boolean)));const ec=(e,t)=>{const s="NEW_OPTIMISTIC_COMMENT",n=Object(le.a)(e),a=Object(le.y)(e),i=Object(Dn.a)(s),r=Object(Dn.c)(n,a,i);return Ke.Observable.of(Object(xn.e)(s,r,t?Vn.l:null))},tc=e=>(Pe.a.safeErrorWithoutCustomerData("issue.new-comment-load-draft",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.empty());var sc=Object(Ne.combineEpics)(((e,t)=>e.ofType("SET_CONTEXT").mergeMap((()=>ec(t.getState(),!1))).catch((e=>tc(e)))),((e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").mergeMap((()=>ec(t.getState(),!0))).catch((e=>tc(e)))));const nc=1e3,ac=new Ke.Subject;ac.bufferTime(nc,nc,50).subscribe((e=>{Object(L.a)().loadIssues(_r()(e))}));const ic=new Ke.Subject
;ic.bufferTime(nc,nc,50).subscribe((e=>Object(L.a)().loadIssuesById(_r()(e))));var rc=e=>e.ofType("PREFETCH_ISSUES").do((e=>{const{issueKeys:t,issueIds:s}=e.payload;t.forEach((e=>ac.next(e))),s.forEach((e=>ic.next(e)))})).switchMap((()=>Ke.Observable.empty())),oc=e=>(t,s)=>t.ofType("PROJECT_ISSUE_TYPES_REQUEST").mergeMap((t=>{const n=Object(le.f)(s.getState()),a=t.payload;return((e,t)=>{const s=`${e}/rest/api/3/project/${t}`;return Object(Wt.a)(s).map(Ea)})(n,a).do((t=>e.mergeProjectProperty(a,{issueTypes:t}))).map((e=>Object(va.c)(e))).catch((e=>(Ve.h.safeErrorWithoutCustomerData("change.issue.type.fetchtypes",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Object(va.a)(e)))))}));const cc=Object(Ve.i)("true","false");var lc=(e,t)=>e.ofType("FETCH_PROJECT_HAS_SUBTASK_VALIDATORS").switchMap((()=>{const e=t.getState()
;return((e,t)=>Object(Wt.a)(((e,t)=>`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`)(e,t)))(Object(le.f)(e),Object(le.D)(e)).do((e=>{Object(Ve.l)("project-validators.projectHasSubtaskValidators.result",{result:cc(e)})})).map((e=>(e=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS",payload:e}))(e))).catch((()=>Ke.Observable.of((()=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE"}))())))}));var uc=(e,t)=>e.ofType("SET_CONTEXT").scan((({issueKey:e},t)=>({issueKey:t.payload.issueKey,loggedInAccountId:t.payload.atlassianAccountId,previousIssueKey:e})),{issueKey:null,previousIssueKey:null,loggedInAccountId:null}).filter((({loggedInAccountId:e})=>null!==e)).filter((({issueKey:e,previousIssueKey:t})=>e!==t)).map((({issueKey:e})=>e)).delay(3e3).switchMap((e=>{const s=t.getState(),n=`${Object(le.f)(s)}/rest/internal/2/issue/${e}/history`;return Object(Wt.a)(n,{method:"POST"
}).catch((e=>((e=>404===e.statusCode)(e)||Object(dn.a)("issue.recently-viewed-issue-epic","Client network error occurred when fetching user issue history",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.empty()))).ignoreElements()}));function dc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dc(Object(s),!0).forEach((function(t){mc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bc=e=>{
const{applicationType:t,applicationName:s,issueLinkUrl:n,relationship:a,summary:i,iconUrl:r,issueKey:o,createReciprocalLink:c}=e;return pc({application:{name:s,type:t},relationship:a,object:{summary:i,icon:{url16x16:r},title:o,url:n},createReciprocalLink:c},"WITH_ISSUE_ID"===e.payloadType?{globalId:e.globalId}:{appLinkId:e.appLinkId})},fc=pc(pc({},io.a),{},{method:"POST"});function gc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(s),!0).forEach((function(t){yc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yc(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Oc=(e,t,s)=>((e,t,s)=>Object(Wt.a)(Object(Xn.n)(e,t),pc(pc({},fc),{},{body:JSON.stringify(bc(s))})))(Object(le.f)(e),Object(le.y)(e),t).map((e=>{var n;return Object(Ei.h)(t.id,e,s.update({action:"succeeded",isReciprocalLinkCreated:"CREATED"===(null===(n=e.reciprocalLink)||void 0===n?void 0:n.status)}))})).catch((e=>Ke.Observable.of(Object(Ei.e)(t.id,t.issueKey,e,s.update({action:"failed",isReciprocalLinkCreated:!1}))))),jc=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),{saveRemoteIssueLinkPayload:n,requestAnalyticsEvent:a}=e.payload;return Oc(s,n,a)})),vc=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_RETRY").mergeMap((e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=((e,t)=>{const s=Object(Ls.k)(e).find((e=>e.id===t))
;if(!s||void 0===s.applicationName||void 0===s.applicationType||void 0===s.iconUrl||void 0===s.relationship||void 0===s.summary)return;const n={id:s.id,applicationType:s.applicationType,applicationName:s.applicationName,issueLinkUrl:s.issueLinkUrl,relationship:s.relationship,summary:s.summary,iconUrl:s.iconUrl,issueKey:s.issueKey,createReciprocalLink:Boolean(s.createReciprocalLink)};if(void 0===s.globalId){if(void 0===s.appLinkId)return;return hc(hc({},n),{},{appLinkId:s.appLinkId,payloadType:"WITHOUT_ISSUE_ID"})}return hc(hc({},n),{},{globalId:s.globalId,remoteIssueId:s.remoteIssueId,payloadType:"WITH_ISSUE_ID"})})(s,n);return i?Oc(s,i,a.update({withReciprocalLink:Boolean(i.createReciprocalLink)})):Ke.Observable.empty()})),Ec=e=>{switch(e){case"portal":return"portal";case"email":return"email";case"api":return"api";case"jira":return"jira";case"deployment":return"deployment";case"anonymousportal":return"anonymousportal";default:return"unknown"}},kc=e=>Ke.Observable.of((e=>({
type:"REQUEST_PANEL_METADATA_FETCH_SUCCESS",payload:{channel:Ec(e.channel),requestUrl:e.requestUrl,csatComment:e.csatComment}}))(e)),wc=e=>(Ve.h.safeErrorWithoutCustomerData("issue.request-panel-metadata.fetch",JSON.stringify(e),new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:new Error(JSON.stringify(e))})),Ke.Observable.of((()=>({type:"REQUEST_PANEL_METADATA_FETCH_FAILURE"}))()));var Sc=(e,t)=>e.ofType("FETCH_REQUEST_PANEL_METADATA").flatMap((()=>(e=>Object(Wt.a)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-panel-metadata`)(Object(le.f)(e),Object(le.y)(e))))(t.getState()).flatMap((e=>e.errors?wc(e):kc(e))).catch((e=>wc(e))))),Cc=(e,t)=>e.ofType("SHARE_AS_COMMENT").switchMap((()=>{const e=t.getState();return Object(As.w)(e)?Ke.Observable.empty():Ke.Observable.of(Object(Vn.c)(),Object(Vn.d)("NEW_OPTIMISTIC_COMMENT",!1))
})),Ic=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),Tc=n("./src/packages/issue/issue-view/src/views/connect-field.js"),Pc=e=>e.ofType("FIELD_SHORTCUT_SELECTED").switchMap((e=>{const{fieldKey:t,isRichTextField:s,analyticsEvent:n}=e.payload;switch(t){case"issuelinks":return Ke.Observable.of(Object(Oi.a)());case"issuetype":return Ke.Observable.of(Object(va.d)(!0));default:{const{isOptimistic:e,canContainMediaContent:a,saveField:i,shouldSaveDraft:r,shouldDiscardChangeOnFailure:o,onSaveFailureFlagType:c,onSaveSuccessFlagType:l}=Tc.b;return Object(re.f)(n,"issueFields updateStarted",{isFromDotMenu:!0,fieldType:t}),Ke.Observable.of(Object(Ic.b)(t,{isRichTextField:s,isOptimistic:e,canContainMediaContent:a,saveField:i,shouldDiscardChangeOnFailure:o,shouldSaveDraft:r,onSaveFailureFlagType:c,onSaveSuccessFlagType:l}))}}}));var _c=(e,t)=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.a)(e)
;if(!s)return Ke.Observable.empty();const n=((e,t)=>`${e}/rest/api/2/user?accountId=${encodeURIComponent(t)}${Object(W.isUseAppPermissionsFromTenantContextEnabled)()?"":"&expand=applicationRoles"}`)(Object(le.f)(e),s);return Object(Wt.a)(n).map(xr.d).map((e=>{const t=Object(xr.c)(e),s=Object(xr.a)(e);return we(t,s)})).catch((e=>(Object(dn.a)("issue.fetch.user-fetch-epic","FETCH_LOGGED_IN_USER_REQUEST: Failed to fetch logged in user details",e,new pt.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ke.Observable.of((()=>({type:"FETCH_LOGGED_IN_USER_FAILURE"}))()))))})),xc=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-meta.js");const Dc="issue.fetch.user-fetch-timing-epic";var Ac=()=>Object(W.isUseAppPermissionsFromTenantContextEnabled)()?()=>Ke.Observable.empty():Object(W.isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext)()?e=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap((()=>{
const e=["ajs-has-jira-software","ajs-has-jira-service-desk","ajs-has-jira-core"].filter((e=>null==Object(xc.a)(e)));return e.length&&Ve.h.safeWarnWithoutCustomerData(Dc,`Missing some product access meta tags: ${e.toString()}`),Ke.Observable.empty()})):(()=>{let e=null,t=null;return(s,n)=>s.pipe(Ts("FETCH_LOGGED_IN_USER_SUCCESS","FETCH_ISSUE_SUCCESS"),Object(ws.mergeMap)((s=>{switch(s.type){case"FETCH_LOGGED_IN_USER_SUCCESS":if(e&&!t){const t=n.getState();"service_desk"===Object(te.F)(t)&&Ve.h.safeWarnWithoutCustomerData(Dc,`Issue data loaded before user data loaded. By [${Date.now()-e}]ms`)}t=Date.now();break;case"FETCH_ISSUE_SUCCESS":e=Date.now()}return Ke.Observable.empty()})))})(),Lc=n("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),Mc=n("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const Rc=(e,t,s)=>({object:{icon:{url16x16:s},title:e,url:t}
}),Nc=({baseUrl:e,issueId:t,href:s,linkText:n,iconUrl:a})=>Object(st.d)(`${((e,t)=>`${e}/rest/api/3/issue/${t}/remotelink`)(e,t)}`,{body:JSON.stringify(Rc(n,s,a))}).then((e=>((e,t,s,n)=>({id:Object(je.u)(e.id),href:t,linkText:s,iconUrl:n}))(e,s,n,a))),Fc="issue.fetch.web-links-epic",Uc=(e,t,s)=>{const n=e.message;Object(dn.a)(s,t,e,{errorReason:n})},Vc=(e,t,s,n,a)=>{if(void 0===s||void 0===n){const e=void 0===s?"No issueId when creating weblink":"Broken weblink state when creating weblink";return Ve.h.safeErrorWithoutCustomerData(Fc,a,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),Ke.Observable.empty()}const{href:i,linkText:r,iconUrl:o}=n,c=null==o?"":o;return Ke.Observable.from(Nc({baseUrl:t,href:i,issueId:Object(je.j)(s.toString()),linkText:null==r?i:r,iconUrl:Object(je.i)(c)})).map((e=>Object(Lc.e)(n.id,e))).catch((e=>(Uc(e,`${a}: Failed to create web link`,Fc),Ke.Observable.of(Object(Lc.b)(n.id)))))
},Kc=(e,t)=>e.ofType("DELETE_WEB_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.y)(s),{id:i}=e.payload;return Ke.Observable.fromPromise(((e,t,s)=>Object(st.a)(`${e}/rest/api/3/issue/${t}/remotelink/${s}`))(n,a,i)).map((()=>Object(Lc.i)(i))).catch((e=>(Uc(e,"DELETE_WEB_LINK_REQUEST: Failed to delete web link",Fc),Ke.Observable.of(Object(Lc.g)(i)))))})),Wc=(e,t)=>e.ofType("CREATE_WEB_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),{optimisticId:i}=e.payload,r=Object(Mc.d)(i)(s);return Vc(0,n,a,r,"CREATE_WEB_LINK_REQUEST")})),Bc=(e,t)=>e.ofType("CREATE_WEB_LINK_RETRY").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),{optimisticId:i}=e.payload,r=Object(Mc.d)(i)(s);return Vc(0,n,a,r,"CREATE_WEB_LINK_RETRY")}))
;var Hc=e=>e.ofType("state.EDIT_WORKLOG_SUCCESS","state.ADD_WORKLOG_SUCCESS").filter((e=>e.meta.shouldFetchViewContext)).mapTo(ht()),$c=n("./src/packages/issue/issue-view/src/common/model/linked-issue-type.js"),Gc=n("./src/packages/issue/issue-view/src/model/change-type.js"),qc=n("./node_modules/lodash/forEach.js"),zc=n.n(qc);const Yc=["FIELD_SAVE_SUCCESS","SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS","ISSUE_RELATIONSHIP_UPDATE_SUCCESS","FIELD_SAVE_REQUEST","FIELD_SAVE_FAILURE","FIELD_UPDATED","FETCH_LINKED_ISSUES_DATA_SUCCESS","DELETE_LINKED_ISSUE_SUCCESS","CHILD_ISSUE_ADD_SUCCESS","ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS"];var Qc=e=>(t,s)=>t.ofType(...Yc).do((t=>{if(e)try{const n=Object(je.j)(String(Object(le.x)(s.getState())));switch(t.type){case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":{const{payload:{fieldId:s,targetTypeName:a}}=t;e({issueId:n,type:Gc.a.ISSUE_TYPE_CHANGED,fieldId:s,meta:{typeName:a}});break}case"FIELD_UPDATED":{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,
type:Gc.a.FIELD_CHANGED,fieldId:s,meta:{fieldId:s,fieldValue:a}});break}case"ISSUE_RELATIONSHIP_UPDATE_SUCCESS":{const{payload:{oldParentIdsByIssueIds:s,parentIssueId:a}}=t;e({issueId:n,type:Gc.a.ISSUE_RELATIONSHIP_UPDATED,meta:{newParentIssueId:a,oldParentIssueId:s[n]||null}});break}case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const s=((e,t)=>{const{payload:{optimisticLinks:s,issueLinks:n}}=t,a=[];return zc()(s,(e=>{const t=n.linkedIssues[e.linkedIssueKey];t&&a.push({linkedIssueId:Object(je.j)(t.id),direction:e.direction})})),a})(0,t);s.length&&e({issueId:n,type:Gc.a.ISSUE_LINKS_CREATED,meta:{links:s}});break}case"DELETE_LINKED_ISSUE_SUCCESS":{const{meta:{issueId:s,direction:a}}=t;e({issueId:n,type:Gc.a.ISSUE_LINK_DELETED,meta:{linkedIssueId:s,direction:Object($c.b)(a)}});break}case"CHILD_ISSUE_ADD_SUCCESS":{const{issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r,issueTypeName:o}=t.payload.childIssue;e({issueId:n,type:Gc.a.CHILD_ISSUE_ADDED,meta:{childIssue:{
id:Object(je.j)(t.payload.childIssue.id),issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r||void 0,issueTypeName:o||void 0}}});break}case"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS":e({issueId:n,type:Gc.a.ISSUE_CHILDREN_ORDER_CHANGED,meta:t.payload});break;case"FIELD_SAVE_REQUEST":{const{payload:{fieldId:s,value:a}}=t;e({issueId:n,type:Gc.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_SAVE_FAILURE":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Gc.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}}}catch(n){Ve.h.safeErrorWithoutCustomerData("issue.issue-field.ops.change-notification","Failed to call onChange callback",new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:n}))}})).ignoreElements();const Jc=e=>({type:"FIELD_LOAD_DRAFT_FAILURE",payload:e});var Zc=e=>e.ofType("FIELD_SAVE_SUCCESS").mergeMap((e=>(e=>{const{payload:{fieldId:t}}=e;return Ke.Observable.of(Object(xn.b)({fieldId:t}))
})(e))).catch((e=>(e=>(Object(dn.a)("issue.delete-draft-request","Could not send request to delete field draft from local storage",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of((e=>({type:"FIELD_DELETE_DRAFT_FAILURE",payload:e}))(e))))(e)));var Xc=(e,t)=>e.ofType("FIELD_EDIT_BEGIN").mergeMap((e=>Ke.Observable.merge(...((e,t)=>{const s=Object(xs.K)(t);if(-1!==s.indexOf(e.payload.fieldId)){const n=Object(le.a)(t),a=Object(le.y)(t);return s.map((s=>{const i=Object(xs.o)(s)(t),r=Object(Dn.c)(n,a,s);return Ke.Observable.of(Object(xn.e)(s,r,s!==e.payload.fieldId?null:Ic.e,i))}))}return[]})(e,t.getState())))).catch((e=>(e=>(Object(dn.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of(Jc(e))))(e)));var el=e=>e.ofType("FIELD_INIT_OPTIONS","FIELD_EDIT_REQUEST_EXTERNAL").groupBy((e=>e.payload.fieldId)).mergeMap((e=>{
const t=e.filter((e=>"FIELD_EDIT_REQUEST_EXTERNAL"===e.type)),s=e.filter((e=>"FIELD_INIT_OPTIONS"===e.type)),n=t.takeUntil(s).takeLast(1).merge(s.take(1)).pairwise(),a=t.withLatestFrom(s);return Ke.Observable.merge(n,a).map((([e,t])=>{const{fieldId:s,fieldOptions:n}=t.payload;return Object(Ic.b)(s,n)}))})),tl=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),sl=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),nl=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function al(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function il(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?al(Object(s),!0).forEach((function(t){rl(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):al(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ol=(e,t)=>{const s=e.ofType("ASSIGN_TO_ME_EXTERNAL"),n=e.ofType("FIELD_INIT_OPTIONS").filter((e=>"assignee"===e.payload.fieldId));return s.filter((()=>{const e=t.getState();return Object(te.y)(e)&&Object(sl.d)(e)})).withLatestFrom(n,((e,{payload:{fieldOptions:s}})=>{const n=t.getState(),a=Object(te.y)(n);return a?Object(nl.b)("assignee",(({avatarUrl:e,displayName:t,id:s})=>({avatarUrls:{"48x48":e},displayName:t,accountId:s}))(a),il(il({},s),{},{onSaveSuccessFlagType:tl.d})):null}))},cl=Object(Ne.combineEpics)(el,ol);var ll=(e,t)=>e.pipe(Ts("FETCH_ISSUE_SUCCESS"),Object(ws.mergeMap)((e=>Ke.Observable.merge(...((e,t)=>{
const s=Object(le.a)(t),n=Object(le.y)(t);return Object(xs.K)(t).map((e=>{const a=Object(xs.h)(e)(t),i=Object(Dn.c)(s,n,e);return Ke.Observable.of(Object(xn.e)(e,i,null,a))}))})(0,t.getState())))),Object(ws.catchError)((e=>(e=>(Object(dn.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,{}),Ke.Observable.of(Jc(e))))(e))));var ul=e=>e.ofType("FIELD_SAVE_SUCCESS").filter((e=>e.payload.fieldOptions.canContainMediaContent&&e.meta.shouldFetchViewContext)).mapTo(ht());var dl=(e,t)=>e.ofType("FIELD_EDIT_UPDATE").mergeMap((e=>((e,t)=>{const{payload:{fieldId:s,fieldOptions:n,value:a}}=e;if(!n||!n.shouldSaveDraft)return Ke.Observable.empty();const i=Object(xs.n)(s)(t);return Ke.Observable.of(Object(xn.h)(s,a,i))})(e,t.getState()))).catch((e=>(e=>(Object(dn.a)("issue.save-draft","Could not send request to save field draft to local storage",e,new pt.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ke.Observable.of((e=>({
type:"FIELD_SAVE_DRAFT_FAILURE",payload:e}))(e))))(e))),pl=n("./node_modules/lodash/pickBy.js"),ml=n.n(pl),bl=n("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js");function fl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hl=e=>e&&e.id,yl=(e,t)=>Object(wa.c)(e,t).map(V.h),Ol=(e,t,s,n,a,i,r)=>{const o=Object(le.f)(e),c=Object(le.y)(e),l=Object(xs.l)(t)(e),u=Object(xs.r)(t)(e),d=Object(xs.f)(t)(e),p=Object(xs.q)(t)(e),m=Object(bl.c)(p)?s:((e,t)=>{switch(e){case"option2":var s;return Object(W.isFollowUpFixEcosystemDropdownFieldsNotClearingEnabled)()?null!==(s=null==t?void 0:t.id)&&void 0!==s?s:null:null==t?void 0:t.id;case"array":return t.map((e=>e.id));default:return t}
})(u,s);i.setFieldValue(c,t,m);return Ke.Observable.fromPromise(n.saveField(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(s),!0).forEach((function(t){gl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({baseUrl:o,issueKey:c,fieldId:t,fieldMetaKey:l,value:m,saveFieldData:a},d?{fieldEditSessionId:d}:null),e)).flatMap((e=>[Object(nl.c)(t,n,m,e,{issueKey:c,shouldFetchViewContext:r}),Object(nl.e)(t,m)]))},jl=e=>(t,s)=>t.ofType("FIELD_SAVE_REQUEST").groupBy((e=>e.payload.fieldId)).mergeMap((t=>t.switchMap((t=>{
const n=s.getState(),a=Object(le.y)(n),{fieldId:i,value:r,fieldOptions:o,saveFieldData:c,shouldFetchViewContext:l}=t.payload,u=o.isOptimistic?Ol(n,i,r,o,c,e,l):((e,t,s,n,a,i,r)=>Ol(e,t,s,n,a,i,r).mergeMap((t=>yl(e).mergeMap((e=>Ke.Observable.of(e,t))))))(n,i,r,o,c,e,l),d=Object(xs.o)(i)(n);return u.catch((t=>{const s=(e=>e instanceof za.a?e.errors&&e.errors.length>0?e.errors[0].error:e.message:null)(t);return e.setFieldValue(a,i,d),Ke.Observable.of(Object(nl.a)(i,s,t,o))}))})))),vl=["status","timeoriginalestimate"],El=(e,t,s)=>(n,a)=>n.ofType("FIELD_UPDATED").filter((e=>vl.includes(e.payload.fieldId))).switchMap((n=>((e,t,s,n,a)=>Object(wa.c)(e,t).do((t=>{const{fields:i}=t.issue,r=Object(le.y)(e);return Ma(i,s,n,r),a.setTransitionInProgress(!1),t})).map(V.h))(a.getState(),(e=>{const{fieldId:t,extraParams:s}=e.payload;if("status"===t)return{shouldRefreshComments:s&&s.viaDialog}})(n),e,t,s))),kl=(e,t)=>e.ofType(tl.L,"ZERO_APPROVAL_REQUIRED").switchMap((()=>yl(t.getState())))
;var wl=(e,t,s)=>Object(Ne.combineEpics)((e=>(t,s)=>t.ofType("FIELD_EDIT_CONFIRM").map((t=>{const n=s.getState(),{fieldId:a,fieldOptions:i,saveFieldData:r,analyticsEvent:o,analyticsAttributeIdRetriever:c=hl}=t.payload,l=Object(le.y)(n),u=Object(xs.h)(a)(n),d=e.getFieldValue(l,a);if(jo()(u,d))return Object(Ic.c)(a,i);let p=!1;if(i.isRichTextField&&i.canContainMediaContent){const e=Object(xs.q)(a)(n),t=e&&e.adfValue;p=Object(Be.e)(t,u),p&&s.dispatch(jt())}const m=ml()({updatedField:a,oldValId:c(d),newValId:c(u)},(e=>null!=e));return Object(nl.b)(a,u,i,r,o,m,p)})))(e),jl(e),El(e,t,s),kl),Sl=(e,t)=>e.ofType("FIELD_EDIT_BEGIN","FIELD_PASTE","FIELD_SAVE_SUCCESS").groupBy((e=>e.payload.fieldId)).map((e=>{const s=e.filter((({type:e})=>"FIELD_EDIT_BEGIN"===e));return e.window(s).map((e=>{const s=e.filter((({type:e})=>"FIELD_SAVE_SUCCESS"===e)),n=e.filter((({type:e})=>"FIELD_PASTE"===e)).takeUntil(s).reduce(((e,t)=>[...e,t.payload.pastedContent]),[])
;return s.withLatestFrom(n).mergeMap((([e,s])=>{const{fieldId:n,fieldOptions:a}=e.payload,i=Object(xs.o)(n)(t.getState());return 0===s.length?Ke.Observable.empty():Ke.Observable.of(Object(nl.d)(n,a,i,s))}))})).mergeAll()})).mergeAll();const Cl=()=>[Mn,Un,Nn,dl,Zc,ll,Xc,Fa,$a,qa],Il=()=>[yi];let Tl=Il;Tl=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>[yi,an,ao({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,ecosystemActions:c,userPreferenceActions:d,issueTabsActions:f,permissionActions:b,attachmentActions:l,prefetchedResourceManager:p,jiraSettingsActions:g,projectContextActions:h,issueContextActions:y}),Mo({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:d,permissionActions:b,issueTabsActions:f,attachmentActions:l,projectContextActions:h,issueContextActions:y
}),$r(p,o),pr,Yn,_c,Ac(),wl(a,i,O),Jo,si,Ka(l),Wa.e,Wa.f,Wa.g,...Object(W.isActivitySortingEnabled)()?[Kn]:[],...Object(W.isActivitySortingEnabled)()?[Object(Wa.c)(m)]:[Object(Wa.d)(m)],Cc,Rr,ra,Pn(le.f,le.y,l,y),da,Ga,ul,vi,go,Tr,ua,...Cl(),Qc(e),sc,lr,ya,Oa,Io(n,s,u,y),To,Po,zr(s,a,i,r,d,h,y),Jr,cl,mr(t),ni,Sl,lc,uc,Pa,oc(h),Ca,Sc,Yo,ri,gi,Lo,ks(l,m),Hc,Sr,Xo,Go,No,Kc,Wc,Bc,rc,Si,jc,vc,...Object(W.isShortcutMenuEnabled)()?[Pc]:[],...Object(W.isActivitySortingEnabled)()?[Gn]:[],Ra(a,i)];var Pl=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>Object(Ne.combineEpics)(...((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>Tl(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O))(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O));function _l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xl(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?_l(Object(s),!0).forEach((function(t){Dl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Dl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Al={server:{}};var Ll=(e=Al,t)=>{const{type:s,payload:n}=t;switch(s){case"SAVE_SERVER_TIME":return n.serverTime?xl(xl({},e),{},{server:xl(xl({},e.server),{},{[n.key]:n.serverTime})}):e;default:return e}};var Ml=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_UPLOAD_CONTEXT_SUCCESS":return n;case"FETCH_UPLOAD_CONTEXT_FAILURE":return null;default:return e}};var Rl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_USER_AUTH_SUCCESS":return n;case"FETCH_USER_AUTH_FAILURE":return null;default:return e}};function Nl(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(s),!0).forEach((function(t){Ul(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ul(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vl="FETCH_ERROR",Kl={clientId:Vl,serviceHost:Vl,tokenLifespanInMs:0,tokenIssueTimestamp:0,token:null,areTokenPermissionsUpToDate:!1,collection:null};var Wl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_VIEW_CONTEXT_FAILURE":return Kl;case"FETCH_VIEW_CONTEXT_SUCCESS":return n;case"MARK_TOKEN_AS_OUTDATED":
return Fl(Fl({},e),{},{areTokenPermissionsUpToDate:!1});case"MARK_TOKEN_AS_UP_TO_DATE":return Fl(Fl({},e),{},{areTokenPermissionsUpToDate:!0});default:return e}},Bl=n("./node_modules/lodash/mapValues.js"),Hl=n.n(Bl),$l=n("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");function Gl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ql(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(s),!0).forEach((function(t){zl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}const Yl={},Ql=(e,t,s,n=[])=>{const a=ql(ql({},e),{},{[t]:ql(ql({},e[t]),s)});return n.forEach((e=>{delete a[t][e]})),a};var Jl=(e=Yl,t)=>{switch(t.type){case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const{fields:s}=t.payload.issue;return Hl()(s,(t=>ql(ql({},t),{},{editingValue:e[t.key]&&e[t.key].editingValue,pendingValue:e[t.key]&&e[t.key].pendingValue})))}case"PREVIEW_DATA_FETCHED":{const s=Object(Ie.a)(t.payload);return Object(Ps.merge)(e,s)}case"FIELD_EDIT_BEGIN":{const{fieldId:s,fieldOptions:{isRichTextField:n},fieldEditSessionId:a}=t.payload,i=n?Object($l.b)(e[s]):Object($l.a)(e[s]);return Ql(e,s,ql({editingValue:i},a?{fieldEditSessionId:a}:null),["invalidMessage","isInvalid"])}case"MULTILINE_FIELD_EDIT_BEGIN":{const{multilineFieldIdsToClose:s}=t.payload;if(null!=s){const t=s.reduce(((t,s)=>ql(ql({},t),{},{[s]:ql(ql({},e[s]),{},{editingValue:void 0})})),{});return ql(ql({},e),t)}return e}case"FIELD_EDIT_UPDATE":{const{fieldId:s,value:n}=t.payload
;return Ql(e,s,{editingValue:n},["invalidMessage","isInvalid"])}case"FIELD_SAVE_REQUEST":{const{fieldId:s,value:n}=t.payload;return Ql(e,s,{pendingValue:n},["editingValue"])}case"FIELD_EDIT_CANCEL":{const{fieldId:s}=t.payload;return Ql(e,s,{},["editingValue","invalidMessage","isInvalid","fieldEditSessionId"])}case"FIELD_SAVE_SUCCESS":{const{fieldId:s,fieldOptions:n}=t.payload;if(!(s in e))return e;const{pendingValue:a}=e[s];let i=Ql(e,s,{},["pendingValue","fieldEditSessionId"]);return n.isOptimistic&&(i=n.isRichTextField?Ql(i,s,{adfValue:a}):Ql(i,s,{value:a})),i}case"FIELD_SAVE_FAILURE":{const{fieldId:s,invalidMessage:n,fieldOptions:a}=t.payload,{pendingValue:i}=e[s],r=a.shouldDiscardChangeOnFailure?["editingValue"]:[];return Ql(e,s,{editingValue:i,isInvalid:!0,invalidMessage:n},["pendingValue","fieldEditSessionId",...r])}case"FIELD_ADD_ALLOWED_VALUES":{const{allowedValues:s,fieldId:n}=t.payload,a=e[n]&&e[n].allowedValues||[];return Ql(e,n,{allowedValues:[...a,...s]})}
case"state.UPDATE_TIME_REMAINING_SUCCESS":{const{timeRemaining:s}=t.payload;return ql(ql({},e),{},{timetracking:ql(ql({},e.timetracking),{},{value:ql(ql({},e.timetracking.value),{},{remainingEstimateSeconds:s})})})}case"state.ADD_WORKLOG_SUCCESS":{const{timeTracking:s}=t.payload;return Ql(e,"timetracking",{value:s})}case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":{const{timeSpentSecondsDelta:s,newRemainingEstimateSeconds:n}=t.payload.timeTrackingDeltas,a=e.timetracking.value,i=ql(ql({},a),{},{timeSpentSeconds:(a.timeSpentSeconds||0)+s});return null!==n&&(i.remainingEstimateSeconds=n),Ql(e,"timetracking",{value:i})}case"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD":{const{linkedUserPickerFieldId:s,newApproverList:n}=t.payload;return s&&e[s]?Ql(e,s,{value:n}):e}default:return e}};function Zl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable
}))),s.push.apply(s,n)}return s}function Xl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(s),!0).forEach((function(t){eu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function eu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tu={selectedActivityItem:null,selectedActivitySortOrder:"NEWEST_FIRST"};var su=(e=tu,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":return Object(W.isActivitySortingEnabled)()?Xl(Xl({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder}):e;case"SELECT_INITIAL_ACTIVITY_ITEM":case"SELECT_ACTIVITY_ITEM":return Xl(Xl({},e),{},{selectedActivityItem:t.payload});case"SELECT_ACTIVITY_SORT_ORDER":return Object(W.isActivitySortingEnabled)()?Xl(Xl({},e),{},{
selectedActivitySortOrder:t.payload}):e;case"FETCH_ISSUE_SUCCESS":return Object(W.isActivitySortingEnabled)()?Xl(Xl({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder}):e;default:return e}};function nu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function au(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const iu={epic:void 0};var ru=(e=iu,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(s),!0).forEach((function(t){au(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e
}({},t.payload.issue.agile);default:return e}};function ou(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(s),!0).forEach((function(t){lu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ou(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const uu={isOpen:!1};var du=(e=uu,t)=>{switch(t.type){case"SHOW_ASSIGN_ISSUE_PARENT_MODAL":return cu(cu({},e),{},{isOpen:!0});case"HIDE_ASSIGN_ISSUE_PARENT_MODAL":return cu(cu({},e),{},{isOpen:!1});default:return e}};function pu(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(s),!0).forEach((function(t){bu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const fu={isPopupOpen:!1,attachments:{},placeholderAttachmentCount:0},gu=(e,{id:t,mediaApiFileId:s})=>{const n=[t,s],a=Object.keys(e.attachments).filter((e=>!n.includes(e))).reduce(((t,s)=>mu(mu({},t),{},{[s]:e.attachments[s]})),{});return mu(mu({},e),{},{attachments:a})};var hu=(e=fu,t)=>{switch(t.type){
case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN":{const s=t.payload;return mu(mu({},e),{},{attachments:mu(mu({},e.attachments),{},{[s.id]:s})})}case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END":return e;case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":{const{fileId:s}=t.payload;if(null==s)return e;const n=Object.keys(e.attachments).filter((e=>e!==s)).reduce(((t,s)=>mu(mu({},t),{},{attachments:mu(mu({},t.attachments),{},{[s]:e.attachments[s]})})),{});return mu(mu({},e),{},{attachments:n})}case"ATTACHMENT_JIRA_CREATE_SUCCESS":return gu(e,t.payload);case"ATTACHMENT_JIRA_CREATE_FAILURE":return gu(e,t.payload.attachment);case"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS":return mu(mu({},e),{},{isPopupOpen:!0});case"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS":return mu(mu({},e),{},{isPopupOpen:!1});case"ATTACHMENT_PANEL_DRAG_ENTER":return mu(mu({},e),{},{placeholderAttachmentCount:t.payload});case"ATTACHMENT_PANEL_DRAG_LEAVE":case"ATTACHMENT_PANEL_DROP":return mu(mu({},e),{},{placeholderAttachmentCount:0});default:
return e}};function yu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ou(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(s),!0).forEach((function(t){ju(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ju(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vu={isBannerVisible:!1,isBannerDismissed:!1,isTourActive:!1};var Eu=(e=vu,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.changeboarding.lastinteracted"]
;return void 0!==s?Ou(Ou({},e),{},{isBannerVisible:null===s}):e}case"CHANGEBOARDING_BANNER_DISMISS":return Ou(Ou({},e),{},{isBannerVisible:!1,isBannerDismissed:!0});case"CHANGEBOARDING_TOUR_BEGIN":return Ou(Ou({},e),{},{isBannerVisible:!1,isTourActive:!0});case"CHANGEBOARDING_TOUR_END":return Ou(Ou({},e),{},{isTourActive:!1});default:return e}};function ku(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(s),!0).forEach((function(t){Su(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ku(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Su(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Cu={subtaskQuickAddClickCount:0,issueInEpicQuickAddClickCount:0,childIssueQuickAddClickCount:0};var Iu=(e=Cu,t)=>{switch(t.type){case"SUBTASK_QUICK_ADD_CLICKED":return wu(wu({},e),{},{subtaskQuickAddClickCount:e.subtaskQuickAddClickCount+1});case"ISSUE_IN_EPIC_QUICK_ADD_CLICKED":return wu(wu({},e),{},{issueInEpicQuickAddClickCount:e.issueInEpicQuickAddClickCount+1});case"CHILD_ISSUE_QUICK_ADD_CLICKED":return wu(wu({},e),{},{childIssueQuickAddClickCount:e.childIssueQuickAddClickCount+1});default:return e}};const Tu={isOpen:!1};var Pu=(e=Tu,t)=>{const{type:s}=t;switch(s){case"SHOW_CLONE_MODAL":return{isOpen:!0};case"HIDE_CLONE_MODAL":return{isOpen:!1};default:return e}},_u=n("./src/packages/common-legacy-do-not-add-anything-new/src/icepick/unset-in.js");function xu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Du(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(s),!0).forEach((function(t){Au(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Au(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Lu=Object(Ps.freeze)({pendingSavedValues:{},pendingDeletedIds:[],deleteModalCommentId:null,isLoadingMoreComments:!1,commentEditors:{},isCommentAttachmentInProgress:!1,hasScrolledPermalinkComment:!1,loadingStage:"LOADING"});var Mu=(e=Lu,t)=>{const s=t=>Object(Ps.updateIn)(e,["pendingDeletedIds"],(e=>e.filter((e=>e!==t))));switch(t.type){case"PREVIEW_DATA_FETCHED":
return Object(W.isActivitySortingEnabled)()?Object(Ps.set)(e,"loadingStage","COMPLETE"):e;case"SAVE_COMMENT_REQUEST":{const{isNewComment:s,id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,visibility:c}=t.payload.comment;let l=e;if(s){const t=e.commentEditors.NEW_OPTIMISTIC_COMMENT;if(void 0!==t){const s=Object(_u.a)(e,["commentEditors","NEW_OPTIMISTIC_COMMENT"]);l=Object(Ps.setIn)(s,["commentEditors",n],t)}}const u={id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,isInternal:Jn()(l,["commentEditors",n,"isInternal"],!0),visibility:c};return l=Object(W.isActivitySortingEnabled)()?s?Object(Ps.setIn)(l,["loadingStage"],"SAVE_COMMENT_LOADING"):l:Object(Ps.setIn)(l,["loadingStage"],"LOADING"),Object(Ps.chain)(l).setIn(["pendingSavedValues",n],u).setIn(["commentEditors",n,"isEditing"],!1).value()}case"FETCH_OLDER_COMMENTS_REQUEST":case"FETCH_NEWER_COMMENTS_REQUEST":return Object(Ps.set)(e,"isLoadingMoreComments",!0);case"FETCH_MORE_COMMENTS_SUCCESS":case"FETCH_MORE_COMMENTS_FAILURE":
return Object(Ps.set)(e,"isLoadingMoreComments",!1);case"SAVE_COMMENT_RETRY":{const{payload:s}=t,n=Object(_u.a)(e,["pendingSavedValues",s.optimisticId,"hasSaveFailed"]);return(t=>!!Object(Ps.getIn)(e,["commentEditors",t]))(s.optimisticId)?n:Object(Ps.setIn)(n,["pendingSavedValues",s.optimisticId,"createdDate"],s.createdDate)}case"SAVE_COMMENT_EDIT":return Object(Ps.setIn)(e,["commentEditors",t.payload.optimisticId,"isEditing"],!0);case"SAVE_COMMENT_SUCCESS":case"SAVE_COMMENT_CANCEL":return Object(_u.a)(Object(_u.a)(e,["commentEditors",t.payload.optimisticId]),["pendingSavedValues",t.payload.optimisticId]);case"FETCH_SORTED_COMMENTS_REQUEST":return Object(Ps.set)(e,"loadingStage","LOADING");case"FETCH_SORTED_COMMENTS_SUCCESS":case"FETCH_LATEST_COMMENTS_SUCCESS":case"FETCH_ISSUE_SUCCESS":return Object(Ps.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_FAILURE":return Object(Ps.setIn)(e,["pendingSavedValues",t.payload.optimisticId,"hasSaveFailed"],!0);case"DELETE_COMMENT_REQUEST":{
const{payload:s}=t;return Object(Ps.chain)(e).updateIn(["pendingDeletedIds"],(e=>[...e,s.id])).set("deleteModalCommentId",null).value()}case"DELETE_COMMENT_SUCCESS":return s(t.payload.id);case"DELETE_COMMENT_FAILURE":return s(t.payload);case"SHOW_DELETE_COMMENT_MODAL":return Object(Ps.set)(e,"deleteModalCommentId",t.payload);case"DELETE_COMMENT_CANCEL":return Object(Ps.set)(e,"deleteModalCommentId",null);case"EDIT_COMMENT_BEGIN":return Object(Ps.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:t.payload.isInternal});case"EDIT_COMMENT_UPDATE":return Object(Ps.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:Object(Ps.getIn)(e,["commentEditors",t.payload.id,"isInternal"]),editingValue:t.payload.value,visibility:Object(Ps.getIn)(e,["commentEditors",t.payload.id,"visibility"])});case"EDIT_COMMENT_VISIBILITY":return Object(Ps.setIn)(e,["commentEditors",t.payload.id,"visibility"],t.payload.visibility);case"EDIT_COMMENT_COLLAPSE":case"EDIT_COMMENT_CANCEL":
return Object(_u.a)(e,["commentEditors",t.payload.id]);case"ADD_COMMENT_FORM_CANCEL":case"ADD_COMMENT_FORM_COLLAPSE":{const t=Object(Ps.unset)(e,"addCommentEditorExpand");return Object(_u.a)(t,["commentEditors","NEW_OPTIMISTIC_COMMENT"])}case"ADD_COMMENT_FORM_EXPAND":return Object(Ps.set)(e,"addCommentEditorExpand",!0);case"CHANGE_COMMENT_VISIBILITY":{const{id:s,isInternal:n}=t.payload;return Object(Ps.setIn)(e,["commentEditors",s,"isInternal"],n)}case"SET_COMMENT_ATTACHMENT_IN_PROGRESS":return Object(Ps.set)(e,"isCommentAttachmentInProgress",t.payload.isInProgress);case"SET_COMMENT_SCROLL_STATUS":return Object(Ps.set)(e,"hasScrolledPermalinkComment",t.payload.status);case"MULTILINE_FIELD_EDIT_BEGIN":{const{commentIdsToClose:s,shouldCloseAddCommentForm:n}=t.payload;if(null!=s){const t=(n?s.concat("NEW_OPTIMISTIC_COMMENT"):s).reduce(((t,s)=>Du(Du({},t),{},{[s]:Du(Du({},e.commentEditors[s]),{},{editingValue:void 0,visibility:void 0,isEditing:!1})})),{});return Du(Du({},e),{},{
commentEditors:Du(Du({},e.commentEditors),t),addCommentEditorExpand:!n&&e.addCommentEditorExpand})}return e}default:return e}};function Ru(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Nu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ru(Object(s),!0).forEach((function(t){Fu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ru(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Uu={isShowMoreExpanded:!1};var Vu=(e=Uu,t)=>{const{type:s}=t;switch(s){case"EXPAND_SHOW_MORE":return Nu(Nu({},e),{},{isShowMoreExpanded:!0});case"COLLAPSE_SHOW_MORE":
return Nu(Nu({},e),{},{isShowMoreExpanded:!1});default:return e}};function Ku(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ku(Object(s),!0).forEach((function(t){Bu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ku(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hu={isContextPanelOpen:!1,contextPanelItem:void 0};var $u=(e=Hu,t)=>{switch(t.type){case"CONTEXT_PANEL_SHOW":return Wu(Wu({},e),{},{isContextPanelOpen:!0,contextPanelItem:t.payload});case"CONTEXT_PANEL_HIDE":
return Wu(Wu({},e),{},{isContextPanelOpen:!1});default:return e}},Gu=n("./src/packages/platform/utils/types/src/edition.js"),qu=n("./src/packages/platform/utils/types/src/license-state.js"),zu=n("./src/packages/issue/issue-view/src/configurations.js");function Yu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(s),!0).forEach((function(t){Ju(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ju(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zu={applicationKey:"",issueActions:[],
contextItemCategories:{primary:[],secondary:[]},contentItemCategories:{visible:[],request:void 0},atlassianAccountId:null,baseUrl:Object(je.b)(""),isAnonymous:!1,issueKey:Object(je.l)(""),isModal:!1,cloudId:null,locale:"en_US",maxTokenLength:0,ecosystemEnabled:null,isLoadedWithPage:null,rapidViewMap:null,estimationStatistic:null,licensedProducts:{},appEditions:{software:Gu.d,core:Gu.d,serviceDesk:Gu.d},appPermissions:{hasCoreAccess:!1,hasSoftwareAccess:!1,hasServiceDeskAccess:!1},licenseStates:{core:qu.d,software:qu.d,serviceDesk:qu.d},siteAdminStatus:"unknown",productCrossSellConfig:"unknown",isLoading:!1,viewMode:null,firstActivationDateMs:null,viewScreenId:void 0},Xu=({itemId:e,type:t})=>({id:e,type:t}),ed=({state:e,projectConfig:t,issueId:s,contextPrimary:n,contextSecondary:a,contentVisible:i,contentRequest:r})=>{const o=Object(zu.h)(t);return Qu(Qu({},e),{},{issueId:s,applicationKey:o.applicationKey,issueActions:o.issueActions,ecosystemEnabled:o.ecosystemEnabled,
contentItemCategories:{visible:i,request:r},contextItemCategories:{primary:n,secondary:a}})};var td=(e=Zu,t)=>{switch(t.type){case"SET_CONTEXT":{const{payload:s}=t;return Qu(Qu({},e),s)}case"LOAD_NEW_ISSUE":return Qu(Qu({},e),{},{issueKey:t.payload.issueKey});case"LOGIN_SUCCESSFUL":return Qu(Qu({},e),{},{atlassianAccountId:t.payload.accountId});case"PREVIEW_DATA_FETCHED":{const{payload:s}=t;if(s&&s.id&&s.fields.has("project")){const{contextPrimary:t,contextSecondary:n,content:a,contentRequest:i}=s.layout,{id:r}=s,o=s.fields.get("project").value,c=a?a.map(Xu):[],l=i&&i.map(Xu);return ed({state:e,projectConfig:o,issueId:Object(je.j)(r),contextPrimary:t.map(Xu),contextSecondary:n.map(Xu),contentVisible:c,contentRequest:l})}return e}case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.project,n=t.payload.issue.id,{licensedProducts:a}=t.payload,{licenseStates:i}=t.payload
;let r=e.contentItemCategories.visible,o=e.contentItemCategories.request,c=e.contextItemCategories.primary,l=e.contextItemCategories.secondary;if(t.payload.issue.contextItemsCategories){const{primary:e,secondary:s}=t.payload.issue.contextItemsCategories;c=e||[],l=s||[]}t.payload.issue.contentItemsCategories&&(r=t.payload.issue.contentItemsCategories.visible||[],o=t.payload.issue.contentItemsCategories.request);return Qu(Qu({},ed({state:e,projectConfig:s,issueId:n,contextPrimary:c,contextSecondary:l,contentVisible:r,contentRequest:o})),{},{licensedProducts:a,licenseStates:i})}default:return e}};function sd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sd(Object(s),!0).forEach((function(t){ad(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ad(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const id={};var rd=(e=id,t)=>{switch(t.type){case"LOAD_DRAFT_SUCCESS":return nd(nd({},e),{},{[t.payload.fieldId]:!0});case"SAVE_DRAFT_REQUEST":return nd(nd({},e),{},{[t.payload.fieldId]:!0});case"DELETE_DRAFT_SUCCESS":return nd(nd({},e),{},{[t.payload.fieldId]:!1});default:return e}},od=(e=null,t)=>{switch(t.type){case"ECOSYSTEM_SHOW_GLANCE":return t.payload;case"ECOSYSTEM_HIDE_GLANCE":return null;default:return e}},cd=n("./node_modules/lodash/omit.js"),ld=n.n(cd);function ud(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function dd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(s),!0).forEach((function(t){pd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ud(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const md=dd(dd({canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canEditAllComments:!1,canEditIssues:!1,canEditOwnComments:!1,canLinkIssues:!1,canManageWatchers:!1,canMoveIssue:!1,canModifyReporter:!1,canScheduleIssues:!1,
canViewWatchers:!1,canBrowseUsers:!1},{canDeleteAllWorklogs:!1,canDeleteOwnWorklogs:!1,canEditAllWorklogs:!1,canEditOwnWorklogs:!1,canLogWork:!1}),{},{canUseServiceDeskAgentFeatures:!1,canViewDevTools:!1});function bd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(s),!0).forEach((function(t){gd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hd={isEnabled:!1,attachmentId:null,availableAttachmentIds:[]};function yd(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Od(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yd(Object(s),!0).forEach((function(t){jd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vd={};const Ed=[];var kd=n("./node_modules/lodash/filter.js"),wd=n.n(kd),Sd=n("./node_modules/lodash/pick.js"),Cd=n.n(Sd);function Id(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Td(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(s),!0).forEach((function(t){Pd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Id(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _d={isLinkingEnabled:!0,createLinkedPage:{clickedCount:0,isLoading:!1,isInvalid:!1,errorMessage:""},linkedPages:{pages:[],pageCount:0},mentionedPages:{pages:[],pageCount:0}},xd=["linkedPages","mentionedPages"];var Dd=(e=_d,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s}=t.payload,n=Cd()(s.confluencePages,xd),a=Td(Td({},e),n);return Td(Td({},a),{},{isLinkingEnabled:!!s.isLinkingEnabled})}
case"PREVIEW_DATA_FETCHED":{const{remoteLinks:s}=t.payload;if(s&&s.confluencePages){const{linkedPages:t,mentionedPages:n}=s.confluencePages;return Td(Td({},e),{},{linkedPages:Td(Td({},e.linkedPages),{},{pageCount:t.pageCount}),mentionedPages:Td(Td({},e.mentionedPages),{},{pageCount:n.pageCount})})}return e}case"DELETE_CONFLUENCE_PAGE_LINK_REQUEST":{const{globalId:s}=t.payload,n=((e,t)=>xd.reduce(((e,s)=>{const{pages:n}=e[s],a=wd()(n,(e=>(e.link?e.link.globalId:e.globalId)!==t));return Td(Td({},e),{},{[s]:{pageCount:a.length,pages:a}})}),Cd()(e,xd)))(e,s);return Td(Td({},e),n)}case"CREATE_CONFLUENCE_PAGE_LINK_REQUEST":return Td(Td({},e),{},{createLinkedPage:Td(Td({},e.createLinkedPage),{},{isLoading:!0})});case"CREATE_CONFLUENCE_PAGE_LINK_FAILED":{const{errorMessage:s}=t.payload;return Td(Td({},e),{},{createLinkedPage:Td(Td({},e.createLinkedPage),{},{errorMessage:s,isLoading:!1,isInvalid:!0})})}case"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED":return Td(Td({},e),{},{
createLinkedPage:Td(Td({},e.createLinkedPage),{},{errorMessage:"",isInvalid:!1})});case"LINK_CONFLUENCE_PAGE_CLOSED":return Td(Td({},e),{},{createLinkedPage:_d.createLinkedPage});case"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS":{const s=e.linkedPages.pages||[];return Td(Td({},e),{},{linkedPages:Td(Td({},e.linkedPages),{},{pages:[...s,t.payload.confluencePageLink],pageCount:e.linkedPages.pageCount+1}),createLinkedPage:Td(Td({},e.createLinkedPage),{},{isLoading:!1,isInvalid:!1,errorMessage:""})})}case"LINK_CONFLUENCE_PAGE_CLICKED":return Td(Td({},e),{},{createLinkedPage:Td(Td({},e.createLinkedPage),{},{clickedCount:e.createLinkedPage.clickedCount+1})});default:return e}};function Ad(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ld(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Ad(Object(s),!0).forEach((function(t){Md(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ad(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Md(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rd={activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]};var Nd=n("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");function Fd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ud(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(s),!0).forEach((function(t){Vd(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Kd={createLinkedIncident:{clickedCount:0},createMajorIncident:{clickedCount:0}};const Wd=[];var Bd=n("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),Hd=n("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");function $d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(s),!0).forEach((function(t){qd(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zd={issueLinks:{},linkedIssues:{},linkedIssueKeys:[]};function Yd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(s),!0).forEach((function(t){Jd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jd(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zd={isLoadingComplete:!1};const Xd=[];const ep={status:"NOT_LOADED",remoteLinks:[]};function tp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function sp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function np(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sp(Object(s),!0).forEach((function(t){ap(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ap(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ip={isLoading:!1,hasError:!1,isSaved:!1,isDeleted:!1,isOptimistic:!1},rp=(e,t)=>{var s,n,a,i,r,o,c;return{id:e.issueId.toString(),issueKey:e.issueKey.stringValue,issueSummary:e.summary.textValue,statusCategoryId:null===(s=e.status)||void 0===s?void 0:s.statusCategoryId,statusCategory:Object(Oe.statusCategoryForId)(null===(n=e.status)||void 0===n?void 0:n.statusCategoryId),issueLink:Object(Xn.q)(t),statusName:null===(a=e.status)||void 0===a?void 0:a.name,statusId:null===(i=e.status)||void 0===i?void 0:i.statusId,issuePriorityUrl:Object(Xn.q)(e.priority.iconUrl),issuePriorityName:e.priority.name,issueTypeIconUrl:Object(Xn.q)(e.issueType.iconUrl),
issueTypeName:e.issueType.name,assigneeDisplayName:null===(r=e.assignee)||void 0===r||null===(o=r.userValue)||void 0===o?void 0:o.displayName,assigneeUrl:null!==(c=e.assignee)&&void 0!==c&&c.userValue?Object(Xn.q)(e.assignee.userValue.avatarUrl):null}},op=e=>e.map((e=>{const{preview:t,details:s}=e,n=!s;let a={};return a=s?s.error?{issueDetails:null,remoteIssueLinkError:s}:{issueDetails:rp(s.associatedIssue,t.href),remoteIssueLinkError:null}:{issueDetails:null,remoteIssueLinkError:null},np(np(np({id:t.id.toString(),globalId:void 0===t.globalId?void 0:Object(je.s)(t.globalId),applicationType:t.applicationType,applicationName:t.applicationName,issueLinkUrl:Object(Xn.q)(t.href),relationship:t.relationship,issueKey:Object(je.l)(t.title),remoteIssueId:Object(je.j)(t.issueId.toString())},a),ip),{},{isLoading:n})})),cp=e=>{let t={};if("WITH_ISSUE_ID"===e.payloadType){const{payloadType:s}=e;t=tp(e,["payloadType"])}else{const{payloadType:s}=e;t=np(np({},tp(e,["payloadType"])),{},{
remoteIssueId:Object(je.j)(`OPTIMISTIC_ISSUE_ID_${Date.now()}`)})}const s=np(np({},ip),{},{isLoading:!0,isOptimistic:!0});return np(np({},t),{},{issueDetails:null,remoteIssueLinkError:null},s)};function lp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function up(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lp(Object(s),!0).forEach((function(t){dp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pp={remoteIssueCount:0,remoteIssues:[]};function mp(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mp(Object(s),!0).forEach((function(t){fp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gp={isLinkingEnabled:!0,linkCount:0,links:[],createClickCount:0};function hp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yp(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(s),!0).forEach((function(t){Op(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Op(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const jp={sortedWorklogIds:[],worklogs:{},totalWorklogs:0,worklogsStartIndex:0};function vp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ep(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ep(Object(s),!0).forEach((function(t){wp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ep(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Sp=Object(Ps.freeze)({users:{},applicationRoles:[],ecosystem:Rd,forge:Nd.b,issueLinks:zd,issueTypes:Xd,issueContentPanels:Wd,issueRemoteData:Zd,permissions:md,comments:vd,totalComments:0,commentsStartIndex:0,loadedComments:0,confluencePages:_d,webLinks:gp,subtasks:[],cardCover:hd,childrenIssues:{},parentIssue:null,parentLevelIssues:[],refreshedOn:0,
requestPanelMetadata:{channel:void 0,requestUrl:""},worklog:jp,confluenceAppLinks:Ed,remoteIssueLinks:pp,jiraAppLinks:ep,incidentManagement:Kd,issue:null,jiraSettings:{subtasksConfiguration:{enabled:!0},issueLinkTypes:[],timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}}}),Cp=(e,t=[])=>ld()(e,[...t,"forgeIssueProperties"]);var Ip=(e,t)=>{const s=(e=>{if(e)return e;const t={};return Object.assign(t,{issueTypes:Xd}),kp(kp({},Sp),t)})(e);let n=Object(Ps.chain)(s).set("cardCover",((e=hd,t)=>{switch(t.type){case"CARD_COVER_FETCH_SUCCESS":return t.payload.cardCover;case"CARD_COVER_UPDATE_REQUEST":case"CARD_COVER_UPDATE_FAILURE":return fd(fd({},e),{},{attachmentId:t.payload.attachmentId});default:return e}})(s.cardCover,t)).set("comments",((e=vd,t)=>{switch(t.type){case"SAVE_COMMENT_SUCCESS":{const{comment:s}=t.payload;return Od(Od({},e),{},{[s.id]:s})}case"DELETE_COMMENT_SUCCESS":{const s=Od({},e);return delete s[t.payload.id],s}default:
return e}})(s.comments,t)).set("confluencePages",Dd(s.confluencePages,t)).set("issueLinks",((e=zd,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const{fields:s}=t.payload,n=s.get(Bd.k);if(n){const{value:e}=n;return Object(Hd.b)(Object(je.b)(""),Object(Hd.a)(e))}return e}case"FETCH_LINKED_ISSUES_SUCCESS":return Object(Ps.merge)(e,{linkedIssues:t.payload});case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const{linkedIssues:s,issueLinks:n,optimisticIds:a}=t.payload,i=Object(_u.a)(e,["issueLinks",a]);return Object(Ps.chain)(i).merge({linkedIssues:s}).merge(n).value()}case"SAVE_LINKED_ISSUE_REQUEST":{const{newIssueLinks:s}=t.payload;return Object(Ps.chain)(e).merge(s.issueLinks).setIn(["issueLinks",s.optimisticId,"isOptimistic"],!0).setIn(["issueLinks",s.optimisticId,"isLoading"],!0).setIn(["issueLinks",s.optimisticId,"hasError"],!1).setIn(["issueLinks",s.optimisticId,"isSaved"],!1).value()}case"SAVE_LINKED_ISSUE_FAILURE":
return Object(Ps.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!1).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!0).value();case"SAVE_LINKED_ISSUE_SUCCESS":return Object(Ps.setIn)(e,["issueLinks",t.payload.optimisticId,"isSaved"],!0);case"FETCH_LINKED_ISSUES_DATA_FAILURE":{let s=e;return t.payload.optimisticIds.forEach((e=>{s=Object(Ps.setIn)(s,["issueLinks",e,"isLoading"],!1)})),s}case"SAVE_LINKED_ISSUE_RETRY":return Object(Ps.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!0).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!1).value();case"DELETE_LINKED_ISSUE_REQUEST":{const s=Object(Ps.setIn)(e,["issueLinks",t.payload.linkedIssueId,"isDeleted"],!0);return Object(_u.a)(s,["deleteModalLinkId"])}case"DELETE_LINKED_ISSUE_FAILURE":return Object(Ps.setIn)(e,["issueLinks",t.payload,"isDeleted"],!1);case"DELETE_LINKED_ISSUE_SUCCESS":case"SAVE_LINKED_ISSUE_CANCEL":return Object(_u.a)(e,["issueLinks",t.payload])
;case"ADD_ISSUE_LINK_CLICKED":return Object(Ps.setIn)(e,["quickAddClicked"],((e||{}).quickAddClicked||0)+1);case"ADD_ISSUE_LINK_CLOSED":return Object(Ps.setIn)(e,["quickAddClicked"],0);case"SET_CREATE_LINKED_ISSUE_PERMISSION":return Object(Ps.setIn)(e,["canCreateLinkedIssue"],t.payload.canCreateLinkedIssue);case"REFRESH_ISSUE_SUCCESS":if(t.payload.issueLinks){const s=t.payload.issueLinks;return Object(Ps.setIn)(s,["canCreateLinkedIssue"],e.canCreateLinkedIssue)}return e;case"CREATE_LINKED_ISSUE_SUCCESS":{const{newIssueLinks:s}=t.payload;return zc()(s.issueLinks,((e,t)=>{s.issueLinks[t]=Gd(Gd({},e),{},{isOptimistic:!1,isLoading:!0,hasError:!1,isSaved:!0})})),Object(Ps.merge)(e,s)}default:return e}})(s.issueLinks,t)).set("ecosystem",((e=Rd,t)=>{switch(t.type){case"CONTENT_PANEL_SELECTED":return Ld(Ld({},e),{},{selectedContentPanel:t.payload});case"CONTENT_PANEL_UNSELECT":return Ld(Ld({},e),{},{selectedContentPanel:void 0});case"REFRESH_ECOSYSTEM_SUCCESS":return Ld({},t.payload)
;case"FETCH_ISSUE_SUCCESS":return Ld({},t.payload.ecosystem);default:return e}})(s.ecosystem,t)).set("forge",Object(Nd.a)(s.forge,t)).set("confluenceAppLinks",((e=Ed,t)=>{switch(t.type){case"FETCH_CONFLUENCE_APP_LINKS_SUCCESS":return t.payload;default:return e}})(s.confluenceAppLinks,t)).set("issueContentPanels",((e=Wd,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":return t.payload.issueContentPanels||e;case"ADD_CONTENT_PANEL_SUCCESS":return[...e,t.payload];case"REMOVE_CONTENT_PANEL_SUCCESS":{const{payload:s}=t;return e.filter((e=>e!==s))}case"CONTENT_PANELS_CUSTOMISED_SUCCESS":return e.includes("issue.content.panel.customised.flag")?e:[...e,"issue.content.panel.customised.flag"];default:return e}})(s.issueContentPanels,t)).set("issueTypes",((e=Xd,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return t.payload.issueTypes||e||Xd;case"SET_ISSUE_TYPES":return t.payload.map((e=>{const{id:t,name:s,subtask:n,iconUrl:a,fields:i}=e;return{id:t,name:s,subtask:n,
iconUrl:a,fields:i}}));default:return t.type,e}})(s.issueTypes,t)).set("webLinks",((e=gp,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{webLinks:n}=s,{linkCount:a=0,links:i=[]}=n||{};return bp(bp({},e),{},{isLinkingEnabled:!!s.isLinkingEnabled,linkCount:a,links:i})}case"SHOW_CREATE_WEB_LINK_FORM":return bp(bp({},e),{},{createClickCount:e.createClickCount+1});case"HIDE_CREATE_WEB_LINK_FORM":return bp(bp({},e),{},{createClickCount:gp.createClickCount});case"DELETE_WEB_LINK_REQUEST":{const{id:s}=t.payload,n=e.links.map((e=>e.id===s?bp(bp({},e),{},{isDeleting:!0,deleteFailed:!1}):e));return bp(bp({},e),{},{links:n})}case"DELETE_OPTIMISTIC_WEB_LINK":case"DELETE_WEB_LINK_SUCCESS":{const{id:s}=t.payload;if(s&&e.links){const t=e.links.filter((e=>e.id!==s)),n=t.length;return bp(bp({},e),{},{linkCount:n,links:t})}return e}case"DELETE_WEB_LINK_FAILED":{const{id:s}=t.payload,n=e.links.map((e=>e.id===s?bp(bp({},e),{},{isDeleting:!1,deleteFailed:!0
}):e));return bp(bp({},e),{},{links:n})}case"CANCEL_FAILED_WEB_LINK_DELETION":{const{id:s}=t.payload,n=e.links.map((e=>e.id!==s?e:{id:e.id,href:e.href,linkText:e.linkText,iconUrl:e.iconUrl}));return bp(bp({},e),{},{links:n})}case"CREATE_WEB_LINK_REQUEST":{const{optimisticId:s,href:n,linkText:a,iconUrl:i}=t.payload;return bp(bp({},e),{},{linkCount:e.linkCount+1,links:[...e.links,{id:s,href:n,linkText:a,iconUrl:i,isCreating:!0,createFailed:!1}]})}case"CREATE_WEB_LINK_SUCCESS":{const{optimisticId:s,webLink:n}=t.payload,a=e.links.map((e=>e.id===s?n:e));return bp(bp({},e),{},{links:a})}case"CREATE_WEB_LINK_FAILED":{const{optimisticId:s}=t.payload,n=e.links.map((e=>e.id===s?bp(bp({},e),{},{isCreating:!1,createFailed:!0}):e));return bp(bp({},e),{},{links:n})}case"CREATE_WEB_LINK_RETRY":{const{optimisticId:s}=t.payload,n=e.links.map((e=>e.id===s?bp(bp({},e),{},{isCreating:!0,createFailed:!1}):e));return bp(bp({},e),{},{links:n})}default:return e}
})(s.webLinks,t)).set("incidentManagement",((e=Kd,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return Ud(Ud({},e),{},{createLinkedIncident:Ud(Ud({},e.createLinkedIncident),{},{clickedCount:e.createLinkedIncident.clickedCount+1})});case"CREATE_MAJOR_INCIDENT_CLICKED":return Ud(Ud({},e),{},{createMajorIncident:Ud(Ud({},e.createMajorIncident),{},{clickedCount:e.createMajorIncident.clickedCount+1})});default:return e}})(s.incidentManagement,t)).value();return n=Object(Ps.set)(n,"remoteIssueLinks",((e=pp,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length;if(e.remoteIssueCount)return e;const i=up(up({},e),{},{remoteIssueCount:a,remoteIssues:op(n)});return up({},i)}case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length,i=up(up({},e),{},{remoteIssueCount:a,remoteIssues:op(n)});return jo()(i,e)?e:up({},i)}case"DELETE_REMOTE_LINKED_ISSUE_REQUEST":{
const{globalId:s}=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.globalId===s?up(up({},e),{},{isDeleted:!0}):e))})}case"DELETE_REMOTE_LINKED_ISSUE_SUCCESS":{const s=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.reduce(((e,t)=>(t.globalId!==s&&e.push(t),e)),[])})}case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":{const s=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.globalId===s?up(up({},e),{},{isDeleted:!1}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_REQUEST":{const{saveRemoteIssueLinkPayload:s}=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.concat(cp(s))})}case"SAVE_REMOTE_LINKED_ISSUE_SUCCESS":{const{optimisticId:s,saveRemoteLinkResponse:{id:n,issueId:a,globalId:i}}=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?up(up({},e),{},{id:n.toString(),globalId:Object(je.s)(i),remoteIssueId:void 0!==a?Object(je.j)(a.toString()):e.remoteIssueId,isOptimistic:!1,isSaved:!0}):e))})}
case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{optimisticId:s,error:n}=t.payload;return 400===n.statusCode?up(up({},e),{},{remoteIssues:e.remoteIssues.filter((e=>e.id!==s))}):up(up({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?up(up({},e),{},{isLoading:!1,hasError:!0}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_RETRY":{const{optimisticId:s}=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?up(up({},e),{},{isLoading:!0,hasError:!1}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_CANCEL":{const s=t.payload;return up(up({},e),{},{remoteIssues:e.remoteIssues.filter((e=>e.id!==s))})}default:return e}})(s.remoteIssueLinks,t)),n=Object(Ps.set)(n,"jiraAppLinks",((e=ep,t)=>{switch(t.type){case"FETCH_JIRA_APP_LINKS_SUCCESS":return{status:"LOADED",remoteLinks:t.payload.map((e=>({id:e.id,name:e.name,baseUrl:Object(je.b)(e.url),authUrl:Object(je.i)(e.authUrl),requireCredentials:e.requireCredentials})))};case"FETCH_JIRA_APP_LINKS_FAILED":return{status:"ERROR",
remoteLinks:e.remoteLinks};case"FETCH_JIRA_APP_LINKS_REQUEST":return{status:"LOADING",remoteLinks:e.remoteLinks};case"APPLINK_AUTHENTICATION_SUCCESS":return{status:"NOT_LOADED",remoteLinks:e.remoteLinks};default:return e}})(s.jiraAppLinks,t)),n=Object(Ps.set)(n,"worklog",((e=jp,t)=>{switch(t.type){case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,startIndex:a,totalWorklogs:i}=t.payload;return yp(yp({},e),{},{sortedWorklogIds:s,worklogs:n,worklogsStartIndex:a,totalWorklogs:i})}case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return yp({},jp);case"state.EDIT_WORKLOG_SUCCESS":{const{worklogs:s}=t.payload;return yp(yp({},e),{},{worklogs:s})}case"state.FETCH_WORKLOGS_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,totalWorklogs:a}=t.payload,{worklogsStartIndex:i}=e;return{sortedWorklogIds:s.slice().reverse().concat(e.sortedWorklogIds),worklogs:yp(yp({},e.worklogs),n),totalWorklogs:a,worklogsStartIndex:i}}case"state.FETCH_OLDER_WORKLOGS_SUCCESS":{
const{worklogs:s,sortedWorklogIds:n,totalWorklogs:a}=t.payload;return yp(yp({},e),{},{worklogs:yp(yp({},e.worklogs),s),sortedWorklogIds:[...n,...e.sortedWorklogIds],totalWorklogs:a})}case"state.FETCH_NEWER_WORKLOGS_SUCCESS":{const{worklogs:s,sortedWorklogIds:n,totalWorklogs:a}=t.payload,i=e.worklogsStartIndex||0;return yp(yp({},e),{},{worklogs:yp(yp({},e.worklogs),s),sortedWorklogIds:[...e.sortedWorklogIds,...n],totalWorklogs:a,worklogsStartIndex:i-n.length})}case"FETCH_ISSUE_SUCCESS":{const{payload:e}=t,{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}=e;return{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}}case"state.DELETE_WORKLOG_SUCCESS":{const{worklogId:s}=t.payload,{totalWorklogs:n,worklogsStartIndex:a}=e;return{sortedWorklogIds:e.sortedWorklogIds.filter((e=>e!==s)),worklogs:ld()(e.worklogs,s),totalWorklogs:n-1,worklogsStartIndex:a}}case"state.FETCH_SORTED_WORKLOGS_SUCCESS":{
const{worklogs:e,totalWorklogs:s,startIndex:n,sortedWorklogIds:a}=t.payload;return{sortedWorklogIds:a,worklogs:e,totalWorklogs:s,worklogsStartIndex:n}}case"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS":{const{worklogs:s,totalWorklogs:n,startIndex:a,sortedWorklogIds:i,selectedSortOrder:r}=t.payload,o="NEWEST_FIRST"===r?[...i,...e.sortedWorklogIds]:[...e.sortedWorklogIds,...i];return yp(yp({},e),{},{worklogs:yp(yp({},e.worklogs),s),sortedWorklogIds:o,totalWorklogs:n,worklogsStartIndex:a})}case"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS":{const{worklogs:s,totalWorklogs:n,startIndex:a,sortedWorklogIds:i,selectedSortOrder:r}=t.payload,o="NEWEST_FIRST"===r?[...e.sortedWorklogIds,...i]:[...i,...e.sortedWorklogIds];return yp(yp({},e),{},{worklogs:yp(yp({},e.worklogs),s),sortedWorklogIds:o,totalWorklogs:n,worklogsStartIndex:a})}default:return e}})(s.worklog,t)),n=Object(Ps.set)(n,"issueRemoteData",((e=Zd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":
case"FETCH_ISSUE_REMOTE_DATA_FAILURE":return Qd(Qd({},e),{},{isLoadingComplete:!0});default:return e}})(s.issueRemoteData,t)),((e,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_ISSUE_SUCCESS":{const t=Object(Ps.merge)(e,Cp(n,["issueContentPanels","issueTypes"]));return ld()(t,[["issue","fields"],["issue","contextItemsCategories"],["issue","contentItemsCategories"],"changeboardingLastInteracted","licensedProducts","licenseStates"])}case"FETCH_SCREENID_SUCCESS":case"FETCH_MORE_COMMENTS_SUCCESS":return Object(Ps.merge)(e,n);case"FETCH_SORTED_COMMENTS_SUCCESS":{const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i}=n;let r=Object(Ps.chain)(e).setIn(["comments"],t).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value();return n.users&&(r=Object(Ps.set)(r,"users",Object(Ps.merge)(e.users,n.users))),r}case"FETCH_LATEST_COMMENTS_SUCCESS":{const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i,users:r}=n
;if(Object(W.isFixLatestCommentsSuccessReducerEnabled)()){let n=Object(Ps.chain)(e).setIn(["comments"],t).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value();return r&&(n=Object(Ps.set)(n,"users",Object(Ps.merge)(e.users,r))),n}return Object(Ps.chain)(e).setIn(["comments"],t).setIn(["users"],r).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value()}case"PREVIEW_DATA_FETCHED":{const{fields:t}=n;let s=e;const a=t&&t.get("project");if(a&&a.value&&(s=Object(Ps.set)(s,"project",a.value)),n.comments){const{comments:{comments:e={},totalCount:t,startIndex:a}}=n;s=Object(Ps.chain)(s).setIn(["comments"],e).setIn(["loadedComments"],Object.keys(e).length).setIn(["totalComments"],t).setIn(["commentsStartIndex"],a).value()}return n.users&&(s=Object(Ps.set)(s,"users",Object(Ps.merge)(e.users,n.users))),s}case"REFRESH_ISSUE_SUCCESS":{
const t=Cp(n),s=Object.keys(t).reduce(((s,n)=>"users"===n?Object(Ps.set)(s,"users",Object(Ps.merge)(e.users,t.users)):"issueTypes"===n||"issueLinks"===n||"issueContentPanels"===n?s:Object(Ps.set)(s,n,t[n])),e);return Object(Ps.setIn)(s,["refreshedOn"],Date.now())}case"FETCH_LOGGED_IN_USER_SUCCESS":{const{user:t,applicationRoles:s}=n,a=t.id,i=kp({},e.users);return(Object(W.removeTimeZoneFromIssueUser)()?a&&t.id&&!i[t.id]:a)&&(i[t.id]=t),kp(kp({},e),{},{users:i},Object(W.isUseAppPermissionsFromTenantContextEnabled)()?void 0:{applicationRoles:s})}case"SAVE_COMMENT_SUCCESS":return n.isNewComment?Object(Ps.chain)(e).setIn(["loadedComments"],e.loadedComments+1).setIn(["totalComments"],e.totalComments+1).value():e;case"DELETE_COMMENT_SUCCESS":return Object(Ps.chain)(e).setIn(["loadedComments"],e.loadedComments-1).setIn(["totalComments"],e.totalComments-1).value();case"REQUEST_PANEL_METADATA_FETCH_SUCCESS":{const t=Object(_u.a)(e,["requestPanelMetadata"])
;return Object(Ps.setIn)(t,["requestPanelMetadata"],n)}case"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS":return Object(Ps.setIn)(e,["project","issueTypes"],n);case"FETCH_ISSUE_PARENTS_SUCCESS":return Object(Ps.setIn)(e,["parentLevelIssues"],n);case"SET_PARENT_SUCCESS":{const s=t.payload.parentIssue,{issueType:n}=s,a=vp(s,["issueType"]),{name:i,iconUrl:r}=n||{},o=kp(kp({},a),{},{issueTypeName:i||"",issueTypeIconUrl:r||""});return Object(Ps.setIn)(e,["parentIssue"],o)}case"UNSET_PARENT_SUCCESS":return Object(Ps.setIn)(e,["parentIssue"],null);case"CHILD_ISSUE_ADD_SUCCESS":{const{payload:{childIssue:s}}=t;s.isLoading=void 0;const n=JSON.parse(JSON.stringify(e.childrenIssues));return n.push(s),Object(Ps.setIn)(e,["childrenIssues"],n)}case"SUBTASK_ADD_SUCCESS":{const{payload:{subtask:s}}=t,n=JSON.parse(JSON.stringify(e.subtasks));return n.push(s),Object(Ps.setIn)(e,["subtasks"],n)}default:return e}})(n,t)};const Tp=e=>{const{traceId:t,errorMessage:s,endpoint:n,statusCode:a}=e,i={}
;return null!==t&&(i.traceId=t),null!==s&&(i.errorMessage=s),null!==n&&(i.endpoint=n),null!==a&&(i.statusCode=a),i};var Pp=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return Tp(t.payload);default:return e}};var _p=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return t.payload.error;case"LOGIN_SUCCESSFUL":return null;default:return e}};var xp=(e="NONE",t)=>{switch(t.type){case"FETCHING_ISSUE_TYPES":return"PENDING";case"SET_ISSUE_TYPES":return"COMPLETE";case"FETCH_ISSUE_TYPES_FAILED":return"FAILED";default:return t.type,e}};const Dp=e=>e.length>0?e[0].id+1:1,Ap="CONTENT_LIMIT_EXCEEDED",Lp=[];var Mp=(e=Lp,t)=>{switch(t.type){case"SAVE_COMMENT_FAILURE":return t.payload.invalidMessage&&t.payload.invalidMessage.includes(Ap)?[{type:tl.l,id:Dp(e)},...e]:[{type:t.payload.isServerValidationError?tl.k:tl.j,id:Dp(e)},...e];case"DELETE_COMMENT_FAILURE":return[{type:tl.m,id:Dp(e)},...e]
;case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":case"ATTACHMENT_JIRA_CREATE_FAILURE":return[{type:tl.e,id:Dp(e)},...e];case"EDITOR_CHANGE_FAILURE":case"EDITOR_EXPANDED_FAILURE":case"EDITOR_SAVE_FAILURE":return[{type:tl.u,id:Dp(e)},...e];case tl.H:return[{type:tl.H,id:Dp(e)},...e];case"DELETE_LINKED_ISSUE_FAILURE":case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":return[{type:tl.q,id:Dp(e)},...e];case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{error:s,remoteIssueKey:n}=t.payload;if(400===s.statusCode){const t=(e=>{try{const t=JSON.parse(e),s=Object.values(t.errors||{});return[...t.errorMessages||[],...s].join(" ")}catch{return e}})(s.message);return[{type:tl.E,id:Dp(e),titleI18nValues:{remoteIssueKey:n},descriptionI18nValues:{i18nServerErrorMessage:t}},...e]}return e}case"FIELD_SAVE_FAILURE":{const{fieldOptions:s}=t.payload,{onSaveFailureFlagType:n}=s;if(s.isRichTextField&&t.payload.invalidMessage){if(t.payload.invalidMessage.includes(Ap))return[{type:tl.I,id:Dp(e)},...e]
;if(t.payload.invalidMessage&&t.payload.invalidMessage.includes("is required"))return[{type:tl.J,id:Dp(e)},...e]}return n?[{type:n,id:Dp(e)},...e]:e}case"FIELD_SAVE_SUCCESS":{const{onSaveSuccessFlagType:s}=t.payload.fieldOptions;return s?[{type:s,id:Dp(e),descriptionI18nValues:{issueKey:t.meta&&t.meta.issueKey}},...e]:e}case"DISMISS_FLAG":return e.filter((e=>e.id!==t.payload));case"DELETE_ISSUE_FAILURE":return[{type:tl.p,id:Dp(e),titleI18nValues:{issueKey:t.payload.issueKey}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":return[{type:tl.h,id:Dp(e),titleI18nValues:{destType:t.payload.targetTypeName}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE":return[{type:tl.g,id:Dp(e)},...e];case"TOGGLE_WATCHING_ERROR":return[{type:tl.Q,id:Dp(e)},...e];case"FETCH_WATCHERS_ERROR":return[{type:tl.z,id:Dp(e)},...e];case"START_WATCHING_SUCCESS":return[{type:tl.M,id:Dp(e)},...e];case"STOP_WATCHING_SUCCESS":return[{type:tl.N,id:Dp(e)},...e];case"REMOVE_WATCHER_ERROR":return[{type:tl.G,
id:Dp(e)},...e];case"ADD_WATCHER_ERROR":return[{type:tl.b,id:Dp(e)},...e];case"state.ADD_WORKLOG_FAILURE":return[{type:tl.c,id:Dp(e)},...e];case"state.UPDATE_TIME_REMAINING_FAILURE":return[{type:tl.P,id:Dp(e)},...e];case"state.EDIT_WORKLOG_SUCCESS":return[{type:tl.x,id:Dp(e)},...e];case"state.EDIT_WORKLOG_FAILURE":return[{type:tl.w,id:Dp(e)},...e];case"state.DELETE_WORKLOG_SUCCESS":return[{type:tl.t,id:Dp(e)},...e];case"state.DELETE_WORKLOG_FAILURE":return[{type:tl.s,id:Dp(e)},...e];case"DELETE_CONFLUENCE_PAGE_LINK_FAILED":return[{type:tl.o,id:Dp(e)},...e];case"DELETE_WEB_LINK_FAILED":return[{type:tl.r,id:Dp(e)},...e];case tl.K:return[{type:tl.K,id:Dp(e)},...e];case tl.L:return[{type:tl.L,id:Dp(e)},...e];case tl.a:return[{type:tl.a,id:Dp(e)},...e];case tl.F:return[{type:tl.F,id:Dp(e)},...e];case"FETCH_JIRA_APP_LINKS_FAILED":return[{type:tl.y,id:Dp(e)},...e];default:return e}};function Rp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Np(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Rp(Object(s),!0).forEach((function(t){Fp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Rp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Up={showCreateIncidentPanel:!1,showCreateMajorIncidentModal:!1};var Vp=(e=Up,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return Np(Np({},e),{},{showCreateIncidentPanel:!0});case"LINK_INCIDENT_PANEL_CLOSED":return Np(Np({},e),{},{showCreateIncidentPanel:!1});case"CREATE_MAJOR_INCIDENT_CLICKED":return Np(Np({},e),{},{showCreateMajorIncidentModal:!0});case"CREATE_MAJOR_INCIDENT_MODAL_CLOSED":
return Np(Np({},e),{},{showCreateMajorIncidentModal:!1});default:return e}};function Kp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kp(Object(s),!0).forEach((function(t){Bp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hp={isDeleteIssueModalOpen:!1,isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:null};var $p=(e=Hp,t)=>{switch(t.type){case"OPEN_DELETE_ISSUE_MODAL":return Wp(Wp({},e),{},{isDeleteIssueModalOpen:!0})
;case"CLOSE_DELETE_ISSUE_MODAL":return Wp(Wp({},e),{},{isDeleteIssueModalOpen:!1});case"DELETE_ISSUE_REQUEST":return Wp(Wp({},e),{},{isDeletingIssue:!0,didIssueDeleteFail:!1,issueKey:t.payload.issueKey});case"DELETE_ISSUE_SUCCESS":return Wp(Wp({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:t.payload});case"DELETE_ISSUE_FAILURE":return Wp(Wp({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!0,issueKey:t.payload.issueKey});default:return e}},Gp=(e="LOADING",t)=>{const{type:s}=t;switch(s){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_FAILURE":return"COMPLETE";case"PREVIEW_DATA_FETCHED":return"LOADING"===e?"PREVIEW":e;case"LOGIN_SUCCESSFUL":case"LOAD_NEW_ISSUE":return"LOADING";default:return e}};function qp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zp(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(s),!0).forEach((function(t){Yp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qp={shouldShowIssueTypeList:!1};var Jp=(e=Qp,t)=>{const{type:s,payload:n}=t;switch(s){case"SHOW_ISSUE_TYPE_LIST":return zp(zp({},e),{},{shouldShowIssueTypeList:n});default:return e}};function Zp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Zp(Object(s),!0).forEach((function(t){em(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function em(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tm={projectHasSubtaskValidators:{status:"LOADING"}};var sm=(e=tm,t)=>{switch(t.type){case"SET_CONTEXT":return e;case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS":return Xp(Xp({},e),{},{projectHasSubtaskValidators:{status:"LOADING"}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS":return Xp(Xp({},e),{},{projectHasSubtaskValidators:{status:"LOADED",value:t.payload}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE":return Xp(Xp({},e),{},{projectHasSubtaskValidators:{status:"FAILED"}});default:return e}},nm=(e=[],t)=>{const{type:s,payload:n}=t;switch(s){
case"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS":return n;default:return e}};const am={timestamp:0,value:void 0};var im=(e=am,t)=>{switch(t.type){case"SHARE_AS_COMMENT":return{timestamp:Date.now(),value:t.payload.value};case"CLEAR_SHARED_AS_COMMENT_VALUES":return{timestamp:Date.now()};default:return e}};const rm={issueUpdatedTimestamp:0};var om=(e=rm,t)=>{const{type:s,payload:n}=t;switch(s){case"FIELD_UPDATED":return"status"===n.fieldId?{issueUpdatedTimestamp:Date.now()}:e;case"SAVE_COMMENT_SUCCESS":return{issueUpdatedTimestamp:Date.now()};default:return e}};function cm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(s),!0).forEach((function(t){um(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function um(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dm={newIssueViewLockedIn:!1};var pm=(e=dm,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const s=t.payload.meta&&t.payload.meta.newIssueViewLockedIn;return void 0!==s?lm(lm({},e),{},{newIssueViewLockedIn:s}):e}case"FETCH_ISSUE_SUCCESS":{const{newIssueViewLockedIn:s}=t.payload;return void 0!==s?lm(lm({},e),{},{newIssueViewLockedIn:s}):e}default:return e}};function mm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bm(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(s),!0).forEach((function(t){fm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gm={hasIssueViewMounted:!1};var hm=(e=gm,t)=>{switch(t.type){case"ISSUE_VIEW_MOUNTED":return bm(bm({},e),{},{hasIssueViewMounted:!0});default:return t.type,e}};function ym(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Om(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ym(Object(s),!0).forEach((function(t){jm(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ym(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vm={openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};function Em(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function km(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(s),!0).forEach((function(t){wm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Em(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wm(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Sm={hasScrolledPermalink:!1};var Cm=Object(Me.combineReducers)({loadingStage:(e="LOADING",t)=>{switch(t.type){case"state.FETCH_WORKLOGS_REQUEST_INITIAL":case"state.FETCH_WORKLOGS_RETRY":case"state.ADD_WORKLOG_SUCCESS":case"state.FETCH_SURROUNDING_WORKLOGS_BY_ID":case"state.FETCH_SORTED_WORKLOGS_REQUEST":case"state.FETCH_SORTED_WORKLOGS_RETRY":return"LOADING";case"state.FETCH_NEWER_WORKLOGS_REQUEST":case"state.FETCH_NEWER_SORTED_WORKLOGS_REQUEST":return"LOADING_NEWER_WORKLOGS";case"state.FETCH_OLDER_WORKLOGS_REQUEST":case"state.FETCH_OLDER_SORTED_WORKLOGS_REQUEST":return"LOADING_OLDER_WORKLOGS";case"state.FETCH_WORKLOGS_SUCCESS":case"FETCH_ISSUE_SUCCESS":case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":case"state.FETCH_NEWER_WORKLOGS_SUCCESS":case"state.FETCH_OLDER_WORKLOGS_SUCCESS":case"state.FETCH_SORTED_WORKLOGS_SUCCESS":case"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS":
case"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS":return"COMPLETE";case"state.FETCH_WORKLOGS_FAILURE":case"state.FETCH_SORTED_WORKLOGS_FAILURE":return"LOADING"===e?"ERROR":"ERROR_ADDITIONAL";case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return"ERROR";default:return e}},modal:(e=vm,t)=>{switch(t.type){case"state.OPEN_MODAL":return{openModal:t.payload.modalType,isSaving:!1,activeWorklogId:t.payload.worklogId};case"state.UPDATE_TIME_REMAINING_REQUEST":case"state.ADD_WORKLOG_REQUEST":case"state.EDIT_WORKLOG_REQUEST":case"state.DELETE_WORKLOG_REQUEST":return Om(Om({},e),{},{isSaving:!0});case"state.UPDATE_TIME_REMAINING_FAILURE":case"state.ADD_WORKLOG_FAILURE":case"state.EDIT_WORKLOG_FAILURE":case"state.DELETE_WORKLOG_FAILURE":return Om(Om({},e),{},{isSaving:!1});case"state.CLOSE_MODAL":case"state.ADD_WORKLOG_SUCCESS":case"state.UPDATE_TIME_REMAINING_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":return{openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};default:
return e}},highlightedWorklogId:(e=null,t)=>{switch(t.type){case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return t.payload.worklogId;case"state.DISPOSE_WORKLOG_APP":return null;case"state.OPEN_MODAL":default:return e}},permalinkStatus:(e=Sm,t)=>{switch(t.type){case"SET_WORKLOG_SCROLL_STATUS":return km(km({},e),{},{hasScrolledPermalink:t.payload.status});case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return km(km({},e),{},{hasScrolledPermalink:!1});default:return e}}});function Im(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Im(Object(s),!0).forEach((function(t){Pm(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Im(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _m={agile:void 0,context:void 0,entities:void 0,fields:void 0,mediaContext:{viewContext:null,uploadContext:null,userAuth:null},shareAsComment:void 0,sla:void 0,timing:void 0,ui:void 0,validators:void 0},xm=()=>{const e={};return e.issueType=Jp,e},Dm=(e,t)=>Object(Me.combineReducers)({agile:ru,context:td,entities:Ip,fields:Jl,mediaContext:Object(Me.combineReducers)({uploadContext:Ml,userAuth:Rl,viewContext:Wl}),shareAsComment:im,sla:om,timing:Ll,ui:Object(Me.combineReducers)(Tm({attachments:Object(Me.combineReducers)({picker:hu}),activityFeed:su,assignIssueParentModal:du,comments:Mu,changeboarding:Eu,childPanel:Iu,cloneModal:Pu,contextItems:Vu,
contextPanel:$u,drafts:rd,ecosystem:Object(Me.combineReducers)({glance:od}),error:_p,fetchIssueTypesStatus:xp,flags:Mp,issueDeletion:$p,loadingStage:Gp,recentlyVisitedConfluencePages:nm,uiConfig:pm,viewMountStatus:hm,worklog:Cm,incidentManagement:Vp,errorMessage:Pp},xm())),validators:sm})(e,t);var Am=(e=_m,t)=>{if("LOAD_NEW_ISSUE"===t.type){const s=Dm({ui:{changeboarding:e.ui.changeboarding,uiConfig:e.ui.uiConfig}},F(Object(le.l)(e))),n=Dm(s,t),a=Object(te.y)(e),i=Object(W.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(sl.a)(e);return a?Dm(n,we(a,i)):n}if("LOAD_RECENT_ISSUE"===t.type){const s=Object(le.l)(e),{issueState:n}=t.payload;return Dm(Tm(Tm({},n),{},{context:Tm(Tm(Tm({},n.context),s),{},{issueId:n.context.issueId,contentItemCategories:n.context.contentItemCategories,contextItemCategories:n.context.contextItemCategories})}),Object(V.g)())}return Dm(e,t)};const Lm=()=>e=>t=>{try{e(t)}catch(s){
throw Ve.h.safeErrorWithoutCustomerData("issue.middleware.error-logger",`Unhandled error in ${t.type}`),s}};var Mm=({initialState:e,onChange:t=Ue.a,onError:s=Ue.a,dataProvider:n,history:a,issueKey:i=Object(je.l)(""),fieldsValueActions:r,fieldsConfigActions:o,issueViewLayoutActions:c,forgeActions:l,ecosystemActions:u,attachmentActions:d,recentIssuesActions:p,prefetchedResourceManager:m,userPreferenceActions:f,issueScrollActions:g,permissionActions:h,issueTabsActions:y,jiraSettingsActions:O,projectContextActions:j,issueContextActions:v,workflowTransitionsActions:E})=>Object(Me.createStore)(Object(Re.enableBatching)(Am),e,Object(Ve.a)({name:`issue-${i}`})(Object(Me.applyMiddleware)(...((e,t,s,n,a,i,r,o,c,l,u,d,p,m,f,g,h,y,O,j)=>{const v=Object(b.b)(Pl(e,t,s,n,a,i,r,o,c,l,u,p,d,m,f,g,h,y,O,j)),E=Object(Ne.createEpicMiddleware)(v);return[Lm,E]
})(t,s,n,a,r,o,c,l,u,d,p,m,f,g,h,y,O,j,v,E)))),Rm=n("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),Nm=n("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js"),Fm=n("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function Um(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Um(Object(s),!0).forEach((function(t){Km(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Um(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Km(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}function Wm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(s),!0).forEach((function(t){Hm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $m=(e,t)=>{const{baseUrl:s,cloudId:n,licensedProducts:a,locale:i,atlassianAccountId:r,productCrossSellConfig:o,siteAdminStatus:c,isAnonymous:l,appEditions:u,appPermissions:d,licenseStates:p,firstActivationDateMs:m}=t;return{analyticsSource:e.analyticsSource,appEditions:u,
appPermissions:d,atlassianAccountId:r,baseUrl:s,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,cloudId:n,estimationStatistic:e.estimationStatistic,firstActivationDateMs:m,isAnonymous:l,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,licensedProducts:a,licenseStates:p,locale:i,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ve.a)(),onIssueKeyChange:e.onIssueKeyChange,productCrossSellConfig:o,rapidViewId:e.rapidViewId,rapidViewMap:e.rapidViewMap,siteAdminStatus:c,viewMode:e.viewMode}},Gm=e=>{var t;return{analyticsSource:e.analyticsSource,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,estimationStatistic:e.estimationStatistic,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ve.a)(),onIssueKeyChange:e.onIssueKeyChange,rapidViewId:e.rapidViewId,
rapidViewMap:null===(t=e.rapidViewMap)||void 0===t?void 0:t.map((e=>e.map((e=>Object(je.l)(e))))),viewMode:e.viewMode}},qm=e=>{var t,s;return{id:e.id,name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional,isLooped:e.isLooped,to:{id:e.to.id,name:e.to.name,description:null!==(t=e.to.description)&&void 0!==t?t:"",statusCategory:{id:Object(Oe.categoryIdForStatusCategory)(Object(Oe.statusCategoryForId)(null===(s=e.to.statusCategory)||void 0===s?void 0:s.id))}},from:e.from}},zm=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O,j)=>{const v=a.getRecentIssue(e.issueKey),E=a.getRecentIssuesCount();if(Object(K.a)({analyticsSource:e.analyticsSource,isLoadedWithPage:e.isLoadedWithPage||!1,isSPA:!e.isInitialRender,isRecentIssue:!!v,recentIssuesCount:E,dataProvider:s,store:n,route:b}),n.dispatch(F($m(e,t))),d.setIssueContext(Gm(e)),e.dispatchExternalActionRef&&e.dispatchExternalActionRef(l),v)n.dispatch(Object(V.g)());else{const a=s.getIssue(e.issueKey)
;var k;if(c&&a&&(Object(W.isIssueIdPopulationEnabled)()&&void 0!==a.id&&d.mergeIssueContext({issueId:Object(je.j)(String(a.id))}),(({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,storeEcosystemData:r,attachmentActions:o,permissionActions:c,jiraSettingsActions:l,store:u,issueData:d,baseUrl:p,issueContextActions:m,issueKey:b})=>{const f=e.getGiraData(),g=e.getGqlData();if(f&&f.viewIssue&&g){u.dispatch(Ce(d));const{readToken:e,uploadToken:h,userToken:y}=f.mediaContext||{};if(e){const t=Object(Nm.b)(e);u.dispatch(yt(t))}else u.dispatch(Ot({statusCode:500}));if(h)if(null!=h.clientId&&null!=h.endpointUrl&&null!=h.targetCollection&&null!=h.token&&null!=h.tokenDurationInMins){const e=bn({clientId:h.clientId,endpointUrl:h.endpointUrl,targetCollection:h.targetCollection,token:h.token,tokenDurationInMins:h.tokenDurationInMins});u.dispatch(Object(mn.d)(e))
}else null!=h.error?u.dispatch(Object(mn.b)(new Error(h.error))):u.dispatch(Object(mn.b)({statusCode:500}));else u.dispatch(Object(mn.b)({statusCode:500}));if(y){const e=Object(Nm.c)(y);u.dispatch(yn(e))}else u.dispatch(On(500));const O=Object(Fm.c)(g,p),j=Vm(Vm({},Object(Rm.c)(f)),O);s(j.issue.tabs);const{project:v}=j;v&&n(Object(je.q)(v.projectKey),v),a(j.issue.fields),i(j.issueSections),t(j.myPreferences),Object(W.isForgeAndEcosystemSweetStateEnabled)()&&r(j.ecosystem),u.dispatch(Object(V.d)(j)),j.attachments&&o.setVisibleAttachments(b,j.attachments.nodes),j.attachments&&o.setTotalCount(b,j.attachments.totalCount),j.attachments&&"number"==typeof j.attachments.deletableCount&&o.setDeletableCount(b,j.attachments.deletableCount),j.permissions&&v&&c.setProjectPermissions(Object(je.q)(v.projectKey),j.permissions),j.jiraSettings&&l.setJiraSettings(j.jiraSettings),(e=>!!e)(j.issue.viewScreenId)&&m&&m.mergeIssueContext({viewScreenId:j.issue.viewScreenId})}})({resourceManager:c,
savePreferences:e=>o.setUserPreferences(e),storeFieldsWithContext:t=>Ma(t,i,r,e.issueKey),storeIssueLayoutData:e=>{f.setIssueViewLayout(e)},storeEcosystemData:e=>{h.setEcosystem(e)},saveIssueTabs:e=>m.setIssueTabs(e),saveProjectContext:(e,s)=>{if(O.setProjectContext(e,s),Object(W.isPolarisInsightsTabEnabled)()&&s){const{projectType:n}=s;Le(t.baseUrl,e,n).then((t=>O.mergeProjectProperty(e,{isPolarisProject:t})))}},permissionActions:p,attachmentActions:u,jiraSettingsActions:y,store:n,issueData:a,baseUrl:t.baseUrl,issueContextActions:d,issueKey:e.issueKey})),Object(W.isFetchTransitionsInPreviewModeEnabled)())(null==a||null===(k=a.workflow)||void 0===k?void 0:k.transitions)&&j.setState({data:a.workflow.transitions.map(qm)});if((e=>!Object(te.n)(e.getState()))(n))if(a){var w;n.dispatch(Ce(a)),Ma(Object(Ie.a)(a),i,r,e.issueKey,!0),f.setIssueViewLayout(a.issueSections),o.setUserPreferences(a.myPreferences);const t=null===(w=a.fields.get("project"))||void 0===w?void 0:w.value
;t&&O.setProjectContext(Object(Se.a)(e.issueKey),t)}else n.dispatch(Ee(e.issueKey));c&&c.isAllDataReady()&&a?(n.dispatch(Object(V.a)()),c.clearAll()):(Object(K.f)(),n.dispatch(Object(V.c)())),n.dispatch((()=>({type:"FETCH_LOGGED_IN_USER_REQUEST"}))())}v||n.dispatch(Object(ke.b)(e.issueKey))};function Ym(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ym(Object(s),!0).forEach((function(t){Jm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ym(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
function Zm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Xm=Object(f.a)((()=>Object(W.isEnrolledInCodeInDevPanelExperiment)()),(({children:e})=>c.a.createElement(g.a,null,e)),(({children:e})=>e)),eb=e=>{const{analyticsSource:t,backButtonUrl:s,boardId:n,boardType:a,dispatchExternalActionRef:i,estimationStatistic:r,isLoadedWithPage:l,isModal:u,issueKey:d,isSpaEnabled:f,locationTransformer:g,loginRedirectUrl:P,rapidViewId:$,rapidViewMap:G,viewMode:q,children:z}=e,Y=Object(R.c)(),Q=Object(L.a)(),X=Object(_.a)(),[,ee]=(()=>{
const[,e]=J(),t=Object(o.useCallback)((t=>e.getRecentIssue(t)),[e]),s=Object(o.useCallback)(((t,s)=>e.setRecentIssue(t,s)),[e]),n=Object(o.useCallback)((()=>e.getRecentIssuesCount()),[e]);return[null,Object(o.useMemo)((()=>({setRecentIssue:s,getRecentIssue:t,getRecentIssuesCount:n})),[t,s,n])]})(),[,te]=Object(O.b)(),[,ne]=Object(j.e)(),[ae]=Object(Z.a)(),[,ie]=Object(w.a)(),[,re]=Object(h.b)(),[,oe]=Object(E.b)(),[,ce]=Object(A.e)(),[,le]=Object(y.e)(),[,ue]=Object(I.a)(),[,de]=Object(C.a)(),[,pe]=Object(S.a)(),[,me]=Object(k.b)(),[,be]=Object(M.a)(),[,fe]=Object(D.f)(),[,he]=Object(T.a)(),Oe=Object(o.useMemo)((()=>((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y)=>{const O=n.getRecentIssue(e.issueKey),j=O?Bm(Bm({},O),{},{context:Bm(Bm({},O.context),$m(e,t))}):void 0;return Mm({attachmentActions:d,onChange:e.onChange,onError:e.onError,dataProvider:s,history:e.history||ye()(),initialState:j,issueKey:e.issueKey,fieldsValueActions:a,fieldsConfigActions:i,issueViewLayoutActions:r,forgeActions:o,
ecosystemActions:c,prefetchedResourceManager:u,recentIssuesActions:n,userPreferenceActions:l,issueScrollActions:p,permissionActions:m,issueTabsActions:b,jiraSettingsActions:f,projectContextActions:g,issueContextActions:h,workflowTransitionsActions:y})})(e,Y,Q,ee,ne,te,ue,de,pe,ie,ae,re,oe,ce,me,be,fe,le,he)),[]),je=Object(o.useCallback)((()=>{const e=Oe.getState(),t=Object(H.a)(e),{attributes:s}=t;return Qm(Qm({},Zm(t,["attributes"])),s)}),[Oe]),ve=Object(o.useCallback)((e=>{const t=Object(U.d)(e);Oe.dispatch(t)}),[Oe]);Object(o.useMemo)((()=>{zm(e,Y,Q,Oe,ee,ne,te,ie,ae,ve,re,le,ce,me,X,ue,0,pe,be,fe,he)}),[]),Object(o.useEffect)((()=>()=>{const e=Oe.getState();"COMPLETE"===e.ui.loadingStage&&ee.setRecentIssue(d,e)}),[d,ee,Oe]);const Ee=Object(o.useRef)(!0);return Object(o.useEffect)((()=>{Ee.current||(Oe.dispatch(F($m(e,Y))),le.setIssueContext(Gm(e))),Object(W.isRemoveDuplicateGiraEnabled)()||(Ee.current=!1)}),[s,d,P,$,a,n,l,u,G,r,t,q]),Object(o.useEffect)((()=>{if(!Ee.current){
ee.getRecentIssue(e.issueKey)&&Oe.dispatch(Object(V.g)())}Object(W.isRemoveDuplicateGiraEnabled)()&&(Ee.current=!1)}),[e.issueKey,ee,Oe]),Object(o.useEffect)((()=>()=>{ae&&ae.clearAll(),!1!==f&&null!=f||setTimeout((()=>Oe.dispatch(b.a))),i&&i(null)}),[]),Object(K.g)(),c.a.createElement(v.a,null,c.a.createElement(N.a,{scope:d},c.a.createElement(Xm,null,c.a.createElement(p.a,{store:Oe,locale:Object(W.isRemoveUnusedAppBasePropsEnabled)()?void 0:Y.locale,getAnalyticsAttributes:Object(W.isNewAnalyticsComponent)()?void 0:je},c.a.createElement(x.a,{getAttributes:je},c.a.createElement(ge,null),c.a.createElement(se,null),c.a.createElement(m.a,null,c.a.createElement(B.b,{store:Oe,locationTransformer:g},z)))))))};eb.displayName="AppProvider";const tb=e=>c.a.createElement(P.a,{scope:e.issueKey},c.a.createElement(eb,e));tb.displayName="ScopedAppProvider";var sb=tb;s.a=i()(r.a,(()=>e=>{var t,s;return s=t=class extends o.Component{constructor(...e){super(...e),
this.MetricsContext=Object(d.b)(this.props.metrics)}render(){const{MetricsContext:t}=this;return c.a.createElement(t.Provider,{value:Object(d.a)(this.props.metrics)},c.a.createElement(e,this.props))}},t.displayName=`WithMetricsProvider(${e.displayName||e.name})`,s})(),(function(e){return t=>c.a.createElement(l.a,null,(s=>c.a.createElement(e,u({},t,{isInitialRender:s.isInitialRender}))))}))(sb)},"./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg":function(e,t,s){e.exports=s.p+"assets/auth-error.37d7a62ee1c48c2d5ae201ec8f798f18.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg":function(e,t,s){e.exports=s.p+"assets/permission-error.c932893e3cfcbf2f521d55c8596010e7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg":function(e,t,s){e.exports=s.p+"assets/unknown-error.0ae7398ce07e7e3c1125e09977c8fd48.8.svg"},
"./src/packages/issue/issue-view/src/views/issue-details/issue-app.js":function(e,t,s){"use strict";s.r(t);const n=e=>{try{window.performance.mark(e)}catch(t){}},a="jira.issue-view.issue-app.eval-start",i="jira.issue-view.issue-app.eval-end";n(a);var r=s("./node_modules/react/index.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),u=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),d=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),m=s("./src/packages/growth/up-flow/persistent-upgrade-banner/src/async.js"),b=s("./src/packages/issue/issue-view/src/common/util/events/index.js");const f=[d.a.FULL_ISSUE,d.a.SERVICEDESK_QUEUES_ISSUE,d.a.SERVICEDESK_REPORTS_ISSUE]
;var g=s("./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js"),h=s("./src/packages/issue/issue-view/src/views/banner/index.js"),y=s("./node_modules/react-redux/es/index.js"),O=s("./src/packages/issue/opt-in-back/src/async.js"),j=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),v=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js");const E=({hasEditField:e,hasShowMoreLink:t})=>{const s={hasShowMoreLink:t,hasEditField:e};return o.a.createElement(O.c,s)};E.displayName="ChangeBoardingTour";var k=Object(y.b)((e=>({hasEditField:Object(v.a)(e),hasShowMoreLink:Object(j.f)(e)
})),{})(E),w=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js"),S=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),C=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),I=s("./src/packages/platform/utils/types/src/general.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),P=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),_=s("./src/packages/issue/issue-view/src/feedback-button/index.js"),x=s("./src/packages/platform/utils/constants/src/application-keys.js");const D={[x.a.SOFTWARE_ISSUE]:{feedbackGroupId:"jira-software-full-issueview",collectorId:"12f21050"},[x.a.CORE_ISSUE]:{feedbackGroupId:"jira-core-full-issueview",collectorId:"f7ac9eb0"},[x.a.SERVICE_DESK]:{feedbackGroupId:"jira-service-desk-full-issueview",collectorId:"3311e016"},[x.a.BITBUCKET_ISSUE]:{
feedbackGroupId:"bitbucket-jira-issueview",collectorId:"e7fdb917"}};function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const L=({applicationKey:e,baseUrl:t,locale:s,isCompact:n=!1})=>{if(null==e||!(e=>Boolean(D[e]))(e))return null;const a=D[e];return o.a.createElement(P.a,{name:"GIVE_FEEDBACK"},o.a.createElement(_.a,A({},a,{baseUrl:t,locale:s,isCompact:n})))};L.displayName="Feedback";var M=L;const R=Object(y.b)((e=>({baseUrl:Object(I.b)(Object(T.f)(e)),locale:Object(T.A)(e),applicationKey:Object(T.e)(e)})),{})(M);const N=(e,t=!0)=>o.a.createElement(R,{isCompact:t});N.displayName="renderFeedback";s("./node_modules/react-magnetic-di/lib/esm/index.js")
;var F=s("./src/packages/platform/controllers/global/document-title/src/index.js"),U=s("./src/packages/issue/issue-context-service/src/main.js"),V=s("./src/packages/issue/fields/summary/src/services/index.js");const K=({location:e})=>{const t=Object(U.g)(),[{value:s}]=Object(V.a)({issueKey:t});return e!==d.a.FULL_ISSUE&&e!==d.a.SERVICEDESK_QUEUES_ISSUE&&e!==d.a.SERVICEDESK_REPORTS_ISSUE||null==s?null:o.a.createElement(F.a,{title:`[${t}] ${s}`})};K.displayName="ExtractedDocumentTitle"
;var W=K,B=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),H=s("./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js"),$=s("./src/packages/platform/services/providers-project-context/src/index.js"),G=s("./src/packages/routes/src/ui/spa/servicedesk/practices/resources/index.js"),q=s("./src/packages/servicedesk/change-management-tour/src/async.js"),z=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),Y=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var Q=Object(y.b)((e=>({fields:Object(z.s)(e),projectId:Object(I.p)(Object(Y.C)(e))})),{})((e=>{const{data:t}=Object(G.b)();return e.projectId?!0===t&&o.a.createElement($.a,null,(({data:t})=>t&&!0===t.isProjectAdmin?o.a.createElement(q.a,e):null)):null})),J=s("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js"),Z=s("./src/packages/servicedesk/incident-management-tour/src/async.js")
;var X,ee,te,se=Object(y.b)((e=>({fields:Object(z.s)(e),projectId:Object(I.p)(Object(Y.C)(e))})),{})((e=>{const{data:t}=Object(G.b)();return e.projectId?!0===t&&o.a.createElement(J.a,{id:"incidentManagementTourIssues",packageName:"jiraServicedeskIncidentManagementTour",fallback:"flag"},o.a.createElement($.a,null,(({data:t})=>t&&!0===t.isProjectAdmin?o.a.createElement(Z.a,e):null))):null})),ne=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),ae=s("./src/packages/issue/issue-view/src/views/issue-details/issue-view.js"),ie=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),re=s("./src/packages/issue/issue-view/src/common/metrics/index.js"),oe=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js");const ce=new Set([d.a.SOFTWARE_ISSUE,d.a.AGILITY_BACKLOG]),le=[d.a.FULL_ISSUE,d.a.SERVICEDESK_QUEUES_ISSUE,d.a.SERVICEDESK_REPORTS_ISSUE]
;let ue=Object(u.b)("issue")((te=ee=class extends r.PureComponent{constructor(e){super(e),this.onEscape=e=>{Object(b.c)(e)&&(this.props.onClose(),e.preventDefault())},this.canCloseOnEsc=()=>ce.has(this.props.analyticsSource),this.getRenderFeedback=()=>{const{analyticsSource:e}=this.props;if(f.includes(e))return N},this.renderTopBanner=()=>{const{analyticsSource:e}=this.props;return f.includes(e)?o.a.createElement(m.a,{isBannerEnabled:!0,isFullWidth:!0}):null},this.renderIssueView=()=>{const e=this.getIssueViewProps();return o.a.createElement(ae.default,e)},this.renderChangeManagementTour=()=>o.a.createElement(Q,{currentIssueKey:this.props.issueKey}),this.renderChangeboardingTour=()=>le.includes(this.props.analyticsSource)?o.a.createElement(k,null):null,this.renderIncidentManagementTour=()=>o.a.createElement(se,{currentIssueKey:this.props.issueKey}),this.isMobile=()=>this.props.analyticsSource===d.a.MOBILE_ISSUE,this.isFullPage=e=>e===d.a.FULL_ISSUE,this.getIssueViewProps=()=>({
renderFeedback:this.getRenderFeedback(),issueDeleteCallbacks:{onIssueDeleteSuccess:this.props.onIssueDeleteSuccess,onIssueDeleteFailure:this.props.onIssueDeleteFailure},viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:this.props.shouldShowCloseButton,issueMaxWidth:this.props.issueMaxWidth,onError:this.props.onError});const{analyticsSource:t}=e;Object(re.h)(this.isFullPage(t))}componentDidMount(){this.canCloseOnEsc()&&document.addEventListener("keydown",this.onEscape)}UNSAFE_componentWillReceiveProps(e){if(e.issueKey!==this.props.issueKey){const{analyticsSource:e}=this.props;Object(re.h)(this.isFullPage(e))}}componentWillUnmount(){this.canCloseOnEsc()&&document.removeEventListener("keydown",this.onEscape)}renderHeader(){
const{onClose:e,shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,onIssueDeleteSuccess:a,onIssueDeleteFailure:i,viewModeOptions:r}=this.props;return this.isMobile()?o.a.createElement(ie.a,{elementId:"jira-issue-header",customStyles:`padding-left: ${3*p.e}px; padding-right: ${3*p.e}px;`},o.a.createElement(B.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:i},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:r})):null}render(){const{analyticsSource:e,backButtonUrl:t,dispatchExternalActionRef:s,ecosystemEnabled:n,estimationStatistic:a,history:i,isCompact:c,isLoadedWithPage:l,isSpaEnabled:u,issueActions:d,issueKey:p,locationTransformer:m,loginRedirectUrl:b,metrics:f,onChange:y,onError:O,onIssueKeyChange:j,rapidViewId:v,rapidViewMap:E,viewModeOptions:k,issueMaxWidth:I}=this.props,T={analyticsSource:e,backButtonUrl:t,
dispatchExternalActionRef:s,ecosystemEnabled:n,estimationStatistic:a,history:i,isLoadedWithPage:l,isSpaEnabled:u,issueActions:d,issueKey:p,locationTransformer:m,loginRedirectUrl:b,metrics:f,onChange:y,onError:O,onIssueKeyChange:j,rapidViewId:v,rapidViewMap:E,viewMode:k&&k.viewMode},P=this.isMobile()?r.Fragment:ne.a,_=this.isMobile()?r.Fragment:ne.b;return o.a.createElement(o.a.Fragment,null,"full-issue"===e&&o.a.createElement(oe.a,null),o.a.createElement(H.a,T,o.a.createElement(W,{location:e}),o.a.createElement(w.b,{defaultIsCompact:c},o.a.createElement(S.a,null,o.a.createElement(C.a,null,o.a.createElement(P,{issueMaxWidth:I},o.a.createElement(_,null,this.renderChangeboardingTour(),o.a.createElement(h.a,{renderTopBanner:this.renderTopBanner}),this.renderHeader())),o.a.createElement(g.a,null),this.renderIssueView(),this.renderChangeManagementTour(),this.renderIncidentManagementTour())))))}},ee.defaultProps={isCompact:!1,isLoadedWithPage:!1,isSpaEnabled:!1,
shouldShowRootProjectsBreadcrumb:!1,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:l.a,onIssueDeleteSuccess:l.a,onIssueDeleteFailure:l.a},X=te))||X;t.default=ue;(()=>{n(i)})()},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js")
;const a=4*s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js").e,i=e=>`calc((100% - ${e}px) / 2)`,r=(e,t)=>`\n        ${e}: ${i(t)}; /* for browsers which do not support max(); negative padding is ignored by browsers */\n        ${e}: max(${i(t)}, 0px); /* for browsers which support max() */\n        \n        .msie-11 & { /* IE11 is the only browser which does not ignore negative padding */\n            ${e}: 0;\n        }\n    `,o=n.default.div(["flex-shrink:0;",""],(({issueMaxWidth:e})=>void 0!==e?`\n        ${r("padding-left",e)}\n        ${r("padding-right",e)}    \n        `:"")),c=n.default.div(["padding:0 ","px;"],a)},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"f",(function(){
return f})),s.d(t,"e",(function(){return g}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),i=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),r=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),o=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js")
;const c=1.5*a.e,l=n.default.div(["padding:0 ","px ","px;"," ",""],4*a.e,i.c,(({issueMaxWidth:e})=>void 0!==e?`padding-top: ${i.b}px;`:""),(({isLeftmost:e,isRightmost:t})=>e?`\n                padding-left: ${r.d}px;\n                `:t?`\n                padding-left: ${3*a.e}px\n                padding-right: ${r.d-1.5*a.e}px;\n                `:"")),u=n.default.div(["flex-grow:1;",";",""],(({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;","{border-right:","px solid transparent;}"],l,15):"\n        overflow-x: hidden; /* 2 value shorthand syntax is not supported in IE11 */\n        overflow-y: auto;\n   "),(({medium:e,isLeftmost:t,isRightmost:s,issueMaxWidth:n})=>{const a=e/10,i=s?c:t?-c:0,l=void 0!==n;return`\n            width: ${`${(100*a).toFixed(3)}%`};\n            width: ${`calc(${a} * min(${Object(o.a)()}px, 100%) + ${i}px)`};\n            ${t&&l?Object(r.c)("padding-left",n):""}\n            ${s&&l?Object(r.c)("padding-right",n):""}\n        `
})),d=n.default.div(["margin-top:","px;"],3*a.e),p=n.default.div(["position:relative;height:100%;display:flex;flex-direction:column;"]),m=n.default.div(["display:flex;flex-wrap:wrap;flex-direction:row;align-items:flex-start;justify-content:space-between;align-content:stretch;margin-left:","px;margin-bottom:","px;padding-left:","px;"],-a.e,3*a.e,1.25*a.e),b=n.default.div(["visibility:",";"],(e=>e.show?"visible":"hidden")),f=n.default.div(["height:100%;",";"],(({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;border-right:","px solid transparent;"],15):"\n        overflow: auto;\n   ")),g=n.default.div(["",""],(({issueMaxWidth:e})=>void 0===e?`padding: 0 ${2.5*a.e}px;`:`padding: ${i.b}px ${4*a.e}px ${i.c}px;`))},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>1400},"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js":function(e,t,s){"use strict";s.r(t),
s.d(t,"Issue",(function(){return wM}));var n={};s.r(n),s.d(n,"setNewIssueIds",(function(){return mO})),s.d(n,"setSortBy",(function(){return bO}))
;var a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/query-string/index.js"),u=s.n(l),d=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),p=s("./node_modules/@atlaskit/smart-card/dist/es2019/index.js"),m=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),f=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),g=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),h=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),y=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),j=s("./src/packages/shortcuts-dialog/src/main.js")
;var v=s("./node_modules/react-intl/lib/index.es.js"),E=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),k=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),w=s("./src/packages/issue/worklog/src/services/context/index.js"),S=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),C=s("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),I=s("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),P=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),x=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),D=s("./src/packages/issue/issue-view/src/selectors/status-selector.js"),A=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),L=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),M=s("./src/packages/platform/ui/error-boundary/src/main.js"),R=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),N=s("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),F=e=>""===e.trim()||Object(N.a)(e),U=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),V=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),K=s("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js"),W=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),B=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),H=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),$=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),G=Object(v.h)({
save:{id:"issue.log-time.modal.log-time-action.save",defaultMessage:"Save"},cancel:{id:"issue.log-time.modal.log-time-action.cancel",defaultMessage:"Cancel"}}),q=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),z=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const Y=q.default.div(["display:inline-flex;justify-content:flex-end;align-items:center;width:100%;>:not(:first-child){margin-left:","px;}"],z.e/2),Q=q.default.div(["> *{display:flex;}margin-right:","px;"],z.e),J=()=>i.a.createElement(Q,null,i.a.createElement($.a,{size:"small"}));J.displayName="renderSpinner";const Z=e=>{const{formState:t,onConfirm:s,onCancel:n,intl:a}=e;return i.a.createElement(Y,null,"submitting"===t?J():null,i.a.createElement(H.a,{appearance:"primary",onClick:s,isDisabled:"invalid"===t||"submitting"===t},a.formatMessage(G.save)),i.a.createElement(H.a,{appearance:"subtle",onClick:n,isDisabled:"submitting"===t},a.formatMessage(G.cancel)))}
;Z.displayName="LogTimeModalFooter";var X=Z,ee=Object(v.i)(X),te=s("./node_modules/@atlaskit/field-base/components/Label.js"),se=s("./node_modules/@atlaskit/form/dist/es2019/Field.js"),ne=s("./src/packages/issue/issue-view/src/feature-flags.js"),ae=s("./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js"),ie=s("./src/packages/issue/issue-view/src/common/component/date-time/view.js"),re=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),oe=s("./src/packages/issue/issue-view/src/common/component/editor/async.js"),ce=Object(v.h)({label:{id:"issue.log-time.modal.work-description.label",defaultMessage:"Work description"}});const le=Object(re.f)((()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ue extends a.Component{render(){const e=i.a.createElement(oe.b,{mediaContext:this.props.mediaContext,
defaultValue:this.props.defaultValue});return Object(ne.isAtlaskitFieldBaseRemovalEnabled)()?i.a.createElement(se.default,{name:"work-description",label:this.props.intl.formatMessage(ce.label)},(()=>i.a.createElement(oe.a,{packageName:"issue",fallback:e},i.a.createElement(le,{isExpanded:!0,externalId:this.props.externalId,baseUrl:this.props.baseUrl,isDisabled:this.props.isDisabled,defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(te.a,{label:this.props.intl.formatMessage(ce.label)}),i.a.createElement(oe.a,{packageName:"issue",fallback:e},i.a.createElement(le,{isExpanded:!0,externalId:this.props.externalId,baseUrl:this.props.baseUrl,isDisabled:this.props.isDisabled,
defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider})))}}ue.displayName="WorkDescription",ue.defaultProps={portalElement:void 0};var de=Object(v.i)(ue),pe=Object(v.h)({timeRemaining:{id:"issue.log-time.modal.time-remaining",defaultMessage:"Time remaining"},timeSpent:{id:"issue.log-time.modal.time-spent",defaultMessage:"Time spent"},dateStarted:{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"}});const me=q.default.div(["align-items:center;display:flex;flex-direction:row;>:not(:first-child){margin-left:","px;}"],z.e),be=q.default.div(["width:50%;"]),fe=q.default.div(["width:100%;"]);var ge=s("./src/packages/issue/issue-view/src/common/messages/time.js");class he extends a.Component{constructor(...e){
super(...e),this.state={shouldAppearInvalid:!this.props.isValid},this.onBlur=()=>{this.setState({shouldAppearInvalid:!this.props.isValid})}}UNSAFE_componentWillReceiveProps(e){!this.props.isValid&&e.isValid&&this.setState({shouldAppearInvalid:!1})}render(){return i.a.createElement("div",{onBlur:this.onBlur},this.props.children(this.state.shouldAppearInvalid))}}he.displayName="WithValidationOnBlur";var ye=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js");class Oe extends a.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)}}render(){return i.a.createElement(ye.a,{value:this.props.value,label:this.props.label,placeholder:this.props.placeholder,isInvalid:this.props.isInvalid,invalidMessage:this.props.isInvalid?this.props.invalidMessage:void 0,disabled:this.props.isDisabled,required:this.props.isRequired,autoFocus:this.props.autoFocus,onChange:this.onChange,onBlur:this.props.onBlur,shouldFitContainer:!0})}}
Oe.displayName="TimeLogTextField",Oe.defaultProps={isInvalid:!1,isRequired:!1,isDisabled:!1,autoFocus:!1,placeholder:void 0,invalidMessage:void 0,onBlur:c.a};var je=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const ve=q.default.div(["padding:","px ","px;"],z.e-2,z.e-6),Ee=q.default.div(["list-style:inside;margin-top:","px;padding-left:","px;padding-bottom:","px;"],z.e,z.e/2,z.e/2);class ke extends a.Component{tooltipContentRender(){const{intl:e}=this.props;return i.a.createElement(ve,null,i.a.createElement("p",null,e.formatMessage(ge.a.exampleFormat,{formatExample:"2w 4d 6h 45m"})),i.a.createElement(Ee,null,i.a.createElement("li",null,e.formatMessage(ge.a.weeks,{w:"w"})),i.a.createElement("li",null,e.formatMessage(ge.a.days,{d:"d"})),i.a.createElement("li",null,e.formatMessage(ge.a.hours,{h:"h"})),i.a.createElement("li",null,e.formatMessage(ge.a.minutes,{m:"m"}))))}render(){const{children:e,shouldRenderContent:t}=this.props;return i.a.createElement(je.a,{
content:t?this.tooltipContentRender():null},e)}}ke.displayName="TimeTrackingTooltip";var we=ke;const Se=e=>{const{isValid:t,value:s,onChange:n,onBlur:a,isDisabled:r,intl:o}=e;return i.a.createElement(he,{isValid:t},(e=>i.a.createElement(we,{shouldRenderContent:t&&!r,intl:o},i.a.createElement(Oe,{value:s,isInvalid:e,invalidMessage:ge.b,onChange:n,onBlur:a,isDisabled:r,label:o.formatMessage(pe.timeSpent),placeholder:"2w 4d 6h 45m",autoFocus:!0}))))};Se.displayName="ValidatedLogTimeInput";var Ce=Se,Ie=({isValid:e,value:t,onChange:s,onBlur:n,isDisabled:a,intl:r})=>i.a.createElement(he,{isValid:e},(o=>i.a.createElement(ke,{shouldRenderContent:e&&!a,intl:r},i.a.createElement(Oe,{value:t,isInvalid:o,invalidMessage:ge.b,onChange:s,onBlur:n,isDisabled:a,label:r.formatMessage(pe.timeRemaining),placeholder:"2w 4d 6h 45m"}))));class Te extends a.Component{constructor(...e){super(...e),this.onDateStartedChange=e=>{this.props.onDateStartedChange(e)}}render(){
const{value:{timeLogged:e,timeRemaining:t,dateStarted:s,workDescription:n}}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(be,null,i.a.createElement(Ce,{value:e,isDisabled:this.props.isDisabled,isValid:this.props.isTimeLoggedValid,onChange:this.props.onTimeLoggedChange,onBlur:this.props.onTimeLoggedBlur,intl:this.props.intl})," "),i.a.createElement(be,null,i.a.createElement(Ie,{value:t,isDisabled:this.props.isDisabled,isValid:this.props.isTimeRemainingValid,onChange:this.props.onTimeRemainingChange,onBlur:this.props.onTimeRemainingBlur,intl:this.props.intl}))),!this.props.isCollapsed&&i.a.createElement(i.a.Fragment,null,i.a.createElement(fe,null,Object(ne.isAtlaskitFieldBaseRemovalEnabled)()?i.a.createElement(se.default,{name:"date-started",label:this.props.intl.formatMessage(pe.dateStarted),isRequired:!0},(()=>i.a.createElement(ie.a,{value:s||null,timeZone:this.props.timeZone,parseValue:ae.b,onChange:this.onDateStartedChange,
isDisabled:this.props.isDisabled}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(v.c,{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"},(e=>i.a.createElement(te.a,{label:String(e),isRequired:!0}))),i.a.createElement(ie.a,{value:s||null,timeZone:this.props.timeZone,parseValue:ae.b,onChange:this.onDateStartedChange,isDisabled:this.props.isDisabled}))),i.a.createElement(de,{defaultValue:n,isDisabled:this.props.isDisabled,portalElement:this.props.portalElement,onChange:this.props.onWorkDescriptionChange,onChangeFailure:this.props.onWorkDescriptionChangeFailure,externalId:this.props.externalId,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider})))}}Te.displayName="LogTimeModalForm",Te.defaultProps={portalElement:void 0};var Pe=Object(v.i)(Te),_e=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/checkbox/dist/es2019/Checkbox.js")),xe=s("./src/packages/platform/controllers/intl/src/index.js"),De=s("./src/packages/issue/fields/original-estimate/src/ui/view/main.js"),Ae=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Le=s("./src/packages/issue/issue-view/src/common/component/logged-time/view.js"),Me=Object(v.h)({includeSubtasksLabel:{id:"issue.log-time-modal.include-subtasks",defaultMessage:"Include subtasks"},includeChildIssueLabel:{id:"issue.log-time-modal.include-child-issues",defaultMessage:"Include child issues"}}),Re=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const Ne=q.default.p(["margin-top:","px;"],2*z.e),Fe=q.default.div(["margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],z.e/2,z.e,Re.a.N500);var Ue=e=>{
const{config:t,value:s,isDone:n,estimatedTime:r,shouldDisplayRollUpDataControl:o,isRollingUpData:c,onToggleRollingUpData:l,isClassicProject:u}=e,{formatMessage:d}=Object(xe.c)(),p=Object(a.useCallback)((e=>{const{daysPerWeek:s,hoursPerDay:n}=t,a=u?()=>i.a.createElement(v.c,{id:"issue.log-time.modal.original-estimate.with-rollup-subtasks",defaultMessage:"The original estimate for this issue and subtasks was {time}.",values:{time:i.a.createElement(De.a,{value:Object(U.a)(s,n)(e)})}}):()=>i.a.createElement(v.c,{id:"issue.log-time.modal.original-estimate.with-rollup-child-issues",defaultMessage:"The original estimate for this issue and child issues was {time}.",values:{time:i.a.createElement(De.a,{value:Object(U.a)(s,n)(e)})}});return i.a.createElement(Ne,null,c&&o?i.a.createElement(a,null):i.a.createElement(v.c,{id:"issue.log-time.modal.original-estimate",defaultMessage:"The original estimate for this issue was {time}.",values:{time:i.a.createElement(De.a,{value:Object(U.a)(s,n)(e)})}}))
}),[t,u,c,o]),m=Object(a.useCallback)((()=>i.a.createElement(Fe,null,i.a.createElement(_e.a,{isChecked:c,onChange:({target:{checked:e}},t)=>{l(e,t)},label:d(u?Me.includeSubtasksLabel:Me.includeChildIssueLabel),name:"roll-up-time-tracking-toggle-from-dialog"}),i.a.createElement(Ae.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromWorklogDialog"}))),[d,u,c,l]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Le.a,{config:t,value:s,estimatedTime:r,isDone:n,isCompact:!1}),o&&m(),"number"==typeof r?p(r):null)};class Ve extends a.Component{constructor(...e){super(...e),this.state={containerRef:void 0},this.setContainerRef=e=>{this.state.containerRef||this.setState({containerRef:e})},this.renderHeader=()=>i.a.createElement("h3",null,this.props.header),this.renderFooter=()=>i.a.createElement(ee,{formState:this.props.formState,onConfirm:this.props.onSubmit,onCancel:this.props.onCancel})}secondsToTimeString(e){
const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(U.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(V.a)(t,s)(e)}renderProgressTracker(){const{progressTrackerValue:e,progressTrackerValue:{loggedTime:t,remainingTime:s},estimatedTime:n,rolledUpEstimatedTime:a,config:r,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d}=this.props;return void 0===t&&void 0===s&&void 0===n&&!1===c?null:i.a.createElement(Ue,{config:r,value:e,estimatedTime:l?a:n,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d})}renderForm(){return i.a.createElement(Pe,{value:this.props.value,isCollapsed:this.props.isCollapsed,isDisabled:"submitting"===this.props.formState,isTimeLoggedValid:this.props.isTimeLoggedValid,onTimeLoggedBlur:this.props.onTimeLoggedBlur,isTimeRemainingValid:this.props.isTimeRemainingValid,
onTimeRemainingBlur:this.props.onTimeRemainingBlur,timeZone:this.props.timeZone,portalElement:this.state.containerRef,onTimeLoggedChange:this.props.onTimeLoggedChange,onTimeRemainingChange:this.props.onTimeRemainingChange,onDateStartedChange:this.props.onDateStartedChange,onWorkDescriptionChange:this.props.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}render(){return i.a.createElement(B.a,{header:this.renderHeader,footer:this.renderFooter,isOpen:!0,width:"small",onDialogDismissed:this.props.onCancel},i.a.createElement(W.a,{onEscape:this.props.onCancel},i.a.createElement("div",{ref:this.setContainerRef,"data-testid":"issue.issue-view.common.log-time-modal-dialog.contents"
},this.renderProgressTracker(),this.renderForm())))}}Ve.displayName="LogTimeModal",Ve.defaultProps={isDone:!1,progressTrackerValue:{},estimatedTime:void 0};var Ke=s("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js");function We(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Be(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?We(Object(s),!0).forEach((function(t){He(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):We(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function He(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class $e extends a.Component{
constructor(e){super(e),this.onTimeLoggedBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeLogged,this.onTimeLoggedChange)},this.onTimeRemainingBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeRemaining,this.onTimeRemainingChange)},this.onTimeLoggedChange=e=>{const t=F(e);if(this.setState((({value:s})=>({value:Be(Be({},s),{},{timeLogged:e}),hasUserInteracted:!0,isTimeLoggedValid:t}))),t&&this.props.initialValue.timeRemaining){const t=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(this.props.initialValue.timeLogged)||0),s=(this.timeStringToSeconds(this.props.initialValue.timeRemaining)||0)-t,n=this.secondsToTimeString(s);this.setState((({value:e})=>({value:Be(Be({},e),{},{timeRemaining:n}),isTimeRemainingValid:!0})))}},this.onTimeRemainingChange=e=>{this.setState((({value:t})=>({value:Be(Be({},t),{},{timeRemaining:e}),hasUserInteracted:!0,isTimeRemainingValid:F(e)})))},this.onDateStartedChange=e=>{this.setState((({value:t})=>({value:Be(Be({},t),{},{
dateStarted:e}),defaultDateStarted:null,hasUserInteracted:!0})))},this.onWorkDescriptionChange=e=>{this.setState((({value:t})=>({value:Be(Be({},t),{},{workDescription:e}),hasUserInteracted:!0})))},this.onSubmit=(e,t)=>{const{value:{workDescription:s}}=this.state,n="string"!=typeof this.state.value.workDescription?Object(L.i)(s):s,a=Be(Be({},this.getValue()),{},{workDescription:n});this.props.onSubmit(a,t)},this.applyDefaultTimeFormat=(e,t)=>{let s=e.trim();if(Object(K.a)(s)){const{defaultUnit:e}=this.props.config;s=`${s}${Object(Ke.a)(e)}`}s!==e&&t(s)},this.state={value:e.initialValue,defaultDateStarted:Date.now(),isTimeLoggedValid:!0,isTimeRemainingValid:!0,hasUserInteracted:!1}}getIsCollapsed(){return this.props.isCollapsible&&!this.state.value.timeLogged}getDateStarted(){const{defaultDateStarted:e,value:{dateStarted:t,timeLogged:s}}=this.state;if(!this.props.shouldUpdateDate||t)return t;if(!e)return null;const n=this.timeStringToSeconds(s)||0;try{
return new Date(e-1e3*n).toISOString()}catch(a){return new Date(e).toISOString()}}getValue(){return Be(Be({},this.state.value),{},{dateStarted:this.getDateStarted()})}getFormState(){return this.props.isWaiting?"submitting":this.state.hasUserInteracted&&this.props.validator(this.getValue())?"valid":"invalid"}getProgressTrackerValue(){const{value:{timeLogged:e,timeRemaining:t}}=this.state,{initialValue:s,isRollingUpData:n}=this.props,a=n?this.props.rolledUpTimeTracking:this.props.timeTracking,i=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(s.timeLogged)||0),r=i||a.loggedTime?(i||0)+(a.loggedTime||0):void 0,o=this.timeStringToSeconds(t),c=(o||0)-(this.timeStringToSeconds(s.timeRemaining)||0),l="number"==typeof o;let{remainingTime:u}=a;return l&&(u=n?(a.remainingTime||0)+c:o||0),{loggedTime:r,remainingTime:u}}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(U.a)(t,s)(e)}timeStringToSeconds(e){
const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(V.a)(t,s)(e)}render(){return i.a.createElement(Ve,{value:this.getValue(),progressTrackerValue:this.getProgressTrackerValue(),estimatedTime:this.props.estimatedTime,rolledUpEstimatedTime:this.props.rolledUpEstimatedTime,config:this.props.config,header:this.props.header,formState:this.getFormState(),timeZone:this.props.timeZone,isCollapsed:this.getIsCollapsed(),isDone:this.props.isDone,isTimeLoggedValid:this.state.isTimeLoggedValid,isTimeRemainingValid:this.state.isTimeRemainingValid,onSubmit:this.onSubmit,onCancel:this.props.onCancel,onTimeLoggedChange:this.onTimeLoggedChange,onTimeLoggedBlur:this.onTimeLoggedBlur,onTimeRemainingChange:this.onTimeRemainingChange,onTimeRemainingBlur:this.onTimeRemainingBlur,onDateStartedChange:this.onDateStartedChange,onWorkDescriptionChange:this.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,
mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject})}}$e.displayName="LogTimeModalWithValidation",$e.defaultProps={isCollapsible:!1,isDone:!1,isWaiting:!1,shouldUpdateDate:!1};const Ge=Object(E.a)({onSubmit:"clicked",onCancel:"clicked",onToggleRollingUpData:"toggleRollingUpData"})(Object(k.b)("worklogModal")($e));var qe,ze=e=>i.a.createElement(M.a,{id:"issue.issue-view.common.worklog-dialog"},i.a.createElement(R.a,{id:"common.worklog-dialog",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},i.a.createElement(Ge,e))),Ye=Object(v.h)({title:{id:"issue.activity.worklog.add-modal.title",defaultMessage:"Time tracking"}})
;const Qe=({timeLogged:e,timeRemaining:t,dateStarted:s})=>(!!e||!!t)&&(F(e)||"0"===e)&&F(t)&&!!s;let Je=Object(k.a)("addWorklog",A.a.MODAL)(qe=class extends a.Component{render(){const{timeTracking:e,rolledUpTimeTracking:t,timeTrackingConfiguration:s,intl:n}=this.props,{timeSpentSeconds:a,remainingEstimateSeconds:r,originalEstimateSeconds:o}=e,{daysPerWeek:l,hoursPerDay:u}=s,d={timeLogged:"",timeRemaining:"number"==typeof r?Object(U.a)(l,u)(r):"",workDescription:L.c,dateStarted:null},p={loggedTime:a,remainingTime:r};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,{initialValue:d,timeTracking:p,rolledUpTimeTracking:{loggedTime:t.timeSpentSeconds,remainingTime:t.remainingEstimateSeconds},estimatedTime:o,rolledUpEstimatedTime:t.originalEstimateSeconds,config:s,header:n.formatMessage(Ye.title),timeZone:this.props.timeZone,isCollapsible:!0,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!0,validator:Qe,onSubmit:this.props.onSubmit,
onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:c.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||c.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),i.a.createElement(b.a,null))}})||qe;function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Xe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const et=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,n=Xe(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=Object(w.a)(),l=Object(a.useCallback)((e=>{e?o():c()}),[o,c]);return i.a.createElement(Je,Ze({},n,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};et.displayName="WrappedWorklogModal";const tt=Object(v.i)(Object(E.a)({onSubmit:"submitAddWorklog",onCancel:"cancelAddWorklog"})(Object(k.b)("worklog")(et)));var st=Object(r.b)((e=>({timeTrackingConfiguration:Object(x.h)(e),rolledUpTimeTrackingValue:Object(x.j)(e)(!0),timeTrackingValue:Object(x.i)(e),timeZone:Object(P.z)(e),isDone:"DONE"===Object(D.a)(e),isSaving:Object(x.d)(e),baseUrl:Object(T.f)(e),mediaContext:Object(_.a)(e),mentionEncoder:Object(C.a)(Object(T.f)(e)),
mentionProvider:Object(I.a)(e),shouldDisplayRollUpDataControl:Object(x.f)(e),isClassicProject:Object(P.m)(e)})),(e=>({onSubmit:(t,s)=>{const{timeLogged:n,timeRemaining:a}=t||{};e(!n&&a?Object(S.W)(a,s):Object(S.q)(t,s))},onCancel:()=>{e(Object(S.s)())}})))(tt),nt=s("./node_modules/lodash/flow.js"),at=s.n(nt),it=s("./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js"),rt=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),ot=s.n(rt),ct=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),lt=Object(v.h)({delete:{id:"issue.activity.worklog.delete-modal.delete",defaultMessage:"Delete"},deleteHeading:{id:"issue.activity.worklog.delete-modal.delete-heading",defaultMessage:"Delete worklog entry?"},cancel:{id:"issue.activity.worklog.delete-modal.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.activity.worklog.delete-modal.delete-warning",defaultMessage:"Once you delete, it's gone for good."},adjustCheckboxLabel:{
id:"issue.activity.worklog.delete-modal.adjust-checkbox-label",defaultMessage:"Adjust time remaining"},adjustCurrentLabel:{id:"issue.activity.worklog.delete-modal.adjust-current-label",defaultMessage:"Current"},adjustNewLabel:{id:"issue.activity.worklog.delete-modal.adjust-new-label",defaultMessage:"New time remaining"},adjustNewSubtext:{id:"issue.activity.worklog.delete-modal.adjust-new-subtext",defaultMessage:"By default, deleted time ({timeSpent}) is added to the time remaining."}})
;const ut=q.default.div(["display:flex;margin-top:-","px;"],3*z.e),dt=q.default.div(["display:flex;flex-direction:column;align-items:center;max-width:","px;"],11*z.e),pt=q.default.div(["color:#6b778c;font-size:","px;font-weight:600;line-height:1.3333333333333333;padding:","px 0 ","px 0;"],3*z.e/2,5*z.e/2,z.e/2),mt=q.default.div(["text-align:center;padding:","px;"],1.25*z.e),bt=q.default.div(["margin:","px ","px ","px ","px;"],6*z.e,2*z.e,6*z.e,z.e),ft=q.default.div(["margin:","px 0 ","px -","px;"],2*z.e,2*z.e,.5*z.e),gt=q.default.div(["width:50%;"]),ht=q.default.div(["font-size:","px;margin-top:","px;color:",";"],1.25*z.e,z.e/2,Re.a.N90);var yt;let Ot=Object(k.a)("deleteWorklog",A.a.MODAL)(yt=class extends a.Component{constructor(...e){super(...e),this.secondsToTimeString=Object(U.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),
this.timeStringToSeconds=Object(V.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.state={isAdjustTimeRemainingChecked:!0,timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds+this.timeStringToSeconds(this.props.worklog.timeSpent))},this.onTimeRemainingChange=e=>this.setState({timeRemaining:e.target.value}),this.onCheckboxChange=()=>this.setState({isAdjustTimeRemainingChecked:!this.state.isAdjustTimeRemainingChecked}),this.onConfirm=(e,t)=>this.props.onConfirm(this.state.isAdjustTimeRemainingChecked?this.state.timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds),this.state.isAdjustTimeRemainingChecked,t),this.originalTimeRemaining=this.secondsToTimeString(this.props.timeRemainingSeconds)}renderTimeRemainingInput(e){const{isDeleting:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n}=this.state;return i.a.createElement(he,{isValid:e},(e=>i.a.createElement(ye.a,{value:n,isInvalid:e,
invalidMessage:e?ge.b:void 0,onChange:this.onTimeRemainingChange,label:s(lt.adjustNewLabel),placeholder:s(ge.a.timeInputPlaceholder),disabled:t,required:!0,shouldFitContainer:!0})))}renderContent(e){const{isDeleting:t,worklog:{timeSpent:s},intl:{formatMessage:n}}=this.props,{isAdjustTimeRemainingChecked:a}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,n(lt.deleteWarning)),i.a.createElement(ft,null,i.a.createElement(_e.a,{isChecked:a,isDisabled:t,onChange:this.onCheckboxChange,label:n(lt.adjustCheckboxLabel),name:"adjust-checkbox"})),a&&i.a.createElement(ut,null,i.a.createElement(dt,null,i.a.createElement(pt,null,n(lt.adjustCurrentLabel)),i.a.createElement(mt,null,this.originalTimeRemaining)),i.a.createElement(bt,null,i.a.createElement(ot.a,null)),i.a.createElement(gt,null,this.renderTimeRemainingInput(e),i.a.createElement(ht,null,n(lt.adjustNewSubtext,{timeSpent:s})))))}render(){
const{isDeleting:e,onCancel:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n,isAdjustTimeRemainingChecked:a}=this.state,r=Object(N.a)(n);return i.a.createElement(ct.b,{headerMessage:s(lt.deleteHeading),appearance:"danger",contentMessage:this.renderContent(r),confirmActionText:s(lt.delete),cancelActionText:s(lt.cancel),onConfirm:this.onConfirm,onCancel:t,isLoading:e,isConfirmDisabled:e||a&&!r,isCancelDisabled:e,externalId:"issue.activity.worklog.delete-modal"},i.a.createElement(b.a,null))}})||yt;function jt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(s),!0).forEach((function(t){Et(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Et(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var kt,wt=at()(Object(k.b)("worklog"),Object(E.a)({onConfirm:"confirmDeleteWorklog",onCancel:"cancelDeleteWorklog"}),v.i,Object(r.b)((e=>({isDeleting:Object(x.d)(e),worklog:Object(x.a)(e),timeTrackingConfig:Object(x.h)(e),timeRemainingSeconds:Object(it.c)(e)})),{dispatchDeleteWorklog:S.u,onCancel:S.s},((e,{dispatchDeleteWorklog:t,onCancel:s})=>vt(vt({},e),{},{onCancel:s,onConfirm:(s,n,a)=>{e.worklog&&t(e.worklog.id,s,n,a)}}))))(Ot),St=Object(v.h)({title:{id:"issue.activity.worklog.edit-modal.title",defaultMessage:"Edit work log"}});const Ct=()=>({timeLogged:e,timeRemaining:t,dateStarted:s})=>(Object(N.a)(e)||"0"===e)&&F(t)&&!!s
;let It=Object(k.a)("editWorklog",A.a.MODAL)(kt=class extends a.Component{constructor(...e){super(...e),this.onSubmit=(e,t)=>{const{worklog:s}=this.props;s&&this.props.onSubmit(s.id,e,t)}}render(){const{worklog:e,timeTracking:t,rolledUpTimeTracking:s,timeTrackingConfiguration:n,intl:a}=this.props;if(!e)return null;const{timeSpentSeconds:r,remainingEstimateSeconds:o,originalEstimateSeconds:l}=t,{daysPerWeek:u,hoursPerDay:d}=n,p={timeLogged:e.timeSpent,timeRemaining:"number"==typeof o?Object(U.a)(u,d)(o):"",dateStarted:new Date(e.started).toISOString(),workDescription:e.comment||L.c},m={loggedTime:r,remainingTime:o};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,{initialValue:p,timeTracking:m,rolledUpTimeTracking:{loggedTime:s.timeSpentSeconds,remainingTime:s.remainingEstimateSeconds},estimatedTime:l,rolledUpEstimatedTime:s.originalEstimateSeconds,config:n,header:a.formatMessage(St.title),timeZone:this.props.timeZone,isCollapsible:!1,isDone:this.props.isDone,
isWaiting:this.props.isSaving,shouldUpdateDate:!1,validator:Ct(),onSubmit:this.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:c.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||c.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),i.a.createElement(b.a,null))}})||kt;function Tt(){return(Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Pt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _t=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,n=Pt(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=Object(w.a)(),l=Object(a.useCallback)((e=>{e?o():c()}),[o,c]);return i.a.createElement(It,Tt({},n,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};_t.displayName="WrappedWorklogModal";const xt=Object(v.i)(Object(E.a)({onSubmit:"submitEditWorklog",onCancel:"cancelEditWorklog"})(Object(k.b)("worklog")(_t)));var Dt=Object(r.b)((e=>({worklog:Object(x.a)(e),timeTrackingConfiguration:Object(x.h)(e),rolledUpTimeTrackingValue:Object(x.j)(e)(!0),timeTrackingValue:Object(x.i)(e),timeZone:Object(P.z)(e),isDone:"DONE"===Object(D.a)(e),isSaving:Object(x.d)(e),
baseUrl:Object(T.f)(e),mediaContext:Object(_.a)(e),mentionEncoder:Object(C.a)(Object(T.f)(e)),mentionProvider:Object(I.a)(e),shouldDisplayRollUpDataControl:Object(x.f)(e),isClassicProject:Object(P.m)(e)})),(e=>({onSubmit:(t,s,n)=>{e(Object(S.y)(t,s,n))},onCancel:()=>{e(Object(S.s)())}})))(xt),At=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),Lt=s("./node_modules/react-resource-router/build/esm/index.js"),Mt=s("./src/packages/platform/services/bento-transition-check/src/utils/index.js"),Rt=s("./src/packages/platform/services/bento-transition-check/src/components/index.js"),Nt=s("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js"),Ft=s("./src/packages/platform/controllers/spa-state/src/common/index.js");class Ut extends a.Component{constructor(...e){super(...e),this.hasErrored=!1,this.endOfCriticalPath=void 0,this.errorOnCriticalPath=void 0,this.hasSubmittedMetrics=!1,this.spaState=void 0}componentDidMount(){
const{isPreview:e,isComplete:t,metrics:s,lastTransitionStartTime:n,isInitialRender:a}=this.props;this.hasErrored||((e||t)&&s.onPreviewRendered({isInitialRender:a,lastTransitionStartTime:n}),t&&(s.onInteractive({lastTransitionStartTime:n}),this.endOfCriticalPath&&this.endOfCriticalPath()))}componentDidUpdate(e){const{error:t,metrics:s,isLoading:n,lastTransitionStartTime:a,issueKey:i,isInitialRender:r}=this.props;t&&(this.hasErrored=!0,this.errorOnCriticalPath&&this.errorOnCriticalPath()),this.resetSubmissionStateIfNewView(n,e,i),this.hasErrored||((this.isPreviewModeAfterBentoSpaTransition(e)||this.didBentoMoveOutOfLoadingState(e))&&s.onPreviewRendered({isInitialRender:r,lastTransitionStartTime:a}),(this.didJustMoveToComplete(e)||this.isFirstLoadOfRecentIssue(e))&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath()))}isFirstLoadOfRecentIssue(e){return this.props.issueKey!==e.issueKey&&this.props.isComplete}resetSubmissionStateIfNewView(e,t,s){
(e&&!t.isLoading||s!==t.issueKey)&&(this.hasSubmittedMetrics=!1)}didBentoMoveOutOfLoadingState(e){const{isPreview:t,isComplete:s}=this.props;return e.isLoading&&(t||s)}isPreviewModeAfterBentoSpaTransition(e){const{isPreview:t,issueKey:s}=this.props;return e.issueKey!==s&&t}didJustMoveToComplete(e){const{isComplete:t}=this.props;return t&&!e.isComplete}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ft.a,null,((e,{setAppReady:t,setAppErrorReady:s})=>(this.endOfCriticalPath=t,this.errorOnCriticalPath=s,this.spaState=e,null))))}}Ut.displayName="BentoMetrics";var Vt=Ut;function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Wt=e=>null!=e?e-performance.timing.navigationStart:e,Bt=e=>{const[{isTransitionCurrentlyAllowed:t}]=Object(Rt.b)(),[{isInitialRender:s,lastTransitionStartTime:n}]=Object(Nt.b)()
;return i.a.createElement(Lt.e,null,(({route:a})=>i.a.createElement(Vt,Kt({},e,{bentoTransitionCheck:t,isInitialRender:s,lastTransitionStartTime:Wt(n),hasBentoEnabledCheck:!!a&&Object(Mt.a)(a)}))))};Bt.displayName="BentoMetricsWithSpaTimingInfo";var Ht=Bt,$t=s("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
var qt=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),zt=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),Yt=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js"),Qt=s("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),Jt=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),Zt=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),Xt=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),es=s("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js"),ts=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),ss=s("./node_modules/lodash/find.js"),ns=s.n(ss),as=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),is=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),rs=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/op-triggers/on-mount-and-update/index.js"),os=s("./src/packages/platform/ui/flags/src/ui/subscriber/index.js")
;var cs=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),ls=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),us=s("./node_modules/@atlaskit/icon/glyph/editor/error.js"),ds=s.n(us),ps=s("./node_modules/@atlaskit/icon/glyph/editor/success.js"),ms=s.n(ps),bs=s("./src/packages/issue/issue-view/src/common/constants/flags.js");const fs=q.default.span(["color:",";"],(e=>e.color)),gs=i.a.createElement(fs,{size:"medium",color:Re.a.R300},i.a.createElement(ds.a,{label:""})),hs=i.a.createElement(fs,{size:"medium",color:Re.a.G300},i.a.createElement(ms.a,{label:""})),ys={[bs.j]:{messages:Object(v.h)({title:{id:"issue.generic-server-error-when-adding-comment-title",defaultMessage:"Comment could not be updated"},description:{id:"issue.generic-server-error-when-adding-comment-description",defaultMessage:"There was a connection problem and your comment was not successfully updated. Check your network before trying to update or add another comment."}}),
icon:gs,type:"error"},[bs.k]:{messages:Object(v.h)({title:{id:"issue.server-validation-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.server-validation-error-when-adding-comment-description",defaultMessage:"It might be empty or have invalid formatting. If you copy-pasted, try removing the formatting and adding it directly in the editor."}}),icon:gs,type:"error"},[bs.l]:{messages:Object(v.h)({title:{id:"issue.content-exceeded-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.content-exceeded-error-when-adding-comment-description",defaultMessage:"The comment is too long. Try reducing its length, splitting it, or attaching a file to the issue."}}),icon:gs,type:"error"},[bs.m]:{messages:Object(v.h)({title:{id:"issue.server-error-when-deleting-comment-title",defaultMessage:"Comment could not be deleted"},description:{id:"issue.server-error-when-deleting-comment-description",
defaultMessage:"There was a connection problem and the comment was not successfully deleted. Try checking your network connection."}}),icon:gs,type:"error"},[bs.u]:{messages:Object(v.h)({title:{id:"issue.error-when-retrieving-editor-value-title",defaultMessage:"The text editor failed"},description:{id:"issue.error-when-retrieving-editor-value-description",defaultMessage:"Retry your last action, or refresh the page."}}),icon:gs,type:"error"},[bs.H]:{messages:Object(v.h)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description",defaultMessage:"It may contain formatting we don\u2019t recognize. Try removing the formatting before saving."}}),icon:gs,type:"error"},[bs.I]:{messages:Object(v.h)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{
id:"issue.error-when-confirming-rich-text-field-value-description-maximum-length-exceeded",defaultMessage:"It's too long for the field. Try attaching a file or page to the issue, or adding part of the content as comments."}}),icon:gs,type:"error"},[bs.J]:{messages:Object(v.h)({title:{id:"issue.error-when-saving-empty-required-rich-text-field-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-saving-empty-required-rich-text-field",defaultMessage:"This field is required and cannot be empty."}}),icon:gs,type:"error"},[bs.e]:{messages:Object(v.h)({title:{id:"issue.error-when-adding-attachment-title",defaultMessage:"We couldn't save your attachment"},description:{id:"issue.error-when-adding-attachment-description",defaultMessage:"Reload the issue then try adding it again."}}),icon:gs,type:"error"},[bs.q]:{messages:Object(v.h)({title:{id:"issue.server-error-when-deleting-issue-link-title",defaultMessage:"We couldn't remove the issue link"},description:{
id:"issue.server-error-when-deleting-issue-link-description",defaultMessage:"Try reloading the page and removing the issue link again."}}),icon:gs,type:"error"},[bs.f]:{messages:Object(v.h)({title:{id:"issue.server-error-when-deleting-attachment-title",defaultMessage:"Attachment could not be deleted"},description:{id:"issue.server-error-when-deleting-attachment-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}}),icon:gs,type:"error"},[bs.Q]:{messages:Object(v.h)({title:{id:"issue.server-error-when-toggle-watch-title",defaultMessage:"We couldn't update your watch status"},description:{id:"issue.server-error-when-toggle-watch-description",defaultMessage:"Check your connection and try clicking watch again."}}),icon:gs,type:"error"},[bs.z]:{messages:Object(v.h)({title:{id:"issue.error-when-fetching-watchers-title",defaultMessage:"We couldn't load the watchers list"},description:{
id:"issue.error-when-fetching-watchers-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.M]:{messages:Object(v.h)({title:{id:"issue.start-watching-success-title",defaultMessage:"You're watching this issue"},description:{id:"issue.start-watching-success-description",defaultMessage:"We'll notify you when there's activity on it."}}),icon:hs,type:"success"},[bs.N]:{messages:Object(v.h)({title:{id:"issue.stop-watching-success-title",defaultMessage:"You stopped watching this issue"},description:{id:"issue.stop-watching-success-description",defaultMessage:"We won't notify you about activity on it."}}),icon:hs,type:"success"},[bs.G]:{messages:Object(v.h)({title:{id:"issue.error-when-removing-watcher-title",defaultMessage:"We couldn't remove that watcher"},description:{id:"issue.error-when-removing-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.b]:{
messages:Object(v.h)({title:{id:"issue.error-when-adding-watcher-title",defaultMessage:"We couldn't add that watcher"},description:{id:"issue.error-when-adding-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.O]:{messages:Object(v.h)({title:{id:"issue.error-when-reordering-subtask",defaultMessage:"We couldn't reorder those subtasks"},description:{id:"issue.error-when-reordering-subtask-description",defaultMessage:"Wait a few moments, then give it another try."}}),icon:gs,type:"error"},[bs.A]:{messages:Object(v.h)({title:{id:"issue.server-error-when-add-flag-title",defaultMessage:"We couldn't flag this issue"},description:{id:"issue.server-error-when-add-flag-description",defaultMessage:"Check your connection and try adding the flag again."}}),icon:gs,type:"error"},[bs.B]:{messages:Object(v.h)({title:{id:"issue.server-error-when-remove-flag-title",defaultMessage:"We couldn't remove the flag from this issue"},
description:{id:"issue.server-error-when-remove-flag-description",defaultMessage:"Check your connection and try removing the flag again."}}),icon:gs,type:"error"},[bs.D]:{messages:Object(v.h)({title:{id:"issue.server-error-when-logging-work-title",defaultMessage:"We couldn't add your time spent"},description:{id:"issue.server-error-when-logging-work-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.d]:{messages:Object(v.h)({title:{id:"issue.assign-to-me-flag-title",defaultMessage:"Successfully assigned to you"},description:{id:"issue.assign-to-me-flag-description",defaultMessage:"You're now the assignee for {issueKey}."}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.n]:{messages:Object(v.h)({title:{id:"issue.error-when-creating-child-issue-title",defaultMessage:"We couldn't create the child issue"},description:{id:"issue.error-when-creating-child-issue-description",
defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.C]:{messages:Object(v.h)({title:{id:"issue.error-when-linking-child-issue-title",defaultMessage:"We couldn't link the child issue"},description:{id:"issue.error-when-linking-child-issue-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."}}),icon:gs,type:"error"},[bs.h]:{messages:Object(v.h)({title:{id:"change.issue.type.success.title",defaultMessage:"Issue type changed to {destType}"},description:{id:"change.issue.type.success.description",defaultMessage:"Issue type changed"}}),icon:hs,type:"success",shouldAutoDismiss:!1},[bs.g]:{messages:Object(v.h)({title:{id:"change.issue.type.error.title",defaultMessage:"Error changing issue type"},description:{id:"change.issue.type.error.description",defaultMessage:"There was an error changing the issue type. Please try again."}}),icon:gs,type:"error",shouldAutoDismiss:!1},[bs.p]:{
messages:Object(v.h)({title:{id:"issue.error-when-deleting-issue-title",defaultMessage:"We couldn't delete {issueKey}"},description:{id:"issue.error-when-deleting-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error",actions:[{messages:Object(v.h)({content:{id:"issue.error-when-deleting-issue-call-to-action",defaultMessage:"Try again"}}),onClick:({closeFlag:e,retryIssueDelete:t,deleteFailureIssueKey:s})=>{t&&null!=s&&""!==s&&t(s),e()}}]},[bs.x]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.edit-success-title",defaultMessage:"Work log entry updated"}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.t]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.delete-success-title",defaultMessage:"Work log entry deleted"}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.i]:{messages:Object(v.h)({title:{id:"issue.clickthrough-banner.flags.dismissed.title",defaultMessage:"Banner be gone!"},description:{
id:"issue.clickthrough-banner.flags.dismissed.description",defaultMessage:"You can still open the old view through the \u2022\u2022\u2022 menu on an issue."}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.c]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.add-failure-title",defaultMessage:"We couldn't save your changes"},description:{id:"issue.activity.worklog.flags.add-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.P]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.update-time-remaining-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.update-time-remaining-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.w]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.edit-failure-title",defaultMessage:"We couldn't save your edit"},description:{
id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.s]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.delete-failure-title",defaultMessage:"We couldn't delete the work log entry"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.o]:{messages:Object(v.h)({title:{id:"issue.confluence-pages.delete-failure-title",defaultMessage:"We couldn\u2019t remove the page link"},description:{id:"issue.confluence-pages.delete-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.K]:{messages:Object(v.h)({title:{id:"issue.approval.action.save-error-title",defaultMessage:"We couldn\u2019t save your approval response"},description:{id:"issue.approval.action.save-error-description",
defaultMessage:"Give it a few seconds, then try again."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.L]:{messages:Object(v.h)({title:{id:"issue.approval.action.save-success-title",defaultMessage:"We've saved your response."}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.a]:{messages:Object(v.h)({title:{id:"issue.approval.action.add-approver-error-title",defaultMessage:"We couldn\u2019t add the approver"},description:{id:"issue.approval.action.add-approver-error-description",defaultMessage:"Check your connection, then try again later."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.F]:{messages:Object(v.h)({title:{id:"issue.approval.action.remove-approver-error-title",defaultMessage:"We couldn\u2019t remove the approver"},description:{id:"issue.approval.action.remove-approver-error-description",defaultMessage:"Check your connection, then try again later."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.v]:{messages:Object(v.h)({title:{
id:"issue.color.action.change-color-title",defaultMessage:"We couldn\u2019t change the epic color"},description:{id:"issue.color.action.change-color-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"success",shouldAutoDismiss:!0},[bs.y]:{messages:Object(v.h)({title:{id:"issue.link.jira-app-link-fetch-error-title",defaultMessage:"We couldn\u2019t fetch remote Jira application links"},description:{id:"issue.link.jira-app-link-fetch-error-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.E]:{messages:Object(v.h)({title:{id:"issue.link.jira-remote-link-server-error-title",defaultMessage:"We couldn't link the issue to {remoteIssueKey}."},description:{id:"issue.link.jira-remote-link-server-error-description",defaultMessage:"Reason: {i18nServerErrorMessage}"}}),icon:gs,type:"error",shouldAutoDismiss:!0}};function Os(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function js(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(s),!0).forEach((function(t){vs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Os(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Es extends a.Component{constructor(...e){super(...e),this.onFlagDismissed=e=>{const{flags:t,onFlagDismissed:s,fireAnalyticsEvent:n}=this.props,a=ns()(t,{id:e});if(a){const e=ys[a.type];e.onDismissed&&e.onDismissed({fireAnalyticsEvent:n})}s(e)}}render(){
const{onFlagDismissed:e,flags:t,retryIssueDelete:s,fireAnalyticsEvent:n,deleteFailureIssueKey:a,FlagServiceSubscriber:r}=this.props;return i.a.createElement(r,null,(({showFlag:r})=>t.map((t=>{const o=ys[t.type],c=t.titleI18nValues?[o.messages.title,t.titleI18nValues]:o.messages.title,l=t.descriptionI18nValues&&o.messages.description?[o.messages.description,t.descriptionI18nValues]:o.messages.description,u=(o.actions||[]).map((({messages:i,onClick:r})=>({content:i.content,onClick:()=>r({closeFlag:()=>e(t.id),retryIssueDelete:s,deleteFailureIssueKey:a,fireAnalyticsEvent:n})}))),d=js(js({title:c},l&&{description:l}),{},{type:o.type,actions:u,isAutoDismiss:o.shouldAutoDismiss});return i.a.createElement(rs.a,{key:t.id,args:[d],op:r})}))))}}Es.displayName="UnsafeFlags",Es.displayName="Flags";var ks=at()(Object(as.a)((e=>({fireAnalyticsEvent:(t,s)=>e(t,s)}))),Object(is.a)("deleteIssueRetry",{retryIssueDelete:"deleteIssueRetry"}),Object(r.b)((e=>({flags:Object(P.j)(e),
deleteFailureIssueKey:Object(T.y)(e),FlagServiceSubscriber:os.a})),(e=>({onFlagDismissed:t=>e((e=>({type:"DISMISS_FLAG",payload:e}))(t)),retryIssueDelete:(t,s)=>{e(Object(cs.c)(t,s))}}))),Object(ls.a)())(Es),ws=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),Ss=s("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js"),Cs=s("./node_modules/@atlaskit/media-picker/dist/es2019/index.js"),Is=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),Ts=s("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),Ps=s("./src/packages/issue/issue-context-service/src/main.js"),_s=s("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),xs=s("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js");function Ds(){return(Ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function As(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ls(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?As(Object(s),!0).forEach((function(t){Ms(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):As(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ms(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Rs(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ns=e=>Object(Is.a)(ne.isAttachmentsUIFeedbackEnabled,(t=>{const{onUploadStart:s,onUploadEnd:n,onUploadError:r,onGeneralError:o,uploadContext:c,eventHandlers:l,config:u}=t,d=Rs(t,["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config"]),p=Object(a.useRef)([]),m=Object(a.useCallback)((()=>{if(!c)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=c;return e+t>Date.now()}),[c]),b=Object(a.useCallback)((([e,t])=>{if(!c||!m())return void t();const{serviceHost:s,clientId:n,token:a}=c;e({clientId:n,token:a,baseUrl:s})}),[m,c]),f=Object(a.useCallback)((()=>{p.current.forEach(b),p.current=[]}),[b]),g={authProvider:()=>new Promise(((e,s)=>{m()?b([e,s]):(t.requestUploadToken(),p.current=[...p.current,[e,s]])}))},h=Ls(Ls({uploadParams:{
collection:null==c?void 0:c.collection}},u),{},{multiple:!0}),y=Object(Ps.g)(),[,{addNewAttachments:O}]=Object(Ts.b)(),j=l?l["upload-error"]:e=>{const{error:t}=e;["upload_fail","object_create_fail"].includes(t.name)?r(t):o(t)},v=l?l["uploads-start"]:e=>{const{files:t}=e;t.forEach((e=>{s({id:`${e.id}`,createdDate:Date.now()})}));const n=t.map((e=>({filename:e.name,filesize:e.size,mimetype:e.type,mediaApiFileId:e.id,createdDate:Date.now()})));O(y,n)},E=l&&l["upload-end"]?l["upload-end"]:e=>{const{file:t}=e;n({id:`${t.id}`})},k=l&&l["upload-preview-update"];return Object(a.useEffect)((()=>{f()}),[f,c]),c?i.a.createElement(e,Ds({mediaClientConfig:g,config:h,onUploadsStart:v,onError:j,onEnd:E,onPreviewUpdate:k},d)):null}),class extends a.Component{constructor(...e){super(...e),this.uploadTokensPromisesResolvers=[],this.onUploadsStart=e=>{const{files:t}=e,{onUploadStart:s}=this.props;t.forEach((e=>{s({id:`${e.id}`,createdDate:Date.now()})}))},this.onUploadEnd=e=>{
const{file:t}=e,{onUploadEnd:s}=this.props;s({id:`${t.id}`})},this.onError=e=>{const{error:t}=e,{onUploadError:s,onGeneralError:n}=this.props;["upload_fail","object_create_fail"].includes(t.name)?s(t):n(t)},this.resolveAuthPromise=([e,t])=>{if(!this.props.uploadContext||!this.isTokenUpToDate())return void t();const{serviceHost:s,clientId:n,token:a}=this.props.uploadContext;e({clientId:n,token:a,baseUrl:s})}}componentDidUpdate(e){e.uploadContext!==this.props.uploadContext&&this.resolveUploadPromises()}resolveUploadPromises(){this.uploadTokensPromisesResolvers.forEach(this.resolveAuthPromise),this.uploadTokensPromisesResolvers=[]}isTokenUpToDate(){if(!this.props.uploadContext)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=this.props.uploadContext;return e+t>Date.now()}render(){
const t=this.props,{onUploadStart:s,onUploadEnd:n,onUploadError:a,onGeneralError:r,uploadContext:o,eventHandlers:c,config:l}=t,u=Rs(t,["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config"]);if(!o)return null;const d={authProvider:()=>new Promise(((e,t)=>{this.isTokenUpToDate()?this.resolveAuthPromise([e,t]):(this.props.requestUploadToken(),this.uploadTokensPromisesResolvers=[...this.uploadTokensPromisesResolvers,[e,t]])}))},p=Ls(Ls({uploadParams:{collection:o.collection}},l),{},{multiple:!0}),m=c?c["upload-error"]:this.onError,b=c?c["uploads-start"]:this.onUploadsStart,f=c&&c["upload-end"]?c["upload-end"]:this.onUploadEnd,g=c&&c["upload-preview-update"];return i.a.createElement(e,Ds({mediaClientConfig:d,config:p,onUploadsStart:b,onError:m,onEnd:f,onPreviewUpdate:g},u))}});var Fs=e=>at()([Object(r.b)((e=>({uploadContext:Object(_.a)(e).uploadContext})),(e=>({onUploadStart:t=>e(Object(_s.c)(t)),onUploadEnd:t=>e(Object(_s.d)(t)),
onUploadError:t=>e(Object(_s.e)(t)),onGeneralError:t=>e(Object(_s.f)(t)),requestUploadToken:()=>e(Object(xs.c)())})))])(Ns(e));const Us=Fs(Cs.a);var Vs=Object(r.b)((e=>({isOpen:Object(Ss.a)(e)})),(e=>({onClose:()=>e(Object(ws.a)())})))((e=>i.a.createElement(Us,{isOpen:e.isOpen,onClose:e.onClose})));const Ks=e=>{const{eventHandlers:t}=e;return i.a.createElement(Vs,{eventHandlers:t})};Ks.displayName="PopupAttachmentPicker"
;var Ws=Ks,Bs=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),Hs=s("./node_modules/lodash/reduce.js"),$s=s.n(Hs),Gs=s("./node_modules/lodash/set.js"),qs=s.n(Gs),zs=s("./node_modules/lodash/some.js"),Ys=s.n(zs),Qs=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/doc.js"),Js=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/paragraph.js"),Zs=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-single.js"),Xs=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-group.js"),en=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media.js");const tn="issue.issue-base.content.attachment.picker.servicedesk";class sn extends a.Component{constructor(...e){super(...e),this.onUploadsStart=({files:e})=>{this.props.setCommentAttachmentInProgress(!0),this.commentAttachments=e.map((e=>({file:e,isUploadFinished:!1})))},this.onUploadFinished=({file:e})=>{
this.injectAttachmentsToCommentEditor(this.commentAttachments),this.markAttachmentAsUploadFinished(e.id)},this.onUploadError=({file:e})=>{O.a.safeErrorWithoutCustomerData(tn,"Failed to upload an attachment.",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),this.markAttachmentAsUploadFinished(e.id)},this.getAttachmentsDocNode=(e,t)=>{const s=this.separateImageAndNonImageAttachments(e),n=this.getMediaSingleNodes(s.images,t),a=s.nonImages.length>0?this.getMediaGroupNode(s.nonImages,t):null;return a?Object(Qs.a)(a,...n,Object(Js.a)()):Object(Qs.a)(...n,Object(Js.a)())},this.getMediaSingleNodes=(e,t)=>e.map((e=>this.getMediaSingleNode(e,t))),this.getMediaSingleNode=(e,t)=>{const s=this.getMediaNode(e,200,200,t);return Object(Zs.a)({layout:"center"})(s)},this.getMediaGroupNode=(e,t)=>Object(Xs.a)(...e.map((e=>this.getMediaNode(e,null,null,t)))),this.getMediaNode=({file:e},t,s,n)=>Object(en.a)({id:e.id,collection:n,type:"file",name:e.name,size:e.size,width:t,height:s,
__key:e.id,__fileName:e.name,__fileSize:e.size,__fileMimeType:e.type,__displayType:null}),this.markAttachmentAsUploadFinished=e=>{qs()(ns()(this.commentAttachments,(t=>t.file.id===e)),"isUploadFinished",!0),Ys()(this.commentAttachments,{isUploadFinished:!1})||(this.props.setCommentAttachmentInProgress(!1),this.commentAttachments=[])},this.commentAttachments=void 0,this.separateImageAndNonImageAttachments=e=>$s()(e,((e,t)=>(this.isImageAttachment(t.file.type)?e.images.push(t):e.nonImages.push(t),e)),{images:[],nonImages:[]}),this.injectAttachmentsToCommentEditor=e=>{const{uploadContext:t}=this.props;if(!t)return void O.a.safeErrorWithoutCustomerData(tn,"Failed to upload attachments. Upload context not available.",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}));const s=this.getAttachmentsDocNode(e,t.collection);this.props.onEditCommentUpdate(s)},this.isImageAttachment=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1),this.eventHandlers={
"uploads-start":this.onUploadsStart,"upload-end":this.onUploadFinished,"upload-error":this.onUploadError}}render(){const{render:e}=this.props;return e(this.eventHandlers)}}sn.displayName="EventHandlersProvider";var nn=at()([Object(r.b)((e=>({uploadContext:Object(_.a)(e).uploadContext})),(e=>({onEditCommentUpdate:t=>{e(Object(Bs.d)("NEW_OPTIMISTIC_COMMENT",!0)),e(Object(Bs.l)("NEW_OPTIMISTIC_COMMENT",t))},setCommentAttachmentInProgress:t=>e(Object(Bs.F)(t))})))])(sn),an=()=>i.a.createElement(nn,{render:e=>i.a.createElement(Ws,{eventHandlers:e})}),rn=s("./node_modules/reselect/lib/index.js"),on=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),cn=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const ln=Object(rn.createSelector)(on.I,cn.y,Ss.a,Object(on.E)("timetracking"),x.e,((e,t,s,n,a)=>!(e||t||s||n||"EDIT_MODAL"===a)));var un=s("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js");function dn(e,t){
if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const pn=Fs(Cs.b),mn=e=>{let{isEnabled:t}=e,s=dn(e,["isEnabled"]);return i.a.createElement(un.a,null,(e=>t&&0===e?i.a.createElement(pn,s):null))};mn.displayName="CommonClipboardMediaPicker";var bn=at()([Object(r.b)((e=>({isEnabled:ln(e)})),{})])(mn),fn=()=>i.a.createElement(nn,{render:e=>i.a.createElement(bn,{eventHandlers:e})});function gn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const hn=Fs(Cs.c);var yn=at()([Object(r.b)((e=>({isEnabled:ln(e)})),{})])((e=>{const{isEnabled:t}=e,s=gn(e,["isEnabled"]);return t?i.a.createElement(hn,s):null}));class On extends a.Component{getConfig(){return{container:this.props.container}}render(){return i.a.createElement(nn,{render:e=>i.a.createElement(yn,{config:this.getConfig(),eventHandlers:e})})}}On.displayName="ServiceDeskDropzonePicker";function jn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(s),!0).forEach((function(t){En(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jn(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function En(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kn={headless:!0};class wn extends a.Component{constructor(...e){super(...e),this.onPickerReady=e=>{this.picker=e,e.on("drag-enter",this.onDragEnter),e.on("drag-leave",this.onDragLeave),e.on("drop",this.onDrop)},this.onDragEnter=({length:e})=>{this.numAttachments!==e&&(this.numAttachments=e,this.props.onDragEnter(e))},this.onDragLeave=()=>{0!==this.numAttachments&&(this.numAttachments=0,this.props.onDragLeave())},this.onDrop=()=>{this.numAttachments=0,this.props.onDrop()},this.numAttachments=0,this.picker=void 0}getConfig(){return vn(vn({},kn),{},{container:this.props.container})}render(){return i.a.createElement(yn,{config:this.getConfig(),onPickerReady:this.onPickerReady})}}wn.displayName="DropzoneMediaPicker";var Sn=at()([Object(r.b)((()=>({})),(e=>({onDragEnter:t=>e((e=>({
type:"ATTACHMENT_PANEL_DRAG_ENTER",payload:e}))(t)),onDragLeave:()=>e((()=>({type:"ATTACHMENT_PANEL_DRAG_LEAVE"}))()),onDrop:()=>e((()=>({type:"ATTACHMENT_PANEL_DROP"}))())})))])(wn),Cn=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),In=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Tn=s("./src/packages/platform/utils/types/src/application.js"),Pn=s("./src/packages/platform/utils/types/src/edition.js");class _n extends a.Component{constructor(e){super(e),this.state={noErrorsAfterTimeout:!1,caughtError:!1}}componentDidMount(){this.props.isReady&&setTimeout((()=>{this.setState({noErrorsAfterTimeout:!0})}),1e3)}shouldComponentUpdate(e,t){if(t.caughtError)return!0;if(!this.state.noErrorsAfterTimeout&&t.noErrorsAfterTimeout){const{experience:e,analyticsSource:t}=this.props,{application:s,edition:n}=this.getApplicationAndEdition();return Object(Cn.a)({experience:e,
wasExperienceSuccesful:!0,analyticsSource:t,application:s,edition:n}),!1}return!(this.props.isReady||!e.isReady)&&(setTimeout((()=>{this.setState({noErrorsAfterTimeout:!0})}),1e3),!0)}componentDidCatch(e){const{experience:t,analyticsSource:s}=this.props,{application:n,edition:a}=this.getApplicationAndEdition();Object(Cn.a)({experience:t,wasExperienceSuccesful:!1,analyticsSource:s,application:n,edition:a,additionalAttributes:{errorMessage:e.message||"unknown"}}),this.setState({caughtError:!0})}getApplicationAndEdition(){const{projectType:e}=this.props;if(null==e)return{application:null,edition:null};const t=Object(Tn.e)(e),s=In.f&&Object(In.f)(),n=s&&s.appEditions;return{application:t,edition:n?Object(Pn.f)(t,n):null}}render(){const{caughtError:e}=this.state;return e?null:this.props.children}}_n.displayName="AddAttachmentFrontendSlaTracker"
;var xn=s("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),Dn=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),An=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");class Ln extends a.Component{constructor(...e){super(...e),this.fireAnalytics=()=>{const{glances:e,contentPanels:t,activityPanels:s,operations:n,ecosystemCustomFieldIds:a}=this.props;this.props.ecosystemLoadedAnalytics(e,t,s,n,a.length)}}componentDidMount(){this.fireAnalytics()}componentDidUpdate(){this.fireAnalytics()}render(){return null}}Ln.displayName="EcosystemAnalyticsView";var Mn=at()(Object(as.a)((e=>({ecosystemLoadedAnalytics:(t,s,n,a,i)=>e("addons-loaded",Object(xn.f)(t,s,n,a,i))}))),Object(r.b)((e=>({glances:Object(Dn.i)(e),contentPanels:Object(Dn.g)(e),activityPanels:Object(Dn.a)(e),operations:Object(Dn.j)(e),ecosystemCustomFieldIds:Object(An.b)(e)
})),{}),Object(ls.a)())(Ln),Rn=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js"),Nn=s("./node_modules/@atlassian/connect-module-core/dist/es6/index.js"),Fn=s("./src/packages/common-legacy-do-not-add-anything-new/src/ecosystem/default-connect-iframe-provider.js"),Un=s("./node_modules/@atlaskit/empty-state/dist/es2019/EmptyState/index.js"),Vn=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/assets/error.svg"),Kn=s.n(Vn);const Wn=Object(v.h)({timeout:{id:"issue.content.ecosystem-panels.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support."}}),Bn=e=>`https://marketplace.atlassian.com/plugins/${e}/cloud/support?rel="noopener noreferrer"`;class Hn extends a.Component{constructor(...e){super(...e),this.tertiaryAction=i.a.createElement(H.a,{appearance:"subtle-link",href:Bn(this.props.appKey),target:"_blank"},this.props.appName)}render(){const{appName:e,intl:t}=this.props
;return i.a.createElement(Un.a,{size:"narrow",imageUrl:Kn.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:t.formatMessage(Wn.timeout,{appName:e}),tertiaryAction:this.tertiaryAction})}}Hn.displayName="TimeoutView",Hn.displayName="TimeoutView";var $n=Object(v.i)(Hn);const Gn=3*z.e+"px",qn=q.default.div(["margin-top:",";"],Gn),zn=e=>{const{options:t,appKey:s,moduleKey:n,appName:a,options:{url:r},refreshedOn:o}=e,c=new Fn.a,l=o?`connect-iFrame-${s}-${n}-${o}`:`connect-iFrame-${s}-${n}`;return i.a.createElement(qn,null,i.a.createElement(Nn.a,{key:l,appKey:s,moduleKey:n,url:r,connectHost:Object(Rn.a)(),connectIframeProvider:c,options:c.convertConnectOptions(t),width:"100%",height:"100%",timeoutIndicator:()=>i.a.createElement($n,{appName:a,appKey:s})}))};zn.displayName="EcosystemModuleBase",zn.defaultProps={refreshedOn:0};const Yn=e=>i.a.createElement(zn,e);Yn.displayName="EcosystemModuleBaseWithoutRefresh";const Qn=Object(ls.a)()(Yn);var Jn=Object(qt.a)([Object(r.b)((e=>({
refreshedOn:Object(P.e)(e)})),{})])(zn);const Zn=q.default.div(["display:none;"]);class Xn extends a.Component{constructor(...e){super(...e),this.state={connectHost:null}}componentDidMount(){Object(Rn.b)((e=>this.setState({connectHost:e})))}render(){const{connectHost:e}=this.state,{scripts:t}=this.props;return e?i.a.createElement(Zn,null,t.map((({appKey:e,moduleKey:t,options:s,shouldReloadOnRefresh:n})=>{const a=n?Jn:Qn,r=`${e}-${t}`;return i.a.createElement(a,{key:r,appKey:e,moduleKey:t,options:s,appName:r})}))):null}}Xn.displayName="EcosystemBackgroundScriptsView";var ea=Object(qt.a)([Object(r.b)((e=>({scripts:Object(Dn.h)(e)
})),{})])(Xn),ta=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),sa=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),na=s("./src/packages/issue/issue-view/src/actions/login-actions.js"),aa=s("./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg"),ia=s.n(aa);const ra=q.default.div(["text-align:center;flex-direction:column;color:",";display:flex;justify-content:center;align-items:center;"],Re.a.N800),oa=q.default.h2(["font-size:20px;font-weight:bold;margin-top:","px;margin-bottom:","px;max-width:100%;"],1.5*z.e,1.5*z.e),ca=q.default.p(["max-width:100%;"]),la=e=>i.a.createElement(ra,null,e.image,i.a.createElement(oa,null,e.header),i.a.createElement(ca,null,e.description),e.children);la.displayName="ErrorDisplay",la.defaultProps={description:void 0,children:null};var ua=la;const da=Object(v.h)({authErrorHeader:{id:"issue.text-for-header-in-authentication-error",
defaultMessage:"Log in to Jira to see this issue"},authBtn:{id:"issue.text-for-login-button-in-authentication-error",defaultMessage:"Log in"}}),pa=q.default.img(["width:160px;margin-bottom:14px;"]),ma=Object(v.i)((e=>i.a.createElement(ua,{header:e.intl.formatMessage(da.authErrorHeader),image:i.a.createElement(pa,{src:ia.a,alt:""})},i.a.createElement(sa.a,{externalId:"issue.login",appearance:"primary",onClick:e.login},e.intl.formatMessage(da.authBtn)))));var ba=Object(r.b)(null,(e=>({login:()=>e(Object(na.a)())})))(ma),fa=s("./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg"),ga=s.n(fa);const ha=Object(v.h)({permissionErrorHeader:{id:"issue.text-for-header-in-permission-error",defaultMessage:"You don't have access to this issue"},permissionErrorDescription:{id:"issue.text-for-description-in-permission-error",defaultMessage:"Make sure the issue exists in this project. If it does, ask a project admin for permission to see the project's issues."}
}),ya=q.default.img(["height:100px;width:145px;"]),Oa=()=>{const e=Object(xe.c)();return i.a.createElement(ua,{header:e.formatMessage(ha.permissionErrorHeader),description:e.formatMessage(ha.permissionErrorDescription),image:i.a.createElement(ya,{src:ga.a,alt:""})})};Oa.displayName="HoistedComponent";var ja=Oa,va=s("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg"),Ea=s.n(va);const ka=Object(v.h)({unknownErrorHeader:{id:"issue.text-for-header-in-generic-error",defaultMessage:"We couldn't connect to that issue"},unknownErrorDescription:{id:"issue.text-for-description-in-generic-error",defaultMessage:"Make sure that this issue actually exists in that project. If it does, try again in a few minutes. If you still can't link to the issue, contact your Jira admin."}}),wa=q.default.img(["height:130px;width:120px;"]),Sa=()=>{const e=Object(xe.c)();return i.a.createElement(ua,{header:e.formatMessage(ka.unknownErrorHeader),
description:e.formatMessage(ka.unknownErrorDescription),image:i.a.createElement(wa,{src:Ea.a,alt:""})})};Sa.displayName="HoistedComponent";var Ca=Sa,Ia=s("./node_modules/lodash/isEqual.js"),Ta=s.n(Ia),Pa=s("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js"),_a=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),xa=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Da=s("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js");const Aa="FORGE_ENTITY_TYPE",La="CONNECT_ENTITY_TYPE"
;var Ma=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),Ra=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),Na=s("./src/packages/platform/utils/permalinks/src/index.js"),Fa=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),Ua=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),Va=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Ka=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Wa=s("./src/packages/issue/project-context-service/src/main.js"),Ba=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js");function Ha(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function $a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(s),!0).forEach((function(t){Ga(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ha(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ga(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function qa(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const za=q.default.div(["align-self:flex-end;"]),Ya=Object(q.default)(Da.c)(["margin-top:","px;"],z.e/2);Ya.displayName="ActivityItemHeading"
;const Qa=q.default.div(["display:flex;"]),Ja=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return $a($a({},qa(n,["buttonStyles"])),{},{buttonStyles:$a($a({},a),{},{padding:`0 ${z.e/2}px 0 ${z.e/2}px`,margin:`0 ${z.e/2}px 0 ${z.e/2}px`,backgroundColor:e?Re.a.N400:Re.a.N20,"&:hover":{backgroundColor:e?Re.a.N400:Re.a.N30},"&:active":{backgroundColor:e?Re.a.N400:Re.a.B50}})})};var Za=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),Xa=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),ei=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),ti=s("./node_modules/@atlaskit/icon/glyph/arrow-down.js"),si=s.n(ti),ni=s("./node_modules/@atlaskit/icon/glyph/arrow-up.js"),ai=s.n(ni),ii=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js");const ri=Object(v.h)({newestFirst:{id:"issue-activity-feed.common.newest-first",
defaultMessage:"Newest first"},oldestFirst:{id:"issue-activity-feed.common.oldest-first",defaultMessage:"Oldest first"}}),oi=Object(v.h)({tooltip:{id:"issue-activity-feed.activity-sorting.tooltip",defaultMessage:"Sort by newest/oldest first"}}),ci=Object(ii.a)("dropdownItem",{onClick:"clicked"})(Za.a),li={NEWEST_FIRST:i.a.createElement(si.a,{size:"small",label:"newest-first"}),OLDEST_FIRST:i.a.createElement(ai.a,{size:"small",label:"oldest-first"})},ui=e=>{const{selectedSortOrder:t,onSelectSortOrder:s,isDisabled:n=!1}=e,{formatMessage:a}=Object(xe.c)(),r=(e=>[{key:"NEWEST_FIRST",type:"NEWEST_FIRST",name:e(ri.newestFirst)},{key:"OLDEST_FIRST",type:"OLDEST_FIRST",name:e(ri.oldestFirst)}])(a),o=r.find((e=>e.type===t));return o?i.a.createElement(Va.a,{sourceType:Ka.b,sourceName:"activityFeedSort"},i.a.createElement(Ua.a,{onMount:Fa.d}),i.a.createElement(je.a,{content:a(oi.tooltip),hideTooltipOnMouseDown:!0,position:"top"},i.a.createElement(Xa.a,{trigger:o.name,triggerType:"button",
triggerButtonProps:{appearance:"subtle",spacing:"compact",isDisabled:n,iconAfter:li[o.type]},position:"bottom right"},i.a.createElement(ei.a,null,r.filter((e=>e.type!==t)).map((e=>i.a.createElement(ci,{key:e.key,onClick:(t,n)=>s(e.type,n,"sortOrderItemSelected"),elemAfter:li[e.type],isCompact:!0},e.name))))))):(In.h.safeErrorWithoutCustomerData("issue.activity.activity-sorting.select-sort-order",`Failed to select a sort option with selected sort of ${t}`),null)};ui.displayName="ActivitySortingSelect";var di=ui,pi=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),mi=s("./src/packages/forge/forge-ui-analytics/src/services/issue-activity/index.js"),bi=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-activity/index.js"),fi=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js");const gi=({item:e,component:t})=>{const s=t;return i.a.createElement(s,null,i.a.createElement(fi.a,{extensionName:e.name,
extensionEnvType:e.extension.environmentType}))};gi.displayName="ForgeIssueActivityTrigger";const hi=({component:e,item:t,onClick:s,isSelected:n})=>{const r=e,o=Object(a.useCallback)(((e,t)=>{Object(mi.a)(),s(e,t)}),[s]);return i.a.createElement(bi.a,{shouldFireScreenEvent:!1},i.a.createElement(r,{onClick:o,isSelected:!!n},i.a.createElement(fi.a,{extensionName:t.name,extensionEnvType:t.extension.environmentType})))};hi.displayName="ForgeIssueActivityView";var yi=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const Oi=q.default.span(["max-width:","px;display:inline-block;line-height:normal;vertical-align:text-bottom;",";"],20*z.e,yi.e);Oi.displayName="DropdownTrigger";const ji=Object(q.default)(Za.a)(["min-width:","px;"],16*z.e);function vi(){return(vi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ei(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ki(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(s),!0).forEach((function(t){wi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ei(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Si(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}ji.displayName="DropdownItem";const Ci=({children:e,onClick:t})=>i.a.createElement(Ti,{onClick:t},e);Ci.displayName="DropdownItemComponent";const Ii=({items:e,selectedItem:t,onSelectActivityItem:s})=>{const[n,r]=Object(a.useState)(!1),o=Object(a.useMemo)((()=>"FORGE_ENTITY_TYPE"===t.type?i.a.createElement(gi,{item:t,component:Oi}):i.a.createElement(Oi,null,t.name)),[t]);return i.a.createElement(Va.a,{sourceType:Ka.b,sourceName:"activityFeed"},i.a.createElement(Ua.a,{onMount:Fa.d}),i.a.createElement(pi.a,{isOpen:n,onOpenChange:({isOpen:e},t)=>{r(e),Object(Fa.h)(t,{isOpen:e})},trigger:o,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",theme:(e,t)=>{const s=e(t),{buttonStyles:a}=s;return ki(ki({},Si(s,["buttonStyles"])),{},{buttonStyles:ki(ki({},a),{},{padding:`0 ${z.e/2}px 0 ${z.e/2}px`,margin:`0 ${z.e/2}px 0 ${z.e/2}px`,backgroundColor:n?Re.a.N400:Re.a.N20,"&:hover":{
backgroundColor:n?Re.a.N400:Re.a.N30},"&:active":{backgroundColor:n?Re.a.N400:Re.a.B50}})})}},position:"bottom left"},i.a.createElement(ei.a,null,e.filter((e=>e.key!==t.key)).map((e=>{const t={key:e.key,onClick:(t,n)=>s(e,n,"dropdownItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?i.a.createElement(hi,vi({},t,{component:Ci,item:e})):i.a.createElement(Ci,t,e.name)})))))};Ii.displayName="ActivityFeedDropdown";const Ti=Object(ii.a)("dropdownItem",{onClick:"clicked"})(ji);var Pi=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js");function _i(){return(_i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const xi=({children:e,onClick:t,isSelected:s})=>i.a.createElement(Pi.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:Ja(s),onClick:t},e);xi.displayName="ButtonComponent"
;const Di=({items:e,selectedItem:t,onSelectActivityItem:s})=>i.a.createElement(Va.a,{sourceType:Ka.f,sourceName:"activityFeedButtons"},i.a.createElement(Ua.a,{onMount:e=>Object(Fa.e)(e)}),e.map((e=>{const n={key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"buttonItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?i.a.createElement(hi,_i({},n,{component:xi,item:e})):i.a.createElement(xi,n,e.name)})));Di.displayName="ActivityFeedButtons";var Ai=s("./node_modules/@atlaskit/section-message/dist/es2019/components/SectionMessage.js"),Li=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),Mi=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),Ri=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js");var Ni=async e=>{const t=Object(Ri.a)(e),{data:s,errors:n}=await t.query({
query:'\n    query IssueActivitySortingPreferencesQuery {\n        myPreferences(keys: [\n            "user.activity.sorting.hide-intro-message"\n        ])\n    }\n',variables:{}});if(n)throw new Error(`Errors returned from FetchIssueActivitySortingPreferencesQuery result: ${n.map((e=>e.message)).join(", ")}`);if(!s)throw new Error("Unexpected empty data object received from FetchIssueActivitySortingPreferencesQuery result with no errors");return(e=>"true"===e.myPreferences["user.activity.sorting.hide-intro-message"])(s)};var Fi=async e=>{var t;const s=Object(Ri.a)(e),{data:n,errors:a}=await s.query({query:'\n    mutation SetIssueActivitySortingPreferencesMutation {\n        setMyPreference(input: {key: "user.activity.sorting.hide-intro-message", value: "true"}) {\n            success\n            errors {\n                message\n            }\n        }\n    }\n',variables:{}})
;if(a)throw new Error(`Errors returned from SetIssueActivitySortingPreferencesMutation result: ${a.map((e=>e.message)).join(", ")}`);if(!n)throw new Error("Unexpected empty data object received from SetIssueActivitySortingPreferencesMutation result with no errors");if((null===(t=n.setMyPreference.errors)||void 0===t?void 0:t.length)>0)throw new Error(`Errors returned from SetIssueActivitySortingPreferencesMutation setMyPreference result: ${n.setMyPreference.errors.map((e=>e.message)).join(", ")}`);return(e=>e.setMyPreference)(n)};var Ui=()=>{const e=Object(Mi.a)(),[t,s]=Object(a.useState)(!0),[n,i]=Object(a.useState)(!1);return{setPreference:Object(a.useCallback)((()=>(s(!0),Fi(e).catch((e=>{In.h.safeErrorWithoutCustomerData("issue.activity-feed.activity-sorting.show-section-message","SET gira preference request failed",e)})))),[e]),fetchPreference:Object(a.useCallback)((()=>(i(!0),Ni(e).then(s).catch((e=>{
In.h.safeErrorWithoutCustomerData("issue.activity-feed.activity-sorting.show-section-message","FETCH gira preference request failed",e)})).finally((()=>i(!1))))),[e]),shouldHideSectionMessage:t,fetchLoading:n}};const Vi=Object(v.h)({title:{id:"issue-activity-feed.activity-sorting-section-message.title",defaultMessage:"View activity in your preferred order"},description:{id:"issue-activity-feed.activity-sorting-section-message.description",defaultMessage:"You can now sort an issue's activity (comments, history, work log) by oldest or newest first depending on what suits the task best."},dismiss:{id:"issue-activity-feed.activity-sorting-section-message.dismiss",defaultMessage:"OK"}}),Ki=q.default.div(["margin-top:","px;"],3*z.e),Wi=()=>{const{formatMessage:e}=Object(xe.c)(),{createAnalyticsEvent:t}=Object(Li.a)(),{shouldHideSectionMessage:s,setPreference:n,fetchPreference:r,fetchLoading:o}=Ui();return Object(a.useEffect)((()=>{r()}),[r]),
s||o?null:i.a.createElement(Ki,null,i.a.createElement(Ai.a,{appearance:"change",title:e(Vi.title),actions:[{key:Vi.dismiss.id,onClick:()=>{const e=t({action:"clicked",actionSubject:"button"});Object(Fa.h)(e,"activitySortingDismissSectionMessage"),n()},text:e(Vi.dismiss)}]},i.a.createElement("p",null,e(Vi.description))))};Wi.displayName="ActivitySortingSectionMessage";var Bi=Wi,Hi=s("./src/packages/platform/utils/types/src/general.js"),$i=s("./src/packages/platform/observability/browser-metrics/src/index.js"),Gi=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),qi=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js"),zi=Object(Gi.a)(qi.a,{displayName:"CommentVisibilitiesContainer"}),Yi=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js");function Qi(){return(Qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Ji=e=>t=>{const{baseUrl:s,issueKey:n,shouldFetchCommentVisibilities:a,createAnalyticsEvent:r}=t;return i.a.createElement(zi,{baseUrl:s,issueKey:n,createAnalyticsEvent:r,scope:n},i.a.createElement(Yi.a,null,((s,{fetch:n})=>i.a.createElement(e,Qi({},t,{fetchCommentVisibilities:a?n:void 0})))))
},Zi=s("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js"),Xi=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),er=s("./src/packages/issue/issue-view/src/actions/editor-actions.js"),tr=s("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),sr=s("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),nr=s("./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js"),ar=s("./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js"),ir=s("./src/packages/issue/issue-view/src/drafts/draft-utils.js"),rr=s("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),or=s("./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js"),cr=s("./src/packages/issue/issue-view/src/selectors/share-as-comment-selector.js");function lr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ur(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(s),!0).forEach((function(t){dr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pr=Object(re.f)((()=>s.e("async-comment-item").then(s.bind(null,"./src/packages/issue/issue-actions/issue-comment-base/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/index.js"}),mr=e=>i.a.createElement(re.a,{fallback:i.a.createElement(i.a.Fragment,null)},i.a.createElement(pr,e));mr.displayName="IssueComment";const br=e=>i.a.createElement(M.a,{
id:"comment-item",packageName:"issue",render:()=>i.a.createElement(i.a.Fragment,null)},i.a.createElement(mr,e));br.displayName="CommentWithMonitoring";var fr=Object(qt.a)([v.i,Object(is.a)("issueFields",{onEditSave:"updated",onDeleteConfirm:"deleted",onScrolledToPermalink:"scrolled"}),Object(E.a)({onCopyClick:"copyCommentUrl"}),Object(r.b)(((e,{commentId:t})=>(e,{isHighlighted:s})=>ur({bodyAdf:Object(cn.j)(t)(e),bodyHtml:Object(cn.f)(t)(e),hasDraft:Object(rr.a)(Object(ir.a)(t))(e),author:Object(cn.e)(t)(e),updateAuthor:Object(cn.q)(t)(e),createdDate:Object(cn.g)(t)(e),updatedDate:Object(cn.r)(t)(e),edited:Object(cn.h)(t)(e),isOptimistic:Object(cn.o)(t)(e),hasSaveFailed:Object(cn.p)(t)(e),canEdit:Object(cn.d)(t)(e),isEditing:Object(cn.B)(t)(e),canDelete:Object(cn.c)(t)(e),hasDeleteModal:Object(cn.m)(t)(e),visibility:Object(cn.s)(t)(e),visibilityEdited:Object(cn.k)(t)(e),isInternal:Object(cn.D)(t)(e),showReactions:Object(ar.b)(e),
timeZone:Object(ne.removeTimeZoneFromIssueUser)()?void 0:Object(P.z)(e),shouldShowCommentVisibility:Object(cn.z)(e),shouldScrollAfterAsyncComponentsLoaded:s&&Object(or.a)(e),hasScrolledPermalink:Object(cn.v)(e)},((e,t)=>({baseUrl:Object(T.f)(e),isReactionsFeatureActive:Object(ar.b)(e),issueAri:Object(P.v)(e),commentAri:Object(ar.a)(t)(e),projectType:Object(P.F)(e),mentionProvider:Object(I.a)(e),mediaContext:Object(_.a)(e),contextIdentifier:Object(nr.b)(e,t),sharedAtTimestamp:Object(cr.a)(e),sharedValue:Object(cr.b)(e),getEncodedMention:Object(C.a)(Object(T.f)(e)),activityProvider:Object(sr.a)(e)}))(e,t))),((e,{commentId:t})=>ur({getOnEditClick:s=>e(Object(Bs.i)(t,s)),onEditCancel:()=>e(Object(Bs.j)(t)),onEditUpdate:s=>e(Object(Bs.l)(t,s)),onEditPaste:s=>e(Object(Bs.x)(t,s)),onBlur:()=>e(Object(Bs.k)(t)),getOnEditSave:(s,n)=>e(Object(Bs.B)(ur({id:t},s),n)),onCommentVisibilityChange:s=>{e(Object(Bs.m)(t,s))},onDeleteClick:()=>e(Object(Bs.H)(t)),getOnDeleteConfirm:s=>e(Object(Bs.g)(t,s)),
onDeleteCancel:()=>e(Object(Bs.e)()),onSaveRetry:()=>e(Object(Bs.C)(t,(new Date).toISOString(),(e=>e.includes("NEW_OPTIMISTIC_COMMENT"))(t))),onSaveEdit:()=>e(Object(Bs.z)(t)),onSaveCancel:()=>e(Object(Bs.y)(t)),setScrollStatus:t=>e(Object(Bs.G)(t))},(e=>({onEditorExpandedFailure:()=>{e(Object(er.b)())},onEditorSaveFailure:()=>{e(Object(er.c)())},onEditorClearSharedValues:()=>{e(Object(tr.a)())}
}))(e))),((e,t,s)=>ur(ur(ur({},e),t),s)))])(br),gr=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),hr=s("./src/packages/platform/services/refs-store/src/index.js"),yr=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js"),Or=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),jr=s("./node_modules/lodash/throttle.js"),vr=s.n(jr),Er=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),kr=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),wr=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),Sr=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js"),Cr=s("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),Ir=s("./src/packages/issue/issue-view/src/views/constants.js"),Tr=s("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js")
;const Pr=q.default.button(["text-align:left;color:grey;font:inherit;background:white;width:100%;height:40px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;border:1px solid ",";border-radius:","px;box-sizing:border-box;"],2.5*z.e,2.5*z.e,1.5*z.e,1.5*z.e,Re.a.N40,z.a),_r=q.default.div(["display:flex;justify-content:space-between;align-items:center;height:14px;padding-top:1px;letter-spacing:-0.005em;"]),xr=q.default.span(["padding-top:","px;"],z.e/2),Dr=q.default.div(["text-align:center;"]);class Ar extends a.Component{constructor(...e){super(...e),this.state={changed:!1},this.onClick=()=>{this.props.onExpanded(),this.setState({changed:!0})}}static getServiceDeskFallbackEditor(){return i.a.createElement(Dr,null,i.a.createElement($.a,{size:"medium"}))}getGeneralFallbackEditor(){return i.a.createElement(Pr,{onClick:this.onClick},i.a.createElement(_r,null,this.props.placeholder,this.state.changed&&i.a.createElement(xr,null,i.a.createElement($.a,{size:"small"
}))))}render(){return this.props.isServiceDesk?Ar.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}Ar.displayName="FallbackAddCommentEditor",Ar.defaultProps={placeholder:"",onExpanded:c.a};const Lr=Object(qt.a)([Object(r.b)((e=>({isServiceDesk:Object(T.t)(e)})),{})])(Ar),Mr=({children:e,fallback:t,packageName:s})=>i.a.createElement(M.a,{id:"issue-add-comment-editor",packageName:s,render:()=>t},i.a.createElement(re.a,{fallback:t},e));Mr.displayName="IssueAddCommentEditorBoundary";const Rr=Object(v.h)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",defaultMessage:"Pro tip:"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment"}})
;var Nr=s("./node_modules/@atlaskit/modal-dialog/dist/esm/styled/Content.js")
;const Fr=q.default.small(["color:",";display:block;margin-top:","px;white-space:nowrap;font-size:12px;line-height:1.33333333333333;"],Re.a.N200,z.e),Ur=Object(q.css)(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;z-index:",";transition:transform 0.3s cubic-bezier(0.86,0,0.07,1) 0.1s;transform:translate( 0,"," );bottom:-1px;"," background:white;padding-left:","px;margin-left:-","px;"," &{bottom:-2px;}","}"],(e=>e.shouldApplyTopSticky?99:10),(e=>e.isHidden?("OLDEST_FIRST"===e.sortOrder?100:-100)+"px":"0"),(e=>e.shouldApplyTopSticky?"top: 0px;":""),z.e,z.e,Nr.c.toString(),(e=>e.isHidden?(()=>Object(wr.c)()?"":"display: contents;")():"")),Vr=Object(q.css)(["@supports (position:sticky) or (position:-webkit-sticky){box-shadow:",";margin-top:",";}"],(e=>"NEWEST_FIRST"===e.sortOrder&&e.shouldApplyTopSticky?`0 2px 0 0 ${Re.a.N30}, 0 -2px 0 0 ${Re.a.N30}`:`0 -2px 0 0 ${Re.a.N30}`),Gn),Kr=q.default.div(["",";"],(e=>e.shouldApplySticky&&Ur)),Wr=q.default.div(["display:flex;padding-top:","px;padding-bottom:","px;background:white;"," margin-bottom:","px;margin-top:","px;"],2*z.e,2*z.e,(e=>e.isKeylineVisible&&e.shouldApplySticky?Vr:""),(e=>"NEWEST_FIRST"===e.sortOrder?-2*z.e:0),(e=>"NEWEST_FIRST"===e.sortOrder?z.e:0)),Br=q.default.div(["margin-right:","px;margin-top:","px;"],1.5*z.e,z.e/4)
;function Hr(){return(Hr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const $r=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],Gr=Object(re.f)((()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"});class qr extends a.Component{constructor(...e){super(...e),this.state={isKeylineVisible:!1,shouldHide:!1},this.onSave=e=>{Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT,cancelExisting:!0});Object(L.g)(e)||(this.props.onSave(e),this.props.onCancel())},this.setAddCommentContainerRef=e=>{this.addCommentContainer=e},this.setEditorContainerRef=e=>{this.editorContainer=e},
this.setContainerBottomRef=e=>{this.containerBottom=e},this.setContainerTopRef=e=>{this.containerTop=e},this.getScrollParent=e=>e&&"_issue-app-modal-dialog-wrapper"!==e.className?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:this.getScrollParent(e.parentElement):null,this.setOverflowNode=()=>{this.overflowNode||(this.overflowNode=this.getScrollParent(this.containerBottom)),this.setSticky()},this.setSticky=()=>{const{containerTop:e,containerBottom:t}=this,{sortOrder:s}=this.props;if("OLDEST_FIRST"===s){if(this.overflowNode&&t){const e=this.overflowNode.getBoundingClientRect(),s=t.getBoundingClientRect(),n=Math.min(e.bottom,window.innerHeight),a=!this.props.isExpanded&&s.bottom>=n;a!==this.state.isKeylineVisible&&this.setState({isKeylineVisible:a})}}else if("NEWEST_FIRST"===s&&this.overflowNode&&e&&t){
const s=this.overflowNode.getBoundingClientRect(),n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=Math.min(s.bottom,window.innerHeight),r=Math.min(s.top,window.innerHeight),o=!this.props.isExpanded&&n.top<=r,c=!this.props.isExpanded&&a.bottom>=i,l=o||c;l!==this.state.isKeylineVisible&&this.setState({isKeylineVisible:l})}},this.addCommentContainer=void 0,this.editorContainer=void 0,this.containerBottom=void 0,this.containerTop=void 0,this.editorEndOrStartElement=void 0,this.overflowNode=void 0,this.observer=void 0,this.onEditorExpandedWithAnalytics=()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onEditorExpandedWithAnalytics()},this.onExpand=()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onExpand()}}componentDidMount(){this.overflowNode=this.getScrollParent(this.containerBottom),
Object(wr.e)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",vr()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}shouldComponentUpdate(e,t){const s=!$r.every((t=>this.props[t]===e[t])),n=!Object.entries(this.state).every((([e,s])=>s===t[e]));return s||n}componentDidUpdate(e){!e.isExpanded&&this.props.isExpanded&&(Object($i.c)().markTimeToFinishTask({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR}),this.scrollEditorIntoView()),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}componentWillUnmount(){Object(wr.e)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),
this.observer&&this.containerBottom&&this.observer.unobserve(this.containerBottom),this.observer&&this.containerTop&&this.observer.unobserve(this.containerTop),this.observer&&this.editorEndOrStartElement&&this.observer.unobserve(this.editorEndOrStartElement)}setupStickyObserver(){if(window.IntersectionObserver&&this.containerBottom&&this.containerTop){const{containerTop:e,containerBottom:t}=this,s=e=>{e.forEach((e=>{const t=!this.props.isExpanded&&!e.isIntersecting;switch(e.target){case this.containerBottom:case this.containerTop:this.state.isKeylineVisible!==t&&this.setState({isKeylineVisible:t});break;case this.editorEndOrStartElement:{const t=!e.isIntersecting&&e.boundingClientRect.y>=0&&e.boundingClientRect.y>=e.rootBounds.y,s=!e.isIntersecting&&e.boundingClientRect.y<=e.rootBounds.y,n="OLDEST_FIRST"===this.props.sortOrder?t:s;this.state.shouldHide!==n&&this.setState({shouldHide:n});break}}}))},n={root:this.overflowNode,rootMargin:"0px",threshold:0}
;this.observer=new IntersectionObserver(s,n);const{observer:a}=this;a.observe(t),a.observe(e)}}setupStickyHidingObserver(){window.IntersectionObserver&&this.observer&&(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")))().then((()=>setTimeout((()=>{this.editorEndOrStartElement="OLDEST_FIRST"===this.props.sortOrder?document.getElementsByClassName("issue-editor-end")[0]:document.getElementsByClassName("issue-editor-start")[1],this.editorEndOrStartElement&&this.observer&&this.observer.observe(this.editorEndOrStartElement)}))))}removeStickyHidingObserver(){window.IntersectionObserver&&this.observer&&this.editorEndOrStartElement&&this.observer.unobserve(this.editorEndOrStartElement)}scrollEditorIntoView(){setTimeout((()=>{Object(Cr.b)(this.addCommentContainer,{scrollMode:"if-needed",behavior:"auto",block:"end"})}))}renderAddCommentEditor(){
const{hasDraft:e,newCommentDraft:t,isExpanded:s,intl:n,onEdit:a,onCancel:r,onPaste:o,onBlur:c,isServiceDesk:l,isLoading:u,editorSecondaryToolbarComponents:d}=this.props,p=e&&!Object(L.g)(t)?`\u2022 ${n.formatMessage(Rr.draftPlaceholder)}`:n.formatMessage(Rr.placeholder),m=i.a.createElement(Lr,{placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics}),b=i.a.createElement(Mr,{packageName:"issue",fallback:m},i.a.createElement(Gr,{externalId:"issue.comment.add-form",defaultValue:t,isExpanded:s,shouldFocus:!0,placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics,onChange:a,onSave:this.onSave,onPaste:o,onBlur:c,onCancel:r,isLoading:u,secondaryToolbarComponents:d}));return l?i.a.createElement(Tr.a,{isExpanded:s,onExpanded:this.onExpand,commentId:"NEW_OPTIMISTIC_COMMENT"},b):b}render(){
const{isExpanded:e,isEditorFocused:t,avatarUrl:s,sortOrder:n,isCompact:a}=this.props,r=t&&this.state.shouldHide&&!e,o="OLDEST_FIRST"!==n&&!a,c=i.a.createElement(kr.a,null,"M"),l=i.a.createElement("strong",null,i.a.createElement(v.c,Rr.commentShortcutHintHeading)),u=()=>!e&&i.a.createElement(Fr,null,i.a.createElement(v.c,Hr({},Rr.commentShortcutHintMessage,{values:{shortcutKey:c,proTipText:l}})));return i.a.createElement("span",{ref:this.setAddCommentContainerRef},i.a.createElement("span",{ref:this.setContainerTopRef}),i.a.createElement(Kr,{isHidden:r,shouldApplySticky:!e,shouldApplyTopSticky:o},i.a.createElement(Wr,{isKeylineVisible:this.state.isKeylineVisible,sortOrder:n,shouldApplySticky:!e,shouldApplyTopSticky:o},i.a.createElement(Br,null,i.a.createElement(Er.a,{size:"medium",src:s})),i.a.createElement(Sr.a,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"},this.renderAddCommentEditor(),i.a.createElement(u,null)))),i.a.createElement("span",{
ref:this.setContainerBottomRef}))}}function zr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Yr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(s),!0).forEach((function(t){Qr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}qr.displayName="AddCommentForm",qr.displayName="AddCommentForm",qr.defaultProps={isServiceDesk:!1,isLoading:!1,hasDraft:!1,avatarUrl:void 0,newCommentDraft:null,onExpand:c.a,onSave:c.a,onEdit:c.a,onPaste:c.a,onBlur:c.a,onCancel:c.a}
;var Jr=Object(qt.a)([v.i,Object(is.a)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(r.b)((e=>({authorId:Object(T.a)(e),avatarUrl:Object(P.x)(e),newCommentDraft:Object(cn.j)("NEW_OPTIMISTIC_COMMENT")(e),hasDraft:Object(rr.a)(Object(ir.a)("NEW_OPTIMISTIC_COMMENT"))(e),isExpanded:Object(cn.w)(e)||null!=Object(cn.i)("NEW_OPTIMISTIC_COMMENT")(e),isServiceDesk:Object(T.t)(e),isEditorFocused:Object(on.I)(e)||Object(cn.A)(e),isLoading:Object(T.t)(e)&&Object(cn.x)(e),shouldShowCommentVisibilitySelect:Object(cn.z)(e),visibility:Object(cn.l)("NEW_OPTIMISTIC_COMMENT")(e)||Or.a,sortOrder:Object(Ra.b)(e)})),(e=>({onExpand:()=>e(Object(Bs.c)()),onEdit:t=>e(Object(Bs.l)("NEW_OPTIMISTIC_COMMENT",t)),onVisibilityChange:t=>e(Object(Bs.m)("NEW_OPTIMISTIC_COMMENT",t)),onPaste:t=>e(Object(Bs.x)("NEW_OPTIMISTIC_COMMENT",t)),onBlur:()=>e(Object(Bs.b)()),onCancel:()=>e(Object(Bs.a)()),getOnSave:(t,s)=>e(Object(Bs.B)(Yr({
id:`NEW_OPTIMISTIC_COMMENT_${(new Date).getTime()}`,createdDate:(new Date).toISOString(),isNewComment:!0},t),s))})),((e,t,s)=>Yr(Yr(Yr(Yr({},s),e),t),{},{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[i.a.createElement(yr.a,{key:"commentVisibilitySelect",initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:(s,n)=>{e.shouldShowCommentVisibilitySelect&&n.update({isCommentRestricted:"public"!==e.visibility.type}),t.getOnSave({authorId:e.authorId,bodyAdf:s,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},n)},onEditorExpandedWithAnalytics:s=>{t.onExpand(),Object(Fa.b)(s,"addCommentEditor expanded",{hasDraft:e.hasDraft})}})))])(Object(ts.a)(qr))
;const Zr=q.default.button(["text-align:left;color:grey;font:inherit;background:white;width:100%;height:40px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;border:1px solid ",";border-radius:","px;box-sizing:border-box;"],2.5*z.e,2.5*z.e,1.5*z.e,1.5*z.e,Re.a.N40,z.a),Xr=q.default.div(["display:flex;justify-content:space-between;align-items:center;height:14px;padding-top:1px;letter-spacing:-0.005em;"]),eo=q.default.span(["padding-top:","px;"],z.e/2),to=q.default.div(["text-align:center;"]);class so extends a.Component{constructor(...e){super(...e),this.state={changed:!1},this.onClick=()=>{this.props.onExpanded(),this.setState({changed:!0})}}static getServiceDeskFallbackEditor(){return i.a.createElement(to,null,i.a.createElement($.a,{size:"medium"}))}getGeneralFallbackEditor(){return i.a.createElement(Zr,{onClick:this.onClick},i.a.createElement(Xr,null,this.props.placeholder,this.state.changed&&i.a.createElement(eo,null,i.a.createElement($.a,{size:"small"
}))))}render(){return this.props.isServiceDesk?so.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}so.displayName="FallbackAddCommentEditor",so.defaultProps={placeholder:"",onExpanded:c.a};const no=Object(qt.a)([Object(r.b)((e=>({isServiceDesk:Object(T.t)(e)})),{})])(so),ao=({children:e,fallback:t,packageName:s})=>i.a.createElement(M.a,{id:"issue-add-comment-editor",packageName:s,render:()=>t},i.a.createElement(re.a,{fallback:t},e));ao.displayName="IssueAddCommentEditorBoundary";const io=Object(v.h)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",defaultMessage:"Pro tip:"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment"}
}),ro=q.default.small(["color:",";display:block;margin-top:","px;white-space:nowrap;font-size:12px;line-height:1.33333333333333;"],Re.a.N200,z.e),oo=Object(q.css)(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;z-index:10;transition:transform 0.3s cubic-bezier(0.86,0,0.07,1) 0.1s;transform:translate(0,",");bottom:-1px;background:white;padding-left:","px;margin-left:-","px;"," &{bottom:-2px;}","}"],(e=>e.isHidden?"100px":"0"),z.e,z.e,Nr.c.toString(),(e=>e.isHidden?(()=>Object(wr.c)()?"":"display: contents")():"")),co=Object(q.css)(["@supports (position:sticky) or (position:-webkit-sticky){box-shadow:inset 0 2px 0 0 ",";margin-top:",";}"],Re.a.N30,Gn),lo=q.default.div(["",";"],(e=>e.isSticky&&oo)),uo=q.default.div(["display:flex;padding-top:","px;padding-bottom:","px;background:white;",""],2*z.e,2*z.e,(e=>e.isSticky?co:"")),po=q.default.div(["margin-right:","px;margin-top:","px;"],1.5*z.e,z.e/4);function mo(){return(mo=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const bo=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],fo=Object(re.f)((()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add-old/add-comment-editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-add-old/add-comment-editor/index.js"});class go extends a.Component{constructor(...e){super(...e),this.state={isSticky:!1,shouldHide:!1},this.onSave=e=>{Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT,cancelExisting:!0});Object(L.g)(e)||(this.props.onSave(e),this.props.onCancel())},this.setAddCommentContainerRef=e=>{this.addCommentContainer=e},this.setEditorContainerRef=e=>{this.editorContainer=e},this.setContainerRef=e=>{this.container=e},
this.getScrollParent=e=>e&&"_issue-app-modal-dialog-wrapper"!==e.className?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:this.getScrollParent(e.parentElement):null,this.setOverflowNode=()=>{this.overflowNode||(this.overflowNode=this.getScrollParent(this.container)),this.setSticky()},this.setSticky=()=>{const{container:e}=this;if(this.overflowNode&&e){const t=this.overflowNode.getBoundingClientRect(),s=e.getBoundingClientRect(),n=Math.min(t.bottom,window.innerHeight),a=!this.props.isExpanded&&s.bottom>=n;a!==this.state.isSticky&&this.setState({isSticky:a})}},this.addCommentContainer=void 0,this.editorContainer=void 0,this.container=void 0,this.editorEndElement=void 0,this.overflowNode=void 0,this.observer=void 0,this.onEditorExpandedWithAnalytics=()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onEditorExpandedWithAnalytics()},this.onExpand=()=>{
Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onExpand()}}componentDidMount(){this.overflowNode=this.getScrollParent(this.container),Object(wr.e)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",vr()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}shouldComponentUpdate(e,t){const s=!bo.every((t=>this.props[t]===e[t])),n=!Object.entries(this.state).every((([e,s])=>s===t[e]));return s||n}componentDidUpdate(e){!e.isExpanded&&this.props.isExpanded&&(Object($i.c)().markTimeToFinishTask({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR}),this.scrollEditorIntoView()),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}
componentWillUnmount(){Object(wr.e)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),this.observer&&this.container&&this.observer.unobserve(this.container),this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}setupStickyObserver(){if(window.IntersectionObserver&&this.container){const e=e=>{e.forEach((e=>{const t=!this.props.isExpanded&&!e.isIntersecting;switch(e.target){case this.container:this.state.isSticky!==t&&this.setState({isSticky:t});break;case this.editorEndElement:{const t=!e.isIntersecting&&e.boundingClientRect.y>=0&&e.boundingClientRect.y>=e.rootBounds.y;this.state.shouldHide!==t&&this.setState({shouldHide:t});break}}}))},t={root:this.overflowNode,rootMargin:"0px",threshold:0};this.observer=new IntersectionObserver(e,t),this.observer.observe(this.container)}}setupStickyHidingObserver(){
window.IntersectionObserver&&this.observer&&(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add-old/add-comment-editor/index.js")))().then((()=>setTimeout((()=>{this.editorEndElement=document.getElementsByClassName("issue-editor-end")[0],this.editorEndElement&&this.observer&&this.observer.observe(this.editorEndElement)}))))}removeStickyHidingObserver(){window.IntersectionObserver&&this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}scrollEditorIntoView(){setTimeout((()=>{Object(Cr.b)(this.addCommentContainer,{scrollMode:"if-needed",behavior:"auto",block:"end"})}))}renderAddCommentEditor(){const{hasDraft:e,newCommentDraft:t,isExpanded:s,intl:n,onEdit:a,onCancel:r,onPaste:o,onBlur:c,isServiceDesk:l,isLoading:u,editorSecondaryToolbarComponents:d}=this.props,p=e&&!Object(L.g)(t)?`\u2022 ${n.formatMessage(io.draftPlaceholder)}`:n.formatMessage(io.placeholder),m=i.a.createElement(no,{placeholder:p,
onExpanded:this.onEditorExpandedWithAnalytics}),b=i.a.createElement(ao,{packageName:"issue",fallback:m},i.a.createElement(fo,{externalId:"issue.comment.add-form",defaultValue:t,isExpanded:s,shouldFocus:!0,placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics,onChange:a,onSave:this.onSave,onPaste:o,onBlur:c,onCancel:r,isLoading:u,secondaryToolbarComponents:d}));return l?i.a.createElement(Tr.a,{isExpanded:s,onExpanded:this.onExpand,commentId:"NEW_OPTIMISTIC_COMMENT"},b):b}render(){const{isExpanded:e,isEditorFocused:t,avatarUrl:s}=this.props,n=t&&this.state.shouldHide&&!e,a=i.a.createElement(kr.a,null,"M"),r=i.a.createElement("strong",null,i.a.createElement(v.c,io.commentShortcutHintHeading)),o=()=>!e&&i.a.createElement(ro,null,i.a.createElement(v.c,mo({},io.commentShortcutHintMessage,{values:{shortcutKey:a,proTipText:r}})));return i.a.createElement("span",{ref:this.setAddCommentContainerRef},i.a.createElement(lo,{isSticky:this.state.isSticky,isHidden:n},i.a.createElement(uo,{
isSticky:this.state.isSticky},i.a.createElement(po,null,i.a.createElement(Er.a,{size:"medium",src:s})),i.a.createElement(Sr.a,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"},this.renderAddCommentEditor(),i.a.createElement(o,null)))),i.a.createElement("span",{ref:this.setContainerRef}))}}function ho(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(s),!0).forEach((function(t){Oo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ho(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Oo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}go.displayName="AddCommentForm",go.displayName="AddCommentForm",go.defaultProps={isServiceDesk:!1,isLoading:!1,hasDraft:!1,avatarUrl:void 0,newCommentDraft:null,onExpand:c.a,onSave:c.a,onEdit:c.a,onPaste:c.a,onBlur:c.a,onCancel:c.a};var jo=Object(qt.a)([v.i,Object(is.a)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(r.b)((e=>({authorId:Object(T.a)(e),avatarUrl:Object(P.x)(e),newCommentDraft:Object(cn.j)("NEW_OPTIMISTIC_COMMENT")(e),hasDraft:Object(rr.a)(Object(ir.a)("NEW_OPTIMISTIC_COMMENT"))(e),isExpanded:Object(cn.w)(e)||null!=Object(cn.i)("NEW_OPTIMISTIC_COMMENT")(e),isServiceDesk:Object(T.t)(e),isEditorFocused:Object(on.I)(e)||Object(cn.A)(e),isLoading:Object(T.t)(e)&&Object(cn.x)(e),shouldShowCommentVisibilitySelect:Object(cn.z)(e),visibility:Object(cn.l)("NEW_OPTIMISTIC_COMMENT")(e)||Or.a})),(e=>({onExpand:()=>e(Object(Bs.c)()),onEdit:t=>e(Object(Bs.l)("NEW_OPTIMISTIC_COMMENT",t)),
onVisibilityChange:t=>e(Object(Bs.m)("NEW_OPTIMISTIC_COMMENT",t)),onPaste:t=>e(Object(Bs.x)("NEW_OPTIMISTIC_COMMENT",t)),onBlur:()=>e(Object(Bs.b)()),onCancel:()=>e(Object(Bs.a)()),getOnSave:(t,s)=>e(Object(Bs.B)(yo({id:`NEW_OPTIMISTIC_COMMENT_${(new Date).getTime()}`,createdDate:(new Date).toISOString(),isNewComment:!0},t),s))})),((e,t,s)=>yo(yo(yo(yo({},s),e),t),{},{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[i.a.createElement(yr.a,{key:"commentVisibilitySelect",initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:(s,n)=>{e.shouldShowCommentVisibilitySelect&&n.update({isCommentRestricted:"public"!==e.visibility.type}),t.getOnSave({authorId:e.authorId,bodyAdf:s,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},n)},onEditorExpandedWithAnalytics:s=>{t.onExpand(),Object(Fa.b)(s,"addCommentEditor expanded",{hasDraft:e.hasDraft})}
})))])(go),vo=s("./src/packages/issue/issue-view/src/activity/common/styles/index.js"),Eo=s("./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js");const ko=q.default.div([""]);var wo=e=>{const{list:t,loadingStage:s,canAddComments:n,numPrevCommentsToLoad:r,numNextCommentsToLoad:o,selectedSortOrder:c}=e,[,{register:l}]=Object(hr.b)(),u=Object(a.useCallback)((e=>{l("PERMALINK",e)}),[l]);if(Object(ne.isActivitySortingEnabled)()){const e="NEWEST_FIRST"===c&&r>0||"OLDEST_FIRST"===c&&o>0;if("LOADING"===s||"SAVE_COMMENT_LOADING"===s&&e)return i.a.createElement(vo.d,null,i.a.createElement(Eo.a,null))}return"LOADING"===s&&r>0?i.a.createElement(vo.d,null,i.a.createElement(Eo.a,null)):i.a.createElement("span",null,i.a.createElement(gr.a,{name:"PERMALINK"},i.a.createElement(ko,{innerRef:u
})," "),Object(ne.isSortableStickyAddCommentBoxEnabled)()&&Object(ne.isActivitySortingEnabled)()?i.a.createElement(i.a.Fragment,null,n&&"NEWEST_FIRST"===c&&i.a.createElement(Jr,null),t,n&&"OLDEST_FIRST"===c&&i.a.createElement(Jr,null)):i.a.createElement(i.a.Fragment,null,t,n&&i.a.createElement(jo,null)))},So=s("./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js");const Co="jira.fe.issue.activity.comments.time-to.render-load-more",Io=q.default.div(["margin:"," 0 ","px 0;"],Gn,1.5*z.e);class To extends a.Component{constructor(...e){super(...e),this.state={loadMoreButtonTypeClicked:void 0},this.onLoadOlderButtonClick=(e,t)=>{const{fetchMoreOlderComments:s}=this.props;Object(ne.isActivitySortingEnabled)()&&(Object(Fa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_OLDER_BUTTON"}),Object($i.c)().cancel({key:Co},!0),Object($i.c)().markStartOfInteraction({key:Co}),this.setState({loadMoreButtonTypeClicked:"LOAD_OLDER_BUTTON"})),s()},
this.onLoadNewerButtonClick=(e,t)=>{const{fetchMoreNewerComments:s}=this.props;Object(ne.isActivitySortingEnabled)()&&(Object(Fa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_NEWER_BUTTON"}),Object($i.c)().cancel({key:Co},!0),Object($i.c)().markStartOfInteraction({key:Co}),this.setState({loadMoreButtonTypeClicked:"LOAD_NEWER_BUTTON"})),s()}}componentDidMount(){const{fetchCommentVisibilities:e}=this.props;e&&e()}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments()),Object(ne.isActivitySortingEnabled)()&&(e.isLoadingMoreComments||this.setState({loadMoreButtonTypeClicked:void 0}),this.props.isLoadingMoreComments&&!e.isLoadingMoreComments&&setTimeout((()=>{Object($i.c)().markTimeToFinishTask({key:Co})})))}renderLoadOlderButton(e){
const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadOlderButtonClick:n}=this,a=Object(ne.isActivitySortingEnabled)()?"LOAD_OLDER_BUTTON"===s&&t:t;return Object(ne.isActivitySortingEnabled)()?i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-older-remaining-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} remaining older comments}}",values:{numberToLoad:e}}):i.a.createElement(v.c,{id:"issue.comments-view-sorted-older-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} older comments}}",values:{numberToLoad:e}})):i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:t},i.a.createElement(v.c,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} older comments}}",
values:{numberToLoad:e}}))}renderLoadNewerButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadNewerButtonClick:n}=this,a=Object(ne.isActivitySortingEnabled)()?"LOAD_NEWER_BUTTON"===s&&t:t;return Object(ne.isActivitySortingEnabled)()?i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-newer-remaining-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} remaining newer comments}}",values:{numberToLoad:e}}):i.a.createElement(v.c,{id:"issue.comments-view-sorted-newer-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} newer comments}}",values:{numberToLoad:e}})):i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:t},i.a.createElement(v.c,{id:"issue.comments-view-newer-comments-text",
defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} newer comments}}",values:{numberToLoad:e}}))}render(){const{commentIds:e,canAddComments:t,totalComments:s,loadedComments:n,fullIssueUrl:a,startIndex:r,loadingStage:o,selectedSortOrder:c}=this.props;if(!e.length&&!t)return null;const{numPrevCommentsToLoad:l,numNextCommentsToLoad:u}=Object(Zi.a)(s,n,r),{hasPermalink:d,permalinkId:p}=Object(Na.a)("Comments"),m=e.length?i.a.createElement(i.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadOlderButton(l),i.a.createElement(Io,{"data-test-id":"issue.activity.comments-list"},e.map((e=>i.a.createElement(fr,{key:e,commentId:e,fullIssueUrl:a,isHighlighted:d&&e===p})))),"NEWEST_FIRST"===c&&this.renderLoadOlderButton(u),"OLDEST_FIRST"===c&&this.renderLoadNewerButton(u)):null,b=e.length?i.a.createElement(i.a.Fragment,null,this.renderLoadOlderButton(u),i.a.createElement(Io,{
"data-test-id":"issue.activity.comments-list"},e.map((e=>i.a.createElement(fr,{key:e,commentId:e,fullIssueUrl:a,isHighlighted:d&&e===p})))),this.renderLoadNewerButton(l)):null;return i.a.createElement(Va.a,{sourceType:Ka.f,sourceName:"commentsActivityFeed"},i.a.createElement(wo,{loadingStage:o,canAddComments:t,list:Object(ne.isActivitySortingEnabled)()?m:b,numPrevCommentsToLoad:l,numNextCommentsToLoad:u,selectedSortOrder:c}))}}To.displayName="Comments",To.displayName="Comments",To.defaultProps={canAddComments:!1};const Po=Object(r.b)((e=>({commentIds:Object(ne.isActivitySortingEnabled)()?Object(cn.I)(e):Object(cn.L)(e),canAddComments:Object(cn.b)(e),totalComments:Object(cn.K)(e),startIndex:Object(cn.J)(e),loadedComments:Object(cn.F)(e),isLoadingMoreComments:Object(cn.E)(e),baseUrl:Object(T.f)(e),issueKey:Object(T.y)(e),shouldFetchCommentVisibilities:Object(cn.z)(e),fullIssueUrl:Object(Xi.b)(e),loadingStage:Object(cn.G)(e),
selectedSortOrder:Object(ne.isActivitySortingEnabled)()?Object(Ra.b)(e):null})),(e=>({fetchMoreOlderComments:()=>{e(Object(Bs.t)())},fetchMoreNewerComments:()=>{e(Object(Bs.s)())}})))(Ji(To)),_o=Object(k.b)("comment")(Object(f.a)()(Po));var xo=()=>i.a.createElement(M.a,{id:"issue.issue-view.activity.comments"},i.a.createElement(_o,null)),Do=s("./src/packages/issue/issue-view/src/selectors/approval-selector/index.js"),Ao=s("./node_modules/@atlaskit/logo/dist/es2019/JiraServiceManagementLogo/Icon.js"),Lo=s("./src/packages/servicedesk/approval-decision/src/ui/index.js"),Mo=Object(v.h)({approvalDecisionIconLabel:{id:"issue-view.activity.servicedesk.comments.approval-decision.approval-decision-icon-label",defaultMessage:"Jira Service Management icon"}});const Ro=e=>{const{approval:t,intl:s}=e;if(!t)return null;const n=t.completedDate||t.createdDate||{},a=new Date(n.epochMillis).toJSON();return i.a.createElement(Lo.a,{icon:i.a.createElement(Ao.a,{size:"small",
label:s.formatMessage(Mo.approvalDecisionIconLabel)}),finalDecision:t.finalDecision,status:t.status,time:a,approvers:t.approvers,timeZone:Object(ne.removeTimeZoneFromIssueUser)()?void 0:e.timeZone})};Ro.displayName="ServicedeskApprovalDecision";var No=Object(v.i)(Ro);const Fo="jira.fe.issue.activity.jsd-comments.time-to.render-load-more",Uo=q.default.div(["margin:"," 0 ","px 0;"],Gn,1.5*z.e);class Vo extends a.Component{constructor(...e){super(...e),this.state={loadMoreButtonTypeClicked:void 0},this.onLoadOlderButtonClick=(e,t)=>{const{fetchMoreOlderComments:s}=this.props;Object(ne.isActivitySortingEnabled)()&&(Object(Fa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_OLDER_BUTTON"}),Object($i.c)().cancel({key:Fo},!0),Object($i.c)().markStartOfInteraction({key:Fo}),this.setState({loadMoreButtonTypeClicked:"LOAD_OLDER_BUTTON"})),s()},this.onLoadNewerButtonClick=(e,t)=>{const{fetchMoreNewerComments:s}=this.props
;Object(ne.isActivitySortingEnabled)()&&(Object(Fa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_NEWER_BUTTON"}),Object($i.c)().cancel({key:Fo},!0),Object($i.c)().markStartOfInteraction({key:Fo}),this.setState({loadMoreButtonTypeClicked:"LOAD_NEWER_BUTTON"})),s()},this.renderJsdActivityItems=e=>{const{timeZone:t,fullIssueUrl:s}=this.props,{hasPermalink:n,permalinkId:a}=Object(Na.a)("Comments");return i.a.createElement(Uo,{"data-test-id":"issue.issue-view.activity.servicedesk.jsd-activity-items-list"},e.map((e=>{switch(e.type){case"COMMENT":return e.comment&&i.a.createElement(fr,{key:e.comment.id,commentId:e.comment.id,fullIssueUrl:s,isHighlighted:n&&e.comment.id===a});case"APPROVAL":return e.approval&&i.a.createElement(No,{key:e.approval.id,approval:e.approval,timeZone:Object(ne.removeTimeZoneFromIssueUser)()?void 0:t});default:return null}})))}}UNSAFE_componentWillReceiveProps(e){
e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments()),Object(ne.isActivitySortingEnabled)()&&(e.isLoadingMoreComments||this.setState({loadMoreButtonTypeClicked:void 0}),this.props.isLoadingMoreComments&&!e.isLoadingMoreComments&&setTimeout((()=>{Object($i.c)().markTimeToFinishTask({key:Fo})})))}renderLoadMoreOlderButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadOlderButtonClick:n}=this,a=Object(ne.isActivitySortingEnabled)()?"LOAD_OLDER_BUTTON"===s&&t:t;return Object(ne.isActivitySortingEnabled)()?i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},i.a.createElement("div",{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-older-remaining-comments-text",
defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} remaining older comments}}",values:{numComments:e}}):i.a.createElement(v.c,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:e}}))):i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},i.a.createElement("div",{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},i.a.createElement(v.c,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:e}})))}renderLoadMoreNewerButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadNewerButtonClick:n}=this,a=Object(ne.isActivitySortingEnabled)()?"LOAD_NEWER_BUTTON"===s&&t:t
;return Object(ne.isActivitySortingEnabled)()?i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-newer-remaining-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} remaining newer comments}}",values:{numComments:e}}):i.a.createElement(v.c,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} newer comments}}",values:{numComments:e}})):i.a.createElement(So.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:t},i.a.createElement(v.c,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} newer comments}}",values:{numComments:e}}))}render(){const{canAddComments:e,jsdActivityItems:t,startIndex:s,totalComments:n,loadedComments:a,totalApprovalDecisionsItems:r,loadingStage:o,selectedSortOrder:c}=this.props
;if(!t.length&&!e)return null;const{numPrevActivityItemsToLoad:l,numNextActivityItemsToLoad:u}=Object(Zi.b)(n,a,s,t,r),d=t.length?i.a.createElement(i.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadMoreNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadMoreOlderButton(l),this.renderJsdActivityItems(t),"NEWEST_FIRST"===c&&this.renderLoadMoreOlderButton(u),"OLDEST_FIRST"===c&&this.renderLoadMoreNewerButton(u)):null,p=t.length?i.a.createElement(i.a.Fragment,null,this.renderLoadMoreOlderButton(u),this.renderJsdActivityItems(t),this.renderLoadMoreNewerButton(l)):null;return i.a.createElement(Va.a,{sourceType:Ka.f,sourceName:"jsdCommentsActivityFeed"},i.a.createElement(wo,{loadingStage:o,canAddComments:e,list:Object(ne.isActivitySortingEnabled)()?d:p,numPrevCommentsToLoad:l,numNextCommentsToLoad:u,selectedSortOrder:c}))}}Vo.displayName="ServicedeskComments",Vo.displayName="ServicedeskComments",Vo.defaultProps={canAddComments:!1};const Ko=Object(r.b)((e=>({canAddComments:Object(cn.b)(e),
totalComments:Object(cn.K)(e),startIndex:Object(cn.J)(e),loadedComments:Object(cn.F)(e),isLoadingMoreComments:Object(cn.E)(e),timeZone:Object(ne.removeTimeZoneFromIssueUser)()?void 0:Object(P.z)(e),jsdActivityItems:Object(ne.isActivitySortingEnabled)()?Object(Do.f)(e):Object(Do.c)(e),totalApprovalDecisionsItems:Object(Do.a)(e),fullIssueUrl:Object(Xi.b)(e),loadingStage:Object(cn.G)(e),selectedSortOrder:Object(ne.isActivitySortingEnabled)()?Object(Ra.b)(e):null})),(e=>({fetchMoreOlderComments:()=>{e(Object(Bs.t)())},fetchMoreNewerComments:()=>{e(Object(Bs.s)())}})))(Vo),Wo=Object(k.b)("ServicedeskComments")(Ko);var Bo=()=>i.a.createElement(M.a,{id:"issue.issue-view.activity.servicedesk-comments"},i.a.createElement(Wo,null)),Ho=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),$o=s("./src/packages/forge/forge-ui-async/src/ui/issue-activity/async.js");const Go=q.default.div(["margin-top:",";"],Gn),qo=({source:e,extension:t,extensionData:s})=>{
const n=Object(a.useMemo)((()=>({source:e})),[e]);return i.a.createElement(bi.a,{attributes:n,shouldFireScreenEvent:!0},i.a.createElement(Go,null,i.a.createElement($o.a,{extension:t,extensionData:s,analyticsAttributes:n})))};qo.displayName="ForgeIssueActivity";var zo=qo;const Yo=()=>Object(In.b)("issue.details.timezone-refactoring",!1),Qo=e=>t=>s=>i.a.createElement(M.a,{id:e,packageName:"issue"},i.a.createElement(re.a,{fallback:i.a.createElement(vo.d,null,i.a.createElement(Eo.a,null))},i.a.createElement(t,s))),Jo=Qo("activity-feed-all-activity")(Object(re.f)((()=>s.e("async-activity-feed-item-all-activity").then(s.bind(null,"./src/packages/issue/issue-actions/issue-all-activity/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-all-activity/src/index.js"}));Jo.displayName="AllActivity";const Zo=Qo("activity-feed-item-history")(Object(re.f)((()=>s.e("async-activity-feed-item-history").then(s.bind(null,"./src/packages/issue/issue-actions/issue-history/src/index.js"))),{
moduleId:"./src/packages/issue/issue-actions/issue-history/src/index.js"}));Zo.displayName="History";const Xo=Qo("activity-feed-item-worklog")(Object(re.f)((()=>s.e("async-activity-feed-item-worklog").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/worklog/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/worklog/index.js"}));Xo.displayName="Worklog";const ec=Qo("activity-feed-item-polaris-insights")(Object(re.f)((()=>s.e("async-activity-feed-item-polaris-insights").then(s.bind(null,"./src/packages/polaris/insights/src/index.js"))),{moduleId:"./src/packages/polaris/insights/src/index.js"}));ec.displayName="PolarisInsights";const tc=({selectedItem:e,baseUrl:t,issueKey:s,timeZone:n,selectedSortOrder:a,extensionData:r,source:o,mediaContext:c})=>{if(!e)return null;switch(e.type){case"AllActivity":return Object(ne.isAllActivityEnabled)()?i.a.createElement(Jo,{sortOrder:a,timeZone:Yo()?void 0:n,mediaContext:c}):null;case"JSDComments":
return i.a.createElement(Bo,null);case"Comments":return i.a.createElement(xo,null);case"PolarisInsights":return i.a.createElement(ec,{issueKey:Object(Hi.l)(s)});case La:return i.a.createElement(Jn,{appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,appName:e.name});case"FORGE_ENTITY_TYPE":return i.a.createElement(zo,{key:e.extension.id,source:o,extensionData:r,extension:e.extension});case"History":return i.a.createElement(Zo,{baseUrl:Object(Hi.b)(t),issueKey:Object(Hi.l)(s),timeZone:n,sortOrder:a});case"Worklog":return i.a.createElement(Xo,{timeZone:n});default:return null}},sc=Object(qt.a)([Object(r.b)((e=>({baseUrl:Object(T.f)(e),issueKey:Object(T.y)(e),timeZone:Yo()?void 0:Object(P.z)(e),extensionData:Object(Ho.h)(e),source:Object(T.b)(e)})),{})])(tc),nc=Object(r.b)((e=>({baseUrl:Object(T.f)(e),issueKey:Object(T.y)(e),timeZone:Yo()?void 0:Object(P.z)(e),extensionData:Object(Ho.h)(e),source:Object(T.b)(e),mediaContext:Object(_.a)(e)})),{})(tc)
;var ac=Object(Is.a)(ne.isAllActivityEnabled,nc,sc);function ic(){return(ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function rc(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function oc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(s),!0).forEach((function(t){
lc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const uc=["AllActivity","Comments","JSDComments","History","Worklog"];class dc extends a.Component{constructor(...e){super(...e),this.getAnalyticsData=e=>{switch(e.type){case Aa:return{extensionId:e.extension.id};case La:return Object(xn.a)(e.appKey,e.moduleKey);default:return{}}},this.getEcosystemActivity=()=>this.props.ecosystemModules.map((e=>{switch(e.type){case Aa:return cc({key:Object(_a.e)(e.appKey,e.moduleKey)},e);case La:return cc({key:`${e.moduleKey}${e.appKey}`},e);default:return O.a.safeErrorWithoutCustomerData("issue.issue-actions.activity-feed","Tried to show ecosystem activity with other type than connect or forge"),null}
})).filter(Boolean),this.getAllActivity=()=>{const{intl:e}=this.props;return Object(ne.isAllActivityEnabled)()?[{key:"AllActivity",type:"AllActivity",name:e.formatMessage(Ba.a.allActivity)}]:[]},this.getJSDCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"JSDComments",type:"JSDComments",name:s.formatMessage(Ba.a.comments)}]:[]},this.getCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"Comments",type:"Comments",name:s.formatMessage(Ba.a.comments)}]:[]},this.getHistoryActivity=()=>[{key:"History",type:"History",name:this.props.intl.formatMessage(Ba.a.history)}],this.getWorklogActivity=()=>this.props.shouldShowWorklog?[{key:"Worklog",type:"Worklog",name:this.props.intl.formatMessage(Ba.a.worklog)}]:[],this.getPolarisInsights=()=>this.props.isPolarisProject?[{key:"PolarisInsights",type:"PolarisInsights",name:this.props.intl.formatMessage(Ba.a.polarisData)}]:[],this.getActivityItems=()=>{
const{isServiceDesk:e}=this.props;return[...this.getAllActivity(),...e?this.getJSDCommentActivity():this.getCommentActivity(),...this.getHistoryActivity(),...this.getWorklogActivity(),...this.getPolarisInsights(),...this.getEcosystemActivity()]},this.getSelectedItem=(e=[])=>{if(this.props.selectedItem)return this.props.selectedItem;const t=Object(Na.b)();if(t){const{permalinkType:s}=t,n=e.find((e=>e.type===s));if(n)return Object(ne.isActivitySortingEnabled)()&&this.props.onInitialSelectedActivityItem(n),n}const s=Object(ne.isAllActivityEnabled)()?e[1]:e[0];return Object(ne.isActivitySortingEnabled)()&&this.props.onInitialSelectedActivityItem(s),s},this.selectActivityItem=(e,t,s)=>{const n=[s,this.getAnalyticsData(e)];Object(Fa.h)(t,...n),this.props.onSwitchSelectedActivityItem(e)},this.selectSortOrder=(e,t,s)=>{var n;Object(Fa.h)(t,s,{selectedSortOrder:e,selectedActivityFeed:null===(n=this.props.selectedItem)||void 0===n?void 0:n.key}),this.props.onSwitchSelectedActivitySortOrder(e)},
this.renderChangeboardingMount=()=>{const{permalinkType:e}=Object(Na.b)()||{};return"Comments"===e||"Worklog"===e?i.a.createElement(Ua.a,{onMount:t=>{Object(Fa.b)(t,"Comments"===e?"permalinkWithChangeboardingModalComments mounted":"permalinkWithChangeboardingModalWorklog mounted")}}):null},this.renderActivitySortDropdown=(e,t)=>{const{selectedSortOrder:s,setActivitySortRef:n}=this.props;if(!s)return null;const a=e.length>1?za:Ya,r=!uc.includes(t.type);return i.a.createElement(a,{innerRef:n},i.a.createElement(di,{selectedSortOrder:s,onSelectSortOrder:this.selectSortOrder,isDisabled:r}))},this.renderActvityHeadingRowOld=(e,t)=>{const{intl:{formatMessage:s},setActivityItemsRef:n,shouldDisplayDropdown:a}=this.props;return e.length>1?i.a.createElement(Ya,{leftAlign:!0},i.a.createElement(Qa,{innerRef:n},i.a.createElement(Da.b,null,s(Ba.a.filterBy)),i.a.createElement(Da.d,{leftAlign:!0},a?i.a.createElement(Ii,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem
}):i.a.createElement(Di,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem})))):null},this.renderActvityHeadingRow=(e,t)=>{const{intl:{formatMessage:s},setActivityItemsRef:n,shouldDisplayDropdown:a}=this.props;return e.length>1?i.a.createElement(Ya,null,i.a.createElement(Qa,{innerRef:n},i.a.createElement(Da.b,null,s(Ba.a.filterBy)),i.a.createElement(Da.d,{leftAlign:!0},a?i.a.createElement(Ii,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}):i.a.createElement(Di,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}))),this.renderActivitySortDropdown(e,t)):this.renderActivitySortDropdown(e,t)}}render(){const{permalinkType:e}=Object(Na.b)()||{};if(("Worklog"===e||!this.props.commentIds.length)&&this.props.isPreview)return i.a.createElement(Ma.a,null);const t=this.getActivityItems(),s=this.getSelectedItem(t);if(!t.length||!s)return null;const{intl:{formatMessage:n}}=this.props;return i.a.createElement(Va.a,{sourceType:Ka.f,
sourceName:"activityFeed"},this.renderChangeboardingMount(),i.a.createElement(Da.c,{leftAlign:!0},i.a.createElement(Da.e,{"data-test-id":"issue-activity-feed.heading"},t.length>1?n(Ba.a.activity):s.name)),Object(ne.isActivitySortingEnabled)()?this.renderActvityHeadingRow(t,s):this.renderActvityHeadingRowOld(t,s),Object(ne.isActivitySortingEnabled)()&&i.a.createElement(Bi,null),i.a.createElement(ac,{selectedItem:s,selectedSortOrder:this.props.selectedSortOrder}))}}dc.displayName="FeedDisplay",dc.defaultProps={isServiceDesk:!1,shouldDisplayDropdown:!1,canAddComments:!1,selectedItem:null,ecosystemModules:[]},dc.displayName="FeedDisplay";const pc=e=>{const{projectKey:t}=e,s=rc(e,["projectKey"]),n=Object(Wa.a)(t),a=Object(ne.isPolarisInsightsTabEnabled)()&&n;return i.a.createElement(dc,ic({},s,{isPolarisProject:a}))};pc.displayName="FeedDisplayWrapper";var mc=Object(qt.a)([v.i,Object(r.b)((e=>({isPreview:Object(P.s)(e),isServiceDesk:Object(T.t)(e),shouldShowWorklog:Object(x.c)(e),
canAddComments:Object(cn.b)(e),commentIds:Object(cn.L)(e),ecosystemModules:Object(Dn.e)(e),selectedItem:Object(Ra.a)(e),selectedSortOrder:Object(Ra.b)(e),projectKey:Object(T.D)(e)})),(e=>({onSwitchSelectedActivityItem:t=>{e(Object(xa.b)(t))},onInitialSelectedActivityItem:t=>{e(Object(xa.a)(t))},onSwitchSelectedActivitySortOrder:t=>{e(Object(xa.c)(t)),e(Object(xa.d)(t))}})))])(pc);class bc extends a.Component{constructor(...e){super(...e),this.state={shouldDisplayDropdown:!1},this.componentDidMount=()=>{this.setShouldDisplayDropdown()},this.componentDidUpdate=()=>{this.setShouldDisplayDropdown()},this.setActivityItemsRef=e=>{this.activityItemsRef=e},this.setActivitySortRef=e=>{this.activitySortRef=e},this.setShouldDisplayDropdown=()=>{const{containerWidth:e}=this.props,t=this.updateAndGetTotalWidth();if(0!==e&&0!==t){const s=e<=t+15;this.state.shouldDisplayDropdown!==s&&this.setState({shouldDisplayDropdown:s})}},
this.getActivityItemsRefWidth=()=>this.activityItemsRef?this.activityItemsRef.clientWidth:0,this.getActivitySortRefWidth=()=>this.activitySortRef?this.activitySortRef.clientWidth:0,this.updateAndGetTotalWidth=()=>{const e=Object(ne.isActivitySortingEnabled)()?this.getActivityItemsRefWidth()+this.getActivitySortRefWidth():this.getActivityItemsRefWidth();return this.totalExpandedWidth<e&&(this.totalExpandedWidth=e),this.totalExpandedWidth},this.totalExpandedWidth=0,this.activityItemsRef=void 0,this.activitySortRef=void 0}render(){const{shouldDisplayDropdown:e}=this.state;return i.a.createElement(mc,{shouldDisplayDropdown:e,setActivityItemsRef:this.setActivityItemsRef,setActivitySortRef:this.setActivitySortRef})}}bc.displayName="ActivityFeed",bc.defaultProps={containerWidth:0};var fc=Object(qt.a)([Pa.a])(bc),gc=s("./src/packages/issue/issue-view-layout/src/services/main.js");const hc=["JsdSections","jsd"]
;var yc=s("./src/packages/issue/issue-view/src/views/connect-field.js"),Oc=s("./src/packages/issue/epic-color/src/common/utils.js"),jc=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const vc=Object(rn.createSelector)(Object(on.q)("issuetype"),(e=>e&&e.value.id)),Ec=Object(rn.createSelector)(Object(on.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),Object(on.e)("com.pyxis.greenhopper.jira:gh-epic-color"),((e,t)=>e&&e.key||t&&t.key)),kc=Object(rn.createSelector)(Object(on.e)("com.pyxis.greenhopper.jira:gh-epic-color"),Object(on.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),((e,t)=>e||t));Object(rn.createSelector)(vc,Ec,jc.d,((e,t,s)=>{if(!s)return!1;const n=s.find((t=>t.id===e));return!(!n||!n.fields)&&t in n.fields}));var wc=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),Sc=s("./src/packages/platform/utils/xsrf-token/src/index.js"),Cc=(e,t)=>Object(wc.d)(`${e.baseUrl}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{
"Content-Type":"application/x-www-form-urlencoded"},body:Object(l.stringify)({[e.fieldId]:e.value,issueId:Object(P.l)(t),skipScreenCheck:!0,atl_token:Object(Sc.a)(),singleFieldEdit:!0})}),Ic=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),Tc=s("./node_modules/@atlaskit/color-picker/dist/es2019/index.js"),Pc=Object(v.h)({readOnlyLabel:{id:"issue.views.issue-base.foundation.read-only-label",defaultMessage:"Read-only Color, {color} selected"},label:{id:"issue.views.issue-base.foundation.label",defaultMessage:"Edit color"},purple:{id:"issue.views.issue-base.foundation.purple",defaultMessage:"purple"},darkPurple:{id:"issue.views.issue-base.foundation.dark-purple",defaultMessage:"dark purple"},blue:{id:"issue.views.issue-base.foundation.blue",defaultMessage:"blue"},darkBlue:{id:"issue.views.issue-base.foundation.dark-blue",defaultMessage:"dark blue"},green:{id:"issue.views.issue-base.foundation.green",defaultMessage:"green"},darkGreen:{
id:"issue.views.issue-base.foundation.dark-green",defaultMessage:"dark green"},teal:{id:"issue.views.issue-base.foundation.teal",defaultMessage:"teal"},darkTeal:{id:"issue.views.issue-base.foundation.dark-teal",defaultMessage:"dark teal"},yellow:{id:"issue.views.issue-base.foundation.yellow",defaultMessage:"yellow"},darkYellow:{id:"issue.views.issue-base.foundation.dark-yellow",defaultMessage:"dark yellow"},orange:{id:"issue.views.issue-base.foundation.orange",defaultMessage:"orange"},darkOrange:{id:"issue.views.issue-base.foundation.dark-orange",defaultMessage:"dark orange"},grey:{id:"issue.views.issue-base.foundation.grey",defaultMessage:"grey"},darkGrey:{id:"issue.views.issue-base.foundation.dark-grey",defaultMessage:"dark grey"}});s("./node_modules/focus-visible/dist/focus-visible.js")
;const _c=q.default.div(["margin-left:-2px;padding-top:","px;padding-right:","px;height:","px;button:focus{box-shadow:none;}"],z.e,z.e,4*z.e),xc=q.default.div(["position:absolute;top:1px;left:1px;width:","px;height:","px;border-radius:3px;background:",";"],3*z.e,3*z.e,(e=>e.selectedColor)),Dc=q.default.button(["display:inline-block;position:relative;width:","px;height:","px;border:2px solid transparent;box-sizing:border-box;border-radius:6px;border-color:transparent;background-color:transparent;padding:0;outline:none;transition:box-shadow 0.2s cubic-bezier(0.47,0.03,0.49,1.38);&:focus.focus-visible{border-color:",";}"],3.75*z.e,3.75*z.e,Re.a.B100);class Ac extends a.Component{constructor(...e){super(...e),this.onChange=e=>{const{onChange:t,onConfirm:s}=this.props;t(e),s()},this.generatePalette=Object(Ic.a)(((e,t)=>e.map((({value:e,label:s})=>({value:e,label:t.formatMessage(Pc[s])})))))}render(){const{value:e,intl:t,isEditable:s}=this.props,n=Object(Oc.g)();return i.a.createElement(_c,{
"data-test-id":"issue.views.issue-base.foundation.color.color-picker-wrapper"},s?i.a.createElement(Tc.c,{label:t.formatMessage(Pc.label),popperProps:{positionFixed:!0,modifiers:{offset:{offset:"-10 5"}}},cols:n.length/2,selectedColor:e,palette:this.generatePalette(n,t),onChange:this.onChange}):i.a.createElement(Lc,{intl:t,value:e,palette:this.generatePalette(n,t)}))}}Ac.displayName="UnsafeColorPicker",Ac.displayName="ColorPicker";const Lc=e=>{const t=e.palette.filter((t=>t.value===e.value))[0].label,s=e.intl.formatMessage(Pc.readOnlyLabel,{color:t});return i.a.createElement(Dc,{"aria-label":s},i.a.createElement(xc,{selectedColor:e.value}))};function Mc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Mc(Object(s),!0).forEach((function(t){Nc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Nc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Lc.displayName="ReadOnlyColorPicker";const Fc=(e,t)=>{const s=Object(on.q)(t.fieldId)(e),n=!!s&&"com.pyxis.greenhopper.jira:gh-epic-color"===s.schema.custom;let a={shouldDiscardChangeOnFailure:!0,onSaveFailureFlagType:bs.v};return n&&(a=Rc({saveField:Cc},a)),Rc(Rc({},a),{},{fieldId:t.fieldId,transformFromStateValue:e=>((e,t=!1)=>t?Object(Oc.h)(Object(Oc.e)(e)):Object(Oc.h)(Object(Oc.j)(e)))(e,n),transformToStateValue:e=>((e,t=!1)=>t?Object(Oc.d)(Object(Oc.f)(e)):Object(Oc.i)(Object(Oc.f)(e)))(e,n)})},Uc=Object(qt.a)([v.i,Object(yc.a)(((e,t)=>Fc(e,t)))])(Ac);var Vc=Object(qt.a)([Object(r.b)((e=>({
field:kc(e)})),{})])((e=>e.field?i.a.createElement(Uc,{fieldId:e.field.key}):null)),Kc=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/UIAnalyticsEvent.js"),Wc=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),Bc=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),Hc=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),$c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),Gc=s("./src/packages/issue/fields/components/error-flag/src/main.js");function qc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(s),!0).forEach((function(t){Yc(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qc={action:"confirmed",actionSubject:"inlineEdit",attributes:{componentName:"inlineEdit"}},Jc=zc(zc({},Qc),{},{action:"cancelled"});var Zc=s("./src/packages/issue/fields/summary/src/services/index.js"),Xc=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-area/index.js")
;const el=Object(q.css)(["@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}"]),tl=q.default.h1(["",";width:100%;margin:0;padding:0;color:",";",";"],Re.d.h700(),Re.a.heading,el),sl=Object(a.memo)((({defaultValue:e,passedRef:t,onChange:s})=>i.a.createElement(tl,{innerRef:t,"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},i.a.createElement(Xc.a,{shouldAutoFocus:!0,value:e,onChange:s}))));var nl=Object(v.h)({errorEmpty:{id:"issue-field-summary.error-empty",defaultMessage:"You must specify a summary of the issue."},errorTitle:{id:"issue-field-summary.error-title",defaultMessage:"We couldn't save the issue summary."},errorMessage:{id:"issue-field-summary.error-message",defaultMessage:"Check your connection, then give it another try."},editButtonLabel:{id:"issue-field-summary.edit-button-label",defaultMessage:"Edit summary"},
extendedEditButtonLabel:{id:"issue-field-summary.extended-edit-button-label",defaultMessage:"{inputFieldValue}- edit summary"}});const al=({value:e})=>{const t=null===e?"":e.toString();return i.a.createElement(tl,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},t)};al.displayName="SummaryView";var il=Object(a.memo)((e=>{var t;const{onCancel:s,onEdit:n,onEscape:r,onConfirm:o,onEnter:c,onUpdate:l,readView:u,editView:d,issueKey:p,source:m,onFailure:b,onRenderSuccess:f,onEditFailure:g}=e,h=m&&m.value===Bc.a.MOBILE_ISSUE,[y,O]=Object(a.useState)(!1),[j,v]=Object(a.useState)(!1),{formatMessage:E}=Object(xe.c)(),k=j?E(nl.errorEmpty):void 0,w=Object(a.useRef)(),S=Object(a.useRef)(),[{value:C,error:I,fieldConfig:T},{saveValue:P,resetError:_}]=Object(Zc.a)({issueKey:Object(Hi.l)(p),onSuccess:e=>{l&&l(e)},onFailure:e=>{e instanceof $c.a||e instanceof TypeError||(b&&b(e,S.current),y&&g&&g("summary",e.message))}
}),x=null!==(t=null==T?void 0:T.title)&&void 0!==t?t:"",[D,A]=Object(a.useState)(C),L=!!T&&T.isEditable;Object(a.useEffect)((()=>{f&&f()}),[]),Object(a.useEffect)((()=>{S.current=C,I&&O(!0),y||A(C)}),[I,y,C]);const M=Object(a.useCallback)((e=>{D!==C?(P(D,null,e),O(!1)):O(!1),Object(Fa.h)(e)}),[P,D,C]),R=Object(a.useCallback)((e=>{_(),O(!1),A(C),Object(Fa.h)(e)}),[_,C]),N=Object(a.useCallback)((e=>{document&&document.activeElement&&document.activeElement.blur(),v(!1),R(e),s&&s(e)}),[s,R]),F=Object(a.useCallback)((e=>{null!==D&&""!==D?(document&&document.activeElement&&document.activeElement.blur(),M(e),o&&o(e,D)):j||v(!0)}),[j,o,M,D]),U=Object(a.useCallback)((e=>{O(!0),Object(Fa.h)(e),n&&n(e)}),[n]),V=Object(a.useCallback)((e=>{_();const t=""===e?null:e.toString();null!==t&&v(!1),A(t)}),[_,A]),K=Object(a.useCallback)((e=>{R(e),r&&r(e)}),[r,R]),B=Object(a.useCallback)((e=>{M(e),c&&c(e)}),[c,M]),H=Object(a.useCallback)((()=>{const e=new Kc.a({payload:Qc});F(e)
}),[F]),$=Object(a.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=new Kc.a({payload:Jc});N(t)}),[N]),G=Object(a.useCallback)((()=>{if(L)return void 0!==d&&"function"==typeof d?Object(a.createElement)(d,{passedRef:w,defaultValue:D,onChange:V}):i.a.createElement(sl,{passedRef:w,defaultValue:D,onChange:V})}),[L,d,D,V]);if(w.current&&y&&j){const e=w.current,t=e instanceof HTMLElement?e.querySelector("textarea"):void 0,s=document?document.activeElement:null;t&&t!==s&&t.focus()}return i.a.createElement(W.a,{onEnter:H,onEscape:$},I&&i.a.createElement(Gc.a,{error:I,title:nl.errorTitle,description:nl.errorMessage}),i.a.createElement(Wc.a,{label:x,isLabelHidden:!0,defaultValue:D,readView:(()=>void 0!==u&&"function"==typeof u?Object(a.createElement)(u,{value:C}):i.a.createElement(al,{value:C}))(),editView:G(),onCancel:N,onConfirm:F,onEditRequested:U,onEnter:B,onEscape:K,isFitContainerWidthReadView:!h,isEditable:L,isEditing:y,invalidMessage:k,isInvalid:j,
editButtonLabel:(()=>null!==C?E(nl.extendedEditButtonLabel,{inputFieldValue:C}):E(nl.editButtonLabel))(),confirmButtonLabel:E(Hc.a.confirmButtonLabel,{fieldName:x}),cancelButtonLabel:E(Hc.a.cancelButtonLabel,{fieldName:x})}))})),rl=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/view/common/context/index.js"),ol=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/common/context/index.js"),cl=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/experience-tracker-consumer/tracker-base/view.js");function ll(){return(ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ul(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s])
;return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const dl=e=>t=>{const{forField:s,issueKey:n,failureEventAttributes:r,allowList:o}=t,c=ul(t,["forField","issueKey","failureEventAttributes","allowList"]),l=Object(a.useContext)(ol.a),u=Object(a.useContext)(rl.a),d=u?u.onFailure:void 0;return null==l?i.a.createElement(e,ll({issueKey:n,onEditFailure:d},c)):i.a.createElement(cl.a,{location:s,experienceContext:l,failureEventAttributes:null!=r?r:null,parentProvidersWhitelist:null!=o?o:null},(({onExperienceSuccess:t})=>i.a.createElement(e,ll({onRenderSuccess:t,issueKey:n,onEditFailure:d},c))))};var pl=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function ml(){return(ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const bl=dl(il),fl=e=>{const t=Object(Ps.g)(),s=Object(Ps.a)();return i.a.createElement(bl,ml({forField:"summary",issueKey:t,source:s},e))};fl.displayName="ExtractedSummaryField";var gl=Object(r.b)(null,(e=>({onUpdate:t=>e(Object(pl.e)("summary",t))})))(fl);const hl=q.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),yl=q.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]);var Ol=()=>i.a.createElement(hl,null,i.a.createElement(Vc,null),i.a.createElement(yl,{key:"SUMMARY"
},i.a.createElement(gl,null))),jl=s("./src/packages/platform/utils/constants/src/status-categories.js"),vl=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),El=s("./src/packages/issue/fields/resolution/src/services/main.js"),kl=s("./src/packages/issue/fields/resolution/src/main.js"),wl=s("./src/packages/issue/workflow-transitions-services/src/main.js"),Sl=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),Cl=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),Il=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),Tl=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),Pl=s("./src/packages/issue/fields/status/src/ui/status-view/actions/main.js");const _l=e=>i.a.createElement(Pl.a,e);_l.displayName="ActionsMenu";var xl=_l,Dl=s("./node_modules/@atlaskit/icon/glyph/flag-filled.js"),Al=s.n(Dl)
;const Ll=25*z.e,Ml=q.default.div(["margin-top:","px;display:inline-flex;vertical-align:baseline;margin-left:-","px;height:","px;"],z.e/2,z.e/4,3*z.e),Rl=q.default.span(["color:",";display:inline-block;overflow:hidden;line-height:","px;text-overflow:ellipsis;white-space:nowrap;max-width:","px;"],Re.a.N200,3*z.e,Ll);class Nl extends a.Component{constructor(...e){super(...e),this.state={hasOverflow:!1},this.altStatusLabel=null,this.renderAltStatus=()=>i.a.createElement(Rl,{innerRef:e=>{this.altStatusLabel=e}},this.props.name),this.renderAltStatusWithTooltip=()=>i.a.createElement(je.a,{content:this.props.name,position:"bottom"},this.renderAltStatus())}componentDidMount(){this.updateOverflow()}UNSAFE_componentWillReceiveProps(){this.setState({hasOverflow:!1})}componentDidUpdate(){this.updateOverflow()}updateOverflow(){if(!this.altStatusLabel)return!1;const e=this.altStatusLabel.clientWidth>=Ll;return e!==this.state.hasOverflow&&this.setState({hasOverflow:e}),e}render(){
return i.a.createElement(Ml,{onClick:this.props.onClick,"data-test-id":"issue.views.issue-base.foundation.status.alt-view"},this.props.icon,this.state.hasOverflow?this.renderAltStatusWithTooltip():this.renderAltStatus())}}Nl.displayName="AltStatusField",Nl.defaultProps={onClick:c.a};const Fl=Object(v.h)({flagged:{id:"issue.status-field.flagged",defaultMessage:"Flagged"}}),Ul=({onClick:e})=>{const{formatMessage:t}=Object(xe.c)(),s=t(Fl.flagged);return i.a.createElement(Nl,{onClick:e,name:s,icon:i.a.createElement(Al.a,{size:"medium",primaryColor:Re.a.R300,label:s})})};Ul.displayName="FlaggedField";var Vl=Object(as.a)((e=>({onClick:()=>{e("click")}})))(Ul),Kl=s("./src/packages/issue/fields/status/src/ui/main.js");const Wl=q.default.div([""]),Bl=e=>{const[,{register:t}]=Object(hr.b)(),s=Object(a.useCallback)((e=>{t("status-spotlight",e)}),[t]);return i.a.createElement(Wl,{innerRef:s},i.a.createElement(Kl.a,e))};Bl.displayName="StatusWithRef";var Hl=Bl;z.e,z.e,z.e
;const $l=q.default.div(["padding-bottom:","px;display:inline-flex;flex-wrap:nowrap;overflow:hidden;"],z.e),Gl=q.default.div(["display:flex;flex-wrap:wrap;padding-top:","px;padding-bottom:unset;& > *:not(:last-child){margin-right:","px;}"],1.5*z.e,z.e),ql=q.default.div(["padding-right:unset;padding-bottom:","px;"],z.e),zl=({isEditable:e,isFlagged:t,onStatusChanged:s,onEditCancel:n})=>{const r=Object(Ps.g)(),o=Object(Ps.i)(),c=Object(Wa.j)(o),l=Object(a.useContext)(ol.a),[u]=Object(vl.b)({issueKey:r,fieldKey:"status"}),[{value:d,fieldConfig:p}]=Object(El.a)({issueKey:r}),m=null==d?void 0:d.name,b=Object(wl.b)(),[,f]=Object(wl.a)(),g=Object(a.useMemo)((()=>(e=>null==e?{name:"",id:"",statusCategory:{id:0,name:""}}:{name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}})(u)),[u]),[h]=Object(vl.b)({issueKey:r,fieldKey:"hierarchy-level-same-level"}),y=Object(ne.collapsedHierarchies)()?null==h?void 0:h.level:Object(Wa.c)(o,null==h?void 0:h.id),O=(e,t,s,n)=>{
f.setTransitionInProgress(!0),Object(Fa.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,isConditional:s.transition.isConditional,issueHierarchyLevel:y})};return Object(a.useEffect)((()=>{null==l||l.consumerCallbacks.onSuccess()}),[]),i.a.createElement(M.a,{onError:(e,t)=>{null==l||l.consumerCallbacks.onFailure("status",{errorMessage:t.message})}},i.a.createElement(Gl,null,i.a.createElement(ql,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper"},i.a.createElement(Hl,{issueKey:r,projectType:c,initialValue:g,isEditable:e,appearance:"button",onSubmit:O,onSuccess:s,onEditCancel:n,onFailure:()=>{f.setTransitionInProgress(!1)},preFetchTransitions:!0})),t&&i.a.createElement($l,null,i.a.createElement(Vl,{externalId:"issue.status.flagged"
})),!b&&(null!=m||(null==p?void 0:p.isEditable)&&g.statusCategory.id===Object(jl.categoryIdForStatusCategory)("DONE"))&&i.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.status.resolution"},i.a.createElement(kl.a,{issueKey:r})),!b&&i.a.createElement($l,{"data-test-id":"issue.views.issue-base.foundation.status.actions-wrapper"},i.a.createElement(xl,{initialStatusValue:g,onSubmit:O,onSuccess:s}))))};zl.displayName="StatusView";const Yl={canContainMediaContent:!1,isOptimistic:!1,isRichTextField:!1,shouldSaveDraft:!1,shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,saveField:()=>Promise.resolve()};var Ql=Object(qt.a)([Object(r.b)((e=>({isFlagged:Object(Cl.b)(e),isEditable:Object(P.n)(e)})),(e=>({onStatusChanged:(t,s)=>{e(Object(pl.c)("status",Yl,t)),e(Object(pl.e)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(Sl.c)("status",Yl))}}))),Object(Il.c)("status"),Object(Tl.b)("status")])(zl)
;const Jl=q.default.div(["margin-bottom:","px;"],2*z.e);var Zl=()=>i.a.createElement(Jl,{"data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},i.a.createElement(Ql,{key:"STATUS"})),Xl=s("./src/packages/issue/issue-view-layout-templates/components/item-list/src/index.js"),eu=s("./node_modules/@atlassiansox/engagekit/dist/esm/spotlight/index.js"),tu=s("./node_modules/@atlaskit/tabs/dist/es2019/components/TabItem.js"),su=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),nu=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),au=s("./src/packages/issue/issue-tabs/src/services/main.js"),iu=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),ru=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),ou=s("./src/packages/platform/ui/field-config/src/index.js"),cu=Object(v.h)({defaultTabName:{
id:"issue-view-layout-templates-tab-view.default-tab-name",defaultMessage:"General"}});const lu=q.default.div(["padding-top:","px;display:flex;flex-direction:column;width:100%;"],2*z.e),uu=q.default.div(["position:relative;margin-left:-","px;width:calc(100% + ","px);div[role='tablist']{flex-wrap:wrap;}"],z.e,2*z.e),du=q.default.div(["position:relative;height:14px;"]),pu=q.default.div(["position:relative;display:flex;width:","px;margin:10px ","px 9px ","px;"],10*z.e,z.e,z.e),mu=q.default.div(["overflow:hidden;text-overflow:ellipsis;"]),bu=q.default.div(["visibility:hidden;position:absolute;z-index:-1;width:100%;"]),fu="TemplatesTabViewOnboardingSpotlightTarget",gu=e=>e.elementProps["aria-setsize"]>2?i.a.createElement(mu,null,i.a.createElement(je.a,{content:e.data.label,position:"bottom"},i.a.createElement(tu.a,e))):i.a.createElement(mu,null,i.a.createElement(tu.a,e));gu.displayName="TooltipItem"
;const hu=()=>i.a.createElement(pu,null,i.a.createElement(iu.b,null),i.a.createElement(du,null));hu.displayName="SSRItem";const yu=Object(a.memo)((({tabsContent:e})=>{const{createAnalyticsEvent:t}=Object(Li.a)();return i.a.createElement(su.a,{components:{Item:gu},onSelect:(s,n)=>{const a={totalTabCount:e.length,selectedTabPosition:n+1},i=t({action:"selected",actionSubject:"tab",actionSubjectId:"issueFieldTabs"});Object(Fa.h)(i,"issueFieldTabs",a)},tabs:e})}),(()=>!0)),Ou=Object(a.memo)((({tabsContent:e})=>i.a.createElement(su.a,{components:{Content:()=>null},tabs:e})),(()=>!0));var ju=({items:e,area:t})=>{const s=Object(xe.c)(),[{issueTabs:n}]=Object(au.a)(),r=e.filter((e=>"TabLayout"!==e.__typename)),o={label:s.formatMessage(cu.defaultTabName),content:i.a.createElement(lu,null,i.a.createElement(Xl.a,{items:r,area:t}))},c=e.filter((e=>"TabLayout"===e.__typename)),l=Object(Ps.g)(),[u]=Object(nu.c)(l),[d]=Object(vl.d)(l),p=Object(ou.W)(),m=Object(a.useCallback)((e=>{if(!u||!u[e])return!1
;const t=d&&(null===d[e]||void 0===d[e]);if(!u[e].isEditable&&t)return!1;const{custom:s,system:n,type:a}=u&&u[e].schema||{},i=null!==n?n:"",r=Object(ru.a)(s)||i||a;return void 0!==r&&Object.values(p).includes(r)}),[u,d,p]);if(0===Object.keys(n).length){const e=[o,{}];return i.a.createElement(su.a,{components:{Item:hu},tabs:e})}const b=c.map((({id:e})=>{const s=n[e];if(void 0!==s&&s.name&&s.items&&s.items.length>0){const e=s.items.filter((e=>m(e.id)));return e.length<1?null:{label:s.name,content:i.a.createElement(lu,null,i.a.createElement(Xl.a,{items:e,area:t}))}}return null})).filter((e=>null!==e)),f=r.length>0?[o,...b]:b;if(0===f.length)return null;if(1===f.length){const e=f[0];return e&&e.content}return i.a.createElement(uu,null,i.a.createElement(bu,null,i.a.createElement(gr.a,{name:fu},i.a.createElement(Ou,{tabsContent:f}))),i.a.createElement(eu.a,{engagementId:fu}),i.a.createElement(Ua.a,{onMount:e=>Object(Fa.b)(e,"TemplatesTabViewOnboarding mounted")}),i.a.createElement(yu,{
tabsContent:f}))};const vu=({items:e})=>e.find((({__typename:e})=>"TabLayout"===e))?i.a.createElement(ju,{items:e,area:"content"}):i.a.createElement(Xl.a,{items:e,area:"content"});vu.displayName="ContentSectionView";var Eu=()=>{const[{contentSection:e}]=Object(gc.d)();return i.a.createElement(vu,{items:e.items})},ku=s("./node_modules/lodash/uniqBy.js"),wu=s.n(ku),Su=s("./src/packages/issue/fields/components/field-pin/src/utils.js"),Cu=s("./src/packages/issue/ecosystem-service/src/services/main.js"),Iu=s("./src/packages/issue/forge-service/src/services/main.js"),Tu=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),Pu=s("./src/packages/issue/project-permissions-service/src/main.js"),_u=s("./src/packages/issue/jira-settings-service/src/main.js"),xu=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),Du=s("./src/packages/issue/issue-view/src/configurations.js");function Au(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(s),!0).forEach((function(t){Mu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Au(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ru=(e,t)=>{const s=t[e];if(!s&&Object.keys(Du.n).includes(e)){return((e,t)=>ns()(t,(t=>(t.schema&&t.schema.custom)===e)))(Du.n[e],t)}return s},Nu=e=>((e,t)=>e.filter((e=>Object(xu.a)(e,t))))(e,{}).map((e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{id:t,type:"forgeGlance",payload:{label:n,title:s,status:a,extension:e,
glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}}}));function Fu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Uu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(s),!0).forEach((function(t){Vu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ku=()=>({primaryItems:[],secondaryItems:[],pinnedFields:[]}),Wu=[{__typename:"PanelSectionItem",id:"devSummary"}],Bu=(e=[])=>{
const t=Object(Ps.g)(),s=Object(Wa.h)(t),{ecosystemEnabled:n}=Object(Wa.d)(s),a=Object(Wa.e)(s),[i]=Object(Su.e)(t),[r]=Object(Iu.b)(),[o]=Object(Cu.b)(),[c]=Object(gc.d)(),[l]=Object(vl.d)(t),[u]=Object(nu.c)(t),[d]=Object(_u.c)(),[p]=Object(Pu.d)(s),m=Object(Ps.a)(),b=void 0!==a&&a.isSimplified,f=Object(Ps.c)();if(!u)return Ku();const g=!0===n?Nu(r):[],h=(e=>Object.keys(e).reduce(((t,s)=>{const n=e[s];return[...t,...Object.keys(n).map((e=>n[e]))]}),[]).map((e=>({id:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,type:"ecosystemGlance",payload:Lu(Lu({},e),{},{glanceType:"CONNECT_ENTITY_TYPE"})}))))(o),y=d.isTimeTrackingEnabled&&void 0!==u.timetracking,O=(null==m?void 0:m.value)===Bc.a.MOBILE_ISSUE,j=y&&p.canLogWork&&!O,v=[...c.primaryContextSection.items,...c.secondaryContextSection.items,...b?Wu:[]],E=wu()(v,"id").reduce(((t,s)=>{if(i.includes(s.id))return Uu(Uu({},t),{},{pinnedFields:[...t.pinnedFields,s]});if(s.id===f)return Uu(Uu({},t),{},{primaryItems:[...t.primaryItems,s]})
;if(e.includes(s.id))return Uu(Uu({},t),{},{primaryItems:[...t.primaryItems,s]});if(Object(Tu.c)(u[s.id]))return Uu(Uu({},t),{},{primaryItems:[...t.primaryItems,s]});if(((e,t,s,n,a)=>{const i=Ru(e,t),r=Object(ru.b)(i);return!i||void 0===r||!(!Object(An.d)(s)||i.isEditable)&&"assignee"!==e&&"com.atlassian.servicedesk:vp-origin"!==r&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==r&&("timetracking"!==e||Object(An.h)(n,a))})(s.id,u,l[s.id],j,y))return t;const n=!!c.secondaryContextSection.items.find((e=>e.id===s.id));return Uu(Uu({},t),{},{primaryItems:n?t.primaryItems:[...t.primaryItems,s],secondaryItems:n?[...t.secondaryItems,s]:t.secondaryItems})}),Ku());return E.primaryItems=(e=>{let t=!1;const s=["FieldSectionItem","PanelSectionItem"],n=["assignee","SLA_PANEL"];return e.map((e=>{const a=void 0!==e.__typename?e.__typename:"";return t||n.includes(e.id)||!s.includes(a)?e:(t=!0,Lu(Lu({},e),{},{globalRef:"PIN_FIELD"}))}))
})([...E.primaryItems,...g,...h]),E};const Hu=(e=[])=>{const t=Bu(e),{pinnedFields:s,primaryItems:n,secondaryItems:i}=t,r=Object(Ps.g)(),o=[...s,...n,...i],[c,l]=Object(a.useState)([]),[u,d]=Object(a.useState)([]),[p,m]=Object(a.useState)(s.length),[b,f]=Object(a.useState)(o.length),[g]=Object(vl.d)(r),h=()=>{const e=i.filter((e=>Object(An.d)(g[e.id]))),t=i.filter((e=>!Object(An.d)(g[e.id])));l(e),d(t)};Object(a.useEffect)((()=>{h()}),[]);p!==s.length&&(m(s.length),h());b!==o.length&&(f(o.length),h());return[{pinnedFields:s,visibleItems:[...n,...u],hiddenItems:c},h]};var $u=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),Gu=s("./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js"),qu=s("./src/packages/issue/fields/components/field-pin/src/styled.js")
;const zu=q.default.div([""]),Yu=q.default.div(["display:flex;justify-content:space-between;background-color:",";margin-bottom:","px;padding:","px ","px ","px ","px;border:1px solid ",";border-radius:3px;&:hover ~ "," ","{visibility:visible;animation:"," 0.15s linear forwards;& ","{color:",";}}"],Re.a.P50,z.e,z.e,z.e,z.e,1.5*z.e,Re.a.P75,zu,qu.a,$u.h,qu.c,Re.a.N800),Qu=q.default.div([""," margin-top:","px;margin-bottom:","px;color:",";"],Re.d.h200,.5*z.e,2*z.e,Re.a.P500),Ju=q.default.div(["margin-bottom:","px;color:",";"],.5*z.e,Re.a.P500),Zu=q.default.div(["flex-shrink:0;"]),Xu=Object(q.default)(Gu.a)(["vertical-align:text-bottom;"]);var ed=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),td=s.n(ed);const sd=Object(v.h)({title:{id:"issue-view-layout-templates-pinned-fields-banner.title",defaultMessage:"Your pinned fields"},description:{id:"issue-view-layout-templates-pinned-fields-banner.description",
defaultMessage:"Click on the {pinnedIcon} next to a field label to start pinning."},dismissTooltip:{id:"issue-view-layout-templates-pinned-fields-banner.dismiss-tooltip",defaultMessage:"Hide message"}});function nd(){return(nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ad=()=>{const{formatMessage:e}=Object(xe.c)(),[t,s]=Object(a.useState)(!0);if(!t)return null;const n=e(sd.dismissTooltip);return i.a.createElement(Yu,null,i.a.createElement("div",null,i.a.createElement(Qu,null,e(sd.title)),i.a.createElement(Ju,null,i.a.createElement(v.c,nd({},sd.description,{values:{pinnedIcon:i.a.createElement(Xu,null)}})))),i.a.createElement(Zu,null,i.a.createElement(je.a,{content:n},i.a.createElement(H.a,{spacing:"none",appearance:"subtle",onClick:()=>{s(!1)},iconBefore:i.a.createElement(td.a,{label:n})}))))};ad.displayName="PinnedFieldsBanner";var id=ad
;const rd=Object(v.h)({title:{id:"issue-view-layout-templates-pinned-fields-banner-old.title",defaultMessage:"Your pinned fields"},description:{id:"issue-view-layout-templates-pinned-fields-banner-old.description",defaultMessage:"Click on the {pinnedIcon} next to a field label for them to show here."},dismissTooltip:{id:"issue-view-layout-templates-pinned-fields-banner-old.dismiss-tooltip",defaultMessage:"Hide message"}
}),od=q.default.div(["display:flex;justify-content:space-between;background-color:",";margin:-8px -12px 12px;padding:8px 12px 16px;border-radius:3px;&:hover ~ div ","{visibility:visible;animation:"," 0.15s linear forwards;& ","{color:",";}}"],Re.a.P50,qu.a,$u.h,qu.c,Re.a.N800),cd=q.default.div(["",";margin-top:6px;margin-bottom:16px;color:",";font-size:11px;"],Re.d.h300,Re.a.P500),ld=q.default.div(["flex-shrink:0;color:",";height:","px;cursor:pointer;"],Re.a.P500,3*z.e),ud=q.default.div(["flex-shrink:0;color:",";"],Re.a.P500),dd=Object(q.default)(Gu.a)(["vertical-align:text-bottom;"]);function pd(){return(pd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const md=()=>{const{formatMessage:e}=Object(xe.c)(),[t,s]=Object(a.useState)(!0);if(!t)return null;const n=e(rd.dismissTooltip)
;return i.a.createElement(od,null,i.a.createElement("div",null,i.a.createElement(cd,null,e(rd.title)),i.a.createElement(ud,null,i.a.createElement(v.c,pd({},rd.description,{values:{pinnedIcon:i.a.createElement(dd,null)}})))),i.a.createElement(ld,{onClick:()=>{s(!1)}},i.a.createElement(je.a,{content:n},i.a.createElement(td.a,{label:n}))))};md.displayName="PinnedFieldsBanner";var bd=md,fd=Object(v.h)({header:{id:"issue.views.issue-base.context.context-items.pinned-fields-box.header",defaultMessage:"Your pinned fields"}});const gd=q.default.div(["margin:-8px -","px ","px;padding:","px ","px 0px;border-radius:3px;display:flex;flex-direction:column;background:",";&:empty{display:none;}&::before{",";content:'","';margin-top:","px;margin-bottom:","px;text-transform:uppercase;font-size:11px;}"],1.5*z.e,1.5*z.e,1.25*z.e,1.5*z.e,Re.a.N20,Re.d.h200(),(e=>e.header),z.e/2,1.5*z.e),hd=({children:e})=>{const t=Object(xe.c)(),{formatMessage:s}=t;return i.a.createElement(gd,{header:s(fd.header),
"data-test-id":"issue.views.issue-base.context.context-items.pinned-fields-box.pinned-items"},e)};hd.displayName="PinnedFieldsBox";var yd=hd;const Od=()=>Object(In.b)("issue.details.pinned-fields-click-through-banner",!1);var jd=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),vd=s.n(jd),Ed=s("./node_modules/@atlaskit/icon/glyph/chevron-right.js"),kd=s.n(Ed),wd=s("./node_modules/@atlaskit/icon/glyph/settings.js"),Sd=s.n(wd),Cd=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js")
;const Id=z.a+1,Td=q.default.div(["box-sizing:border-box;margin-bottom:","px;"],z.e),Pd=Object(q.default)(Cd.a)(["display:none !important;margin-right:","px;padding:0 !important;svg{margin-bottom:-2px;}"],z.e),_d=q.default.div(["min-width:24px;"]),xd=q.default.strong(["color:",";font-size:12px;padding-right:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:60%;font-weight:600;flex-shrink:0;"],Re.a.N800,z.e/2),Dd=q.default.span(["color:",";font-size:12px;padding-right:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],Re.a.N90,z.e),Ad=q.default.div(["padding:","px ","px ","px ","px;box-sizing:border-box;> ",":last-child{margin-bottom:0;}",""],z.e,z.e,z.e,12,$u.d,(({isOpen:e})=>e?Object(q.css)(["border:1px solid ",";border-top:0;border-bottom-right-radius:","px;border-bottom-left-radius:","px;"],Re.a.N40,Id,Id):Object(q.css)(["display:none;"]))),Ld={Title:xd,SubTitle:Dd,
Header:Object(q.default)(Ad)(["position:relative;display:flex;padding-top:","px;padding-bottom:","px;border-radius:","px;border:1px solid ",";align-items:center;&:hover{background:",";cursor:pointer;","{display:block !important;}}&:focus{outline:0;}&:active{background-color:",";border-color:",";",",",",svg{color:"," !important;}}",""],z.e-2,z.e-2,Id,Re.a.N40,Re.a.N20,Pd,Re.a.B50,Re.a.B300,Dd,xd,Re.a.B300,(({isOpen:e})=>e?Object(q.css)(["border-bottom-right-radius:0;border-bottom-left-radius:0;"]):"")),HeaderRightAligned:q.default.div(["margin-left:auto;display:flex;"]),Body:Ad,Group:Td},Md=({Group:e=Td,Header:t,children:s})=>i.a.createElement(e,null,i.a.createElement(t,null),s);Md.displayName="BaseGroup";var Rd=Md;function Nd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fd(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?Nd(Object(s),!0).forEach((function(t){Ud(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ud(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vd=e=>{const{title:t,subTitle:s,children:n,isOpen:a,onHeaderClick:r,renderHeaderActions:o,components:c}=e,l=Fd(Fd({},Ld),c),{Group:u,Title:d,SubTitle:p,Header:m,Body:b,HeaderRightAligned:f}=l;return i.a.createElement(Rd,{Header:()=>i.a.createElement(m,{isOpen:a,onClick:r,tabIndex:0},i.a.createElement(d,null,t),void 0!==s&&!a&&i.a.createElement(p,null,s),"function"==typeof o&&i.a.createElement(f,null,o())),Group:u},void 0!==n&&i.a.createElement(b,{isOpen:a},n))};Vd.displayName="CollapsibleGroupFactory";var Kd=Vd;var Wd=Object(v.h)({arrowRight:{
id:"issue-view-layout-group.arrow-right",defaultMessage:"Right Arrow"},arrowDown:{id:"issue-view-layout-group.arrow-down",defaultMessage:"Down Arrow"},configure:{id:"issue-view-layout-group.configure",defaultMessage:"Configure"}});const Bd=({children:e,title:t,subTitle:s,onChange:n,components:r,projectKey:o,id:c,onConfigButtonClick:l,initialOpened:u})=>{const{formatMessage:d}=Object(xe.c)(),[p,m]=((e,t,s)=>{const n=((e,t)=>`group.state.${e}.${t}`)(e,t),[i,r]=Object(a.useState)((()=>{try{const e=window.localStorage.getItem(n);if("true"===e)return!0;if("false"===e)return!1;throw Error("Invalid group state value")}catch(e){return s}}));return[i,e=>{try{r(e),window.localStorage.setItem(n,e)}catch(t){}}]})(o,c,!!u),b=e=>{e.preventDefault(),e.stopPropagation(),l&&l(e)};return i.a.createElement(Kd,{title:t,subTitle:s,isOpen:p,onHeaderClick:()=>{m(!p),"function"==typeof n&&n(!p)},components:r,renderHeaderActions:()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{
content:d(Wd.configure)},"function"==typeof l&&i.a.createElement(Pd,{spacing:"compact",appearance:"subtle",onClick:b},i.a.createElement(Sd.a,{label:d(Wd.configure),size:"small",primaryColor:Re.a.N90}))),i.a.createElement(_d,null,p?i.a.createElement(vd.a,{label:d(Wd.arrowDown),primaryColor:Re.a.N500}):i.a.createElement(kd.a,{label:d(Wd.arrowRight),primaryColor:Re.a.N500})))},e)};Bd.displayName="CollapsibleGroup";var Hd=Bd;const $d=q.default.div(["margin-bottom:","px;"],z.e),Gd=e=>e.children.length?Array.prototype.every.call(e.children,Gd):""===e.innerHTML,qd=({onChange:e,children:t,fieldNames:s,groupId:n,title:r,initialOpened:o})=>{const c=Object(Ps.g)(),l=Object(Wa.h)(c),[u,d]=Object(a.useState)(!1),p=Object(a.useRef)(null);return Object(a.useEffect)((()=>{null!=p&&p.current&&(Gd(p.current)?u&&d(!1):!u&&d(!0))}),[p,t,u]),i.a.createElement($d,{hidden:!u},i.a.createElement(Hd,{id:n,projectKey:l,title:r,onChange:e,subTitle:s.join(", "),initialOpened:o},i.a.createElement("div",{ref:p},t)))
};qd.displayName="ContextGroup";var zd=qd,Yd=s("./node_modules/@atlaskit/icon/glyph/chevron-up.js"),Qd=s.n(Yd),Jd=Object(v.h)({showLessText:{id:"issue-view-layout-templates-views.context.visible-hidden.expander.show-less-button.show-less-text",defaultMessage:"Show less"}}),Zd=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button-old/index.js");const Xd=Object(q.default)(Zd.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],Re.a.B400,-z.e,-z.e/2),ep=({onCollapse:e})=>{const t=Object(xe.c)();return i.a.createElement(Xd,{externalId:"showmorelink.collapse",appearance:"subtle",iconBefore:i.a.createElement(Qd.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:t.formatMessage(Jd.showLessText),shouldFitContainer:!0,onClick:(t,s)=>{e(),Object(Fa.h)(s,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container"
},t.formatMessage(Jd.showLessText))};ep.displayName="ShowLessButton";var tp=ep,sp=Object(v.h)({showMoreFields:{id:"issue-view-layout-templates-views.context.visible-hidden.expander.show-more-button.show-more-fields",defaultMessage:"{fieldCount, plural, one {Show 1 more field} other {Show {fieldCount} more fields}}"},showMoreAltText:{id:"issue-view-layout-templates-views.context.visible-hidden.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more"}});const np=q.default.small(["display:block;margin-top:","px;margin-bottom:","px;text-overflow:ellipsis;overflow:hidden;color:",";font-size:","px;line-height:",";"],-z.e/2,z.e/2,Re.a.N200,1.5*z.e,z.e/6),ap=Object(q.default)(Zd.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],Re.a.B400,-z.e,-z.e/2),ip=({visibleSecondaryContextItemNameList:e,fieldCount:t,onExpand:s})=>{const n=Object(xe.c)(),a=e.join(", ")
;return i.a.createElement(je.a,{content:a},i.a.createElement(ap,{externalId:"showmorelink.expand",appearance:"subtle",iconBefore:i.a.createElement(vd.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:n.formatMessage(sp.showMoreAltText),shouldFitContainer:!0,onClick:(e,t)=>{s(),Object(Fa.h)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container"},n.formatMessage(sp.showMoreFields,{fieldCount:t}),i.a.createElement(np,null,a)))};ip.displayName="ShowMoreButton";var rp=ip;const op=q.default.div(["margin-left:","px;margin-bottom:","px;"],-z.e,1.5*z.e);function cp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const lp=e=>{
let{isShowMoreExpanded:t,onCollapse:s}=e,n=cp(e,["isShowMoreExpanded","onCollapse"]);return i.a.createElement(op,null,t?i.a.createElement(tp,{onCollapse:s}):i.a.createElement(rp,n))};lp.displayName="ContextItemsExpander";var up=lp,dp=Object(v.h)({moreFieldsText:{id:"issue-view-layout-templates-views.context.visible-hidden.more-fields-text",defaultMessage:"More fields"},pinnedFieldsText:{id:"issue-view-layout-templates-views.context.visible-hidden.pinned-fields-text",defaultMessage:"Pinned fields"},detailsText:{id:"issue-view-layout-templates-views.context.visible-hidden.details-text",defaultMessage:"Details"}});const pp=q.default.div(["padding-top:","px;box-shadow:inset 0 2px 0 0 ",";margin-left:","px;"],z.e,Re.a.N30,-z.e);var mp=({items:e,onToggleExpanded:t})=>{const[s,n]=Object(a.useState)(!1),{formatMessage:r}=Object(xe.c)(),o=Object(Ps.g)(),[c]=Object(nu.c)(o),l=Object(a.useCallback)((()=>{t(),n(!s)
}),[s,t]),u=(e,t)=>c&&c[t.id]?e.concat(c[t.id].title):e,d=e.hiddenItems.reduce(u,[]),p=e.visibleItems.reduce(u,[]),m=e.pinnedFields.reduce(u,[]),b=Od()?zu:a.Fragment;return(()=>Object(In.b)("issue.details.grouping.pre-early-access",!1))()?i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},Od()&&0===e.pinnedFields.length&&i.a.createElement(id,null),i.a.createElement(b,null,i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},e.pinnedFields.length>=1&&i.a.createElement(zd,{title:r(dp.pinnedFieldsText),groupId:"pinned-context-items",fieldNames:m,initialOpened:!0},i.a.createElement(Xl.a,{items:e.pinnedFields,area:"context"})),i.a.createElement(zd,{title:r(dp.detailsText),groupId:"details-group",fieldNames:p,initialOpened:!0},i.a.createElement(Xl.a,{items:e.visibleItems,area:"context"}))),e.hiddenItems.length>=1&&i.a.createElement(zd,{title:r(dp.moreFieldsText),groupId:"secondary-context-items",onChange:t,
fieldNames:d,initialOpened:!1},i.a.createElement(Xl.a,{items:e.hiddenItems,area:"context"})))):i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},Od()&&0===e.pinnedFields.length&&i.a.createElement(bd,null),i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},i.a.createElement(yd,null,i.a.createElement(Xl.a,{items:e.pinnedFields,area:"context"})),i.a.createElement(Xl.a,{items:e.visibleItems,area:"context"})),s&&i.a.createElement(Xl.a,{items:e.hiddenItems,area:"context"}),e.hiddenItems.length>=1&&i.a.createElement(gr.a,{name:"SHOW_MORE"},i.a.createElement(up,{isShowMoreExpanded:s,fieldCount:e.hiddenItems.length,visibleSecondaryContextItemNameList:d,onExpand:l,onCollapse:l})),i.a.createElement(pp,null))};const bp=["devSummary"];var fp=()=>{const[e,t]=Hu(bp);return i.a.createElement(mp,{items:e,onToggleExpanded:t})}
;const gp=q.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),hp=q.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]);var yp=()=>i.a.createElement(gp,null,i.a.createElement(hp,{key:"SUMMARY"},i.a.createElement(gl,null))),Op=s("./src/packages/issue/issue-view/src/views/issue-base/context/approval-panel/approval-panel.js");const jp=q.default.div([""]),vp=q.default.div(["margin-bottom:","px;"],2*z.e);var Ep=()=>{const[,{register:e}]=Object(hr.b)(),t=Object(a.useCallback)((t=>{e("status-and-approval-spotlight",t)}),[e]);return i.a.createElement(jp,{innerRef:t},i.a.createElement(vp,{"data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},i.a.createElement(Ql,{key:"WRAPPED_STATUS"}),i.a.createElement(Op.a,null)))},kp=s("./src/packages/servicedesk/request-details-panel/src/index.js"),wp=s("./src/packages/issue/issue-view-layout-templates/utils/src/index.js");function Sp(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sp(Object(s),!0).forEach((function(t){Ip(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ip(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tp=["com.atlassian.jira.plugin.system.customfieldtypes:select","description","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"];var Pp=()=>{const[e]=Object(gc.d)();let t=e.requestPortalSection.items;const s=Object(Ps.g)(),[n]=Object(nu.c)(s);t=((e,t)=>e.map((e=>{const{type:s,id:n}=Object(wp.a)(t[e.id],e)
;return Tp.includes(s)?Cp(Cp({},e),{},{globalRef:`global-spotlight-target-${n}`}):e})))(e.requestPortalSection.items,n);const a=[{id:"JSM_REQUEST_PANEL",type:"CustomItem",item:i.a.createElement(kp.a,{requestPanelItems:t})},...e.contentSection.items];return i.a.createElement(vu,{items:a})};function _p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_p(Object(s),!0).forEach((function(t){Dp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Dp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Ap=["com.atlassian.jira.plugin.system.customfieldtypes:select","description","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"],Lp=(e,t)=>e.map((e=>{const{type:s,id:n}=Object(wp.a)(t[e.id],e);return Ap.includes(s)?xp(xp({},e),{},{globalRef:`global-spotlight-target-${n}`}):e})),Mp=["SLA_PANEL","ASSET_ONBOARDING"];var Rp=()=>{const[e,t]=Hu(Mp),s=Object(Ps.g)(),n=Object(Wa.h)(s),[a]=Object(vl.b)({issueKey:s,fieldKey:"status"}),[r]=Object(nu.c)(s),[o]=Object(vl.d)(s),c=Object(Wa.e)(n),l=((e,t)=>({hiddenItems:Lp(e.hiddenItems,t),pinnedFields:Lp(e.pinnedFields,t),visibleItems:Lp(e.visibleItems,t)}))(((e,t,s,n,a)=>{if(!e)return t;const i=t.visibleItems.find((e=>{var t;const s=n[e.id];return"com.atlassian.servicedesk:sd-request-feedback"===(null==s||null===(t=s.schema)||void 0===t?void 0:t.custom)}));if(void 0===i)return t;const r=t.visibleItems.filter((e=>{var t;const s=n[e.id]
;return"com.atlassian.servicedesk:sd-request-feedback"!==(null==s||null===(t=s.schema)||void 0===t?void 0:t.custom)})),o=void 0!==a[i.id]&&null!==a[i.id];return s.statusCategory.id===Object(jl.categoryIdForStatusCategory)("DONE")&&o?xp(xp({},t),{},{visibleItems:[i,...r]}):xp(xp({},t),{},{visibleItems:r})})(void 0!==c&&c.isSimplified,e,a,r,o),r);return i.a.createElement(mp,{items:l,onToggleExpanded:t})};const Np=()=>{const[e]=Object(gc.e)();switch(e){case hc[0]:case hc[1]:return i.a.createElement(yp,null);default:return i.a.createElement(Ol,null)}},Fp=()=>{const[e]=Object(gc.e)();switch(e){case hc[0]:case hc[1]:return i.a.createElement(Ep,null);default:return i.a.createElement(Zl,null)}},Up=()=>{const[e]=Object(gc.e)();switch(e){case hc[0]:case hc[1]:return i.a.createElement(Pp,null);default:return i.a.createElement(Eu,null)}},Vp=()=>{const[e]=Object(gc.e)();switch(e){case hc[0]:case hc[1]:return i.a.createElement(Rp,null);default:return i.a.createElement(fp,null)}}
;var Kp=s("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js"),Wp=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),Bp=s("./node_modules/uuid/index.js"),Hp=s.n(Bp),$p=s("./src/packages/platform/controllers/tenant-context/src/components/cloud-id/index.js"),Gp=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),qp=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),zp=s("./node_modules/lodash/memoize.js"),Yp=s.n(zp),Qp=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Jp=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const Zp=e=>e.issues.map((e=>({id:e.id}))),Xp=Yp()(((e,t,s,n)=>{const a=Qp.default.now(),i=`${t}/gateway/api/similarity/issue/project`;return Object(Jp.a)(i,{body:JSON.stringify({context:{subProduct:"serviceDesk",product:"jira",sessionId:e.sessionId,containerId:e.projectId,objectId:e.issueId,principalId:"context",tenantId:e.cloudId},filter:s,limit:15,
estimatedTotalIssues:1e3}),headers:{"Content-Type":"application/json"},method:"POST"}).then((e=>(Object(Fa.b)(n({}),"fetchRelatedIssues succeeded",{elapsedTimeMilli:Math.floor(Qp.default.now()-a),results:Zp(e),resultsSize:e.issues.length}),e))).catch((e=>{throw Object(Fa.b)(n({}),"fetchRelatedIssues failed",{elapsedTimeMilli:Math.floor(Qp.default.now()-a),traceId:e.traceId,statusCode:e.statusCode}),e}))}),((e,t,s)=>`${e.issueId} - ${s.jql}`)),em=["summary","issuetype"],tm=Xp,sm={data:void 0,isLoading:!1,error:void 0,baseUrl:Object(Hi.b)(""),issueId:Object(Hi.j)(""),projectId:Object(Hi.p)(""),projectKey:Object(Hi.q)(""),cloudId:Object(Hi.c)(""),status:"OPEN"},nm={fetchRelatedIssuesForIssue:(e,t)=>async({getState:s,setState:n})=>{const a=s();n({isLoading:!0,error:void 0});try{const{projectId:i,issueId:r,cloudId:o,projectKey:c,baseUrl:l,status:u}=a,d={projectId:i,issueId:r,sessionId:e,cloudId:o},p={jql:(e=>"OPEN"===e?"statusCategory != Done":"statusCategory = Done")(u),fields:em,
projectKey:c,columnTypesAsJson:em},m=await tm(d,l,p,t),{status:b}=s();if(u!==b)return;n({data:(e=>e.issues.map(((e,t)=>({id:e.id,issueKey:e.key,issueLink:e.self,issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issueSummary:e.fields.summary,position:t}))))(m),isLoading:!1,error:void 0})}catch(r){var i;null===(i=tm.cache)||void 0===i||i.clear(),n({isLoading:!1,error:r})}},setContext:()=>({setState:e},t)=>{e(t)},setIssueStatus:e=>({getState:t,setState:s})=>{const{status:n}=t();e!==n&&s({status:e})}},am=Object(Gp.a)({name:"FetchRelatedIssuesForIssue",initialState:sm,actions:nm}),im=Object(Gi.a)(am,{onInit:nm.setContext}),rm=Object(qp.a)(am);function om(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?om(Object(s),!0).forEach((function(t){lm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):om(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function um(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const dm=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return cm(cm({},um(n,["buttonStyles"])),{},{buttonStyles:cm(cm({},a),{},{padding:`0 ${z.e/2}px 0 ${z.e/2}px`,margin:`0 ${z.e/2}px 0 ${z.e/2}px`,backgroundColor:e?Re.a.N400:Re.a.N20,
"&:hover":{backgroundColor:e?Re.a.N400:Re.a.N30},"&:active":{backgroundColor:e?Re.a.N400:Re.a.B50}})})},pm=({children:e,onClick:t,isSelected:s})=>i.a.createElement(Pi.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:dm(s),onClick:t},e);pm.displayName="ButtonComponent";const mm=({items:e,selectedItem:t,onSelectIssueStatusItem:s})=>i.a.createElement(i.a.Fragment,null,e.map((e=>i.a.createElement(pm,{key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"IssueStatusButton")},e.name))));var bm=s("./node_modules/@atlaskit/button--next/dist/es2019/button-group.js"),fm=s("./node_modules/@atlaskit/icon/glyph/more.js"),gm=s.n(fm),hm=s("./node_modules/@atlaskit/icon/glyph/premium.js"),ym=s.n(hm),Om=s("./src/packages/platform/ui/feedback/feedback-dialog-base/src/model/types.js"),jm=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),vm=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),Em=Object(v.h)({show:{
id:"smart-related-issues-panel.header.expander.show",defaultMessage:"Show"},hide:{id:"smart-related-issues-panel.header.expander.hide",defaultMessage:"Hide"}});var km=({isContentExpanded:e,onExpand:t,onCollapse:s})=>{const{formatMessage:n}=Object(xe.c)(),a=(e,s)=>{t(),Object(Fa.h)(s,"showRelatedIssues")},r=(e,t)=>{s(),Object(Fa.h)(t,"hideRelatedIssues")};return e?(()=>i.a.createElement(H.a,{"aria-label":n(Em.hide),appearance:"subtle-link",spacing:"default",iconBefore:i.a.createElement(Qd.a,{label:"",size:"large"}),onClick:r}))():(()=>i.a.createElement(H.a,{"aria-label":n(Em.show),appearance:"subtle-link",spacing:"default",iconBefore:i.a.createElement(vd.a,{label:"",size:"large"}),onClick:a}))()},wm=Object(v.h)({feedback:{id:"smart-related-issues-panel.header.feedback",defaultMessage:"Give feedback"},hideSimilarRequests:{id:"smart-related-issues-panel.header.hide-similar-requests",defaultMessage:"Hide similar requests"},title:{id:"smart-related-issues-panel.header.title",
defaultMessage:"Similar requests"}}),Sm=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Cm=q.default.div(["display:flex;flex-direction:row;justify-content:space-between;"]),Im=q.default.div(["margin-right:","px;"],1*z.e),Tm=q.default.div(["display:flex;flex-direction:row;align-items:center;"]),Pm=Object(q.default)(Da.c)(["",";",";margin:0;min-width:0;"],Sm.a,Re.d.h400()),_m=({onExpand:e,onCollapse:t,isExpanded:s})=>{const{formatMessage:n}=Object(xe.c)(),r=Object(Mi.a)(),o=Object(Ps.i)(),c=Object(Pu.a)(o),[l,u]=Object(a.useState)(!1),d=({isOpen:e})=>{u(e)},p=`${r}/jira/servicedesk/projects/${o}/settings/itsm-features`,m={feedbackGroupId:"jira-servicedesk-related-issues",feedbackType:jm.a,additionalFeedbackEntries:[{key:Om.a.FEEDBACK_COLLECTOR_LOCATION,value:"jsm.issue-view"},{key:Om.a.FEEDBACK_COLLECTOR_ID,value:"bento-similar-requests-panel"}]}
;return i.a.createElement(Cm,null,i.a.createElement(Tm,null,i.a.createElement(Im,null,i.a.createElement(ym.a,{size:"medium",label:""})),i.a.createElement(Pm,null,n(wm.title))),i.a.createElement(bm.a,null,(()=>i.a.createElement(vm.a,null,((e,{openFeedbackDialog:t})=>i.a.createElement(i.a.Fragment,null,c?(e=>i.a.createElement(Xa.a,{onOpenChange:d,shouldFlip:!0,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"default",isSelected:l,iconBefore:i.a.createElement(gm.a,{label:"",size:"medium"})},boundariesElement:"scrollParent",position:"bottom center"},i.a.createElement(ei.a,null,i.a.createElement(Za.a,{onClick:()=>e(m)},n(wm.feedback)),i.a.createElement(Za.a,{href:p},n(wm.hideSimilarRequests)))))(t):(e=>s?i.a.createElement(H.a,{appearance:"link",onClick:()=>e(m)},n(wm.feedback)):null)(t)))))(),i.a.createElement(km,{isContentExpanded:s,onExpand:e,onCollapse:t})))};_m.displayName="PanelHeader"
;var xm=_m,Dm=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),Am=s("./src/packages/issue/issue-view/src/common/util/events/index.js"),Lm=s("./node_modules/@atlaskit/icon/glyph/error.js"),Mm=s.n(Lm),Rm=Object(v.h)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.error-message",defaultMessage:"We couldn't load any similar requests."},tryAgainLink:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.try-again-link",defaultMessage:"Try again?"}});const Nm=q.default.div(["margin-right:","px;"],z.e),Fm=q.default.div(["display:flex;align-items:center;"]),Um=({onTryAgain:e,useIntl:t=xe.c})=>{const{formatMessage:s}=t();return i.a.createElement(Fm,null,(()=>i.a.createElement(Nm,null,i.a.createElement(Mm.a,{label:"error",primaryColor:"#FF5630"})))(),s(Rm.errorMessage),(()=>i.a.createElement(sa.a,{appearance:"link",onClick:e},s(Rm.tryAgainLink)))())};Um.displayName="ErrorFeedback"
;var Vm=Um,Km=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js");const Wm=Object(v.h)({issueTypeName:{id:"smart-related-issues-panel.issue-line-card-group.issue-line-card.issue-type-name",defaultMessage:"{issueTypeName}"}}),Bm=Object(q.default)(H.a)(["&&{margin-top:4px;}"]),Hm=({issueTypeIconUrl:e,issueTypeName:t,issueKey:s,issueSummary:n})=>{const{formatMessage:a}=Object(xe.c)(),r=a(Wm.issueTypeName,{issueTypeName:t});return i.a.createElement(Bm,{appearance:"link",href:s,iconBefore:i.a.createElement(Km.a,{alt:r,url:e})},s," ",n)};Hm.displayName="IssueLineCard";var $m=Hm,Gm=s("./node_modules/@atlaskit/icon/glyph/info.js"),qm=s.n(Gm),zm=Object(v.h)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.error-message",defaultMessage:"We couldn't find any similar requests."},searchLink:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.search-link",defaultMessage:"Search instead?"}})
;const Ym=q.default.div(["margin-right:","px;"],z.e),Qm=q.default.div(["display:flex;align-items:center;"]),Jm=({useIntl:e=xe.c,useBaseUrl:t=Mi.a})=>{const{formatMessage:s}=e(),n=`${t()}/jira/servicedesk/projects/${Object(Ps.i)()}/issues`;return i.a.createElement(Qm,null,(()=>i.a.createElement(Ym,null,i.a.createElement(qm.a,{label:"info",primaryColor:"#0747A6"})))(),s(zm.errorMessage),(()=>i.a.createElement(sa.a,{appearance:"link",target:"_blank",href:n},s(zm.searchLink)))())};Jm.displayName="NoIssuesFeedback";var Zm=Jm,Xm=Object(v.h)({show:{id:"smart-related-issues-panel.issue-line-card-group.show-more.show",defaultMessage:"Show more"}});const eb=q.default.div(["margin:","px 0px;"],z.e);var tb=({issuesLength:e,isShowMoreExpanded:t,onExpand:s})=>{const{formatMessage:n}=Object(xe.c)(),a=(t,n)=>{s(),Object(Fa.h)(n,"showMoreRelatedIssues",{issuesLength:e})};return t?null:(()=>i.a.createElement(eb,null,i.a.createElement(sa.a,{appearance:"link",onClick:a},n(Xm.show))))()
},sb=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/skeleton/index.js");const nb=q.default.div(["padding-left:","px;padding-right:","px;"],2*z.e,2*z.e),ab=q.default.div(["display:flex;flex-direction:row;justify-content:space-between;margin-bottom:","px;"],z.e),ib=()=>i.a.createElement(nb,null,i.a.createElement(ab,null,i.a.createElement(sb.k,{height:"16px",width:"6%"}),i.a.createElement(sb.k,{height:"16px",width:"90%"})),i.a.createElement(ab,null,i.a.createElement(sb.k,{height:"16px",width:"6%"}),i.a.createElement(sb.k,{height:"16px",width:"90%"})),i.a.createElement(ab,null,i.a.createElement(sb.k,{height:"16px",width:"6%"}),i.a.createElement(sb.k,{height:"16px",width:"90%"})),i.a.createElement(ab,null,i.a.createElement(sb.k,{height:"16px",width:"6%"}),i.a.createElement(sb.k,{height:"16px",width:"90%"})),i.a.createElement(ab,null,i.a.createElement(sb.k,{height:"16px",width:"6%"}),i.a.createElement(sb.k,{height:"16px",width:"90%"})))
;ib.displayName="LoadingSkeleton";var rb=ib;const ob=q.default.div(["display:flex;"]),cb=Object(q.default)(ob)(["display:block;width:100%;max-height:","px;"," ul{box-shadow:none;}ul div{border-bottom:0px;}"],30*z.e,(({isExpanded:e})=>e&&"\n        overflow-y: scroll;\n    ")),lb=({useRelatedIssuesForIssue:e=rm,sessionId:t})=>{const[s,n]=Object(a.useState)(!1),{createAnalyticsEvent:r}=Object(Li.a)(),[{data:o,isLoading:c,error:l},{fetchRelatedIssuesForIssue:u}]=e();if(l)return i.a.createElement(Vm,{onTryAgain:()=>{u(t,r)}});if(c||!o)return i.a.createElement(rb,null);if(o&&0===o.length)return i.a.createElement(Zm,null);const d=s?o:o.slice(0,5);return i.a.createElement(ob,null,i.a.createElement(cb,{isExpanded:s},i.a.createElement(Dm.a,{items:d,groupId:t,onClick:(e,t)=>{null!=e&&(Object(Am.e)(t)||Object(Am.a)(t)?Object(Fa.h)(r({}),"relatedIssue clicked",{newTabOpened:!0,position:e.position,relatedIssueId:e.id}):(Object(Fa.h)(r({}),"relatedIssue clicked",{newTabOpened:!1,position:e.position,
relatedIssueId:e.id}),window.location.assign(e.issueKey)))}},((e,t,s,n)=>i.a.createElement($m,n))),(()=>o.length>5&&i.a.createElement(tb,{isShowMoreExpanded:s,onExpand:()=>n(!0),issuesLength:o.length}))()))};lb.displayName="IssueLineCardGroup";var ub=lb,db=Object(v.h)({filterBy:{id:"smart-related-issues-panel.filter-by",defaultMessage:"Show:"},open:{id:"smart-related-issues-panel.open",defaultMessage:"Open"},resolved:{id:"smart-related-issues-panel.resolved",defaultMessage:"Resolved"}
}),pb=s("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/useCoordination.js"),mb=s("./node_modules/scroll-into-view-if-needed/es/index.js"),bb=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightManager.js"),fb=s("./node_modules/@atlaskit/popper/dist/es2019/Popper.js"),gb=s("./node_modules/@atlaskit/popper/node_modules/react-popper/lib/esm/Manager.js"),hb=s("./node_modules/@atlaskit/popper/node_modules/react-popper/lib/esm/Reference.js"),yb=s("./src/packages/engagement/src/ui/coordination-client/index.js"),Ob=Object(v.h)({header:{id:"smart-related-issues-panel.onboarding.popper-content.header",defaultMessage:"Discover similar issues"},secondaryButton:{id:"smart-related-issues-panel.onboarding.popper-content.secondary-button",defaultMessage:"No thanks"},primaryButton:{id:"smart-related-issues-panel.onboarding.popper-content.primary-button",defaultMessage:"Try it now"}}),jb=Object(v.h)({modalBody:{
id:"smart-related-issues-panel.onboarding.popper-content.spotlight-messages.modal-body",defaultMessage:"Save time triaging and finding related solutions directly from the request view."},adminModalBody:{id:"smart-related-issues-panel.onboarding.popper-content.spotlight-messages.admin-modal-body",defaultMessage:'Save time triaging and finding related solutions directly from the request view. You can disable this feature at any time in your <a href="{url}" target="_blank" tabindex="-1">project settings</a>.'}});const vb=q.default.p(["margin:0px;a{&:hover{color:",";}&:active:{color:",";}&:visited,&:link{color:",";font-weight:bold;}}"],Re.a.P200,Re.a.B400,Re.a.N0);function Eb(){return(Eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const kb=()=>{const{formatMessage:e}=Object(xe.c)();return i.a.createElement(vb,null,e(jb.modalBody))}
;kb.displayName="ModalBodyMessage";const wb=({featuresPageUrl:e})=>i.a.createElement(vb,null,i.a.createElement(v.b,Eb({},jb.adminModalBody,{values:{url:e}})));wb.displayName="AdminModalBodyMessage";var Sb=s("./node_modules/@atlaskit/theme/dist/es2019/constants.js"),Cb=s("./node_modules/@atlaskit/theme/dist/es2019/utils/math.js"),Ib=s("./node_modules/@atlaskit/theme/dist/es2019/typography.js");function Tb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Tb(Object(s),!0).forEach((function(t){_b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Tb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _b(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xb=q.default.div(["margin:0px 4px;"]),Db=q.default.div(["background:",";box-shadow:0 4px 8px -2px ",",0 0 1px ",";color:",";display:flex;flex-direction:column;padding:","px ","px;max-width:","px;border-radius:3px;"],"#6554C0","rgba(9, 30, 66, 0.25)","rgba(9, 30, 66, 0.31)","#FFFFFF",Object(Cb.multiply)(Sb.gridSize,2),Object(Cb.multiply)(Sb.gridSize,2.5),Object(Cb.multiply)(Sb.gridSize,34)),Ab=q.default.div(["",";font-size:20px;font-style:inherit;font-weight:500;letter-spacing:-0.008em;line-height:1.2;margin-bottom:","px;margin-top:0px;color:",";"],Ib.h600,Sb.gridSize,"#FFFFFF"),Lb=q.default.div(["display:flex;justify-content:flex-end;align-items:center;padding-top:","px;"],Sb.gridSize),Mb={default:{background:{default:{light:Re.a.P400,dark:Re.a.P400},hover:{light:Re.a.P200,dark:Re.a.P200},active:{light:Re.a.P500,dark:Re.a.P500},disabled:{light:Re.a.P400,dark:Re.a.P400},selected:{
light:Re.a.R500,dark:Re.a.R500},focus:{light:Re.a.P400,dark:Re.a.P400}},boxShadow:{focus:{light:`${Re.a.P100} 0 0 0 2px`,dark:`${Re.a.P100} 0 0 0 2px`}},color:{default:{light:Re.a.N0,dark:Re.a.N0},hover:{light:Re.a.N0,dark:Re.a.N0},active:{light:Re.a.N0,dark:Re.a.N0},disabled:{light:Re.a.N0,dark:Re.a.DN30},selected:{light:Re.a.N0,dark:Re.a.N0},focus:{light:Re.a.N0,dark:Re.a.N0}},outline:{focus:{light:"none",dark:"none"}}},subtle:{background:{default:{light:"none",dark:"none"},hover:{light:Re.a.P200,dark:Re.a.P200},active:{light:Re.a.P500,dark:Re.a.P500},disabled:{light:"none",dark:"none"},selected:{light:Re.a.N700,dark:Re.a.DN0},focusSelected:{light:Re.a.N700,dark:Re.a.DN0}},boxShadow:{focus:{light:`${Re.a.P100} 0 0 0 2px`,dark:`${Re.a.P100} 0 0 0 2px`}},color:{default:{light:Re.a.N0,dark:Re.a.N0},hover:{light:Re.a.N0,dark:Re.a.N0},active:{light:Re.a.N0,dark:Re.a.N0},disabled:{light:Re.a.N0,dark:Re.a.N0},selected:{light:Re.a.N0,dark:Re.a.N0},focus:{light:Re.a.N0,dark:Re.a.N0}},
outline:{focus:{light:"none",dark:"none"}}}},Rb=()=>(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t),{appearance:a,state:i,mode:r}=t,o=Mb[`${a||""}`];let c={};return o&&(c=Object.keys(o).reduce(((e,t)=>{const s=o[t];return s[i]&&(e[t]=s[i][r]),e}),{})),{buttonStyles:Pb(Pb({},s),c),spinnerStyles:n}},Nb=({onPrimaryActionClick:e,onSecondaryActionClick:t})=>{const{formatMessage:s}=Object(xe.c)(),n=Object(Mi.a)(),a=Object(Ps.i)(),r=Object(Pu.a)(a),o=`${n}/jira/servicedesk/projects/${a}/settings/itsm-features`;return i.a.createElement(Db,null,i.a.createElement(Ab,null,s(Ob.header)),r?i.a.createElement(wb,{featuresPageUrl:o}):i.a.createElement(kb,null),i.a.createElement(Lb,null,i.a.createElement(xb,null,i.a.createElement(Pi.a,{theme:Rb(),appearance:"subtle",onClick:t},s(Ob.secondaryButton))),i.a.createElement(xb,null,i.a.createElement(Pi.a,{theme:Rb(),onClick:e,autoFocus:!0},s(Ob.primaryButton)))))};Nb.displayName="PopperContent";var Fb=Nb;function Ub(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Kb=q.default.div(["",";background-color:white;border-radius:4px;box-shadow:0 0 0 1px ",",0 4px 11px ",";opacity:",";transition:opacity 200ms ease-in-out;z-index:",";"],(e=>e.styling),Re.a.N40A,Re.a.N40A,(({isReferenceHidden:e,active:t})=>e||!t?0:1),z.f.layer),Wb=q.default.div(["",";"],(e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ub(Object(s),!0).forEach((function(t){Vb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ub(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e
}({},e.extraStyles))),Bb=Re.a.P75,Hb=Object(q.keyframes)(["0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}"]),$b=Object(q.css)(["animation:"," 3000ms "," infinite;"],Hb,"cubic-bezier(0.55, 0.055, 0.675, 0.19)"),Gb=Object(q.css)(["content:'';position:absolute;top:0;left:0;width:100%;height:100%;"]),qb=q.default.span(["display:block;> *{position:relative;&::before{"," border-radius:","px;box-shadow:",";opacity:",";transition:opacity 0.1s ease-in-out;pointer-events:none;}&::after{"," border-radius:","px;box-shadow:",";opacity:0;pointer-events:none;","}}"],Gb,z.e/2,(({pulseColor:e=Bb})=>`0 0 0 0px ${e}`),(e=>e.hasPulse?1:0),Gb,z.e/2,(({pulseColor:e=Bb,pulseShadowColor:t="rgba(101, 84, 192, 1)"})=>`0 0 0 0px ${e} , 0 0 ${z.e}px ${t}`),(e=>e.isPulsing&&$b)),zb=({children:e,isExpanded:t,onPrimaryActionClick:s})=>{
const n=Object($p.a)(),r=Object(a.useMemo)((()=>new yb.a(n,"/gateway/api")),[n]),[o,c]=Object(pb.a)(r,"related-issues-panel"),[l,u]=Object(a.useState)(!0),[d,p]=Object(a.useState)(!1),[m,b]=Object(a.useState)(!1),f=Object(a.useRef)(null),g=Object(a.useCallback)((()=>{u(!1),c&&c()}),[c]),h=()=>{g(),s()},y=l&&d&&o&&c&&!t;Object(a.useEffect)((()=>{y&&(Object(mb.default)(f.current,{inline:"end",behavior:"smooth"}),setTimeout((()=>{b(!0)}),300))}),[d,l,y]),Object(a.useEffect)((()=>{u(!!o)}),[o]),Object(a.useEffect)((()=>{t&&(g(),u(!1),c&&c())}),[g,t,c]);return i.a.createElement(bb.c,null,i.a.createElement(gb.a,null,i.a.createElement(hb.a,null,(({ref:s})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(qb,{isPulsing:o&&c&&l&&!t},i.a.createElement("div",{ref:s,onMouseEnter:()=>p(!0)},e)),i.a.createElement(Wb,{innerRef:f}),o&&c&&(()=>i.a.createElement(fb.a,{placement:"top-end"},(({ref:e,style:t,isReferenceHidden:s})=>i.a.createElement(Kb,{innerRef:e,styling:t,isReferenceHidden:s,
active:y&&m},i.a.createElement(Fb,{onPrimaryActionClick:h,onSecondaryActionClick:g})))))())))))};zb.displayName="OnboardingController";const Yb=q.default.div(["margin-top:","px;margin-bottom:","px;display:flex;flex-direction:column;border-radius:","px;border:1px solid #dfe1e6;background-color:",";padding:16px;",";"],z.e,3*z.e,z.e/2,Re.a.N0,(({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0")),Qb=(z.e,q.default.div(["padding-top:","px;"],2*z.e)),Jb=(Sm.a,Re.d.h400(),q.default.div(["display:flex;margin-top:","px;"],z.e)),Zb=q.default.div(["",";min-width:0;"],Sm.a),Xb=({sessionId:e})=>{const{formatMessage:t}=Object(xe.c)(),{createAnalyticsEvent:s}=Object(Li.a)(),[n,r]=Object(a.useState)(!1),o={OPEN:{key:"OPEN",name:t(db.open)},RESOLVED:{key:"RESOLVED",name:t(db.resolved)}},c=[o.OPEN,o.RESOLVED],[{data:l,isLoading:u,error:d,status:p},{setIssueStatus:m,fetchRelatedIssuesForIssue:b}]=rm();Object(a.useEffect)((()=>{!n||u||l||d||b(e,s)}),[s,d,b,n,u,l,e,p])
;const f=i.a.createElement(Jb,null,i.a.createElement(Zb,null,t(db.filterBy)),i.a.createElement(mm,{items:c,selectedItem:o[p],onSelectIssueStatusItem:(t,n,a)=>{Object(Fa.h)(n,a,{selectedStatusFilter:t.key}),m(t.key),b(e,s)}}));return i.a.createElement(Va.a,{attributes:{selectedStatusFilter:p}},i.a.createElement(zb,{isExpanded:n,onPrimaryActionClick:()=>{Object(Fa.h)(s({action:"clicked",actionSubject:"button"}),"showRelatedIssues",{fromOnboarding:!0,selectedStatusFilter:p}),r(!0)}},i.a.createElement(Yb,{isExpanded:n},i.a.createElement(xm,{onExpand:()=>r(!0),onCollapse:()=>r(!1),isExpanded:n}),n&&i.a.createElement(i.a.Fragment,null,f,i.a.createElement(Qb,null,i.a.createElement(ub,{sessionId:e}))))))};Xb.displayName="RelatedIssuesPanelView";var ef=Xb;const tf=e=>null!=e,sf=e=>tf(e)&&""!==e;var nf=()=>{const e=Hp.a.v4(),t=Object(Ps.f)(),s=Object(Ps.i)(),n=Object(Hi.p)(Object(Wa.g)(s)||""),a=Object($p.a)(),r=Object(Mi.a)(),o=Object(Ps.g)(),[c]=Object(vl.b)({issueKey:o,
fieldKey:"similar-issues"}),l=((e,t,s,n,a)=>{if(sf(t)&&t!==Object(Hi.p)("")&&tf(e)&&e!==Object(Hi.j)("")&&sf(a))return{issueId:e,projectId:t,projectKey:s,baseUrl:n,cloudId:a}})(t,n,s,r,a);return c&&void 0!==l?i.a.createElement(im,l,i.a.createElement(Va.a,{sourceName:"RelatedIssuesPanel",attributes:{smartSessionId:e}},i.a.createElement(ef,{sessionId:e}))):null};const af=q.default.div(["margin-top:","px;"],(e=>e.isCompactMode?2.5*z.e:5*z.e)),rf=q.default.div(["margin-top:",";"],(e=>e.isCompactMode?null:`${z.e}px`)),of=q.default.div(["margin-bottom:","px;"],(e=>e.isCompactMode||e.isPanelCollapsed?2*z.e:5*z.e));var cf=s("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),lf=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),uf=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const df=Object(uf.b)("issue-ecosystem"),pf="collapsed-panels",mf="issue.ecosystem.local-storage",bf=()=>{try{
return df.get(pf)||[]}catch(e){return O.a.safeErrorWithoutCustomerData(mf,`getCollapsedPanels failed: ${e}`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),[]}},ff=({children:e,isLoading:t=!1})=>i.a.createElement("span",null,i.a.createElement(Xa.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:t?i.a.createElement($.a,{size:"small"}):i.a.createElement(gm.a,{size:"small",label:"meatball menu"})},position:"bottom right"},e));ff.displayName="MeatBallMenu";const gf=q.default.div(["display:flex;align-items:center;height:","px;cursor:",";"],4*z.e,(e=>e.clickable?"pointer":void 0)),hf=q.default.div(["align-items:center;display:flex;flex-flow:row-reverse wrap;& > * + *{margin-left:","px;}"],z.e);function yf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function Of(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yf(Object(s),!0).forEach((function(t){jf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vf=q.default.span(["color:",";margin-left:5px;display:",";",":hover &{display:inline;}"],Re.a.link,(e=>e.alwaysShow?void 0:"none"),gf),Ef=q.default.div(["max-height:",";overflow-y:",";overflow-x:hidden;",";transition:max-height 1s ease-out;"],(e=>e.isCollapsed?"0":"1500px"),(e=>e.isCollapsed?"hidden":"auto"),Object(yi.f)("&")),kf=q.default.h1(["flex:1;",";",";color:",";"],yi.e,Re.d.h400(),Re.a.heading),wf=Object(v.h)({actions:{id:"issue.content.ecosystem-panels.meatballs.actions",defaultMessage:"Actions"},
hide:{id:"issue.content.ecosystem-panels.meatballs.hide",defaultMessage:"Hide {appName}"},collapse:{id:"issue.content.ecosystem-panels.collapse-content",defaultMessage:"hide"},expand:{id:"issue.content.ecosystem-panels.expand-content",defaultMessage:"show"}});class Sf extends a.Component{constructor(e){super(e),this.setupConnectHost=e=>{e&&e.onIframeUnload((({extension:t})=>{e.destroy(t.id)}))},this.contentPanelContainer=void 0,this.handleRemoveContentPanel=()=>{const{appKey:e,moduleKey:t,removeContentPanel:s,onContentPanelRemoveAnalytics:n}=this.props;n(Object(xn.b)(e,t)),s(`${e}_${t}`)},this.toggleCollapsedState=()=>{const{appKey:e,moduleKey:t,onToggleCollapsedStateAnalytics:s}=this.props,{isCollapsed:n}=this.state,a=Object(lf.b)(`${e}_${t}`,10);s(Object(xn.g)(e,t,n?"expand":"collapse")),n?(e=>{const t=bf();try{df.set(pf,t.filter((t=>t!==e)))}catch(s){O.a.safeErrorWithoutCustomerData(mf,`unsetCollapsedPanel failed: ${s}`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",
event:s}))}})(a):(e=>{const t=bf();try{df.set(pf,[...t,e])}catch(s){O.a.safeErrorWithoutCustomerData(mf,`setCollapsedPanel failed: ${s}`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})(a),this.setState({isCollapsed:!n})},this.state={connectHost:window.connectHost,isCollapsed:bf().includes(Object(lf.b)(`${e.appKey}_${e.moduleKey}`,10))},this.setupConnectHost(this.state.connectHost)}componentDidMount(){this.state.connectHost||Object(Rn.b)((e=>{this.setupConnectHost(e),this.setState({connectHost:e})}))}componentDidUpdate(){this.props.isSelected&&(Object(Cr.a)(this.contentPanelContainer),this.props.unSelectContentPanel(`${this.props.appKey}_${this.props.moduleKey}`))}renderHidePanelOption(){const{intl:e}=this.props;return i.a.createElement(ei.a,{title:e.formatMessage(wf.actions)},i.a.createElement(Za.a,{onClick:this.handleRemoveContentPanel},e.formatMessage(wf.hide,{appName:this.props.name})))}renderMeatBallMenu(){
return i.a.createElement(ff,null,this.renderHidePanelOption())}renderHeader(){const{showByDefault:e}=this.props.contentPanel;if(!e)return i.a.createElement(Da.c,null,i.a.createElement(gf,null,i.a.createElement(kf,null,this.props.name)),i.a.createElement(hf,null,this.renderMeatBallMenu()));const{intl:t}=this.props,{isCollapsed:s}=this.state;return i.a.createElement(Da.c,null,i.a.createElement(gf,{clickable:!0,onClick:this.toggleCollapsedState},i.a.createElement(kf,null,this.props.name),i.a.createElement(vf,{alwaysShow:s},s?t.formatMessage(wf.expand):t.formatMessage(wf.collapse))),e?null:i.a.createElement(hf,null,this.renderMeatBallMenu()))}render(){const{appKey:e,moduleKey:t}=this.props,{isCollapsed:s}=this.state,{options:n,options:{url:a,origin:r},showByDefault:o}=this.props.contentPanel,c=new Fn.a;return Object(ne.isConnectPanelsMarginBottomEnabled)()?i.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},i.a.createElement(of,null,this.renderHeader(),i.a.createElement(Ef,{
isCollapsed:s&&o},this.state.connectHost&&i.a.createElement(Nn.a,{key:`connect-iFrame-${r}-${this.props.refreshedOn}`,connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:a,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>i.a.createElement($n,{appName:this.props.contentPanel.name,appKey:e})})))):i.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},this.renderHeader(),i.a.createElement(Ef,{isCollapsed:s&&o},this.state.connectHost&&i.a.createElement(Nn.a,{key:`connect-iFrame-${r}-${this.props.refreshedOn}`,connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:a,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>i.a.createElement($n,{appName:this.props.contentPanel.name,appKey:e})})))}}Sf.displayName="ConnectContentPanel",Sf.displayName="ContentPanel",Sf.defaultProps={isSelected:!1,unSelectContentPanel:c.a,removeContentPanel:c.a,refreshedOn:0,
onContentPanelRemoveAnalytics:c.a};var Cf=Object(qt.a)([v.i,Object(as.a)((e=>({onContentPanelRemoveAnalytics:t=>e("remove",Of({},t)),onToggleCollapsedStateAnalytics:t=>e("toggleCollapsedState",Of({},t))}))),Object(r.b)(((e,t)=>({contentPanel:Object(Dn.d)(t.appKey,t.moduleKey)(e),isSelected:Object(Dn.r)(t.appKey,t.moduleKey)(e),refreshedOn:Object(P.e)(e)})),(e=>({unSelectContentPanel:t=>e(Object(cf.e)(t)),removeContentPanel:t=>e(Object(cf.h)(t))})))])(Sf),If=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),Tf=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-panel/index.js"),Pf=s("./src/packages/forge/forge-ui-async/src/ui/issue-panel/async.js"),_f=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),xf=Object(v.h)({title:{id:"issue.content.ecosystem.forge.panel.actions.title",defaultMessage:"Actions"},remove:{id:"issue.content.ecosystem.forge.panel.actions.remove",defaultMessage:"Remove"},collapse:{
id:"issue.content.ecosystem.forge.panel.actions.collapse",defaultMessage:"Collapse"},expand:{id:"issue.content.ecosystem.forge.panel.actions.expand",defaultMessage:"Expand"}});function Df(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Af(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(s),!0).forEach((function(t){Mf(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Af(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rf=({actions:e})=>{const[t,s]=Object(a.useState)(!1),{formatMessage:n}=Object(xe.c)();if(0===e.length)return null;const r=e.map((e=>Lf(Lf({},e),{},{onClick:()=>(s(!0),e.onClick().finally((()=>{s(!1)})))})));return i.a.createElement(ff,{isLoading:t},i.a.createElement(ei.a,{title:n(xf.title)},r.map((e=>i.a.createElement(Za.a,{onClick:e.onClick,key:e.key},e.text)))))};Rf.displayName="Actions";const Nf=({name:e,extension:{environmentType:t},actions:s})=>i.a.createElement(Da.c,null,i.a.createElement(gf,null,i.a.createElement(Da.e,null,i.a.createElement(fi.a,{extensionName:e,extensionEnvType:t}))),i.a.createElement(hf,null,i.a.createElement(Rf,{actions:s})))
;Nf.displayName="ForgeContentPanelHeader";const Ff=e=>{let{extensionData:t,source:s,onContentPanelRemoveAnalytics:n,onRemove:r,appKey:o,moduleKey:c,name:l,isPanelCollapsed:u}=e,d=Df(e,["extensionData","source","onContentPanelRemoveAnalytics","onRemove","appKey","moduleKey","name","isPanelCollapsed"]);const{extension:p,panelKey:m,isJustAdded:b,isCompactMode:f,removeFromJustAdded:g,removeFromNewPanels:h,updatePanel:y}=d,O=Object(a.useRef)(null),{formatMessage:j}=Object(xe.c)();Object(a.useEffect)((()=>{b&&O&&O.current&&(Object(Cr.a)(O.current),g(m))}),[b,m,g]),Object(a.useEffect)((()=>{t.isNewToIssue&&h(m)}),[t.isNewToIssue,m,h]);const v=Object(a.useMemo)((()=>({source:s})),[s]),[E,k]=Object(a.useState)([]),w=Object(a.useMemo)((()=>({onClick:()=>(n(Object(xn.b)(o,c)),Object(If.l)(s),r(m),Promise.resolve()),text:j(xf.remove),key:"internal__remove-action"})),[o,j,c,n,r,m,s]),S=Object(a.useCallback)((e=>(Object(If.k)(s,{collapsed:e}),e&&k([]),y({issueKey:t.issue.key,panelKey:m,collapsed:e
}),Promise.resolve())),[t.issue.key,m,s,y]),C=Object(a.useMemo)((()=>({onClick:()=>S(!1),text:j(xf.expand),key:"internal__expand-action"})),[j,S]),I=Object(a.useMemo)((()=>({onClick:()=>S(!0),text:j(xf.collapse),key:"internal__collapse-action"})),[j,S]),T=u?C:I,P=[...E.slice(0,5).map((e=>Lf(Lf({},e),{},{onClick:()=>(Object(If.j)(s),e.onClick())}))),T,w];return i.a.createElement(Tf.a,{attributes:v,shouldFireScreenEvent:t.isNewToIssue},Object(ne.isForgeCollapsedPanelEnabled)()?i.a.createElement("div",{ref:O},i.a.createElement(of,{isCompactMode:f,isPanelCollapsed:u},i.a.createElement(Nf,{actions:P,extension:p,name:l}),!u&&i.a.createElement(Pf.a,{extensionData:t,extension:p,localId:m,setCustomActions:k,analyticsAttributes:v}))):i.a.createElement("div",{ref:O},i.a.createElement(af,{isCompactMode:f},i.a.createElement(Nf,{actions:P,extension:p,name:l}),!u&&i.a.createElement(Pf.a,{extensionData:t,extension:p,localId:m,setCustomActions:k,analyticsAttributes:v})),i.a.createElement(af,{
isCompactMode:f})))};Ff.displayName="ForgeContentPanelView";var Uf=Object(qt.a)([Object(as.a)((e=>({onContentPanelRemoveAnalytics:t=>e("remove",Lf({},t))}))),Object(r.b)(((e,t)=>({isJustAdded:Object(Ho.j)(t.panelKey)(e),extensionData:Object(Ho.i)(t.panelKey)(e),source:Object(T.b)(e),isPanelCollapsed:Object(Ho.e)(t.panelKey)(e)})),(e=>({removeFromJustAdded:t=>{e(Object(cf.e)(t))},removeFromNewPanels:t=>{e(Object(_f.i)(t))},onRemove:t=>{e(Object(cf.h)(t))},updatePanel:t=>{e(Object(_f.g)(t))}})))])(Ff),Vf=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg"),Kf=s.n(Vf),Wf=Object(v.h)({errorStateTitle:{id:"issue-attachments-table.error.error-state-title",defaultMessage:"We couldn't load your attachments"},errorStateDescription:{id:"issue-attachments-table.error.error-state-description",defaultMessage:"Check your network connection, then try reloading your attachments."},primaryButton:{id:"issue-attachments-table.error.primary-button",
defaultMessage:"Reload Attachments"}});const Bf=q.default.div(["& > div{margin:auto;}"]),Hf=({onClick:e,shouldHideImage:t})=>{const{formatMessage:s}=Object(xe.c)(),n=t?void 0:Kf.a,a=i.a.createElement(H.a,{appearance:"primary",onClick:()=>e()},s(Wf.primaryButton));return i.a.createElement(Bf,null,i.a.createElement(Un.a,{imageUrl:n,header:s(Wf.errorStateTitle),description:s(Wf.errorStateDescription),primaryAction:a}))};Hf.displayName="AttachmentsError",Hf.defaultProps={shouldHideImage:!1};var $f=Hf
;const Gf=q.default.div(["width:100%;display:flex;position:relative;&&{min-height:initial;}"]),qf=Object(q.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),zf=q.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],qf,Re.a.N30,Re.a.N30,Re.a.N20,Re.a.N30),Yf=q.default.div(["min-height:","px;min-width:","px;width:",";border-top:","px solid ",";border-bottom:","px solid ",";border-right:","px solid ",";border-left:","px solid ",";"],(e=>e.height),(e=>e.minWidth),(e=>e.width),(e=>(e.lineHeight-e.height)/2),Re.a.N0,(e=>(e.lineHeight-e.height)/2),Re.a.N0,(e=>e.borderRight),Re.a.N0,(e=>e.borderLeft),Re.a.N0),Qf=q.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],(e=>e.paddingTop),Re.a.N0,(e=>e.paddingBottom),Re.a.N0),Jf=q.default.div(["background:",";width:",";"],Re.a.N0,(e=>e.width))
;function Zf(){return(Zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Xf=({nameTextWidthPercentage:e,dateAddedWidth:t})=>i.a.createElement(Gf,null,i.a.createElement(Yf,{height:24,minWidth:24,lineHeight:40,borderLeft:6}),i.a.createElement(Yf,{height:14,width:`${e}%`,lineHeight:40,borderLeft:8,borderRight:20}),i.a.createElement(Jf,{width:100-e+"%"}),i.a.createElement(Yf,{height:14,minWidth:50,lineHeight:40}),i.a.createElement(Yf,{height:14,minWidth:t,lineHeight:40,borderLeft:16}),i.a.createElement(Yf,{height:24,minWidth:24,lineHeight:40,borderLeft:170-t+62,borderRight:12}));Xf.displayName="TableItem";const eg=e=>{const{pageNumber:t,totalCount:s}=e,n=s-6*(t-1),a=Math.min(n,6),r=[{nameTextWidthPercentage:80,dateAddedWidth:170},{nameTextWidthPercentage:70,dateAddedWidth:150},{nameTextWidthPercentage:80,dateAddedWidth:160},{
nameTextWidthPercentage:60,dateAddedWidth:140},{nameTextWidthPercentage:70,dateAddedWidth:155},{nameTextWidthPercentage:80,dateAddedWidth:170}],o=s>6?55:23;return i.a.createElement(Gf,null,i.a.createElement(zf,null),i.a.createElement(Qf,{paddingTop:0,paddingBottom:o},i.a.createElement(Gf,null,i.a.createElement(Yf,{height:14,minWidth:50,lineHeight:26}),i.a.createElement(Jf,{width:"100%"}),i.a.createElement(Yf,{height:14,minWidth:40,lineHeight:26,borderLeft:16}),i.a.createElement(Yf,{height:14,minWidth:100,lineHeight:26,borderLeft:26}),i.a.createElement(Yf,{height:0,minWidth:24,lineHeight:26,borderLeft:144})),i.a.createElement(Yf,{height:2,lineHeight:2}),i.a.createElement(Qf,{paddingTop:0,paddingBottom:0},Array.from({length:a}).map(((e,t)=>i.a.createElement(Xf,Zf({},r[t],{key:`table-item--${t}`}))))),i.a.createElement(Yf,{height:2,lineHeight:2})))};eg.displayName="AttachmentsTableSkeleton",eg.defaultProps={pageNumber:1,totalCount:6}
;var tg=eg,sg=s("./src/packages/issue/user-preferences-services/src/main.js"),ng=s("./node_modules/lodash/debounce.js"),ag=s.n(ng),ig=s("./node_modules/@atlaskit/media-card/dist/es2019/utils/lightCards/cardLoading.js"),rg=s("./node_modules/@atlaskit/media-card/dist/es2019/root/card/cardLoader.js"),og=s("./node_modules/@atlaskit/media-filmstrip/dist/es2019/filmstripView/index.js"),cg=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/with-props.js"),lg=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),ug=Object(v.h)({confirmationHeader:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-content",defaultMessage:"Once you delete, it's gone for good."}});function dg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(s),!0).forEach((function(t){mg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bg(){return(bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var fg=(e,t="filmStripView")=>s=>{
const n=Object(Ps.g)(),[{value:{attachments:r}},{deleteAttachment:o}]=Object(Ts.a)(n),[c,l]=Object(a.useState)(),{formatMessage:u}=Object(xe.c)(),d=Object(Ps.i)(),[p]=Object(Pu.d)(d),{createAnalyticsEvent:m}=Object(Li.a)(),b=Object(lg.a)(),f=Object(a.useCallback)((e=>{if(void 0!==c){e.stopPropagation();const s=m({action:"clicked",actionSubject:"button"});Object(Fa.h)(s,"deleteAttachmentConfirm",{view:t}),o(n,c),l()}}),[m,o,c,n]),g=Object(a.useCallback)((e=>{e.stopPropagation(),l()}),[]),h=Object(a.useMemo)((()=>(({attachments:e,canDeleteAllAttachments:t,canDeleteOwnAttachments:s,accountIdLoggedInUser:n})=>e.reduce(((e,a)=>pg(pg({},e),{},{[a.id]:"issue"===a.parentName&&(t||null!==n&&null!==a.author&&s&&a.author.accountId===n)})),{}))({attachments:r,canDeleteAllAttachments:p.canDeleteAllAttachments,canDeleteOwnAttachments:p.canDeleteOwnAttachments,accountIdLoggedInUser:b})),[b,r,p.canDeleteAllAttachments,p.canDeleteOwnAttachments])
;return i.a.createElement(i.a.Fragment,null,i.a.createElement(e,bg({},s,{onDeleteAttachment:l,canDeleteAttachmentMap:h})),void 0!==c&&i.a.createElement(ct.b,{appearance:"danger",headerMessage:u(ug.confirmationHeader),contentMessage:u(ug.confirmationContent),onConfirm:f,onCancel:g,externalId:"issue.attachment.card.delete"}))},gg=s("./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js"),hg=s("./src/packages/issue/media-provider/src/controllers/token-provider/index.js");function yg(){return(yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Og(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var jg=e=>Object(hg.a)((e=>t=>{const{tokenProvider:s}=t,n=Og(t,["tokenProvider"]),{mediaContext:a}=n;if(!a.viewContext)return null;const{clientId:r,serviceHost:o}=a.viewContext,c={authProvider:Object(gg.a)(s,r,o)};return i.a.createElement(e,yg({viewMediaClientConfig:c},n))})(e)),vg=s("./src/packages/issue/issue-view/src/actions/card-cover-actions.js");const Eg=()=>({type:"SCROLL_TO_ATTACHMENT_COMMENT"}),kg=()=>({type:"SCROLL_TO_ATTACHMENT_WORKLOG"});var wg=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),Sg=s("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js"),Cg=s("./node_modules/@atlaskit/icon/glyph/trash.js"),Ig=s.n(Cg),Tg=s("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js");const Pg="listView"
;var _g=s("./node_modules/@atlaskit/icon/glyph/watch.js"),xg=s.n(_g),Dg=s("./src/packages/issue/issue-scroll/src/services/main.js"),Ag=s("./src/packages/issue/issue-scroll/src/services/types.js"),Lg=Object(v.h)({goToComment:{id:"issue-attachments-base.goto-button.go-to-comment",defaultMessage:"Go to the comment with this attachment"},goToWorklog:{id:"issue-attachments-base.goto-button.go-to-worklog",defaultMessage:"Go to the work log entry with this attachment"},goToField:{id:"issue-attachments-base.goto-button.go-to-field",defaultMessage:"You can find this attachment in the {field} field"}});function Mg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mg(Object(s),!0).forEach((function(t){Ng(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ng(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Fg=(e,t)=>e!==Tg.a.customfield?e:t&&t.title||"custom field",Ug=({attachmentParent:e,attachmentParentId:t,onScrollToComments:s,onScrollToWorklogs:n,attachmentView:r,issueKey:o,component:c})=>{const{formatMessage:l}=Object(xe.c)(),[,{setScrollTarget:u}]=Object(Dg.a)(),[d]=Object(nu.a)(o,`customfield_${t}`),p=e!==Tg.a.comment&&e!==Tg.a.worklog,m=Object(a.useCallback)(((a,i)=>{a.stopPropagation(),a.preventDefault();const o=(e,s)=>{u({type:e,id:t}),s()};switch(e){case Tg.a.comment:o(Ag.a.COMMENT,s),Object(Fa.h)(i,"gotoComment",{view:r});break;case Tg.a.worklog:o(Ag.a.WORKLOG,n),Object(Fa.h)(i,"gotoWorklog",{view:r})}
}),[e,u,t,s,r,n]),b=Object(a.useCallback)((e=>{"Enter"===e.key&&e.stopPropagation()}),[]),f=Object(a.useMemo)((()=>{switch(e){case Tg.a.comment:return l(Lg.goToComment);case Tg.a.worklog:return l(Lg.goToWorklog);default:return l(Lg.goToField,{field:Fg(e,d)})}}),[e,d,l]),g=()=>p?{}:"listView"===r?{background:"#DFE1E6"}:{background:"#FFFFFF"};return i.a.createElement(je.a,{content:f,position:"top"},i.a.createElement(Zd.a,{appearance:"subtle",iconBefore:i.a.createElement(xg.a,{label:f}),onClick:m,onKeyPress:b,theme:(e,t)=>({buttonStyles:Rg(Rg({},e(t).buttonStyles),{},{display:"flex",justifyContent:"center","&:hover":g(),paddingLeft:"filmStripView"===r?"0px":void 0,paddingRight:"filmStripView"===r?"0px":void 0,margin:"0"})}),isDisabled:p,component:c}))};Ug.displayName="GoToButton",Ug.defaultProps={component:"button"};var Vg=Ug,Kg=s("./node_modules/@atlaskit/icon/cjs/index.js"),Wg=s.n(Kg);function Bg(){return(Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){
var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Hg="show-icon",$g=e=>i.a.createElement("svg",Bg({},e,{viewBox:"0 0 24 24"}),i.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},i.a.createElement("path",{d:"M2 11v5h14v-5H2zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),i.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),i.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));$g.displayName="hideIcon";const Gg=e=>i.a.createElement("svg",Bg({},e,{viewBox:"0 0 24 24"}),i.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},i.a.createElement("path",{
d:"M2 11v5h14v-5H2zm0-1V9h14v1-8H2v8zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),i.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),i.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));Gg.displayName="showIcon";const qg=({icon:e,label:t})=>{const s=e===Hg?Gg:$g;return i.a.createElement(je.a,{position:"top",content:t},i.a.createElement(Wg.a,{glyph:s,label:t,size:"small"}))};qg.displayName="CardCoverIcon";var zg=qg,Yg=Object(v.h)({delete:{id:"attachments.delete-attachment-from-attachment-panel",defaultMessage:"Delete"},goto:{id:"attachments.goto-attachment-from-attachment-panel",defaultMessage:"GoTo"},show:{id:"attachments.show-on-card",defaultMessage:"Show on card"},hide:{id:"attachments.hide-on-card",defaultMessage:"Hide on card"},confirmationHeader:{id:"attachments.confirm-delete-attachment-modal-header",
defaultMessage:"Delete this attachment?"},confirmationContent:{id:"attachments.confirm-delete-attachment-modal-text",defaultMessage:"Once you delete, it's gone for good."}});const Qg=(e,t,s,n,a,r,o,l,u)=>{const d=a.formatMessage(Yg.delete);return t===Tg.b?n?[{label:d,handler:()=>o(e),icon:i.a.createElement(Ig.a,{label:d})}]:[]:[{label:a.formatMessage(Yg.goto),handler:c.a,icon:i.a.createElement(Vg,{attachmentParent:t,attachmentParentId:s,attachmentView:"filmStripView",onScrollToComments:l,onScrollToWorklogs:u,issueKey:r,component:"div"})}]},Jg=(e,t,s,n,a)=>{const r=Number(e),o=s.formatMessage(Yg.hide),c=s.formatMessage(Yg.show);return t&&t.isEnabled&&t.availableAttachmentIds.includes(r)?r===t.attachmentId?[{label:o,handler:()=>{a(r)},icon:i.a.createElement(zg,{icon:"hide-icon",label:o})}]:[{label:c,handler:()=>{n(t.attachmentId,r)},icon:i.a.createElement(zg,{icon:Hg,label:c})}]:[]};function Zg(){return(Zg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Xg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function eh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const th={width:156,height:125},sh=e=>i.a.createElement(ig.a,{key:e,dimensions:th});sh.displayName="fakeCard";const nh=e=>{
const[t,s]=Object(a.useState)(0),[n,r]=Object(a.useState)(0),[o,c]=Object(a.useState)([]),[l,u]=Object(a.useState)(!1),{cardCover:d,intl:p,isMobile:m,isPreview:b,mediaContext:f,onCardCoverHide:g,onCardCoverShow:h,onScrollToComments:y,onScrollToWorklogs:O,viewMediaClientConfig:j,onDeleteAttachment:v,canDeleteAttachmentMap:E}=e,k=Object(Ps.g)(),[{value:{attachments:w,totalCount:S},meta:{startAt:C},error:I},{refreshAttachments:T}]=Object(Ts.a)(k),P=Object(a.useCallback)((({offset:e,offsets:t})=>{c(t),s(e)}),[]),_=Object(a.useCallback)(ag()(T,300),[T]);Object(a.useEffect)((()=>{0===C&&s(0)}),[C]);const x=Object(a.useCallback)((({animate:e,offset:t})=>{const n=o.findIndex((e=>e.left>t))-1;u(e),r(n),s(t),_(k,{startAt:n})}),[o,_,k]),D=w||[],A=Object(a.useMemo)((()=>D.map((e=>({identifier:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xg(Object(s),!0).forEach((function(t){eh(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({mediaItemType:"file",id:e.mediaApiFileId},f.viewContext&&null!==f.viewContext.collection?{collectionName:f.viewContext.collection}:{}),selectable:!1,actions:((e,t,s,n,a,i,r,o,c,l,u,d)=>[...Qg(e,t,s,a,i,r,o,u,d),...Jg(e,n,i,c,l)])(e.id,e.parentName,e.parentId,d,E[e.id],p,k,v,h,g,y,O),isLazy:!m,isParentCommentJsdInternal:e.isParentCommentJsdInternal})))),[D,E,d,p,m,k,f.viewContext,g,h,v,y,O]),L=Object(a.useCallback)((e=>{const t={list:e.map((e=>e.identifier))},s=e.map(((e,s)=>{if(b||I)return sh(`card-${s}`);const n=e.isParentCommentJsdInternal;return i.a.createElement(rg.a,Zg({key:e.identifier.id,mediaClientConfig:j,mediaViewerDataSource:t,useInlinePlayer:!1,dimensions:th,shouldOpenMediaViewer:!0,featureFlags:Object(wg.a)(),titleBoxBgColor:n?Re.a.Y75:void 0,
titleBoxIcon:n?"LockFilledIcon":void 0},e))})),n=S-s.length-C,a=Array.from({length:C}).map(((e,t)=>sh(`card-${t}`))),r=Array.from({length:n}).map(((e,t)=>sh(`card-${S-n+t}`)));return[...a,...s,...r]}),[C,I,b,S,j]),M=Object(a.useCallback)((()=>{T(k,{startAt:n})}),[n,k,T]);return I?i.a.createElement($f,{shouldHideImage:!0,onClick:M}):i.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.filmstrip-panel"},i.a.createElement(og.a,{offset:t,animate:l,onSize:P,onScroll:x,mediaClientConfig:j,featureFlags:Object(wg.a)()},L(A)))};nh.displayName="AttachmentFilmstrip";var ah=at()([fg,jg,v.i,Object(as.a)((e=>({onCardCoverShow:()=>{e("card-cover-show.click")},onCardCoverHide:()=>{e("card-cover-hide.click")}}))),Object(cg.a)({externalId:"issue.attachment.card"}),Object(r.b)((e=>({mediaContext:Object(_.a)(e),isMobile:Object(T.s)(e),cardCover:Object(Sg.c)(e)?Object(Sg.a)(e):null,isPreview:Object(P.s)(e)})),(e=>({onCardCoverShow:(t,s)=>{e(Object(vg.d)(t,s))},
onCardCoverHide:t=>{e(Object(vg.d)(t))},onScrollToComments:()=>{e(Eg())},onScrollToWorklogs:()=>{e(kg())}}))),Object(ls.a)()])(nh),ih=s("./src/packages/platform/ui/error-boundary/src/index.js"),rh=s("./node_modules/@atlaskit/media-table/dist/es2019/component/mediaTable.js"),oh=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),ch=s("./src/packages/accessibility/src/common/ui/screenreader-text/styled.js"),lh=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js"),uh=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg"),dh=s.n(uh),ph=Object(v.h)({emptyStateTitle:{id:"issue-attachments-table.empty.empty-state-title",defaultMessage:"All your attachments in one place"},emptyStateDescription:{id:"issue-attachments-table.empty.empty-state-description",
defaultMessage:"Attachments can be added to paragraph fields, comments, and worklog entries. When you have attachments on this issue, you can view and download them here."}});const mh=()=>{const{formatMessage:e}=Object(xe.c)();return i.a.createElement(Un.a,{imageUrl:dh.a,header:e(ph.emptyStateTitle),description:e(ph.emptyStateDescription)})};mh.displayName="NoAttachments";var bh=mh,fh=Object(v.h)({fileName:{id:"issue-attachments-table.file-name",defaultMessage:"Name"},size:{id:"issue-attachments-table.size",defaultMessage:"Size"},date:{id:"issue-attachments-table.date",defaultMessage:"Date added"},loadingAriaLabel:{id:"issue-attachments-table.loading-aria-label",defaultMessage:"loading attachments"},loadedAriaLabel:{id:"issue-attachments-table.loaded-aria-label",defaultMessage:"Attachments table loaded. Press tab to enter the table"},internalOnlyLabel:{id:"issue-attachments-table.internal-only-label",defaultMessage:"Internal only"}})
;const gh=q.default.span(["white-space:nowrap;"]),hh=q.default.div(["margin:0 -","px;min-width:calc(100% + ","px);."," &{opacity:0;}.",":hover &,.",":focus &,.",":focus-within &{opacity:1;}"],z.e,2*z.e,"jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table"),yh=q.default.div(["display:flex;flex-direction:column;align-items:center;.","{background-color:",";&:hover{background-color:",";}button:hover{background:",";}}"],"media-table-row-highlighted",Re.a.Y50,Re.a.Y75,Re.a.Y100);var Oh=s("./node_modules/moment/moment.js"),jh=s.n(Oh),vh=s("./node_modules/@atlaskit/media-client/dist/es2019/utils/getMediaTypeFromMimeType.js"),Eh=s("./node_modules/@atlaskit/media-ui/dist/es2019/humanReadableSize.js");const kh="date",wh="deleteOrGoto",Sh="download",Ch="file",Ih="size";var Th=Object(v.h)({delete:{id:"issue-attachments-table.delete-button.delete",defaultMessage:"Delete attachment"}});function Ph(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ph(Object(s),!0).forEach((function(t){xh(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ph(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Dh=({attachmentId:e,onDeleteAttachment:t})=>{const s=Object(xe.c)(),{createAnalyticsEvent:n}=Object(Li.a)(),r=Object(a.useCallback)((s=>{s.stopPropagation();const a=n({action:"clicked",actionSubject:"button"});Object(Fa.h)(a,"deleteAttachment"),t(e)}),[e,n,t]),o=Object(a.useCallback)((e=>{
"Enter"===e.key&&e.stopPropagation()}),[]);return i.a.createElement(Zd.a,{appearance:"subtle",iconAfter:i.a.createElement(Ig.a,{label:s.formatMessage(Th.delete)}),onClick:r,onKeyPress:o,theme:(e,t)=>({buttonStyles:_h(_h({},e(t).buttonStyles),{},{display:"flex",justifyContent:"center","&:hover":{background:"#DFE1E6"},margin:"0"})})})};Dh.displayName="DeleteButton";var Ah=Dh,Lh=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),Mh=s.n(Lh);const Rh=q.default.div(["display:flex;align-content:center;align-items:center;padding-right:4px;"]),Nh=()=>{const{formatMessage:e}=Object(xe.c)(),t=e(fh.internalOnlyLabel);return i.a.createElement(je.a,{content:t},i.a.createElement(Rh,null,i.a.createElement(Mh.a,{primaryColor:Re.a.DN80A,label:t})))};Nh.displayName="InternalAttachmentIcon";var Fh=Nh,Uh=s("./node_modules/@atlaskit/media-ui/dist/es2019/media-type-icon.js"),Vh=s("./node_modules/@atlaskit/media-ui/dist/es2019/truncateText.js")
;const Kh=q.default.div(["display:flex;align-content:center;align-items:center;"]),Wh=q.default.div(["min-width:0;width:100%;span:first-of-type{&::first-letter{text-transform:capitalize;}}"]),Bh=({mediaType:e,icon:t,text:s,startFixedChars:n,endFixedChars:a})=>i.a.createElement(Kh,null,e&&i.a.createElement(Uh.b,{type:e}),t,i.a.createElement(Wh,null,i.a.createElement(je.a,{content:s},i.a.createElement(Vh.a,{text:s,startFixedChars:n,endFixedChars:a}))));Bh.displayName="NameCell";var Hh=Bh;function $h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$h(Object(s),!0).forEach((function(t){qh(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$h(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zh=(e,t,s,{formatMessage:n})=>i.a.createElement("div",{"aria-label":`${e} ${s?`- ${n(fh.internalOnlyLabel)}`:""}`},i.a.createElement(gh,{"aria-hidden":!0},i.a.createElement(Hh,{text:e,mediaType:Object(vh.a)(null==t?"":t),startFixedChars:3,endFixedChars:4,icon:s?i.a.createElement(Fh,null):void 0})));zh.displayName="createNameCell";const Yh=(e,t,s,n,a,r,o,c,l)=>t===Tg.b?n?i.a.createElement(hh,null,i.a.createElement(Ah,{attachmentId:e,onDeleteAttachment:a})):null:c?null:i.a.createElement(hh,null,i.a.createElement(Vg,{attachmentParent:t,attachmentParentId:s,attachmentView:Pg,onScrollToComments:r,onScrollToWorklogs:o,issueKey:l}));Yh.displayName="createDeleteOrGoToCell";const Qh=e=>void 0===e||e>=430,Jh=Object(Ic.a)(((e,t,s,n,a,i,r,o,c,l)=>{const u=Qh(t);return e.map((e=>({data:Gh(Gh({
file:zh(e.filename,e.mimetype,e.isParentCommentJsdInternal,l),date:jh()(1e3*e.createdDate).locale(s).format("DD MMM YYYY h:mma")},u?{size:Object(Eh.a)(e.filesize)}:{}),{},{deleteOrGoto:Yh(e.id,e.parentName,e.parentId,a[e.id],n,r,i,o,c)}),identifier:{mediaItemType:"file",id:e.mediaApiFileId},rowProps:{className:e.isParentCommentJsdInternal?"media-table-row-highlighted":""}})))})),Zh=e=>{
const{viewMediaClientConfig:t,onPreviewOpen:s=c.a,onPreviewClose:n=c.a,onDeleteAttachment:r,canDeleteAttachmentMap:o,onScrollToComments:l=c.a,onScrollToWorklogs:u=c.a,isInModal:d=!1}=e,p=Object(xe.c)(),{createAnalyticsEvent:m}=Object(Li.a)(),b=Object(a.useRef)(!1),f=Object(Ps.g)(),[{error:g,loading:h,meta:y,value:O},j]=Object(Ts.a)(f),{orderDirection:v,orderField:E,startAt:k}=y,{attachments:w,totalCount:S}=O,{refreshAttachments:C,setOrderDirection:I,setOrderField:T}=j,P=Object(Ic.a)(ag()(C,50)),_=Object(a.useMemo)((()=>Math.ceil((k+1)/6)),[k]),[x,D]=Object(a.useState)(_),[A,L]=Object(a.useState)(void 0),M=ag()(L,100),R=Object(a.useCallback)((()=>{C(f,{orderDirection:v,orderField:E,startAt:6*(_-1)})}),[f,v,E,_,C]),N=Object(a.useCallback)((e=>{b.current=!0,D(e),P(f,{orderDirection:v,orderField:E,startAt:6*(e-1)})}),[P,f,v,E]),F=Object(a.useCallback)(((e,t)=>{b.current=!0;const s=(e=>{switch(e){case Ih:return Tg.e.FILESIZE;case Ch:return Tg.e.FILENAME;default:return Tg.e.CREATED}
})(e),n=m({action:"sorted",actionSubject:"dynamicTable"});T(s),I(t),Object(Fa.h)(n,"issueAttachments",{key:e}),P(f,{orderDirection:t,orderField:s})}),[m,P,f,I,T]),U=Object(lh.a)();if(g)return i.a.createElement($f,{shouldHideImage:e.shouldHideErrorImage,onClick:R});if(0===S)return i.a.createElement(bh,null);const V=Jh(w||[],A,U,r,o,u,l,d,f,p),K=((e,{formatMessage:t})=>({cells:[{key:Ch,content:i.a.createElement(gh,null,t(fh.fileName)),isSortable:!0},...Qh(e)?[{key:Ih,content:t(fh.size),isSortable:!0,inlineStyles:{width:"66px"}}]:[],{key:kh,content:t(fh.date),isSortable:!0,inlineStyles:{width:"188px"}},{key:wh,content:"",inlineStyles:{width:"36px"},width:10},{key:Sh,content:"",inlineStyles:{width:"48px"}}]}))(A,p),W=(e=>{switch(e){case Tg.e.FILESIZE:return Ih;case Tg.e.FILENAME:return Ch;case Tg.e.CREATED:return kh;default:return}})(E);return i.a.createElement(i.a.Fragment,null,i.a.createElement(oh.a,{offscreen:!0,setWidth:e=>{M(e)}
}),h&&i.a.createElement(i.a.Fragment,null,b.current&&i.a.createElement(ch.a,{"aria-live":"assertive"},p.formatMessage(fh.loadingAriaLabel)),i.a.createElement(tg,{pageNumber:x,totalCount:S})),!h&&i.a.createElement(i.a.Fragment,null,b.current&&i.a.createElement(ch.a,{"aria-live":"assertive"},p.formatMessage(fh.loadedAriaLabel)),i.a.createElement(yh,null,i.a.createElement(rh.a,{items:V,mediaClientConfig:t,columns:K,itemsPerPage:6,totalItems:S||0,pageNumber:_,onSetPage:N,onSort:F,sortKey:W,sortOrder:v,onPreviewOpen:s,onPreviewClose:n,rowProps:{className:"jira-issue-view-attachments-table"}}))))};Zh.defaultProps={shouldHideErrorImage:!1};var Xh=fg(Zh,Pg);const ey=q.default.div(["padding:","px;min-width:","px;position:relative;table{width:100%;}"],z.e/2,37*z.e),ty=({viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})=>i.a.createElement(ih.b,{id:"issue.details.attachment.list-view"},i.a.createElement(ey,null,i.a.createElement(Xh,{shouldHideErrorImage:!0,
viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})));ty.displayName="ListView";const sy=jg(ty);var ny=Object(r.b)((e=>({issueKey:Object(T.y)(e),mediaContext:Object(_.a)(e)})),(e=>({onScrollToComments:()=>e(Eg()),onScrollToWorklogs:()=>e(kg())})))(sy);var ay=({attachmentError:e,refreshAttachments:t,isPreview:s,totalCount:n})=>{const[r]=Object(sg.b)("jira.user.issue.attachment.view"),o=Object(Ps.g)(),c=Object(a.useCallback)((()=>{t(o)}),[o,t]);if(e)return i.a.createElement($f,{shouldHideImage:!0,onClick:c});switch(r){case"list-view":return s?i.a.createElement(tg,{totalCount:n}):i.a.createElement(ny,null);case"strip-view":default:return i.a.createElement(ah,null)}},iy=Object(r.b)((e=>({isPreview:Object(P.s)(e)
})),{})(ay),ry=s("./node_modules/@atlaskit/icon/glyph/warning.js"),oy=s.n(ry),cy=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),ly=s("./src/packages/platform/ui/flags/src/services/index.js"),uy=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const dy=Object(qp.a)(uy.a,{selector:e=>e.meta.isDeleteAllDialogOpen}),py={isDeleting:!1,didDelete:!1,error:void 0};var my=Object(v.h)({heading:{id:"attachments.delete-all-dialog.heading",defaultMessage:"Delete attachments"},deleteDetailsMessage:{id:"attachments.delete-all-dialog.delete-details-message",defaultMessage:"You can't delete {nonDeletableCount} of these attachments. Either you don't have permission, or they're in issue fields and comments."},deletingAllAttachmentsMessage:{id:"attachments.delete-all-dialog.deleting-all-attachments",defaultMessage:"This action will permanently delete all {deletableCount} attachments in the attachments panel."},
deletingAllAttachmentsMessageSingle:{id:"attachments.delete-all-dialog.deleting-all-attachments-single",defaultMessage:"This action will permanently delete the 1 attachment in the attachments panel."},deletingSomeAttachmentsMessage:{id:"attachments.delete-all-dialog.deleting-some-attachments",defaultMessage:"This action will permanently delete all other attachments in the attachments panel."},cancelButton:{id:"attachments.delete-all-dialog.cancel-button-label",defaultMessage:"Cancel"},deleteButton:{id:"attachments.delete-all-dialog.delete-button-label",defaultMessage:"Delete"},deletingButton:{id:"attachments.delete-all-dialog.deleting-button-label",defaultMessage:"Deleting"},deleteAllFailedNotificationTitle:{id:"attachments.delete-all-dialog.delete-all-failed-notification-title",defaultMessage:"We couldn\u2019t delete all your attachments"},deleteAllFailedNotificationDescription:{id:"attachments.delete-all-dialog.delete-all-failed-notification-description",
defaultMessage:"We didn\u2019t finish deleting all your attachments for {issueKey}. Check your connection and then try again."}});const by=q.default.div(["background-color:",";display:flex;margin-bottom:","px;padding:","px;"],Re.a.Y50,2*z.e,z.e),fy=q.default.div(["padding-left:","px;"],z.e),{safeErrorWithoutCustomerData:gy}=O.a,hy=()=>{const e=Object(Ps.g)(),{formatMessage:t}=Object(xe.c)(),{createAnalyticsEvent:s}=Object(Li.a)(),[{value:{totalCount:n,deletableCount:r}},{refreshAttachments:o}]=Object(Ts.a)(e),[c,{setDeleteAllDialogOpen:l}]=dy(),{showFlag:u}=Object(ly.f)(),[{isDeleting:d,error:p},m]=(e=>{const[t,{setDeleteAllDialogOpen:s}]=dy(),[,{refreshAttachments:n}]=Object(Ts.b)(),[i,r]=Object(a.useState)(py),o=Object(Mi.a)();return Object(a.useEffect)((()=>{t||r(py)}),[t]),[i,Object(a.useCallback)((async()=>{r({isDeleting:!0,didDelete:!1,error:void 0});try{await Object(wc.a)(((e,t)=>`${e}/rest/api/2/issue/${t}/attachments`)(o,e)),s(!1),n(e),r({isDeleting:!1,didDelete:!0,
error:void 0})}catch(t){r({isDeleting:!1,didDelete:!1,error:t})}}),[o,e,n,s])]})(e),b="number"==typeof r?r:0,f="number"==typeof n?n:0,g=b===f;Object(a.useEffect)((()=>{p&&(gy("issue.attachments.delete-all",p.message||p.toString()),Object(cy.a)({error:p,meta:{id:"deleteAllDialog",packageName:"jiraIssueView",teamName:"bento"}}),u({type:"error",title:my.deleteAllFailedNotificationTitle,description:[my.deleteAllFailedNotificationDescription,{issueKey:e}],isAutoDismiss:!0}))}),[p,e,u]);const h=Object(a.useCallback)((()=>{const t=m(),n=s({action:"submitted",actionSubject:"form"});Object(Fa.h)(n,"deleteAllAttachmentsDialog",{deletableCount:b}),t&&o(e)}),[s,b,e,m,o]),y=Object(a.useCallback)((()=>{l(!1);const e=s({action:"closed",actionSubject:"modalDialog"});Object(Fa.h)(e,"deleteAllAttachmentsDialog",{deletableCount:b})}),[s,b,l]),O=Object(a.useCallback)((()=>g?1===b?t(my.deletingAllAttachmentsMessageSingle):t(my.deletingAllAttachmentsMessage,{deletableCount:b
}):t(my.deletingSomeAttachmentsMessage)),[g,b,t]);return"number"==typeof f&&0!==b&&c?i.a.createElement(B.f,null,i.a.createElement(B.g,{actions:[{text:t(d?my.deletingButton:my.deleteButton),onClick:h,isDisabled:d},{text:t(my.cancelButton),onClick:y}],heading:t(my.heading),appearance:"danger",width:"small",onClose:y,shouldCloseOnOverlayClick:!0,isHeadingMultiline:!1,body:()=>i.a.createElement(B.b,null,!g&&i.a.createElement(by,null,i.a.createElement(oy.a,{primaryColor:Re.a.Y500,label:""}),i.a.createElement(fy,null,t(my.deleteDetailsMessage,{nonDeletableCount:f-b}))),i.a.createElement("p",null,O()))})):null};hy.displayName="Dialog";var yy=Object(a.memo)(hy),Oy=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),jy=s("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js"),vy=Object(v.h)({title:{id:"attachments.heading.title",defaultMessage:"Attachments {totalCount}"},attachmentsMenuAriaLabel:{id:"attachments.heading.attachmentsMenuLabel",
defaultMessage:"Attachments Menu"},addAttachmentAriaLabel:{id:"attachments.heading.addAttachmentLabel",defaultMessage:"Add Attachment"}});const Ey=q.default.div(["margin-left:","px;"],.75*z.e),ky=({canCreateAttachment:e,onClick:t})=>{const{createAnalyticsEvent:s}=Object(Li.a)(),{formatMessage:n}=Object(xe.c)(),r=Object(a.useCallback)((()=>{t();const e=s({action:"clicked",actionSubject:"button"});Object(Fa.h)(e,"addAttachment")}),[s,t]);return e?i.a.createElement(Ey,null,i.a.createElement(jy.a,{label:n(vy.addAttachmentAriaLabel),onClick:r})):null};ky.displayName="AddAttachments";var wy=Object(r.b)((e=>({canCreateAttachment:!Object(T.t)(e)&&Object(Oy.b)(e)})),(e=>({onClick:()=>e(Object(ws.b)())})))(ky),Sy=Object(v.h)({deleteAll:{id:"attachments.heading.delete-all",defaultMessage:"Delete all"}});const Cy=()=>{const e=Object(Ps.g)(),{formatMessage:t}=Object(xe.c)(),{createAnalyticsEvent:s}=Object(Li.a)(),[{value:n}]=Object(Ts.a)(e),[,{setDeleteAllDialogOpen:a}]=dy()
;if("number"!=typeof n.deletableCount||n.deletableCount<=0)return null;const{deletableCount:r}=n;return i.a.createElement(Za.a,{key:"delete-all-attachments",onClick:()=>{a(!0);const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(Fa.h)(e,"deleteAllAttachmentsDialog",{deletableCount:r})}},t(Sy.deleteAll))};Cy.displayName="DeleteAllItem";var Iy=Cy,Ty=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),Py=s("./node_modules/file-saver/FileSaver.js"),_y=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),xy=s("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js");const Dy=Object(qp.a)(uy.a,{selector:(e,t)=>((e,t)=>e.issueAttachments[t]||xy.c)(e,t).isDownloading});var Ay=Object(v.h)({downloadAll:{id:"attachments.heading.download-all",defaultMessage:"Download all"},downloading:{id:"attachments.heading.downloading",defaultMessage:"Downloading attachments"}});const Ly=Object(a.memo)((e=>{
const{issueId:t,issueKey:s}=e,{formatMessage:n}=Object(xe.c)(),{createAnalyticsEvent:r}=Object(Li.a)();if(!t)return null;const[{value:{totalCount:o}}]=Object(Ts.a)(s),[c,l]=((e,t)=>{const s=`${t}_attachments.zip`,[n,{setIsDownloading:i}]=Dy(t),r=`${Object(Mi.a)()}/secure/issueAttachments/${e}.zip`,{createAnalyticsEvent:o}=Object(Li.a)(),{showFlag:c,dismissFlag:l}=Object(ly.f)(),u=Object(a.useRef)();let d=Object(a.useCallback)((()=>{}),[]);const p=Object(a.useCallback)((()=>{u.current&&l(u.current)}),[l]),m=Object(a.useCallback)(((e,s)=>{let n=null,a=e.toString();e instanceof $c.b&&(n=e.statusCode,a=e.message),i(t,!1),Object(cy.a)({error:e,meta:{id:s,packageName:"jiraIssueAttachmentsBase",teamName:"bento"}}),In.h.safeErrorWithoutCustomerData("issue.attachments.download-all",a);const r=500===n?_y.a.downloadFailedExceedFileSizeDescription:_y.a.downloadFailedDescription;u.current=c({type:"error",title:_y.a.downloadFailedTitle,description:[r,{issueKey:t}],actions:[{onClick:d,
content:_y.a.tryAgain}]})}),[t,d,i,c]),b=Object(a.useCallback)((async()=>{i(t,!0),Object(Fa.b)(o({}),"downloadAll requested"),c({type:"success",title:_y.a.downloadStartTitle,description:_y.a.downloadStartDescription,isAutoDismiss:!0}),fetch(r).then((e=>{if(!e.ok)throw new $c.b(e.status,e.statusText);return Object(Fa.b)(o({}),"downloadAll started"),e.blob()})).then((e=>{try{Object(Py.saveAs)(e,s),i(t,!1),Object(Fa.b)(o({}),"downloadAll completed")}catch(n){m(n,"useDownloadAllService-save-file")}})).catch((e=>m(e,"useDownloadAllService-fetch")))}),[o,s,t,m,r,i,c]);return d=Object(a.useCallback)((()=>{b(),p()}),[b,p]),[n,b]})(t,s),u=Object(a.useCallback)((()=>{l();const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(Fa.h)(e,"downloadAllAttachments",{totalMedia:o})}),[r,l,o]);return i.a.createElement(Za.a,{key:"download-all-attachments",onClick:u,elemAfter:i.a.createElement(Ty.a,null,o),isDisabled:c},n(c?Ay.downloading:Ay.downloadAll))}));var My=Object(r.b)((e=>({
issueId:Object(T.x)(e),issueKey:Object(T.y)(e)})),{})(Ly),Ry=Object(v.h)({switchToListView:{id:"attachments.heading.switch-to-listView",defaultMessage:"Switch to list view"},switchToStripView:{id:"attachments.heading.switch-to-strip-view",defaultMessage:"Switch to strip view"}});var Ny=Object(a.memo)((({refreshAttachments:e})=>{const t=Object(Ps.g)(),{formatMessage:s}=Object(xe.c)(),[n,{setValue:r}]=Object(sg.b)("jira.user.issue.attachment.view"),{createAnalyticsEvent:o}=Object(Li.a)(),c=Object(a.useCallback)((s=>()=>{r(s),e(t);const n=o({action:"clicked",actionSubject:"dropdownItem"});Object(Fa.h)(n,"switchAttachmentsView",{view:s})}),[o,t,e,r]);switch(n){case"list-view":return i.a.createElement(Za.a,{onClick:c("strip-view")},s(Ry.switchToStripView));case"strip-view":default:return i.a.createElement(Za.a,{onClick:c("list-view")},s(Ry.switchToListView))}}));var Fy=({refreshAttachments:e,isPreview:t})=>{const{formatMessage:s}=Object(xe.c)()
;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Xa.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:i.a.createElement(gm.a,{size:"small",label:s(vy.attachmentsMenuAriaLabel)}),isDisabled:t},position:"bottom right"},i.a.createElement(ei.a,null,i.a.createElement(Ny,{refreshAttachments:e}),i.a.createElement(My,null),i.a.createElement(Iy,null))),i.a.createElement(Ua.a,{onMount:e=>Object(Fa.b)(e,"AttachmentListViewOnboarding mounted")}))},Uy=Object(r.b)((e=>({isPreview:Object(P.s)(e)})),{})(Fy);var Vy=({totalCount:e,refreshAttachments:t})=>{const{formatMessage:s}=Object(xe.c)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Da.e,null,s(vy.title,{totalCount:e>0?`(${e})`:""})),i.a.createElement(Da.d,null,i.a.createElement(Uy,{refreshAttachments:t}),i.a.createElement(wy,null)))};const Ky=()=>{const e=Object(Ps.g)(),[{error:t,value:{totalCount:s}},{refreshAttachments:n}]=Object(Ts.a)(e)
;return 0===s?null:i.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.panel"},i.a.createElement(Da.c,null,i.a.createElement(Vy,{totalCount:s,refreshAttachments:n})),i.a.createElement(iy,{attachmentError:t,totalCount:s,refreshAttachments:n}),i.a.createElement(yy,null))};Ky.displayName="Attachments";const Wy=()=>i.a.createElement(M.a,{id:"issue.base.content.attachments-panel"},i.a.createElement(R.a,{id:"base.content.attachments-panel",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},i.a.createElement(Ky,null)));Wy.displayName="AttachmentsWithMonitoring";var By=Wy;const Hy=()=>({type:"SUBTASK_QUICK_ADD_CLICKED"}),$y=()=>({type:"ISSUE_IN_EPIC_QUICK_ADD_CLICKED"}),Gy=()=>({type:"CHILD_ISSUE_QUICK_ADD_CLICKED"}),qy=(e,t)=>({type:"CHILD_ISSUE_ADD_SUCCESS",payload:{childIssue:e,fieldsData:t}}),zy=()=>({type:"CHILD_ISSUE_PANEL_ADD_CLICKED"})
;var Yy=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),Qy=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js");const Jy=Object(rn.createSelector)(P.H,(e=>e.childPanel)),Zy=Object(rn.createSelector)(Jy,(e=>e.subtaskQuickAddClickCount)),Xy=Object(rn.createSelector)(Jy,(e=>e.issueInEpicQuickAddClickCount)),eO=Object(rn.createSelector)(Jy,(e=>e.childIssueQuickAddClickCount));var tO=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js");const sO="CHILD_ISSUE_ADDED",nO="ISSUE_CHILDREN_ORDER_CHANGED",aO={[sO]:sO,[nO]:nO}
;var iO=s("./src/packages/platform/utils/app-base/src/index.js"),rO=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),oO=s("./src/packages/platform/ui/flags/src/ui/dispatcher/index.js"),cO=s("./src/packages/platform/utils/react-hooks/use-previous/src/common/utils/index.js"),lO=s("./src/packages/platform/utils/shallow-equal/src/index.js"),uO=s("./src/packages/platform/services/issue/src/components/context/consumer.js"),dO=Object(v.h)({linkParentErrorTitle:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-title",defaultMessage:"We couldn't link the child issue"},linkParentErrorDescription:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."},reorderErrorTitle:{id:"issue.views.common.child-issues-panel.flags.reorder-error-title",defaultMessage:"We couldn't reorder those issues"},reorderErrorDescription:{
id:"issue.views.common.child-issues-panel.flags.reorder-error-description",defaultMessage:"Wait a few moments, then give it another try."}}),pO=e=>{switch(e.type){case"state.entities.LINK_PARENT_FAILURE":return{type:"error",title:dO.linkParentErrorTitle,description:dO.linkParentErrorDescription};case"state.entities.REORDER_CHILDREN_FAILED":return{type:"error",title:dO.reorderErrorTitle,description:dO.reorderErrorDescription};default:return}};const mO=e=>({setState:t})=>{t({newIssueIds:e})},bO=e=>({setState:t})=>{t({sortBy:e})},fO={newIssueIds:[],sortBy:void 0},gO=Object(Gp.a)({name:"child-issues",initialState:fO,actions:n}),hO=Object(qp.a)(gO,{selector:e=>e.newIssueIds}),yO=(Object(qp.a)(gO,{selector:e=>e.sortBy}),Object(Gi.a)(gO)),OO=()=>{const[e,{setNewIssueIds:t}]=hO(),s=Object(a.useCallback)((s=>{const n=e.concat(s);t(n)}),[e,t]),n=Object(a.useCallback)((e=>t(e)),[t]),i=Object(a.useMemo)((()=>({setNewChildIssues:n,addNewChildIssues:s})),[n,s]);return[e,i]};function jO(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vO(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jO(Object(s),!0).forEach((function(t){EO(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jO(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function EO(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kO(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const wO=["summary","issuetype","parent","project"],SO=e=>!!Object.keys(e).find((t=>!(e=>wO.find((t=>e===t)))(t)&&!e[t].hasDefaultValue&&e[t].required));var CO=s("./node_modules/redux-observable/lib/es/index.js")
;const IO=e=>e.context,TO=e=>e.entities,PO=e=>e.ui,_O=Object(rn.createSelector)(TO,(e=>e.issues||[])),xO=Object(rn.createSelector)(_O,(e=>e.filter((e=>"DONE"===e.statusCategory)))),DO=Object(rn.createSelector)(_O,(e=>e.filter((e=>"DONE"!==e.statusCategory)))),AO=Object(rn.createSelector)(_O,(e=>e.filter((e=>"IN_PROGRESS"===e.statusCategory)))),LO=Object(rn.createSelector)(TO,(e=>e.issueHierarchyLevel)),MO=e=>Object(rn.createSelector)(_O,(t=>ns()(t,(t=>t.id===e)))),RO=Object(rn.createSelector)(TO,(e=>e.issueTypes)),NO=Object(rn.createSelector)(RO,(e=>`issuetype in (${e.map((e=>e.id)).join(",")})`)),FO=Object(rn.createSelector)(PO,(e=>e.addClickCount)),UO=Object(rn.createSelector)(PO,(e=>e.childPanelView)),VO=Object(rn.createSelector)(PO,(e=>e.childCreateSummary)),KO=Object(rn.createSelector)(PO,RO,((e,t)=>e.selectedIssueType||t[0])),WO=Object(rn.createSelector)(PO,(e=>e.hideDone)),BO=Object(rn.createSelector)(PO,(e=>e.fetchIssueTypesStatus)),HO=Object(rn.createSelector)(BO,(e=>"COMPLETE"===e)),$O=Object(rn.createSelector)(PO,(e=>e.sortBy)),GO=Object(rn.createSelector)(IO,(e=>e.baseUrl)),qO=(Object(rn.createSelector)(IO,(e=>e.locale)),
Object(rn.createSelector)(IO,(e=>e.childIssuesPanelType))),zO=Object(rn.createSelector)(qO,(e=>!!e&&"classicSubtasks"===e)),YO=Object(rn.createSelector)(qO,(e=>!!e&&"classicProjectEpicChildren"===e)),QO=Object(rn.createSelector)(qO,(e=>!!e&&"nextGenChildren"===e)),JO=Object(rn.createSelector)(IO,(e=>e.supportsIssueCreation)),ZO=Object(rn.createSelector)(IO,HO,((e,t)=>e.requiresFullCreate||!t)),XO=Object(rn.createSelector)(IO,(e=>e.parentKey)),ej=Object(rn.createSelector)(IO,(e=>e.parentId)),tj=Object(rn.createSelector)(IO,(e=>e.customFieldIdRank)),sj=Object(rn.createSelector)(IO,(e=>e.epicLinkFieldKey)),nj=Object(rn.createSelector)(IO,(e=>e.projectId)),aj=Object(rn.createSelector)(IO,(e=>e.messages||{})),ij=Object(rn.createSelector)(aj,(e=>e.title)),rj=Object(rn.createSelector)(aj,(e=>e.noValueText||null)),oj=Object(rn.createSelector)(IO,(e=>e.onNavigateToNewIssue)),cj=Object(rn.createSelector)(IO,(e=>e.onChange)),lj=(Object(rn.createSelector)(IO,(e=>e.isIssueViewComplete)),
Object(rn.createSelector)(IO,(e=>null===e.user||""===e.user))),uj=Object(rn.createSelector)(IO,(e=>e.projectType)),dj=Object(rn.createSelector)(IO,(e=>e.application)),pj=Object(rn.createSelector)(IO,(e=>e.edition));var mj=(e,t)=>e.ofType("state.entities.LINK_CHILD_SUCCESS","state.entities.REORDER_CHILDREN_REQUEST","state.entities.REORDER_CHILDREN_FAILED","state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS").do((e=>{try{const s=t.getState(),n=cj(s),a=qO(s);switch(e.type){case"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS":n({type:aO.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.childIssue,fieldsData:e.payload.fieldsData}});break;case"state.entities.LINK_CHILD_SUCCESS":n({type:aO.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.linkedChild}});break;case"state.entities.REORDER_CHILDREN_REQUEST":{const{currentOrder:t,newOrder:s,currentIndex:i,newIndex:r}=e.payload,{id:o}=t[i],c=o?[Object(Hi.j)(o)]:[],l=r>i,u=Number((s[l?r-1:r+1]||{}).id);"nextGenChildren"===a&&n({type:aO.ISSUE_CHILDREN_ORDER_CHANGED,
meta:{issueIds:c,rankId:u,isRankAfter:l}});break}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:t,originalIndex:s,newIndex:i}=e.payload,{id:r}=t[s],o=r?[Object(Hi.j)(r)]:[],c=s>i,l=Number((t[c?s-1:s+1]||{}).id);"nextGenChildren"===a&&l&&n({type:aO.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:o,rankId:l,isRankAfter:c}});break}}}catch(s){In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.change-notification","Failed to call onChange callback",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})).ignoreElements(),bj=s("./node_modules/rxjs/Rx.js");const fj=(e,t)=>({type:"state.entities.CREATE_CHILD_REQUEST",payload:{optimisticUiChildIssue:e},meta:{analyticsEvent:t}}),gj=(e,t,s,n=!1)=>({type:"state.entities.CREATE_CHILD_SUCCESS",payload:{optimisticId:e,createdChild:t,usedGlobalCreateDialog:n},meta:{analyticsEvent:s}}),hj=(e,t,s)=>({type:"state.entities.LINK_CHILD_SUCCESS",payload:{issueId:e,linkedChild:t},meta:{analyticsEvent:s}
}),yj=e=>({type:"state.entities.LINKING_ISSUE_RETRY_FAILURE",payload:{issueId:e}}),Oj=e=>({type:"state.entities.FETCH_SINGLE_CHILD_SUCCESS",payload:{childIssue:e}}),jj=()=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST"}),vj=(e,t,s,n)=>({type:"state.entities.REORDER_CHILDREN_FAILED",payload:{originalOrder:e,newOrder:t,originalIndex:s,newIndex:n}}),Ej=e=>({type:"state.entities.REORDER_CHILDREN_SUCCESS",payload:{newOrder:e}});var kj=(e,t)=>e.ofType("state.entities.CHILD_CREATED_IN_FULL_DIALOG").mergeMap((({payload:e,meta:s})=>{const n=t.getState(),{optimisticId:a,createdChild:i}=e;if(!QO(n))return bj.Observable.of(gj(a,i,s.analyticsEvent,!0));const r=GO(n),o=nj(n),c=ej(n);if(!o||!c)throw new Error("Attempted to link a child issue without a project or parent issue ID");return bj.Observable.from(((e,t,s,n)=>Object(wc.d)(`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`,{body:JSON.stringify({issueIds:[n]})
}))(r,o,c,i.id)).map((()=>gj(a,i,s.analyticsEvent,!0))).catch((e=>bj.Observable.of(((e,t)=>({type:"state.entities.LINK_PARENT_FAILURE",payload:{optimisticId:e,error:t}}))(a,e))))})),wj=(e,t)=>e.ofType("state.entities.CREATE_CHILD_FAILURE","state.entities.LINK_PARENT_FAILURE","state.entities.LINKING_ISSUE_FAILURE").do((({type:e,payload:{error:s}})=>{const n=t.getState(),a=qO(n)||"unknown_child",i=dj(n),r=pj(n);"state.entities.CREATE_CHILD_FAILURE"===e&&"ValidationError"===s.name?Object(Cn.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:a,application:i,edition:r}):"AbortError"===s.name||Object($c.c)(s)||Object(Cn.a)({experience:"createIssue",wasExperienceSuccesful:!1,analyticsSource:a,application:i,edition:r,additionalAttributes:{errorMessage:`${e} ${s.message}`}})})).switchMap((()=>bj.Observable.empty()));const Sj=(e,t,s)=>Object(wc.e)(`${e}/rest/greenhopper/1.0/epics/${t}/add`,{body:JSON.stringify({ignoreEpics:!0,issueKeys:[s]})})
;var Cj=(e,t,s)=>((e,t)=>Object(wc.d)(`${e}/rest/api/2/issue`,{body:JSON.stringify(t)}))(e,t).then((t=>({id:t.id,issueKey:t.key,issueLink:`${e}/browse/${t.key}`,issueSummary:s.issueSummary,issueTypeIconUrl:s.issueTypeIconUrl,issueTypeName:s.issueTypeName,assigneeUrl:s.assigneeUrl,assigneeDisplayName:s.assigneeDisplayName,isLoading:!1,errorType:void 0})));function Ij(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tj(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ij(Object(s),!0).forEach((function(t){Pj(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ij(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pj(e,t,s){return t in e?Object.defineProperty(e,t,{
value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var _j=(e,t)=>e.ofType("state.entities.CREATE_CHILD_REQUEST").mergeMap((({payload:e,meta:s})=>{const n=t.getState(),{optimisticUiChildIssue:a}=e;return((e,t,s)=>{const n=GO(e),a=nj(e),i=ej(e),r=zO(e),o=QO(e),c=YO(e),l=KO(e);if(!a||!i)throw new Error("Attempted to create a new child issue without a project or parent issue ID");const u=r||o,{hasEpicLinkField:d}=l,p=c&&d,m=sj(e),b={fields:Tj(Tj({project:{id:a},issuetype:{id:t.issueTypeId},summary:t.issueSummary},u?{parent:{id:i}}:{}),p&&m?{[m]:XO(e)}:{})};return bj.Observable.from(Cj(n,b,t)).mergeMap((e=>c&&!d?bj.Observable.from(Sj(n,i,e.id)).map((()=>gj(t.id,e,s))).catch((s=>bj.Observable.of(((e,t,s)=>({type:"state.entities.LINKING_ISSUE_FAILURE",payload:{createdChild:e,optimisticId:t,error:s}}))(e,t.id,s)))):bj.Observable.of(gj(t.id,e,s)))).catch((e=>bj.Observable.of(((e,t)=>({type:"state.entities.CREATE_CHILD_FAILURE",payload:{optimisticId:e,error:t}}))(t.id,e))))
})(n,a,s.analyticsEvent)}));function xj(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Dj=(e,t)=>e.ofType("state.entities.CREATE_CHILD_RETRY").map((({payload:{optimisticId:e},meta:s})=>{const n=t.getState(),a=MO(e)(n),{isLoading:i,hasError:r}=a,o=xj(a,["isLoading","hasError"]);return fj(o,s.analyticsEvent)
})),Aj=s("./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js"),Lj=s("./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js"),Mj=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),Rj=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),Nj=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),Fj=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const Uj=(e,t)=>{const s=e.get(t);return s?s.value:void 0};var Vj=(e,t,s)=>((e,t)=>e.getIssue$(t,!0).toPromise().then((({error:e,issue:t})=>e?Promise.reject(e):t?Promise.resolve(t):Promise.reject(new Error("Unexpected response from the dataprovider, expected an issue or an error but got neither")))))(e,s).then((e=>{const{id:s,key:n,fields:a}=e,i=Uj(a,"summary"),r=Uj(a,"issuetype"),o=Uj(a,"priority"),c=Uj(a,"status"),l=Uj(a,"assignee")||null;return{id:s?s.toString():"",
issueKey:n,issueLink:Object(Nj.f)(Object(Hi.b)(t),Object(Hi.l)(n)),issueSummary:i,issueTypeIconUrl:r&&r.iconUrl,issueTypeName:r&&r.name,issuePriorityUrl:o&&o.iconUrl,issuePriorityName:o&&o.name,statusName:c&&c.name,statusId:c&&c.id,statusCategory:c&&Object(jl.statusCategoryForId)(c.statusCategory.id),statusCategoryId:c&&c.statusCategory.id,assigneeUrl:l&&Object(Fj.c)(l).avatarUrl,assigneeDisplayName:l&&l.displayName,errorType:void 0,isLoading:!1}})),Kj=s("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js"),Wj=(e,t)=>((e,t)=>Object(Kj.b)(e,t,["assignee"]).toPromise())(e,t).then((e=>e.map((({id:e,fields:t})=>({id:e,assigneeUrl:t&&t.assignee&&Object(Fj.c)(t.assignee).avatarUrl,assigneeDisplayName:t&&t.assignee&&Object(Fj.c)(t.assignee).displayName}))))),Bj=(e,t)=>e.ofType("state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST").switchMap((()=>{const e=t.getState(),s=GO(e),n=_O(e).map((e=>e.issueKey)).filter((e=>void 0!==e))
;return bj.Observable.from(Wj(s,n)).map((e=>(e=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS",payload:{issues:e}}))(e))).catch((e=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.fetch-details-for-issues","Failed to fetch details for issues",new m.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),bj.Observable.empty())))}));const Hj=(e,t,s)=>{const n=GO(t),a=ej(t),i=MO(e)(t);if(!a)throw new Error("Attempted to link a next-gen issue to a parent without issue ID ");return bj.Observable.from(((e,t,s)=>Object(wc.e)(`${e}/rest/api/3/issue/${s}`,{body:JSON.stringify({fields:{parent:{id:t}}})}))(n,a,e)).map((()=>hj(e,i,s))).catch((t=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.add-existing-issue","Failed to link a next-gen issue to a parent",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),bj.Observable.of(yj(e)))))}
;var $j=Object(CO.combineEpics)(((e,t)=>e.ofType("state.entities.LINKING_ISSUE_RETRY").mergeMap((({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(qO(n)){case"classicProjectEpicChildren":{const t=GO(n),a=ej(n),i=MO(e)(n);if(!a)throw new Error("Attempted to link a classic issue to an epic without a parent issue ID");return bj.Observable.from(Sj(t,a,e)).map((()=>hj(e,i,s))).catch((t=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.link-child-issue","Failed to link a classic issue to a parent",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),bj.Observable.of(yj(e)))))}case"nextGenChildren":return Hj(e,n,s);default:return bj.Observable.empty()}}))),((e,t)=>e.ofType("state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST").mergeMap((({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(qO(n)){case"nextGenChildren":return Hj(e,n,s);default:return bj.Observable.empty()}})))),Gj=(e,t)=>{
const{id:s,key:n,fields:a}=e;return{id:s,issueKey:n,issueLink:Object(Nj.f)(Object(Hi.b)(t),Object(Hi.l)(n)),issueSummary:a.summary,issueTypeIconUrl:a.issuetype.iconUrl,issueTypeName:a.issuetype.name,issuePriorityUrl:a.priority&&a.priority.iconUrl||void 0,issuePriorityName:a.priority&&a.priority.name||void 0,statusCategory:Object(jl.statusCategoryForId)(a.status.statusCategory.id),statusCategoryId:a.status.statusCategory.id,statusName:a.status.name,statusId:a.status.id,assigneeUrl:a.assignee&&Object(Fj.c)(a.assignee).avatarUrl,assigneeDisplayName:a.assignee&&Object(Fj.c)(a.assignee).displayName,isLoading:!1,errorType:void 0}},qj=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),zj=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");const Yj=e=>qj.a`query {
      issue(issueIdOrKey: "${e}", latestVersion: true, screen:"view", fields:"subtasks") {
        fields {
          key
          value
        }
      }
    }`,Qj=e=>{if(!e||!e.data||!e.data.issue)return[];const t=e.data.issue.fields.find((e=>"children-issues"===e.key));return t&&t.value?t.value.map((({id:e,key:t,self:s,fields:{assignee:n,issuetype:a,priority:i,summary:r,status:o}})=>({id:e,key:t,self:s,fields:{issueType:a,priority:i,status:o,summary:r,assignee:n}}))):[]};var Jj=(e,t)=>((e,t)=>Object(zj.a)((e=>`${e}/rest/graphql/1/`)(e),{method:"POST",body:JSON.stringify({query:Yj(t)})}))(e,t).map(Qj),Zj=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var Xj=(e,t,s,n)=>((e,t,s,n)=>Object(Zj.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/after`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankAfterId:n})}))(e,t,s,n);var ev=(e,t,s,n)=>((e,t,s,n)=>Object(Zj.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/before`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankBeforeId:n})}))(e,t,s,n);function tv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tv(Object(s),!0).forEach((function(t){nv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var av=s("./src/packages/platform/utils/fetch/src/utils.js"),iv=(e,t)=>((e,t)=>Object(wc.b)(`${e}/rest/api/2/issue/${t}?fields=subtasks`))(e,t).then((e=>{const t=e&&e.fields;return t&&t.subtasks||[]}));function rv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ov(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(s),!0).forEach((function(t){cv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var lv=(e,t)=>{const s=GO(e),n=ej(e);if(!n)throw new Error("Attempted to reorder subtasks without parentId");const{currentOrder:a,newOrder:i,currentIndex:r,newIndex:o}=t;return bj.Observable.from(((e,t,s,n)=>{const a=`${e}/secure/MoveSubtask.jspa?orderByRank=${Object(ne.isOrderByLexoRankEnabled)().toString()}&id=${t}&currentSubTaskSequence=${s}&subTaskSequence=${n}&atl_token=${Object(Sc.a)()||""}`
;return fetch(a).then((e=>e.ok?null:e.text().then((t=>{throw new av.a(e.status,t)}))))})(s,n,r,o)).switchMap((()=>iv(s,n))).flatMap(((e=[])=>{const t=e.map((({id:e})=>e)),n=i.map((({id:e})=>e));if(Ta()(t,n))return bj.Observable.of(Ej(i));if(Ta()(t.slice().sort(),n.slice().sort())){const e=t.map((e=>i.find((t=>t.id===e))));return bj.Observable.of(Ej(e))}const a=e.map((e=>{const{id:t}=e;return ov(ov({},i.find((e=>e.id===t))||{}),Gj(e,s))}));return bj.Observable.of(Ej(a),jj())})).catch((e=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.reorder-subtask","Failed to reorder subtasks",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),bj.Observable.of(vj(a,i,r,o)))))},uv=(e,t)=>e.ofType("state.entities.REORDER_CHILDREN_REQUEST").mergeMap((e=>{const s=t.getState();switch(qO(s)){case"classicSubtasks":return lv(s,e.payload);case"nextGenChildren":return((e,t,s)=>{const n=GO(e),a=ej(e),i=tj(e)
;if(!a)throw new Error("Attempted to reorder children without parentId");if(!i)throw new Error("Attempted to reorder children without customFieldId");const{currentOrder:r,newOrder:o,currentIndex:c,newIndex:l}=t,{analyticsEvent:u}=s,{id:d}=r[c],p=d?[+d]:[],b=l>c,f=Number((o[b?l-1:l+1]||{}).id);if(!f)throw new Error("Attempted to reorder children without rankId");return(b?Xj(n,i,p,f):ev(n,i,p,f)).switchMap((()=>Jj(n,a))).flatMap(((e=[])=>{const t=e.map((({id:e})=>e)),s=o.map((({id:e})=>e));if(Object(Fa.f)(u,"issueRank updated",{numIssues:1,previousIssueIndex:c,currentIssueIndex:l,isRankAfter:b}),Ta()(t,s))return bj.Observable.of(Ej(o));if(Ta()([...t].sort(),[...s].sort())){const e=t.map((e=>o.find((t=>t.id===e))));return bj.Observable.of(Ej(e))}const a=e.map((e=>{const{id:t}=e;return sv(sv({},o.find((e=>e.id===t))||{}),Gj(e,n))}));return bj.Observable.of(Ej(a),jj())
})).catch((e=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.reorder-children","Failed to reorder children",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),bj.Observable.of(vj(r,o,c,l)))))})(s,e.payload,e.meta);default:return bj.Observable.empty()}}));const dv=e=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS",payload:{requiresFullCreate:e}}),pv=()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED"});var mv=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),bv=(e,t)=>t?bj.Observable.from(((e,t)=>Object(wc.b)(`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`))(e,t)).map((e=>dv(e))).catch((e=>(Object(mv.a)("issue.views.common.child-issues-panel.has-validators-on-subtasks","Failed to check if project has validators on subtasks",e,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
bj.Observable.of(pv())))):bj.Observable.of(pv()),fv=(e,t)=>e.ofType("state.context.REQUIRES_FULL_CREATE_CHECK").switchMap((()=>{const e=t.getState();switch(qO(e)){case"classicSubtasks":{const t=GO(e),s=nj(e);return lj(e)?bj.Observable.of(dv(!0)):bv(t,s)}default:return bj.Observable.empty()}})),gv=e=>Object(CO.combineEpics)(_j,(e=>(t,s)=>t.ofType("state.entities.CREATE_CHILD_SUCCESS").do((({payload:{createdChild:e,usedGlobalCreateDialog:t},meta:n})=>{const a=s.getState(),i=zO(a),r={action:"created",actionSubjectId:e.id,attributes:{isInlineCreatedOnIssue:!0,isClassicSubtask:i}};Object(g.a)(n.analyticsEvent,r);const o=qO(a)||"unknown_child",c=dj(a),l=pj(a);Object(Cn.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:o,application:c,edition:l,additionalAttributes:{isCreated:!0,wasCreatedInline:!t}})})).switchMap((({payload:{createdChild:t}})=>{
const n=s.getState(),a=GO(n),i=void 0!==t.issueKey&&null!==t.issueKey?Object(Hi.l)(t.issueKey):void 0,r=void 0!==i?Object(Rj.a)(i):void 0;if(Object(ne.isCleanupCreateChildSuccessEpicEnabled)()&&(!i||!r)){const e="Issue or project key missing when handling create child success";return In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.missing-key",e,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),bj.Observable.empty()}const o=i,c=r;return Object(ne.isCleanupCreateChildSuccessEpicEnabled)()||r?bj.Observable.from(Object(Aj.a)(a,o,c)).map((({data:e})=>{const t=Object(Mj.a)(e),s={id:e.issue.id,key:o,self:"",fields:Object.values(t)};return(e=>({type:"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS",payload:e}))({childIssue:Object(Lj.a)(s,a),fieldsData:t})
})).catch((e=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.fetch-issue-graphql","Failed to fetch issue after a successful create",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),bj.Observable.empty()))):bj.Observable.from(Vj(e,a,o)).map((e=>Oj(e))).catch((e=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.fetch-single-issue","Failed to fetch single issue after a successful create",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),bj.Observable.empty())))})))(e),wj,Dj,Bj,kj,fv,uv,mj,$j,(e=>(t,s)=>t.ofType("state.entities.LINK_CHILD_SUCCESS").do((({payload:{linkedChild:e},meta:t})=>{const n=s.getState(),a=qO(n),i={action:"linked",actionSubjectId:e.id,attributes:{isInlineChildAdded:!0,panelType:a}};Object(g.a)(t.analyticsEvent,i)})).switchMap((({payload:{linkedChild:t}})=>{const n=s.getState(),a=GO(n)
;return bj.Observable.from(Vj(e,a,t.issueKey)).map((e=>Oj(e))).catch((e=>(In.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.link-child-success.fetch-single-issue","Failed to fetch single issue after a successful child issue linking",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),bj.Observable.empty())))})))(e)),hv=s("./src/packages/common-legacy-do-not-add-anything-new/src/tangerine/state/initiate.js"),yv=s("./node_modules/redux/es/index.js");function Ov(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ov(Object(s),!0).forEach((function(t){vv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ov(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ev={baseUrl:Object(Hi.b)(""),locale:"en_US",user:null,childIssuesPanelType:null,supportsIssueCreation:!1,requiresFullCreate:!1,parentKey:null,customFieldIdRank:null,epicLinkFieldKey:null,parentId:null,projectId:null,messages:null,onNavigateToNewIssue:c.a,onChange:c.a,isIssueViewComplete:!1,projectType:null,application:null,edition:null};const kv="create",wv="linkIssue";function Sv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sv(Object(s),!0).forEach((function(t){Iv(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Iv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tv={issues:[],issueTypes:[],issueHierarchyLevel:void 0};const Pv=()=>({type:"state.ui.SHOW_INLINE_CREATE"}),_v=()=>({type:"state.ui.HIDE_ADD_CHILD_ISSUE"}),xv=Object.freeze({InlineCreate:"InlineCreate",AddExistingIssue:"AddExistingIssue"}),Dv=e=>({type:"state.ui.SET_CHILD_PANEL_VIEW",view:e}),Av=e=>({type:"state.ui.SET_CHILD_CREATE_SUMMARY",summary:e}),Lv=e=>({type:"state.ui.SET_FETCH_ISSUE_TYPES_STATUS",payload:e});function Mv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rv(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mv(Object(s),!0).forEach((function(t){Nv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Nv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Fv={addClickCount:0,hideDone:!1,selectedIssueType:null,childPanelView:xv.InlineCreate,childCreateSummary:"",fetchIssueTypesStatus:"NONE",sortBy:null};var Uv=Object(yv.combineReducers)({context:(e=Ev,t)=>{switch(t.type){case"state.context.SET_CONTEXT":case"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS":return jv(jv({},e),t.payload);case"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED":return jv(jv({},e),{},{requiresFullCreate:!0});case"state.context.SET_IS_ISSUE_VIEW_COMPLETE":return jv(jv({},e),{},{
isIssueViewComplete:t.payload});default:return e}},ui:(e=Fv,t)=>{switch(t.type){case"state.ui.SHOW_INLINE_CREATE":return Rv(Rv({},e),{},{addClickCount:e.addClickCount+1});case"state.ui.HIDE_ADD_CHILD_ISSUE":return Rv(Rv({},e),{},{addClickCount:0,childPanelView:xv.InlineCreate,childCreateSummary:""});case"state.ui.SET_CHILD_PANEL_VIEW":return Rv(Rv({},e),{},{childPanelView:t.view});case"state.ui.SET_CHILD_CREATE_SUMMARY":return Rv(Rv({},e),{},{childCreateSummary:t.summary});case"state.ui.TOGGLE_HIDE_DONE":return Rv(Rv({},e),{},{hideDone:!e.hideDone});case"state.ui.SELECTED_ISSUE_TYPE_CHANGED":return Rv(Rv({},e),{},{selectedIssueType:t.payload});case"state.ui.SET_FETCH_ISSUE_TYPES_STATUS":return Rv(Rv({},e),{},{fetchIssueTypesStatus:t.payload});case"state.ui.SET_SORTING_ORDER":return Rv(Rv({},e),{},{sortBy:t.payload});default:return e}},entities:(e=Tv,t)=>{switch(t.type){case"state.entities.SET_ENTITIES":{const{issueTypes:s,issues:n,issueHierarchyLevel:a}=t.payload
;return Cv(Cv({},e),{},{issues:n,issueTypes:s,issueHierarchyLevel:a})}case"state.entities.UPDATE_ISSUE":{const s=t.payload,n=[...e.issues],a=n.findIndex((e=>e.id===s.id));return n[a]=s,Cv(Cv({},e),{},{issues:n})}case"state.entities.CREATE_CHILD_REQUEST":{const s=Cv(Cv({},t.payload.optimisticUiChildIssue),{},{isLoading:!0,errorType:void 0});return Cv(Cv({},e),{},{issues:e.issues.filter((e=>e.id!==s.id)).concat(s)})}case"state.entities.CREATE_CHILD_SUCCESS":{const{optimisticId:s,createdChild:n}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.filter((e=>e.id!==s)).concat(n)})}case"state.entities.FETCH_SINGLE_CHILD_SUCCESS":{const{childIssue:s}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.map((e=>e.id===s.id?s:e))})}case"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS":{const{childIssue:s}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.map((e=>e.id===s.id?s:e))})}case"state.entities.CREATE_CHILD_FAILURE":{const{optimisticId:s}=t.payload;return Cv(Cv({},e),{},{
issues:e.issues.map((e=>e.id===s?Cv(Cv({},e),{},{errorType:kv,isLoading:!1}):e))})}case"state.entities.LINKING_ISSUE_FAILURE":{const{optimisticId:s,createdChild:n}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.filter((e=>e.id!==s)).concat(Cv(Cv({},n),{},{errorType:wv,isLoading:!1}))})}case"state.entities.CREATE_CHILD_RETRY":{const{optimisticId:s}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.map((e=>e.id===s?Cv(Cv({},e),{},{errorType:void 0,isLoading:!0}):e))})}case"state.entities.LINKING_ISSUE_RETRY":{const{issueId:s}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.map((e=>e.id===s?Cv(Cv({},e),{},{errorType:void 0,isLoading:!0}):e))})}case"state.entities.LINKING_ISSUE_RETRY_FAILURE":{const{issueId:s}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.map((e=>e.id===s?Cv(Cv({},e),{},{errorType:wv,isLoading:!1}):e))})}case"state.entities.LINK_PARENT_FAILURE":case"state.entities.CANCEL_OPTIMISTIC_CHILD":{const{optimisticId:s}=t.payload;return Cv(Cv({},e),{},{
issues:e.issues.filter((e=>e.id!==s))})}case"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS":{const{issues:s}=t.payload;return Cv(Cv({},e),{},{issues:e.issues.map((e=>Cv(Cv({},e),ns()(s,(t=>t.id===e.id)))))})}case"state.entities.REORDER_CHILDREN_REQUEST":case"state.entities.REORDER_CHILDREN_SUCCESS":{const{newOrder:s}=t.payload;return Cv(Cv({},e),{},{issues:s})}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:s}=t.payload;return Cv(Cv({},e),{},{issues:s})}case"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST":{const s={id:t.payload.issueId,issueKey:t.payload.issueKey,issueSummary:t.payload.issueSummary,issueTypeIconUrl:t.payload.issueTypeIconUrl,assigneeUrl:null,assigneeDisplayName:null,isLoading:!0,errorType:void 0};return Cv(Cv({},e),{},{issues:e.issues.filter((e=>e.id!==s.id)).concat(s)})}default:return e}}})
;var Vv=s("./node_modules/keycode/index.js"),Kv=s.n(Vv),Wv=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),Bv=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/index.js"),Hv=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),$v=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),Gv=s("./node_modules/debounce-promise/dist/index.js"),qv=s.n(Gv),zv=s("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js");const Yv=({sections:e},t)=>{const s=e[0],n=e[1],a=s.issues,i=n?n.issues:[],r=wu()([...a,...i],"key");return[{label:n?t.matchingIssues:t.recentIssues,options:r.map((e=>({issueId:Object(Hi.j)(String(e.id)),value:e.key,issueKey:e.key,summary:e.summaryText,imageUrl:e.img})))}]};class Qv extends a.Component{constructor(...e){super(...e),this.state={options:[],isLoading:!1,error:null},this.fetchData=e=>{
const{baseUrl:t,issueKey:s,projectId:n,jql:a,labels:i}=this.props,r=Object(zv.a)(e,window.location.host,t)||e;return this.setState({isLoading:!0,error:null}),Object(Jp.a)(`${t}/rest/api/3/issue/picker?currentIssueKey=${s}&currentProjectId=${n}&showSubTasks=true&showSubTaskParent=true&currentJQL=${a}&query=${r}`).then((e=>(this.setState({options:Yv(e,i),isLoading:!1}),e))).catch((e=>this.setState({isLoading:!1,options:[],error:e})))},this.debouncedFetchData=qv()(this.fetchData,300,{leading:!0})}componentDidMount(){this.fetchData(this.props.initialValue)}render(){const{children:e}=this.props,{options:t,isLoading:s,error:n}=this.state;return e({options:t,isLoading:s,error:n,loadOptions:this.debouncedFetchData})}}Qv.displayName="IssueOptionService",Qv.defaultProps={initialValue:""};var Jv=s("./node_modules/@atlaskit/icon/glyph/add.js"),Zv=s.n(Jv),Xv=s("./node_modules/react-select/dist/chunk-80640036.browser.esm.js")
;const eE=q.default.div(["display:flex;align-items:center;"]),tE=q.default.div(["margin-right:","px;width:","px;height:","px;"],z.e,2*z.e,2*z.e),sE=q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 100%;min-width:0;"]);function nE(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const aE=({imageUrl:e,children:t})=>i.a.createElement(eE,null,i.a.createElement(tE,null,i.a.createElement("img",{src:e,alt:""})),t);aE.displayName="IssueCard";const iE=({label:e})=>i.a.createElement(eE,null,i.a.createElement(Zv.a,{label:"",size:"small",primaryColor:Re.a.B400}),i.a.createElement(H.a,{appearance:"link",isSelected:!1},e));iE.displayName="CreateIssueOption"
;const rE=({imageUrl:e,issueKey:t,summary:s})=>i.a.createElement(aE,{imageUrl:e},i.a.createElement(sE,null,t," ",s));rE.displayName="IssueOption";const oE=({imageUrl:e,issueKey:t,summary:s})=>i.a.createElement(aE,{imageUrl:e},i.a.createElement(sE,null,`${t} ${s}`));oE.displayName="SelectedValue";const cE=e=>{let{children:t}=e,s=nE(e,["children"]);return i.a.createElement(Xv.z.SingleValue,s,i.a.createElement(oE,{imageUrl:s.data.imageUrl,issueKey:s.data.issueKey,summary:s.data.summary}))};cE.displayName="SingleValue";var lE=Object(v.h)({defaultPlaceholder:{id:"issue-picker.default-placeholder",defaultMessage:"Search by issue key or summary"},defaultRecentIssues:{id:"issue-picker.default-recent-issues",defaultMessage:"Recent Issues"},defaultMatchingIssues:{id:"issue-picker.default-matching-issues",defaultMessage:"Matching Issues"},defaultFailedLoadingIssues:{id:"issue-picker.default-failed-loading-issues",defaultMessage:"Failed to load issues"},createIssue:{id:"issue-picker.create-issue",
defaultMessage:"Create an issue for '{value}'"}});class uE extends a.Component{constructor(...e){super(...e),this.onBlur=e=>{e("")},this.onChange=(e,{action:t},s)=>{switch(t){case"select-option":{const{issueId:t,issueKey:n,summary:a,imageUrl:i}=e;this.props.onChange&&this.props.onChange({issueId:t,issueKey:n,issueSummary:a,issueTypeIconUrl:i}),s("");break}case"clear":this.props.onClear&&this.props.onClear()}},this.onCreate=e=>{this.props.onCreate&&this.props.onCreate(e)},this.onInputChange=e=>(t,{action:s})=>{"input-change"===s&&e(t)},this.onSetSelectRef=e=>{this.akSelect=e},this.formatOptionLabel=(e,{context:t})=>{if(e.__isNew__){const t=this.props.intl.formatMessage(lE.createIssue,{value:e.value});return i.a.createElement(iE,{label:t})}return"menu"===t?i.a.createElement(rE,{imageUrl:e.imageUrl,issueKey:e.issueKey,summary:e.summary}):e.label},this.akSelect=void 0,this.filterOption=()=>!0,this.renderNoOptionsMessage=e=>{if(!e)return;const{intl:t}=this.props
;return i.a.createElement(Bv.a,{description:t.formatMessage(lE.defaultFailedLoadingIssues),imageWidth:56,isSubtle:!0})}}focus(){this.akSelect.focus()}reset(){this.akSelect.select.select.select.clearValue(),this.akSelect.blur(),this.akSelect.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:a}=this.props;return i.a.createElement($v.b,null,(({tenantContext:{baseUrl:r}})=>i.a.createElement(Qv,{labels:{recentIssues:a.formatMessage(lE.defaultRecentIssues),matchingIssues:a.formatMessage(lE.defaultMatchingIssues)},baseUrl:r,issueKey:t,projectId:s,jql:n,initialValue:e},(({loadOptions:t,options:s,isLoading:n,error:r})=>i.a.createElement(Wv.a,{ref:this.onSetSelectRef,styles:Hv.f,isLoading:n,formatOptionLabel:this.formatOptionLabel,options:s,defaultInputValue:e,autoFocus:!0,allowCreateWhileLoading:!0,defaultOptions:!0,onCreateOption:this.onCreate,placeholder:a.formatMessage(lE.defaultPlaceholder),components:{SingleValue:cE},onChange:(e,s)=>this.onChange(e,s,t),
onInputChange:this.onInputChange(t),onBlur:()=>this.onBlur(t),isClearable:!0,filterOption:this.filterOption,noOptionsMessage:()=>this.renderNoOptionsMessage(r),openMenuOnFocus:!0})))))}}uE.displayName="IssuePicker",uE.defaultProps={initialValue:""};var dE=uE,pE=Object(v.h)({childLinkButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-link-button",defaultMessage:"Add"},childCancelButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-cancel-button",defaultMessage:"Cancel"}});const mE=Object(q.default)(H.a)(["margin-left:","px !important;"],z.e),bE=q.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],z.e);class fE extends a.Component{constructor(...e){super(...e),this.state={selectedIssue:void 0,isDisabled:!0},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onAdd=()=>{this.state.selectedIssue&&(this.props.onAdd(this.state.selectedIssue),this.resetPicker())},this.onChange=e=>{this.setState({selectedIssue:e,
isDisabled:!1})},this.onClear=()=>this.setState({selectedIssue:void 0,isDisabled:!0}),this.onCancelClicked=()=>{this.onClear(),this.props.onCancel()},this.onSetSelectRef=e=>{this.issuePicker=e},this.onKeyDown=e=>{e.keyCode===Kv()("enter")&&(this.onAdd(),e.stopPropagation())},this.issuePicker=void 0,this.childContainer=void 0}async componentDidMount(){Object(Cr.a)(this.childContainer)}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(Cr.a)(this.childContainer),this.focusPicker())}resetPicker(){this.issuePicker&&this.issuePicker.reset()}focusPicker(){this.issuePicker&&this.issuePicker.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:a}=this.props;return t&&s?i.a.createElement(W.a,{onEscape:this.onCancelClicked},i.a.createElement("div",{onKeyDown:this.onKeyDown,ref:this.onChildContainerRefSet},i.a.createElement(dE,{ref:this.onSetSelectRef,initialValue:e,issueKey:t,projectId:s,jql:n,onChange:this.onChange,onClear:this.onClear,intl:a,
onCreate:this.props.onCreate}),i.a.createElement(bE,null,i.a.createElement(mE,{appearance:"primary",onClick:this.onAdd,isDisabled:this.state.isDisabled},a.formatMessage(pE.childLinkButton)),i.a.createElement(mE,{appearance:"subtle",onClick:this.onCancelClicked},a.formatMessage(pE.childCancelButton))))):null}}fE.displayName="AddExistingIssue",fE.defaultProps={initialValue:""};var gE=Object(qt.a)([v.i,Object(is.a)("button",{onAdd:"clicked",onCancel:"clicked",onCreate:"clicked"}),Object(E.a)({onAdd:"addExistingChildIssueRequest",onCancel:"hideAddExistingChildIssue",onCreate:"switchToCreateChildIssue"}),Object(r.b)((e=>({addClickCount:FO(e),initialValue:VO(e),issueKey:XO(e),jql:NO(e),projectId:nj(e)})),(e=>({onAdd:(t,s)=>e(((e,t)=>({type:"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST",payload:e,meta:{analyticsEvent:t}}))(t,s)),onCancel:()=>e(_v()),onCreate:t=>{e(Av(t)),e(Dv(xv.InlineCreate))}})))])(fE),hE=Object(v.h)({createChildLabel:{
id:"issue.views.common.child-issues-panel.heading.add-child.create-child-label",defaultMessage:"Create child"},createSubtaskLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-subtask-label",defaultMessage:"Create subtask"}});const yE=q.default.div(["margin-left:","px;"],.75*z.e);class OE extends a.Component{render(){const{intl:{formatMessage:e},onClick:t,isClassicSubtaskPanel:s}=this.props,n=s?hE.createSubtaskLabel:hE.createChildLabel;return i.a.createElement(yE,null,i.a.createElement(jy.a,{onClick:t,label:e(n)}))}}OE.displayName="AddChild",OE.defaultProps={isClassicSubtaskPanel:!1};var jE=Object(qt.a)([v.i,Object(is.a)("button",{onClick:"clicked"}),Object(E.a)({onClick:"showChildIssuesInlineCreate"}),Object(r.b)((e=>({isClassicSubtaskPanel:zO(e)})),((e,t)=>({onClick:(...s)=>{e(Pv()),t.onClick(...s)}
})))])(OE),vE=s("./node_modules/lodash/isEmpty.js"),EE=s.n(vE),kE=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroupCheckbox.js"),wE=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItemCheckbox.js"),SE=Object(v.h)({actions:{id:"issue.views.common.child-issues-panel.heading.meatballs.actions",defaultMessage:"Actions"},filter:{id:"issue.views.common.child-issues-panel.heading.meatballs.filter",defaultMessage:"Filter"},bulkEdit:{id:"issue.views.common.child-issues-panel.heading.meatballs.bulk-edit",defaultMessage:"Bulk edit"},hideDone:{id:"issue.views.common.child-issues-panel.heading.meatballs.hide-done",defaultMessage:"Hide done"},search:{id:"issue.views.common.child-issues-panel.heading.meatballs.search",defaultMessage:"View in search"},tooltip:{id:"issue.views.common.child-issues-panel.heading.meatballs.tooltip",defaultMessage:"Issue actions"}})
;const CE=q.default.div([".childIssuesPanelMeatballButton{padding:0 ","px;}"],.75*z.e);class IE extends a.Component{constructor(...e){super(...e),this.onHideDoneClickedAnalytics=e=>{const{onHideDoneClicked:t,allIssues:s,incompleteIssues:n,hideDone:a}=this.props;t(s.length,n.length,!a,e)}}onBulkEditClickedAnalytics(e){return t=>{this.props.onBulkEditClicked(e,t)}}onViewInSearchClickedAnalytics(e){return t=>{this.props.onViewInSearchClicked(e,t)}}isHideDoneCheckboxVisible(){const{allIssues:e,incompleteIssues:t}=this.props;return!EE()(t)&&t.length!==e.length}generateBulkEditLink(e){return`${this.props.baseUrl}/secure/GHBulkChange.jspa?issueKeys=${encodeURIComponent(e)}`}generateSearchLink(e){const t=encodeURIComponent(`issueKey in (${e})`);return`${this.props.baseUrl}/issues/?jql=${t}`}renderHideDoneCheckbox(){const{intl:{formatMessage:e},hideDone:t}=this.props;return this.isHideDoneCheckboxVisible()?i.a.createElement(kE.a,{title:e(SE.filter),id:"child-issues-panel-checkbox-group"
},i.a.createElement(wE.a,{id:"hideDone",key:"hideDone",onClick:this.onHideDoneClickedAnalytics,isSelected:t},e(SE.hideDone))):null}renderActionLinks(){const{intl:{formatMessage:e},hideDone:t,allIssues:s,incompleteIssues:n}=this.props,a=t?n:s,r=a.length,o=a.map((e=>e.issueKey)).join(","),c=this.generateBulkEditLink(o),l=this.generateSearchLink(o),u=this.isHideDoneCheckboxVisible()?e(SE.actions):"";return i.a.createElement(ei.a,{title:u},i.a.createElement(Za.a,{onClick:this.onBulkEditClickedAnalytics(r),href:c},e(SE.bulkEdit)),i.a.createElement(Za.a,{onClick:this.onViewInSearchClickedAnalytics(r),href:l},e(SE.search)))}render(){return i.a.createElement(CE,null,i.a.createElement(Xa.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:i.a.createElement(gm.a,{size:"small",label:this.props.intl.formatMessage(SE.tooltip)})},position:"bottom right"},this.renderHideDoneCheckbox(),this.renderActionLinks()))}}IE.displayName="Meatballs",IE.defaultProps={
hideDone:!1};var TE=Object(qt.a)([v.i,Object(is.a)("item",{onBulkEditClicked:"clicked",onViewInSearchClicked:"clicked",onHideDoneClicked:"clicked"}),Object(E.a)({onBulkEditClicked:e=>({name:"bulkEdit",issueCount:e}),onViewInSearchClicked:e=>({name:"viewInSearch",issueCount:e}),onHideDoneClicked:(e,t,s)=>({name:"toggleHideDone",totalIssues:e,incompleteIssues:t,hideDone:s})}),Object(r.b)((e=>({baseUrl:GO(e),parentKey:XO(e),hideDone:WO(e),allIssues:_O(e),incompleteIssues:DO(e)})),{onHideDoneClicked:()=>({type:"state.ui.TOGGLE_HIDE_DONE"})})])(IE),PE=Object(v.h)({sortByLabel:{id:"issue.views.common.child-issues-panel.heading.sort-by.label",defaultMessage:"Order by {option}"},created:{id:"issue.views.common.child-issues-panel.heading.created.label",defaultMessage:"Created"},key:{id:"issue.views.common.child-issues-panel.heading.key.label",defaultMessage:"Key"},priority:{id:"issue.views.common.child-issues-panel.heading.priority.label",defaultMessage:"Priority"},status:{
id:"issue.views.common.child-issues-panel.heading.status.label",defaultMessage:"Status"},assignee:{id:"issue.views.common.child-issues-panel.heading.assignee.label",defaultMessage:"Assignee"},ranking:{id:"issue.views.common.child-issues-panel.heading.ranking.label",defaultMessage:"Rank"},defaultOptionLabel:{id:"issue.views.common.child-issues-panel.heading.default-option.label",defaultMessage:"{option} (default)"}});const _E=q.default.span(["padding-right:","px;"],.75*z.e),xE=q.default.div(["min-width:","px;"],20*z.e),DE=q.default.div(["border-top:1px solid ",";padding:","px 0;span{color:",";}"],"#EBECF0",z.e/2,"#0052CC"),AE=Object(ii.a)("dropdownItem",{onClick:"clicked"})(Za.a),LE="ranking",ME=["created","key","priority","status","assignee"],RE="defaultOptionLabel",NE=e=>{var t;const{sortedBy:s,onSelect:n}=e;let r=ME;const o=Object(Ps.g)(),{formatMessage:c}=Object(xe.c)(),[l,u]=Object(a.useState)(!1),[,{setNewChildIssues:d}]=OO(),[p]=Object(nu.a)(o,"priority")
;(!p||!p.allowedValues||p.allowedValues.length<=1)&&(r=ME.filter((e=>"priority"!==e)));const m=Object(a.useMemo)((()=>{const e=new Map,t=c(PE.ranking),s=c(PE.defaultOptionLabel,{option:t});return e.set(LE,t),e.set(RE,s),r.forEach((t=>{e.set(t,c(PE[t]))})),e}),[r,c]),b=Object(a.useMemo)((()=>r.filter((e=>e!==s))),[r,s]),f=Object(a.useCallback)((()=>{d([])}),[d]),g=Object(a.useCallback)(((e,t)=>{f(),n(e,t)}),[f,n]);return i.a.createElement(pi.a,{trigger:i.a.createElement(H.a,{appearance:"subtle",isSelected:l,iconAfter:i.a.createElement(vd.a,{label:""})},i.a.createElement(_E,null,c(PE.sortByLabel,{option:null!==s&&s!==LE?null===(t=m.get(s))||void 0===t?void 0:t.toLowerCase():""}))),isOpen:l,onOpenChange:()=>{u(!l)}},i.a.createElement(xE,null,i.a.createElement(ei.a,null,b.map((e=>i.a.createElement(AE,{key:e,onClick:(t,s)=>g(e,s)},m.get(e)))),s&&s!==LE&&i.a.createElement(DE,null,i.a.createElement(AE,{key:LE,onClick:(e,t)=>g(LE,t)},m.get(RE))))))};NE.displayName="SortByMenu"
;var FE=Object(r.b)((e=>({sortedBy:$O(e)})),(e=>({onSelect:t=>{e((e=>({type:"state.ui.SET_SORTING_ORDER",payload:e}))(t))}})))(NE),UE=Object(v.h)({title:{id:"issue.views.common.child-issues-panel.heading.title.title",defaultMessage:"Child issues"}});class VE extends a.Component{render(){const{intl:{formatMessage:e},title:t}=this.props;return i.a.createElement(Da.e,null,e(t))}}VE.displayName="Title",VE.defaultProps={title:UE.title};var KE=Object(qt.a)([v.i,Object(r.b)((e=>({title:ij(e)})),{})])(VE);class WE extends a.Component{render(){const{Title:e,Meatballs:t,AddChild:s,SortByMenu:n,supportsIssueCreation:a,allIssues:r,onAddChildClick:o,sourceName:c}=this.props;return i.a.createElement(Da.c,null,i.a.createElement("label",{htmlFor:c},i.a.createElement(e,null)),i.a.createElement(Da.d,null,Object(ne.isSortingIssuesUnderEpicEnabled)()&&r.length>1?i.a.createElement(n,null):null,r.length>0?i.a.createElement(t,null):null,a&&0!==r.length?i.a.createElement(s,{onClick:o}):null))}}
WE.displayName="Heading",WE.defaultProps={supportsIssueCreation:!1,allIssues:[]};var BE=Object(qt.a)([Object(r.b)((e=>({Title:KE,Meatballs:TE,AddChild:jE,SortByMenu:FE,allIssues:_O(e),supportsIssueCreation:JO(e)})),{})])(WE),HE=s("./node_modules/@atlaskit/select/dist/es2019/Select.js"),$E=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),GE=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js"),qE=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js"),zE=Object(v.h)({typesPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.child-types-select.types-placeholder",defaultMessage:"Issue type"}});Re.a.N50,z.e,z.e;const YE=q.default.div(["display:flex;align-items:center;"]),QE=q.default.span(["padding-left:","px;display:inline-block;"],z.e);function JE(){return(JE=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ZE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function XE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ZE(Object(s),!0).forEach((function(t){ek(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZE(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ek(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tk={singleValue:e=>XE(XE({},e),{},{position:"static",transform:"none"})
},sk=e=>e.name,nk=e=>e.id,ak=e=>i.a.createElement(YE,null,i.a.createElement(Km.a,{url:e.iconUrl,title:e.name}),i.a.createElement(QE,null,e.name));ak.displayName="formatOptionLabel";class ik extends a.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{"select-option"===t.action&&null!=e&&this.props.onChange(e)}}render(){const{intl:{formatMessage:e},issueTypes:t,selectedIssueType:s}=this.props;return i.a.createElement($E.b,null,i.a.createElement(HE.a,JE({},GE.b,{styles:Object(qE.a)(Hv.f,tk),options:t,value:s,getOptionLabel:sk,getOptionValue:nk,formatOptionLabel:ak,onChange:this.onChange,placeholder:e(zE.typesPlaceholder)})))}}ik.displayName="ChildTypesSelect",ik.defaultProps={issueTypes:[]};var rk=Object(qt.a)([v.i,Object(r.b)((e=>({selectedIssueType:KO(e),issueTypes:RO(e)})),(e=>({onChange:t=>e((e=>({type:"state.ui.SELECTED_ISSUE_TYPE_CHANGED",payload:e}))(t))
})))])(ik),ok=s("./node_modules/lodash/trim.js"),ck=s.n(ok),lk=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),uk=s("./node_modules/@atlaskit/icon/glyph/search.js"),dk=s.n(uk);const pk=e=>{const{children:t,onClick:s}=e;return i.a.createElement(H.a,{appearance:"subtle-link",iconBefore:i.a.createElement(dk.a,{label:""}),isSelected:!1,onClick:s},t)};pk.displayName="AddExistingIssueButton",pk.displayName="AddExistingIssueButton";var mk=Object(v.h)({summaryLabel:{id:"issue.views.common.child-issues-panel.inline-create.summary-label",defaultMessage:"Child summary"},summaryPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.summary-placeholder",defaultMessage:"What needs to be done?"},summaryTooLong:{id:"issue.views.common.child-issues-panel.inline-create.summary-too-long",defaultMessage:"Summary must be less than 255 characters."},childCreateButton:{id:"issue.views.common.child-issues-panel.inline-create.child-create-button",
defaultMessage:"Create"},childCancelButton:{id:"issue.views.common.child-issues-panel.inline-create.child-cancel-button",defaultMessage:"Cancel"},addExistingIssuePlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.add-existing-issue-placeholder",defaultMessage:"Choose an existing issue"}}),bk=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const fk=q.default.div(["display:flex;align-items:center;background-color:",";width:100%;"],Re.a.N10),gk=q.default.div(["flex-grow:1;"]),hk=Object(bk.a)(H.a,{target:"e1o0mbwp0"})("margin-left:",z.e,"px !important;"),yk=q.default.div(["margin-top:","px;display:flex;justify-content:space-between;"],z.e),Ok=q.default.div(["justify-content:flex-end;display:flex;"]);function jk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vk(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jk(Object(s),!0).forEach((function(t){Ek(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jk(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ek(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kk=e=>ck()(e).length>255,wk=e=>{const t=ck()(e);return EE()(t)||kk(e)};class Sk extends a.Component{constructor(e){super(e),this.onSubmitClicked=()=>{this.createChild(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.createChild(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onUpdateChildSummary=e=>{const t=e.target.value
;this.props.onChangeSummary(t)},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onFieldContainerRefSet=e=>{this.fieldContainer=e},this.onAddExisting=()=>{this.props.onAddExistingIssue(),this.props.onAddExistingClickAnalytics()},this.childContainer=void 0,this.fieldContainer=void 0,this.createIssueFormFactory=void 0,this.createIssueFormFactory=null}async componentDidMount(){Object(Cr.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus();const e="classicSubtasks"===this.props.childIssuesPanelType?"quick-edit/form/factory/create-subtask":"quick-edit/form/factory/create-issue";this.createIssueFormFactory=await Object(lk.a)({name:e,wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:quick-form"})}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(Cr.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus())}createChild(){
const e=`OPTIMISTIC_CHILD_${Date.now()}`,{baseUrl:t,epicLinkFieldKey:s,selectedIssueType:n,projectId:a,parentIssueId:i,parentIssueKey:r,childIssuesPanelType:o,requiresFullCreate:c,summary:l}=this.props;if(!wk(l)&&n){const u={id:e,issueSummary:l,issueTypeId:`${n.id}`,issueTypeIconUrl:`${n.iconUrl}`,issueTypeName:`${n.name}`,assigneeUrl:null,assigneeDisplayName:null};if(n.hasRequiredField||c){const c="classicProjectEpicChildren"===o,u=this.createIssueFormFactory(vk({pid:a,issueType:n&&n.id,fields:vk({summary:l||""},c&&s?{[s]:r}:{}),customFieldsToPreserveOnFormRecreation:[...c&&s?[s]:[]]},"classicSubtasks"===o?{parentIssueId:i}:{}));u.bind("issueCreated",((n,a)=>{c&&a.createdIssueDetails.fields[s]!==r||this.props.onFullDialogCreate(e,Gj(a.createdIssueDetails,t)),this.resetAndFocus()})),u.asDialog({id:"classicSubtasks"===o?"create-subtask-dialog":"create-issue-dialog"}).show()}else this.props.onSubmit(u),this.resetAndFocus()}}closeAndReset(){this.reset(),this.props.onCancel()}
resetAndFocus(){this.reset(),this.fieldContainer&&this.fieldContainer.focus()}reset(){this.props.onChangeSummary("")}renderAddExistingIssueButton(){const{intl:{formatMessage:e}}=this.props;switch(this.props.childIssuesPanelType){case"nextGenChildren":return i.a.createElement(je.a,{content:e(mk.addExistingIssuePlaceholder)},i.a.createElement(pk,{onClick:this.onAddExisting},e(mk.addExistingIssuePlaceholder)));case"portfolioChildren":case"classicProjectEpicChildren":case"classicSubtasks":default:return i.a.createElement("div",null)}}render(){const{intl:{formatMessage:e},issueTypes:t,ChildTypesSelect:s,summary:n,inputId:a}=this.props,r=kk(n)?e(mk.summaryTooLong):"";return i.a.createElement("div",{ref:this.onChildContainerRefSet},i.a.createElement(fk,null,t.length>1?i.a.createElement(s,null):null,i.a.createElement(gk,null,i.a.createElement(W.a,{onEnter:this.onEnterPressed,onEscape:this.onEscPressed},i.a.createElement(ye.a,{ref:this.onFieldContainerRefSet,
placeholder:e(mk.summaryPlaceholder),label:e(mk.summaryLabel),onChange:this.onUpdateChildSummary,value:n,isInvalid:kk(n),invalidMessage:r,isLabelHidden:!0,shouldFitContainer:!0,id:a})))),i.a.createElement(yk,null,this.renderAddExistingIssueButton(),i.a.createElement(Ok,null,i.a.createElement(hk,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:wk(n)},e(mk.childCreateButton)),i.a.createElement(hk,{appearance:"subtle",onClick:this.onCancelClicked},e(mk.childCancelButton)))))}}Sk.displayName="InlineCreate",Sk.defaultProps={addClickCount:0,requiresFullCreate:!1,parentIssueKey:void 0,epicLinkFieldKey:null};var Ck=Object(k.b)("issue")(Sk),Ik=Object(qt.a)([v.i,Object(is.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked",onAddExistingClickAnalytics:"clicked"}),Object(is.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(is.a)("childIssuePanelInlineCreate",{onSubmit:"onSubmit",
onFullDialogCreate:"onFullDialogCreate"}),Object(E.a)({onSubmitClickAnalytics:"createChildIssue",onCancelClickAnalytics:"hideChildIssueInlineCreate",onEnterKeyPressedAnalytics:"confirmChildIssueCreate",onEscapeKeyPressedAnalytics:"cancelChildIssueCreate",onAddExistingClickAnalytics:"addExistingChildClick"}),Object(r.b)((e=>({ChildTypesSelect:rk,baseUrl:GO(e),issues:_O(e),addClickCount:FO(e),issueTypes:RO(e),selectedIssueType:KO(e),projectId:nj(e),parentIssueId:ej(e),parentIssueKey:XO(e),epicLinkFieldKey:sj(e),childIssuesPanelType:qO(e),requiresFullCreate:ZO(e),summary:VO(e)})),{onCancel:_v,onAddExistingIssue:()=>Dv(xv.AddExistingIssue),onChangeSummary:e=>Av(e),onSubmit:(e,t)=>fj(e,t),onFullDialogCreate:(e,t,s)=>((e,t,s)=>({type:"state.entities.CHILD_CREATED_IN_FULL_DIALOG",payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:s}}))(e,t,s)
})])(Ck),Tk=s("./node_modules/lodash/partition.js"),Pk=s.n(Tk),_k=s("./node_modules/@atlaskit/inline-message/dist/es2019/components/InlineMessage/index.js");const xk=Object(v.h)({retry:{id:"issue.issue-line-card-retry",defaultMessage:"Try again"},cancel:{id:"issue.issue-line-card-cancel",defaultMessage:"Cancel"}}),Dk=q.default.h1([""," margin-bottom:","px;"],Re.d.h400(),2*z.e),Ak=q.default.div(["margin-bottom:","px;"],2*z.e),Lk=q.default.div(["display:flex;justify-content:flex-start;"]),Mk=q.default.div(["margin-left:","px;"],z.e),Rk=(e,t,s,n,a)=>i.a.createElement(_k.a,{type:"warning",placement:"bottom-end"},i.a.createElement("div",null,i.a.createElement(Dk,null,t),i.a.createElement(Ak,null,s),i.a.createElement(Lk,null,i.a.createElement(H.a,{onClick:n},e.formatMessage(xk.retry)),i.a.createElement(Mk,null,i.a.createElement(H.a,{appearance:"subtle",onClick:a},e.formatMessage(xk.cancel))))));Rk.displayName="renderInlineMessage"
;var Nk=s("./node_modules/lodash/isNil.js"),Fk=s.n(Nk),Uk=s("./node_modules/lodash/isUndefined.js"),Vk=s.n(Uk),Kk=s("./node_modules/@atlaskit/icon/glyph/list.js"),Wk=s.n(Kk),Bk=s("./src/packages/platform/utils/constants/src/index.js"),Hk=s("./src/packages/issue/fields/assignee/src/ui/popover/main.js"),$k=s("./src/packages/issue/fields/number/src/services/index.js"),Gk=s("./src/packages/issue/fields/number/src/ui/view/main.js"),qk=s("./src/packages/issue/fields/number/src/ui/async.js");const zk=q.default.div(["& > div > div{margin-left:0;}"]),Yk=Object(re.f)((()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js"))),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),Qk=Object(a.memo)((({isHovering:e,isActive:t,isFocused:s,issueKey:n,estimateFieldId:r})=>{const[o,c]=Object(a.useState)(!1),[{value:l}]=Object($k.a)({issueKey:n,fieldKey:r
}),u=Object(a.useCallback)((()=>c(!0)),[]),d=Object(a.useCallback)((()=>c(!1)),[]),p=!(null==l)||o||!0===e||!0===s||!0===t,m=i.a.createElement(Gk.a,{isEditable:!0,value:l});return p?i.a.createElement(zk,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},i.a.createElement(qk.b,{packageName:"issue",fallback:m},i.a.createElement(Yk,{issueKey:n,fieldKey:r,onEdit:u,onConfirm:d,onEnter:d,onCancel:d,onEscape:d}))):null})),Jk=Object(v.h)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}"},remoteIssueUneditableStatusTooltip:{id:"issue.view.common.issue-line-card.remote-link.status.uneditable.tooltip",defaultMessage:"Remote issue can't be transitioned here. Select to view the issue, then change the status."},remoteLinkDeleteLinkTooltip:{
id:"issue.view.common.issue-line-card.remote-link.delete-button.tooltip",defaultMessage:"Unlink remote issue"},issueLinkDeleteLinkTooltip:{id:"issue.view.common.issue-line-card.delete-button.tooltip",defaultMessage:"Unlink issue"}});var Zk=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js");const Xk=q.default.div(["width:","px;position:relative;"],5*z.e);var ew=({issueTimeTracking:e,statusCategory:t})=>{const[s]=Object(_u.c)(),{remainingEstimateSeconds:n,originalEstimateSeconds:a,timeSpentSeconds:r}=e,o={loggedTime:r,remainingTime:n},c=a,l=t===Bk.a.DONE;return i.a.createElement(Xk,{"data-testid":"issue.views.common.issue-line-card.issue-line-card.mini-time-log-graph"},i.a.createElement(Zk.a,{value:o,estimatedTime:c,config:s,isDone:l,isCompact:!0,shouldHighlightOnHover:!0}))}
;const tw=q.default.div(["display:flex;align-items:center;"]),sw=Object(q.default)(tw)(["width:","px;height:100%;margin-left:","px;margin-right:-","px;"],4*z.e,z.e/4,z.e),nw=Object(q.default)(tw)(["width:100%;height:100%;position:relative;"]),aw=Object(q.default)(tw)(["cursor:grab;"]),iw=Object(q.default)(tw)(["cursor:not-allowed;&:hover{opacity:0.5;}"]),rw=Object(q.default)(tw)(["padding-left:","px;"],z.e),ow=Object(q.default)(tw)(["padding-right:","px;"],z.e/2),cw=q.default.a(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;text-decoration:",";white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";text-decoration:",";}"],z.e,(e=>e.isActive?Re.a.B400:Re.a.N90),(e=>e.isDone?"line-through":"none"),(e=>e.isActive?Re.a.B400:Re.a.N90),(e=>e.isDone?"line-through":"none")),lw=q.default.div(["",";padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.isActive&&`color: ${Re.a.B400};`),z.e),uw=q.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),dw=q.default.div([""])
;function pw(){return(pw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const{DONE:mw,statusCategoryForId:bw}=Bk.a;class fw extends a.Component{constructor(...e){super(...e),this.preventDefault=e=>e.preventDefault(),this.stopPropagation=e=>e.stopPropagation(),this.isActionVisible=()=>{const{isActive:e=!1,isHovering:t=!1,isFocused:s}=this.props;return!e&&(t||!0===s)},this.handleEditStatus=e=>{const{onEdit:t}=this.props;t&&t({statusId:e.id,statusName:e.name,statusCategory:bw(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},this.handleErrorDialogClick=e=>{e.stopPropagation()},this.handleErrorDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleLinkKeyClick=e=>{e.preventDefault();const{issueLink:t,push:s}=this.props;null!=t&&Object(Am.d)(e)?s(t):window.open(t,"_blank")}}shouldRenderKey(){return!!this.props.issueKey}
shouldShowRemoveAction(){const{isActive:e=!1,isHovering:t=!1,canRemove:s=!1,isFocused:n}=this.props;return s&&(e||t||n)}deleteButtonAction(e){e.stopPropagation();const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&n&&n(Object(Hi.l)(t),s)}renderReadOnlyAssignee(){const{assigneeDisplayName:e,assigneeUrl:t,isDraggable:s}=this.props;return Fk()(t)?null:i.a.createElement(rw,null,i.a.createElement(je.a,{content:e||"",hideTooltipOnMouseDown:s,position:"bottom"},i.a.createElement(Er.a,{name:e||"",src:t,size:"small"})))}renderExtractedAssignee(){const{issueKey:e}=this.props;return void 0===e?null:i.a.createElement(rw,{role:"button",onClick:this.preventDefault,onFocus:this.stopPropagation},i.a.createElement(Hk.default,{issueKey:Object(Hi.l)(e)}))}renderStatus(){const{isInteractive:e,issueKey:t,statusCategory:s,statusCategoryId:n,statusId:a,statusName:r,projectType:o,isDraggable:c,isRemote:l,intl:u}=this.props;if(Vk()(t)||Vk()(s)||Vk()(r)||Vk()(a)||Vk()(n))return null
;const d=!0===l&&!0!==e?u.formatMessage(Jk.remoteIssueUneditableStatusTooltip):null;return i.a.createElement(rw,{onClick:this.preventDefault,onFocus:this.stopPropagation},i.a.createElement(je.a,{content:d,hideTooltipOnMouseDown:c,position:"bottom"},i.a.createElement(Va.a,{sourceName:"childIssuesPanel"},i.a.createElement(Kl.a,{isEditable:e,appearance:"lozenge",issueKey:Object(Hi.l)(t),projectType:o,initialValue:{id:a,name:r,statusCategory:{id:n}},onSuccess:this.handleEditStatus}))))}renderPriority(){const{intl:e,isDraggable:t,issuePriorityUrl:s,issuePriorityName:n}=this.props;if(Fk()(s))return null;const a=e.formatMessage(Jk.issuePriorityTitle,{issuePriorityName:n});return i.a.createElement(je.a,{content:n||"",hideTooltipOnMouseDown:t,position:"bottom"},i.a.createElement(tw,null,i.a.createElement(Km.a,{alt:a,url:s,width:20,height:20})))}renderLoadingSpinner(){return this.props.isLoading?i.a.createElement(rw,null,i.a.createElement($.a,{size:"small"})):null}renderError(){
const{hasError:e=!1,errorInlineMessage:t}=this.props;return e||t?i.a.createElement(rw,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},t):null}renderSummary(){const{isActive:e,issueSummary:t,isDraggable:s}=this.props;return i.a.createElement(lw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:e},i.a.createElement(je.a,{content:t,hideTooltipOnMouseDown:s,position:"bottom"},i.a.createElement(uw,null,t)))}renderKey(){const e=void 0===this.props.remoteServerHostname?null:this.props.remoteServerHostname;return i.a.createElement(je.a,{content:e,hideTooltipOnMouseDown:this.props.isDraggable,position:"bottom"},i.a.createElement(cw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===mw,onClick:this.handleLinkKeyClick},this.props.issueKey))}renderRemoveButton(){
return i.a.createElement(H.a,{iconBefore:i.a.createElement(td.a,{label:""}),onClick:e=>this.deleteButtonAction(e),tabIndex:-1,appearance:"subtle",spacing:"none"})}renderRemoveButtonContainer(){const{onDelete:e,isLoading:t,hasError:s=!1,isRemote:n}=this.props;if(e===c.a||t||s)return null;const a=this.shouldShowRemoveAction()?this.props.intl.formatMessage(!0===n?Jk.remoteLinkDeleteLinkTooltip:Jk.issueLinkDeleteLinkTooltip):null;return i.a.createElement(je.a,{content:a,position:"bottom"},i.a.createElement(sw,null,this.shouldShowRemoveAction()&&this.renderRemoveButton()))}renderType(){const{intl:e,isDraggable:t=!1,issueTypeIconUrl:s,issueTypeName:n,handleUserClickAnalytics:a,restrictedReorderingMessage:r}=this.props,o=e.formatMessage(Jk.issueTypeTitle,{issueTypeName:n}),c="string"==typeof r&&""!==r,l=!t&&c?iw:aw,u=Fk()(n)?"":n;return i.a.createElement(je.a,{content:!t&&c?String(r):u,hideTooltipOnMouseDown:t,position:"bottom"},i.a.createElement(dw,{onClick:()=>{a&&a("typeIcon")}
},(t||c)&&this.isActionVisible()?i.a.createElement(l,null,i.a.createElement(Wk.a,{label:o,size:"small"})):i.a.createElement(tw,null,i.a.createElement(Km.a,{alt:o,url:s}))))}renderTypeOld(){const{intl:e,isDraggable:t=!1,issueTypeIconUrl:s,issueTypeName:n,handleUserClickAnalytics:a}=this.props,r=e.formatMessage(Jk.issueTypeTitle,{issueTypeName:n});return i.a.createElement(je.a,{content:!Fk()(n)&&n,hideTooltipOnMouseDown:t,position:"bottom"},i.a.createElement(dw,{onClick:()=>{a&&a("typeIcon")}},t&&this.isActionVisible()?i.a.createElement(aw,null,i.a.createElement(Wk.a,{label:r,size:"small"})):i.a.createElement(tw,null,i.a.createElement(Km.a,{alt:r,url:s}))))}renderEstimate(){const{issueKey:e,estimateFieldId:t,isActive:s,isHovering:n,isFocused:a}=this.props;return Vk()(e)||Vk()(t)?null:i.a.createElement(Qk,{isActive:s,isHovering:n,isFocused:a,issueKey:Object(Hi.l)(e),estimateFieldId:t})}renderMiniTimeLogGraph(){
const{shouldDisplayWorklogGraph:e,issueTimeTracking:t,statusCategory:s}=this.props;return void 0===(null==t?void 0:t.timeSpentSeconds)||0===t.timeSpentSeconds||!1===Boolean(e)?null:i.a.createElement(ow,null,i.a.createElement(ew,{issueTimeTracking:t,statusCategory:s}))}render(){return i.a.createElement(nw,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},Object(ne.isSortingIssuesUnderEpicEnabled)()?this.renderType():this.renderTypeOld(),this.shouldRenderKey()&&this.renderKey(),this.renderSummary(),this.renderMiniTimeLogGraph(),this.renderPriority(),this.renderEstimate(),this.props.shouldShowInteractiveAssignee?this.renderExtractedAssignee():this.renderReadOnlyAssignee(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}fw.displayName="IssueLineCard",fw.defaultProps={isLoading:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,hasError:!1,shouldDisplayWorklogGraph:!1,canRemove:!0,
restrictedReorderingMessage:"",onDelete:c.a,onEdit:c.a};const gw=e=>{const{push:t}=Object(Lt.p)(),{issueKey:s=""}=e,[n]=Object(vl.b)({issueKey:Object(Hi.l)(s),fieldKey:"assignee"}),a=void 0!==n;return i.a.createElement(fw,pw({push:t,shouldShowInteractiveAssignee:a},e))};gw.displayName="IssueLineCardWithHooks";var hw=Object(v.i)(gw),yw=Object(v.h)({createChildErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-child-error-title",defaultMessage:"We couldn't create the child issue"},createSubtaskErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-subtask-error-title",defaultMessage:"We couldn't create the subtask"},createErrorBody:{id:"issue.views.common.child-issues-panel.issues.create-error-body",defaultMessage:"Check your connection, then give it another try"},linkIssueErrorTitle:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-title",defaultMessage:"We couldn't link the child issue"},linkIssueErrorBody:{
id:"issue.views.common.child-issues-panel.issues.link-issue-error-body",defaultMessage:"Check your connection, then give it another try"},restrictedReorderingMessage:{id:"issue.views.common.child-issues-panel.issues.restricted-reordering-message",defaultMessage:"To order these issues manually, choose 'Order by rank'"}});const Ow=q.default.div(["margin-top:","px;margin-bottom:","px;padding-right:1px;"],z.e,z.e);function jw(){return(jw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function vw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ew(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vw(Object(s),!0).forEach((function(t){kw(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vw(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kw(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ww extends a.Component{constructor(...e){super(...e),this.onChildIssueClick=(e,t)=>{const s=e.issueKey;"string"==typeof s&&Object(Am.d)(t)?this.props.onNavigateToNewIssue({fromIssueKey:this.props.parentKey,toIssueKey:s}):"string"==typeof s&&(Object(Am.e)(t)||Object(Am.a)(t))&&window.open(e.issueLink,"_blank")},this.onOrderChange=(e,t,s,n,a)=>{this.props.onReorderChildren(this.props.allIssues,e,s,n,a)}}inlineErrorMessage(e,t){const{intl:s,onInlineErrorCreateRetry:n,onInlineErrorLinkingRetry:a,onInlineErrorCancel:i,isClassicSubtaskPanel:r}=this.props;switch(t){case wv:
return Rk(s,s.formatMessage(yw.linkIssueErrorTitle),s.formatMessage(yw.linkIssueErrorBody),((t,s)=>a(e,s)),(()=>i(e)));case kv:default:{const t=r?yw.createSubtaskErrorTitle:yw.createChildErrorTitle;return Rk(s,s.formatMessage(t),s.formatMessage(yw.createErrorBody),((t,s)=>n(e,s)),(()=>i(e)))}}}renderIssueLineCardGroup({groupId:e,issues:t,projectType:s,isReorderEnabled:n,isInteractive:a,onEditIssue:r,shouldDisplayWorklogGraph:o,restrictedReorderingMessage:c}){return i.a.createElement(Dm.a,{items:t,onOrderChange:this.onOrderChange,groupId:e,isReorderEnabled:n,isInteractive:a,onClick:this.onChildIssueClick},((e,t,l,u)=>i.a.createElement(hw,jw({isHovering:e,isActive:t,isFocused:l,isDraggable:n,isInteractive:a,projectType:s,onEdit:r&&(e=>r&&r(Ew(Ew({},u),e))),shouldDisplayWorklogGraph:o},Boolean(c)&&{restrictedReorderingMessage:c},u))))}render(){
const{allIssues:e,incompleteIssues:t,hideDone:s,isClassicSubtaskPanel:n,isNextGenChildrenPanel:a,projectType:r,onEditIssue:o,shouldDisplayWorklogGraph:c,intl:{formatMessage:l},restrictReordering:u=!1}=this.props,d=e.length>1,p=e.filter((e=>e.isLoading)).length>0,m=(a||n)&&!s&&d&&!p&&!u,b=(s?t:e).map((e=>e.errorType?Ew(Ew({},e),{},{errorInlineMessage:this.inlineErrorMessage(e.id,e.errorType)}):e)),f={"data-testid":"issue.issue-view.views.common.child-issues-panel.issues-container"},g=(a||n)&&d&&u&&{restrictedReorderingMessage:l(yw.restrictedReorderingMessage)};return i.a.createElement(Ow,f,this.renderIssueLineCardGroup(Ew({groupId:"child-issues-panel",issues:b,projectType:r,isReorderEnabled:m,onEditIssue:o,shouldDisplayWorklogGraph:c},g)))}}ww.displayName="Issues",ww.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,restrictReordering:!1,onReorderChildren:c.a,onEditIssue:c.a}
;const Sw=e=>[...e].sort(((e,t)=>void 0===e.created?1:void 0===t.created?-1:t.created-e.created)),Cw=e=>[...e].sort(((e,t)=>{const[s="",n=0]=(e.issueKey||"").split("-"),[a="",i=0]=(t.issueKey||"").split("-");return s.localeCompare(a)||parseInt(n,10)-parseInt(i,10)})),Iw={UNDEFINED:0,TODO:1,IN_PROGRESS:2,DONE:3},Tw=e=>Iw[null==e?"UNDEFINED":e]||0,Pw=e=>[...e].sort(((e,t)=>Tw(e.statusCategory)-Tw(t.statusCategory)||(e.statusName||"").localeCompare(t.statusName||""))),_w=e=>[...e].sort(((e,t)=>""===e.assigneeDisplayName||null==e.assigneeDisplayName?1:""===t.assigneeDisplayName||null==t.assigneeDisplayName?-1:e.assigneeDisplayName.localeCompare(t.assigneeDisplayName))),xw=(e,t)=>{const s=e.indexOf(t);return s>=0?s:Number.MAX_SAFE_INTEGER};function Dw(){return(Dw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Aw(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Lw=e=>{let{allIssues:t,incompleteIssues:s,sortBy:n}=e,r=Aw(e,["allIssues","incompleteIssues","sortBy"]);const o=Object(Ps.g)(),[c]=Object(nu.a)(o,"priority"),l=(null==c?void 0:c.allowedValues)||[],u=Object(a.useMemo)((()=>l.map((e=>e.name))),[l]),[d]=OO(),[p,m]=Object(a.useMemo)((()=>Pk()(t,(e=>-1===d.indexOf(e.id)))),[t,d]),[b,f]=Object(a.useMemo)((()=>Pk()(s,(e=>-1===d.indexOf(e.id)))),[s,d]),g=Object(a.useMemo)((()=>{switch(n){case"created":return Sw;case"key":return Cw;case"status":return Pw;case"assignee":return _w;case"priority":return e=>((e,t)=>[...e].sort(((e,s)=>xw(t,e.issuePriorityName)-xw(t,s.issuePriorityName))))(e,u);case"ranking":
default:return e=>e}}),[u,n]),h=Object(a.useMemo)((()=>g(p)),[p,g]),y=Object(a.useMemo)((()=>g(b)),[b,g]),O=null!==n&&"ranking"!==n;return i.a.createElement(ww,Dw({},r,{allIssues:[...h,...m],incompleteIssues:[...y,...f],restrictReordering:O}))};Lw.displayName="SortedIssues",Lw.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,onReorderChildren:c.a,onEditIssue:c.a};const Mw=e=>{const{sortBy:t}=e,s=Aw(e,["sortBy"]);return i.a.createElement(ww,s)};Mw.displayName="OldIssuesWithAdjustedProps";const Rw=Object(k.b)("issue")(Mw),Nw=Object(k.b)("issue")(Lw),Fw=Object(Is.a)(ne.isSortingIssuesUnderEpicEnabled,Nw,Rw);var Uw=Object(qt.a)([v.i,Object(is.a)("button",{onInlineErrorCancel:"clicked",onInlineErrorCreateRetry:"clicked"}),Object(is.a)("inlineIssue",{onNavigateToNewIssue:"clicked",onReorderChildren:"dragged"}),Object(E.a)({onInlineErrorCancel:"cancelInlineErrorCreate",
onInlineErrorCreateRetry:"retryInlineErrorCreate",onNavigateToNewIssue:"navigateToNewIssue",onReorderChildren:"reorderChildren"}),Object(r.b)((e=>({allIssues:_O(e),sortBy:$O(e),incompleteIssues:DO(e),hideDone:WO(e),parentKey:XO(e),projectType:uj(e),isClassicSubtaskPanel:zO(e),isNextGenChildrenPanel:QO(e),onNavigateToNewIssue:oj(e),shouldDisplayWorklogGraph:zO(e)||QO(e)&&0===LO(e)})),{onInlineErrorCancel:e=>({type:"state.entities.CANCEL_OPTIMISTIC_CHILD",payload:{optimisticId:e}}),onInlineErrorCreateRetry:(e,t)=>({type:"state.entities.CREATE_CHILD_RETRY",payload:{optimisticId:e},meta:{analyticsEvent:t}}),onInlineErrorLinkingRetry:(e,t)=>({type:"state.entities.LINKING_ISSUE_RETRY",payload:{issueId:e},meta:{analyticsEvent:t}}),onReorderChildren:(e,t,s,n,a)=>({type:"state.entities.REORDER_CHILDREN_REQUEST",payload:{currentOrder:e,newOrder:t,currentIndex:s,newIndex:n},meta:{analyticsEvent:a}}),onEditIssue:e=>({type:"state.entities.UPDATE_ISSUE",payload:e})
})])(Fw),Vw=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/progress-bar/index.js"),Kw=Object(v.h)({completionPercentageText:{id:"issue.views.common.child-issues-panel.progress-summary.completion-percentage-text",defaultMessage:"{completionPercentage}% Done"},todoIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-issues-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} issues"},todoSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-subtasks-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} subtasks"},inProgressIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-issues-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} issues"},inProgressSubtasksSegmentTooltipText:{
id:"issue.views.common.child-issues-panel.progress-summary.in-progress-subtasks-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} subtasks"},completedIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-issues-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} issues"},completedSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-subtasks-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} subtasks"}});const Ww=Re.a.N30,Bw=Re.a.B400,Hw=Re.a.G300,$w=q.default.div(["display:flex;align-items:center;"]),Gw=q.default.div(["flex-grow:1;"]),qw=q.default.div(["margin-left:","px;margin-right:","px;flex-shrink:0;color:",";"],2*z.e,.25*z.e,Re.a.N200),zw=q.default.span(["display:inline-block;width:","px;text-align:right;"],3*z.e);function Yw(){return(Yw=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Qw={remainingTooltip:Kw.todoSubtasksSegmentTooltipText,completedTooltip:Kw.completedSubtasksSegmentTooltipText,inProgressTooltip:Kw.inProgressSubtasksSegmentTooltipText},Jw={remainingTooltip:Kw.todoIssuesSegmentTooltipText,completedTooltip:Kw.completedIssuesSegmentTooltipText,inProgressTooltip:Kw.inProgressIssuesSegmentTooltipText};var Zw=Object(qt.a)([v.i,Object(r.b)((e=>({isClassicSubtaskPanel:zO(e),totalIssueCount:_O(e).length,inProgressIssueCount:AO(e).length,completedIssueCount:xO(e).length})),{})])((e=>{const{isClassicSubtaskPanel:t,intl:{formatMessage:s},totalIssueCount:n,inProgressIssueCount:a,completedIssueCount:r}=e,o=n-a-r,c=Math.floor(r/n*100),{remainingTooltip:l,completedTooltip:u,inProgressTooltip:d}=t?Qw:Jw;return i.a.createElement($w,null,i.a.createElement(Gw,null,i.a.createElement(Vw.b,{sum:n,
backgroundColor:Ww,remainingTooltipContent:s(l,{todoIssueCount:o,totalIssueCount:n})},i.a.createElement(Vw.a,{value:r,color:Hw,tooltipContent:s(u,{completedIssueCount:r,totalIssueCount:n})}),i.a.createElement(Vw.a,{value:a,color:Bw,tooltipContent:s(d,{inProgressIssueCount:a,totalIssueCount:n})}))),i.a.createElement(qw,null,i.a.createElement(v.c,Yw({},Kw.completionPercentageText,{values:{completionPercentage:i.a.createElement(zw,null,c)}}))))}));class Xw extends a.Component{hasIssues(){const{allIssues:e}=this.props;return e.length>0}hasContent(){const{noValueText:e,addClickCount:t}=this.props;return this.hasIssues()||t>0||!!e}renderEmptyValue(){const{noValueText:e,addClickCount:t,intl:{formatMessage:s}}=this.props;return this.hasIssues()||null===e||0!==t?null:i.a.createElement(yi.b,null,s(e))}renderIssues(){const{ProgressSummary:e,Issues:t,allIssues:s}=this.props,n=s.length>=2?i.a.createElement(e,null):null
;return s.length>0?i.a.createElement(i.a.Fragment,null,n,i.a.createElement(t,null)):null}renderCreate(){const{InlineCreate:e,addClickCount:t,AddExistingIssue:s,childPanelView:n,sourceName:a}=this.props;if(t>0)switch(n){case xv.InlineCreate:return i.a.createElement(e,{inputId:a});case xv.AddExistingIssue:return i.a.createElement(s,null);default:return null}return null}render(){const{Heading:e,onAddChildClick:t,sourceName:s}=this.props;return this.hasContent()?i.a.createElement(i.a.Fragment,null,i.a.createElement(e,{onAddChildClick:t,sourceName:s}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null}}Xw.displayName="ChildIssuesPanel",Xw.defaultProps={addClickCount:0,noValueText:null};var eS=Object(qt.a)([v.i,Object(r.b)((e=>({Heading:BE,InlineCreate:Ik,Issues:Uw,ProgressSummary:Zw,AddExistingIssue:gE,childPanelView:UO(e),allIssues:_O(e),incompleteIssues:DO(e),addClickCount:FO(e),noValueText:rj(e)})),{})])(Xw);function tS(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(s),!0).forEach((function(t){nS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function aS(){return(aS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class iS extends a.Component{constructor(e){super(e),this.store=void 0
;const{issues:t,parentKey:s,childIssuesPanelType:n}=this.props;this.store=((e,t,s)=>Object(hv.a)({appName:`${t}-child-issues-panel-${s}`,rootReducer:Uv,rootEpic:e}))(gv(this.props.dataProvider),s,n),this.dispatchContext(),this.store.dispatch((()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK"}))()),this.dispatchEntities(),"classicSubtasks"!==n&&t.length>0&&this.store.dispatch(jj());const{fetchIssueTypesStatus:a}=e;a&&this.store.dispatch(Lv(a))}componentDidMount(){this.props.issues.length>0&&this.props.prefetchChildIssues(this.props.issues.map((e=>e.id)))}componentDidUpdate(e){if(Object(lO.a)(e,this.props))return;const{issues:t,quickAddClickCount:s,fetchIssueTypesStatus:n,onChange:a}=this.props;s>e.quickAddClickCount&&this.store.dispatch(Pv()),t.length&&this.dispatchEntities(),n!==e.fetchIssueTypesStatus&&(this.store.dispatch(Lv(n||"NONE")),this.dispatchEntities());const i=t.map((e=>e.id)),r=e.issues.map((e=>e.id));Ta()(i,r)||this.props.prefetchChildIssues(i),
e.onChange!==a&&this.dispatchContext()}dispatchEntities(){const{issueTypes:e,issues:t,epicLinkFieldKey:s,issueHierarchyLevel:n}=this.props;this.store.dispatch((e=>({type:"state.entities.SET_ENTITIES",payload:e}))({issueTypes:e.map((e=>((e,t)=>{const{fields:s}=e,n=kO(e,["fields"]),a=!!s&&SO(s),i=!!s&&Object.keys(s).includes(t);return vO(vO({},n),{},{hasRequiredField:a,hasEpicLinkField:i})})(e,s))),issues:t,issueHierarchyLevel:n}))}dispatchContext(){const{supportsIssueCreation:e,baseUrl:t,locale:s,user:n,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,parentId:o,projectId:c,projectType:l,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b}=this.props;let f=null,g=null;if(null!==l){const{appEditions:e}=Object(In.f)();f=Object(Tn.e)(l),g=Object(Pn.f)(f,e)}this.store.dispatch((e=>({type:"state.context.SET_CONTEXT",payload:e}))({baseUrl:t,locale:s,user:n,projectId:c,parentId:o,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,supportsIssueCreation:e,
messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b,projectType:l,application:f,edition:g,requiresFullCreate:!1}))}render(){const{onAddChildClick:e,childIssuesPanelType:t,analyticsSource:s,issueHierarchyLevel:n}=this.props,a=Object(ne.isRemoveUnusedAppBasePropsEnabled)()?void 0:this.props.locale;return i.a.createElement(iO.a,{store:this.store,locale:a},i.a.createElement(Va.a,{sourceName:"childIssuesPanel",sourceType:Ka.f,attributes:{childIssuesPanelType:t,issueHierarchyLevel:n-1,analyticsSource:`issue-view (${s})`}},i.a.createElement(rO.a,null,i.a.createElement(eS,{onAddChildClick:e,sourceName:"childIssuesPanel"}),i.a.createElement(oO.a,{mapper:pO}))))}}iS.displayName="ChildIssuesPanel",iS.defaultProps={issues:[],issueTypes:[],isIssueViewComplete:!1};const rS=e=>{const{issues:t}=e,s=Object(cO.b)(t),[,{addNewChildIssues:n}]=OO();return Object(a.useEffect)((()=>{if(Object(ne.isSortingIssuesUnderEpicEnabled)()&&s.length<t.length){
const e=t.filter((e=>!s.some((t=>t.id===e.id)))).map((({id:e})=>Object(Hi.j)(e)));n(e)}}),[n,t,s]),i.a.createElement(iS,aS({},e,{issues:t}))};rS.displayName="WrappedSortingChildIssuesPanel";const oS=Object(Is.a)(ne.isSortingIssuesUnderEpicEnabled,rS,iS),cS={nextGenChildren:"children-issues",classicProjectEpicChildren:"epic-issues",classicSubtasks:"subtasks",portfolioChildren:"portfolio-child-issues"},lS=e=>{const{childIssuesPanelType:t,issues:s}=e,n=(e=>{const t=Object(Ps.g)(),[s]=Object(vl.b)({issueKey:t,fieldKey:e}),n=(s||[]).map((e=>({key:e.key,id:e.id}))),a=n.map((e=>e.key)),[i]=Object(vl.c)({issueKeys:a,fieldKey:"summary"}),[r]=Object(vl.c)({issueKeys:a,fieldKey:"timetracking"}),[o]=Object(vl.c)({issueKeys:a,fieldKey:"assignee"}),[c]=Object(vl.c)({issueKeys:a,fieldKey:"priority"}),[l]=Object(vl.c)({issueKeys:a,fieldKey:"issuetype"}),[u]=Object(vl.c)({issueKeys:a,fieldKey:"status"}),[d]=Object(vl.c)({issueKeys:a,fieldKey:"created"}),[p]=Object(vl.c)({issueKeys:a,fieldKey:"updated"
});return n.map(((e,t)=>{var s,n,a,m,b,f,g,h,y,O,j,v,E;return{created:d[t]&&new Date(d[t]),issueSummary:i[t],issueKey:e.key,issueLink:`/browse/${e.key}`,id:e.id,issueTimeTracking:r[t],isLoading:!1,assigneeDisplayName:null===(s=o[t])||void 0===s?void 0:s.displayName,assigneeUrl:null===(n=o[t])||void 0===n||null===(a=n.avatarUrls)||void 0===a?void 0:a["48x48"],issuePriorityName:null===(m=c[t])||void 0===m?void 0:m.name,issuePriorityUrl:null===(b=c[t])||void 0===b?void 0:b.iconUrl,issueTypeIconUrl:null===(f=l[t])||void 0===f?void 0:f.iconUrl,issueTypeName:null===(g=l[t])||void 0===g?void 0:g.name,statusCategoryId:null===(h=u[t])||void 0===h||null===(y=h.statusCategory)||void 0===y?void 0:y.id,statusCategory:Object(jl.statusCategoryForId)(null===(O=u[t])||void 0===O||null===(j=O.statusCategory)||void 0===j?void 0:j.id),statusId:null===(v=u[t])||void 0===v?void 0:v.id,statusName:null===(E=u[t])||void 0===E?void 0:E.name,updated:p[t]&&new Date(p[t])}}))
})(cS[t]),a=n.every((e=>Boolean(e.issueSummary)));let r=s;return n.length>0&&a&&(r=n.map(((e,t)=>sS(sS({},e),{},{estimateFieldId:s[t].estimateFieldId,estimateValue:s[t].estimateValue})))),i.a.createElement(rS,aS({},e,{issues:r}))};lS.displayName="WrappedStateRefactorChildIssuesPanel";const uS=Object(Is.a)(ne.isStateRefactorInChildIssuesPanelEnabled,lS,oS),dS=e=>{const{onNavigateToNewIssue:t}=e,s=Object(Ps.h)(),n=Object(Ps.g)(),r=Object(Ps.i)(),o=Object(Wa.g)(r),c=Object(Wa.j)(r),l=Object(Mi.a)(),u=Object(lg.a)(),d=Object(lh.a)(),p=Object(a.useCallback)((e=>{t(e),null==s||s(e)}),[s,t]);return i.a.createElement(uS,aS({},e,{onNavigateToNewIssue:p,parentKey:n||Object(Hi.l)(""),projectId:Object(Hi.p)(o||""),projectType:c||null,baseUrl:l,user:u,locale:d}))};dS.displayName="ChildIssuesPanelWithHooks";const pS=e=>{const{parentKey:t,childIssuesPanelType:s}=e;return i.a.createElement(M.a,{id:"issue.issue-view.common.child-issues-panel"},i.a.createElement(R.a,{id:"common.child-issues-panel",
packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},i.a.createElement(yO,{scope:`${t}-${s}`},i.a.createElement(dS,e))))};pS.displayName="DecoratedComponent";var mS=Object(uO.a)(pS);var bS=Object(v.h)({title:{id:"issue.children-issues.title",defaultMessage:"Child issues"}});function fS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fS(Object(s),!0).forEach((function(t){hS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function yS(e,t){
if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function OS(){return(OS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const jS=e=>{const t=e.onChange,s=Object(Ps.g)(),[n,{setFieldValue:r}]=Object(vl.b)({issueKey:s,fieldKey:"children-issues"}),o=Object(a.useCallback)((e=>{switch(e.type){case aO.CHILD_ISSUE_ADDED:r(s,"children-issues",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,r]);return i.a.createElement(mS,OS({},e,{onChange:o}))};jS.displayName="ConnectedComponent";var vS=Object(r.b)((e=>({
childIssuesPanelType:"nextGenChildren",parentId:Object(T.x)(e),customFieldIdRank:Object(on.b)("com.pyxis.greenhopper.jira:gh-lexo-rank")(e),issueTypes:Object(zt.j)(e),issues:Object(tO.a)(e),supportsIssueCreation:Object(zt.k)(e),quickAddClickCount:eO(e),isIssueViewComplete:Object(P.n)(e),messages:bS,fetchIssueTypesStatus:Object(jc.a)(e),issueHierarchyLevel:Object(ne.collapsedHierarchies)()?Object(zt.b)(e):Object(zt.f)(e),analyticsSource:Object(T.b)(e)})),(e=>({onChange:t=>{switch(t.type){case aO.CHILD_ISSUE_ADDED:e(qy(t.meta.childIssue,t.meta.fieldsData));break;case aO.ISSUE_CHILDREN_ORDER_CHANGED:e((({issueIds:e,rankId:t,isRankAfter:s})=>({type:"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS",payload:{issueIds:e,rankId:t,isRankAfter:s}}))(t.meta))}},onAddChildClick:()=>e(zy()),prefetchChildIssues:t=>e(Object(Qy.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(Yy.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{
const{onNavigateToNewIssueDispatchProp:s}=t,n=yS(t,["onNavigateToNewIssueDispatchProp"]);return gS(gS(gS({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})}))(jS),ES=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/confluence-pages-view.js"),kS=s("./node_modules/react-async-component/commonjs/index.js"),wS=Object(kS.asyncComponent)({resolve:()=>s.e("async-cross-join-via-epic-aa-test").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-aa-test/index.js")),name:"AsyncCrossJoinViaEpicAATest"}),SS=Object(kS.asyncComponent)({resolve:()=>s.e("async-cross-join-via-epic-touchpoint").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/index.js")),name:"AsyncCrossJoinViaEpicTouchpoint"}),CS=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const IS=Object(rn.createSelector)(jc.c,(e=>!!e.find(jc.b))),TS=Object(rn.createSelector)(CS.h,IS,T.s,T.p,(({canCreateIssuesInClassicProjectEpic:e},t,s,n)=>e&&!(!!t&&(s||n))));var PS=Object(v.h)({title:{id:"issue.epic-issues-title",defaultMessage:"Issues in this epic"}});function _S(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_S(Object(s),!0).forEach((function(t){DS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_S(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function DS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function AS(e,t){
if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function LS(){return(LS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const MS=e=>{const t=e.onChange,s=Object(Ps.g)(),[n,{setFieldValue:r}]=Object(vl.b)({issueKey:s,fieldKey:"epic-issues"}),o=Object(a.useCallback)((e=>{switch(e.type){case aO.CHILD_ISSUE_ADDED:r(s,"epic-issues",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,r]);return i.a.createElement(mS,LS({},e,{onChange:o}))};MS.displayName="ConnectedComponent";var RS=Object(r.b)((e=>({
childIssuesPanelType:"classicProjectEpicChildren",parentId:Object(T.x)(e),epicLinkFieldKey:Object(P.g)(e),issueTypes:Object(jc.c)(e),issues:Object(tO.a)(e),messages:PS,quickAddClickCount:Xy(e),supportsIssueCreation:TS(e),isIssueViewComplete:Object(P.n)(e),fetchIssueTypesStatus:Object(jc.a)(e)})),(e=>({onChange:t=>{switch(t.type){case aO.CHILD_ISSUE_ADDED:e(qy(t.meta.childIssue,t.meta.fieldsData))}},onAddChildClick:()=>e(zy()),prefetchChildIssues:t=>e(Object(Qy.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(Yy.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=AS(t,["onNavigateToNewIssueDispatchProp"]);return xS(xS(xS({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})
}))(MS),NS=s("./src/packages/platform/utils/constants/src/project-types.js"),FS=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),US=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),VS=s("./src/packages/issue/issue-view/src/actions/issue-links-actions.js"),KS=s("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js"),WS=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),BS=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js"),HS=s("./node_modules/lodash/get.js"),$S=s.n(HS),GS=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),qS=s("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js"),zS=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const YS=Object(rn.createSelector)(P.f,(e=>e.jiraAppLinks||{status:"NOT_LOADED",
remoteLinks:[]})),QS=Object(rn.createSelector)(YS,(e=>e.status)),JS=Object(rn.createSelector)(WS.e,zS.d,((e,t)=>e&&t)),ZS=Object(rn.createSelector)(YS,(e=>e.remoteLinks)),XS=/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/,eC=()=>""!==window.location.port?Object(Hi.b)(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`):Object(Hi.b)(`${window.location.protocol}//${window.location.hostname}`);var tC=(e,t)=>{let s=e;if(void 0===s||void 0===t)return t||"";if(s.endsWith("/")||(s+="/"),s+="browse/",0!==t.indexOf(s))return t;const n=t.slice(s.length).match(XS);return null===n?t:n[1]||""};const sC=e=>{const{selectItems:t,selectedItem:s,onChange:n}=e;return i.a.createElement(HE.a,{options:t,defaultValue:s,styles:Hv.f,onChange:n})};sC.displayName="IssueLinkTypeSelect",sC.defaultProps={selectedItem:null};const nC=Object(v.h)({remoteLinkAuthText:{id:"issues.issue-links.jira-app-link-option.auth-required",defaultMessage:"Authenticate to search"}
}),aC=q.default.span(["margin-right:10px;"]),iC=({value:e,intl:t,onAuthenticateAppLink:s})=>e.fullObject.requireCredentials?i.a.createElement(je.a,{content:e.fullObject.baseUrl,position:"bottom"},i.a.createElement("p",null,i.a.createElement(aC,null,e.label),i.a.createElement(H.a,{spacing:"none",appearance:"link",onClick:(t,n)=>((t,n)=>{t.preventDefault(),void 0!==s&&(s(e.fullObject.authUrl,n),n&&Object(Fa.h)(n,"JiraApplinkSelectAuthentication",{appLinkId:e.fullObject.id}))})(t,n),iconBefore:i.a.createElement(Mh.a,{size:"small",label:""})},i.a.createElement("span",null,t.formatMessage(nC.remoteLinkAuthText))))):i.a.createElement(je.a,{content:e.fullObject.baseUrl,position:"bottom"},i.a.createElement(aC,null,e.label));iC.displayName="JiraAppLinkOption";var rC=iC;const oC=Object(f.a)({onMenuOpen:{action:"opened",component:"select"},onMenuClose:{action:"closed",component:"select"}})(HE.a);function cC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cC(Object(s),!0).forEach((function(t){uC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dC=lC(lC({},Hv.f),{},{menu:(e,t)=>lC(lC({},Hv.f.menu?Hv.f.menu(e,t):{}),{},{minWidth:t.selectProps.containerWidth||"auto"}),option:(...e)=>lC(lC({},Hv.f.option?Hv.f.option(...e):{}),{},{overflow:"initial"})});class pC extends a.Component{handleClick(e,t,s){e.preventDefault(),
void 0!==this.props.onAuthenticateAppLink&&(this.props.onAuthenticateAppLink(t.fullObject.authUrl,s),s&&Object(Fa.h)(s,"JiraApplinkSelectAuthentication",{appLinkId:t.fullObject.id}))}formatOptionLabel(e){return i.a.createElement(rC,{value:e,intl:this.props.intl,onAuthenticateAppLink:this.props.onAuthenticateAppLink})}getNumAppLinksRequiringAuth(){return this.props.selectItems.filter((e=>e.fullObject.requireCredentials)).length}sendMenuAnalytics(e,t){e&&Object(Fa.h)(e,`issueView.JiraAppLinksSelect ${t}`,"JiraAppLinksSelect",{numAppLinks:this.props.selectItems.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}onChange(e,t){this.props.onChange(e),t&&Object(Fa.h)(t,"issueView.JiraAppLinksSelect changed","JiraAppLinksSelect",{appLinkId:e.fullObject.id})}render(){const{selectItems:e,defaultValue:t,containerWidth:s}=this.props;return i.a.createElement(M.a,null,i.a.createElement(R.a,{packageName:"jiraIssueView",id:"JiraAppLinksSelect"},i.a.createElement(oC,{options:e,
defaultValue:t,onChange:(e,t,s)=>this.onChange(e,s),formatOptionLabel:e=>this.formatOptionLabel(e),isOptionDisabled:e=>e.fullObject.requireCredentials,styles:dC,onMenuOpen:e=>this.sendMenuAnalytics(e,"opened"),onMenuClose:e=>this.sendMenuAnalytics(e,"closed"),containerWidth:s}),i.a.createElement(Ua.a,{onMount:t=>{t&&Object(Fa.h)(t,"issueView.JiraAppLinksSelect mounted","JiraAppLinksSelect",{numAppLinks:e.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}})))}}pC.displayName="JiraAppLinksSelect";const mC=Object(v.i)(pC);var bC=at()([Object(r.b)((()=>({})),(e=>({onAuthenticateAppLink:(t,s)=>e(Object(US.a)(t,s))})))])(mC);const fC="local",gC="Local",hC={label:gC,value:fC,fullObject:{id:fC,name:gC,baseUrl:eC(),authUrl:Object(Hi.i)(""),requireCredentials:!1}}
;var yC=s("./node_modules/lodash/keys.js"),OC=s.n(yC),jC=s("./src/packages/platform/utils/constants/src/issue-link-types.js"),vC=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-ui-event.js"),EC=Object(v.h)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function kC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const SC=(e,t)=>{let s={};const n=ns()($S()(e,["fields","issuelinks"]),(e=>$S()(e.outwardIssue||e.inwardIssue,"id")===t));if(void 0!==n){const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={
issueLink:{id:n.id,direction:e,linkType:{id:$S()(n,["type","id"],""),label:"INWARD"===e?$S()(n,["type","inward"],""):$S()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kC(Object(s),!0).forEach((function(t){wC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(Hi.j)(e.id),key:Object(Hi.l)(e.key),summary:$S()(e,["fields","summary"],""),issueTypeIconUrl:$S()(e,["fields","issuetype","iconUrl"],"")},s)};const CC="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class IC extends a.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props;this.showLoadingIndicator();try{
const a=await Object(lk.a)({name:"wrm/require"});await new Promise((e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}));(await Object(lk.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",((s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=SC(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(Nj.f)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))}))}catch(a){this.hideLoadingIndicator(),O.a.safeErrorWithoutCustomerData(CC,a)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(vC.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},this.showLoadingIndicator=async()=>{try{
(await Object(lk.a)({name:"quick-edit/util/loading-indicator",wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:loading-indicator"})).showLoadingIndicator()}catch(e){O.a.safeErrorWithoutCustomerData(CC,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(lk.a)({name:"quick-edit/util/loading-indicator",wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:loading-indicator"})).hideLoadingIndicator()}catch(e){O.a.safeErrorWithoutCustomerData(CC,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return i.a.createElement(H.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:i.a.createElement(Zv.a,{size:"small",label:e(EC.createLinkedIssueButtonLabel)})},e(EC.createLinkedIssueButtonLabel))}}IC.displayName="CreateLinkedIssueButton";const TC="created";var PC=Object(qt.a)([v.i,Object(is.a)("createLinkedIssueButton",{onLinkedIssueCreated:TC}),Object(r.b)((e=>({baseUrl:Object(T.f)(e),sourceIssueKey:Object(T.y)(e),
sourceIssueId:Object(Hi.j)(String(Object(T.x)(e)))})),(e=>({onLinkedIssueCreated:(t,s)=>{e(Object(VS.c)(t)),e(Object(VS.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=OC()(e)[0];if(void 0!==n){const a=e[n],i=t[a.linkedIssueKey],r={action:TC,actionSubjectId:i.id,attributes:{linkTypeName:Object(jC.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(g.a)(s,r)}})(t,s)}})))])(IC),_C=s("./node_modules/@atlaskit/icon/glyph/editor/info.js"),xC=s.n(_C),DC=Object(v.h)({createReciprocalLinkCheckboxLabel:{id:"issue.create-reciprocal-link.checkbox-label",defaultMessage:"Create reciprocal link"},createReciprocalLinkCheckboxTooltip:{id:"issue.create-reciprocal-link.checkbox-tooltip",defaultMessage:"Jira will create a link from the issue on the remote Jira instance back to this issue"}});const AC=q.default.div(["flex-grow:1;display:flex;"]),LC=({isChecked:e,onChange:t,onShow:s})=>{const{formatMessage:n}=Object(xe.c)();return i.a.createElement(AC,null,i.a.createElement(_e.a,{isChecked:e,
onChange:t,label:n(DC.createReciprocalLinkCheckboxLabel),name:"create-reciprocal-link"}),i.a.createElement(je.a,{content:n(DC.createReciprocalLinkCheckboxTooltip),onShow:s,position:"bottom"},i.a.createElement(xC.a,{size:"medium",label:""})))};LC.displayName="CreateReciprocalLink";const MC=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,RC=(e,t)=>({sections:s=[]}={})=>{const{baseUrl:n=Object(Hi.b)(""),id:i}=t||{};return s.map((e=>e.issues)).filter((e=>!!e)).reduce(((t,s)=>t.concat(s.map((t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(a.createElement)("img",{src:`${n}${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:`${n}${t.img}`,appLinkId:i}))))),[]).reduce(((e,t)=>e.findIndex((e=>e.value===t.value))<0?[...e,t]:e),[])},NC=(e,t,s,n)=>(e=>{if(e){const t=MC.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s,n)=>{const a=void 0===n?Object(Nj.a)(e,t,s):Object(Nj.k)(e,s,n.id);return Object(zj.a)(a)
})(e,t,Object(Hi.l)(s),n).map(RC(s,n)).catch((()=>bj.Observable.of([]))):bj.Observable.of([]);var FC=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),UC=Object(v.h)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key"},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});class VC extends a.Component{constructor(...e){super(...e),
this.getErrorMessage=(e,t,s)=>s.includes(e)?`${t.formatMessage(UC.selfLinkInvalidIssue)} (${e})`:1===s.length?`${t.formatMessage(UC.singleInvalidIssue)} ${s[0]}`:s.length>1?`${t.formatMessage(UC.multipleInvalidIssues)} ${s.join(", ")}`:void 0,this.fetchSuggestions=e=>{const{baseUrl:t,remoteAppLink:s,issueKey:n,intl:a}=this.props,i=a.formatMessage(UC.openIssues),r=a.formatMessage(UC.noHistoryResults);return((e,t,s,n)=>{const a=void 0===n?Object(Nj.p)(e,t,s):Object(Nj.l)(e,s,n.id);return Object(zj.a)(a).map(RC(s,n))})(t,n,e,s).map((e=>e.length?[{heading:i,items:e}]:[{items:[{content:r,isDisabled:!0,value:""}]}])).toPromise()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object($i.c)().markStartOfInteraction({key:Ir.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object($i.c)().markStartOfInteraction({key:Ir.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},
this.onDataRequest=({isInitial:e})=>{e||Object($i.c)().markStartOfInteraction({key:Ir.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object($i.c)().markTimeToFinishTask({key:Ir.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const{remoteAppLink:t}=this.props,s=void 0===t?eC():t.baseUrl;return tC(s,e)},this.filterIssueOptions=(e,t)=>this.filterIssueSuggestionByAppLink(e)&&Object(FC.a)(e,t),this.filterIssueSuggestionByAppLink=e=>{if(Boolean(e.data&&e.data.fullObject)){var t,s;return(null===(t=e.data)||void 0===t?void 0:t.appLinkId)===(null===(s=this.props.remoteAppLink)||void 0===s?void 0:s.id)}return!0}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object($i.c)().markTimeToFinishTask({key:Ir.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object($i.c)().markTimeToFinishTask({key:Ir.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){
const{value:e,issueKey:t,intl:s,invalidSelections:n,remoteAppLink:a}=this.props,r={isRemote:void 0!==a};return i.a.createElement(GE.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:this.fetchSuggestions,onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${s.formatMessage(UC.exactKey)})`,placeholder:s.formatMessage(UC.searchPlaceholder),invalidMessage:this.getErrorMessage(t,s,n),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest,inputId:"issue-link-search",additionalAnalyticsProps:r,filterOption:this.filterIssueOptions})}}VC.displayName="IssueSearchSelect";var KC=Object(v.i)(VC)
;const WC=q.default.div(["display:flex;flex-direction:",";justify-content:space-around;align-content:stretch;> *{margin-top:","px;}>:not(:last-child){margin-right:",";}"],(({isCompact:e})=>e?"column":"row"),z.e,(({isCompact:e})=>e?"0":`${z.e}px`)),BC=q.default.div(["flex:1;flex-basis:auto;"]),HC=q.default.div(["margin-top:","px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;"],z.e),$C=q.default.div(["flex-grow:1;margin-left:-","px;"],1.5*z.e),GC=q.default.div(["max-width:",";width:",";min-width:","px;"],(({isCompact:e})=>e?"none":25*z.e+"px"),(({isCompact:e})=>e?"100%":"27%"),17*z.e);function qC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qC(Object(s),!0).forEach((function(t){YC(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function YC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const QC=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(Nj.f)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}}),JC=(e,t)=>Object(Hi.s)(`appId=${e}&issueId=${t}`);function ZC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function XC(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?ZC(Object(s),!0).forEach((function(t){eI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function eI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tI={newIssueLinks:[],isDisabled:!0,invalidSelections:[]};class sI extends a.Component{constructor(e){super(e),this.getInitialState=()=>XC({issueLinkType:this.transformIssueLinkTypesForSelect()[0],jiraAppLink:hC,createReciprocalLink:!0},tI),this.isLocalJira=e=>e.value===hC.value,this.getRemoteAppLink=()=>{const{jiraAppLink:e}=this.state;return this.isLocalJira(e)?void 0:e.fullObject},this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onJiraAppLinkChange=e=>this.setState(XC({jiraAppLink:e,createReciprocalLink:!this.isLocalJira(e)},tI)),
this.onIssueSearchChangeWithUserInput=e=>{let t=!1;const s=[],n=this.state.jiraAppLink.fullObject.baseUrl,a=this.updateInvalidSelections(e),i=e.map((e=>{const i=tC(n,e.value),r=XC(XC({},e),{},{content:i,value:i});return r.fullObject||a&&a.includes(r.value)||(t=!0,s.push((()=>this.query$.next({queryIssueKey:r.content,remoteAppLink:this.getRemoteAppLink()})))),XC(XC({},r),{},{tag:{elemBefore:r.elemBefore}})})),r=!(!t&&EE()(a)&&!EE()(i));this.setState({newIssueLinks:i,isDisabled:r,invalidSelections:a}),s.map((e=>e()))},this.onIssueSearchChange=e=>{this.onIssueSearchChangeWithUserInput(e)},this.onCreateReciprocalLinkChange=(e,t)=>{const s=!this.state.createReciprocalLink;this.setState({createReciprocalLink:s}),Object(Fa.h)(t,"createReciprocalLink",{isChecked:s})},this.onShowReciprocalLinkTooltip=e=>{Object(Fa.h)(e,"createReciprocalLink")},this.onSave=(e,t)=>{
const{issueLinkType:s,newIssueLinks:n,jiraAppLink:a,createReciprocalLink:i}=this.state,{issueLinks:r}=this.props,o=this.isLocalJira(a);Object(Fa.h)(t,"addLinkedIssueButton",{isRemote:!o,newLinkedIssueIds:n.map((e=>e.id))}),s&&n&&n.length>0&&(Object($i.c)().markStartOfInteraction({key:Ir.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),o?this.saveLocalIssueLink(s,n,r):this.saveRemoteIssueLink(s,n,a,r,i))},this.saveLocalIssueLink=(e,t,s)=>{const{createAnalyticsEvent:n}=this.props,a=e.fullObject&&e.fullObject.label,i=(s&&s[a]||[]).filter((e=>!e.isRemote)).map((e=>e.linkedIssueKey));t.map((e=>e.fullObject?e:XC(XC({},e),{},{fullObject:{key:e.value}}))).filter((e=>!i.includes(e.fullObject.key))).forEach(((t,s)=>{const a=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:a,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:QC(a,e.fullObject,t.fullObject,this.props.baseUrl)},n({action:"succeeded"}))})),this.props.onClose()},
this.saveRemoteIssueLink=(e,t,s,n,a)=>{const{createAnalyticsEvent:i}=this.props,r=n?Object.keys(n).reduce(((e,t)=>[...e,...n[t]]),[]).filter((e=>e.isRemote)).map((e=>e.globalId)):[];t.filter((e=>e.fullObject)).map(((t,n)=>((e,t,s,n,a)=>{const i=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${e}`,{fullObject:{id:r,key:o,summaryText:c},iconUrl:l}=t,{id:u,name:d,baseUrl:p}=s,m={id:i,applicationType:"com.atlassian.jira",applicationName:d,issueLinkUrl:Object(Nj.f)(p,o),relationship:n.label,summary:c,iconUrl:Object(Nj.q)(l),issueKey:o,createReciprocalLink:a};if(!r)return zC(zC({},m),{},{appLinkId:u,payloadType:"WITHOUT_ISSUE_ID"});const b=Object(Hi.j)(r.toString());return zC(zC({},m),{},{globalId:JC(u,b),remoteIssueId:b,payloadType:"WITH_ISSUE_ID"})})(n,t,s.fullObject,e,a))).filter((e=>!e.globalId||!r.includes(e.globalId))).forEach((e=>{this.props.onAddRemote(e,i({action:"succeeded",isRemote:!0,withReciprocalLink:Boolean(e.createReciprocalLink)}))})),this.props.onClose()},
this.updateInvalidSelections=e=>{const t=e?e.map((e=>e.value)):[];return this.state.invalidSelections.filter((e=>t.includes(e)))},this.handleUpdate=({issue:e,results:t})=>{const s=t.map((e=>XC(XC({},e),{},{tag:{elemBefore:e.elemBefore}})))[0];s?this.setState((t=>{const n=t.newIssueLinks.map((e=>e.value.toLowerCase()===s.value.toLowerCase()?s:e)),a=t.invalidSelections.filter((t=>t!==e));return{newIssueLinks:n,isDisabled:a.length>0,invalidSelections:a}})):this.setState((t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelections:t.invalidSelections.concat(e)})))},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map((e=>({label:e.label,value:e.id+e.direction,fullObject:e}))),this.transformJiraAppLinksForSelect=()=>{const e=this.props.jiraAppLinks.map((e=>({label:`${e.name}`,value:e.id,fullObject:e})));return[hC,...e]},this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,this.renderLoading=()=>i.a.createElement($.a,null),
this.state=this.getInitialState(),this.query$=new bj.Subject,this.subscription=this.query$.flatMap((({queryIssueKey:t,remoteAppLink:s})=>NC(e.baseUrl,e.issueKey,t,s).map((e=>({issue:t,results:e}))))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(Cr.a)(this.addLinkContainer),!this.props.canLinkRemoteIssues||"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus&&"ERROR"!==this.props.jiraAppLinksFetchStatus||this.props.fetchJiraAppLinks()}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(Cr.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}renderFullAddForm(){
const e=this.transformIssueLinkTypesForSelect(),t=this.transformJiraAppLinksForSelect(),{baseUrl:s,issueKey:n,containerWidth:a,onClose:r,canCreateLinkedIssue:o,canLinkRemoteIssues:c}=this.props,{issueLinkType:l,newIssueLinks:u,isDisabled:d,invalidSelections:p}=this.state,m=a&&a<=480,b=t.length>1,f=this.isLocalJira(this.state.jiraAppLink)&&o;return i.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},i.a.createElement(WC,{isCompact:m},c&&b&&i.a.createElement($E.b,null,i.a.createElement(GC,{isCompact:m},i.a.createElement(bC,{selectItems:t,defaultValue:hC,onChange:this.onJiraAppLinkChange,containerWidth:a}))),i.a.createElement($E.b,null,i.a.createElement(GC,{isCompact:m},i.a.createElement(sC,{selectItems:e,selectedItem:l,onChange:this.onIssueLinkTypeChange}))),i.a.createElement(BC,null,i.a.createElement(KC,{value:u,baseUrl:s,issueKey:n,onChange:this.onIssueSearchChange,invalidSelections:p,remoteAppLink:this.getRemoteAppLink()
}))),i.a.createElement(HC,null,!this.isLocalJira(this.state.jiraAppLink)&&i.a.createElement(LC,{isChecked:this.state.createReciprocalLink,onChange:this.onCreateReciprocalLinkChange,onShow:this.onShowReciprocalLinkTooltip}),f&&i.a.createElement($C,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},i.a.createElement(PC,null)),i.a.createElement(bm.a,null,i.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},i.a.createElement(H.a,{appearance:"primary",onClick:this.onSave,isDisabled:d},i.a.createElement(v.c,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),i.a.createElement(H.a,{appearance:"subtle",onClick:r},i.a.createElement(v.c,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}render(){
return!this.props.canLinkRemoteIssues||"LOADING"!==this.props.jiraAppLinksFetchStatus&&"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus?this.renderFullAddForm():this.renderLoading()}}sI.displayName="AddIssueLinkView",sI.displayName="AddIssueLinkView",sI.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:c.a,onAddRemote:c.a,onClose:c.a};var nI=Object(qt.a)([Object(f.a)({onAdd:{action:"added"},onAddRemote:{action:"added",isRemote:!0}}),Object(r.b)((e=>({quickAddClickedCount:Object(WS.j)(e),canCreateLinkedIssue:Object(WS.a)(e),canLinkRemoteIssues:JS(e),jiraAppLinksFetchStatus:QS(e),jiraAppLinks:ZS(e)})),(e=>({onAdd:(t,s,n)=>e(Object(VS.n)(t,s,n)),onAddRemote:(t,s,n)=>e(Object(KS.f)(t,s,n.update({withReciprocalLink:Boolean(t.createReciprocalLink)}))),fetchJiraAppLinks:()=>e(Object(qS.a)())}))),Pa.a])(sI),aI=Object(v.h)({label:{id:"issue.issue-links-add-label",defaultMessage:"Link an issue"}});const iI=q.default.span(["margin-left:auto;"])
;class rI extends a.Component{render(){return i.a.createElement(iI,null,i.a.createElement(jy.a,{label:this.props.intl.formatMessage(aI.label),onClick:this.props.onClick}))}}rI.displayName="AddIssueLinkButton",rI.defaultProps={onClick:c.a};var oI=Object(v.i)(rI),cI=s("./node_modules/@atlaskit/icon/glyph/shortcut.js"),lI=s.n(cI),uI=s("./src/packages/project-settings/common/src/i18n/formatted-react-message.js"),dI=s("./src/packages/issue/issue-view/src/views/common/line-card-hidden-button/index.js");const pI=Object(v.h)({issueTypeTitle:{id:"issues.issue-links.remote-issue-link-error.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},remoteLinkAuthSummary:{id:"issues.issue-links.remote-issue-link-error.auth-required.summary",defaultMessage:"{tagStart}Authenticate{tagEnd} to see additional information"},remoteLinkGeneralError:{id:"issues.issue-links.remote-issue-link-error.general-error",defaultMessage:"Failed to load remote issue"},remoteLinkMissingApplink:{
id:"issues.issue-links.remote-issue-link-error.missing-applink",defaultMessage:"Failed to load remote issue because remote site is not linked"},remoteLinkAuthTooltip:{id:"issues.issue-links.remote-issue-link-error.auth-required.tooltip",defaultMessage:"Authenticate to {remoteServerHostname}"},remoteLinkOpenLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.link-button.tooltip",defaultMessage:"Open link in a new tab"},remoteLinkDeleteLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.delete-button.tooltip",defaultMessage:"Unlink remote issue"}
}),mI=q.default.div(["display:flex;align-items:center;"]),bI=Object(q.default)(mI)(["width:100%;height:100%;position:relative;"]),fI=q.default.span(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";}"],z.e/2,Re.a.N90,Re.a.N90),gI=q.default.div(["margin-left:-","px;"],z.e/2),hI=q.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;color:",";"],z.e,(e=>"red"===e.color?Re.a.R400:"inherit")),yI=q.default.div(["overflow:hidden;text-overflow:ellipsis;display:block;"]),OI=q.default.span(["color:",";text-decoration:underline;"],Re.a.B400),jI=(Re.a.N20,z.e,z.e,z.e,z.e,q.default.div(["width:","px;height:","px;padding:","px;box-sizing:border-box;"],3*z.e,3*z.e,z.e/2)),vI="{tagStart}",EI="{tagEnd}";class kI extends a.Component{constructor(...e){super(...e),this.renderErrorIcon=()=>i.a.createElement(gI,null,i.a.createElement(Mm.a,{
label:"Issue link loading error",primaryColor:Re.a.R300})),this.renderIcon=()=>{const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderIssueTypeIcon():this.renderErrorIcon()},this.authLinkWithAnalytics=e=>i.a.createElement(OI,{onClick:()=>{this.props.handleUserClickAnalytics("errorCard.authenticationLink")}},e.children),this.renderAuthRequiredText=()=>{const{intl:e,remoteServerHostname:t}=this.props;return i.a.createElement(hI,null,i.a.createElement(je.a,{content:e.formatMessage(pI.remoteLinkAuthTooltip,{remoteServerHostname:t}),position:"bottom"},i.a.createElement(yI,null,i.a.createElement(Mh.a,{label:"",size:"small",primaryColor:Re.a.B400}),i.a.createElement(uI.a,{message:e.formatMessage(pI.remoteLinkAuthSummary,{tagStart:vI,tagEnd:EI}),openingTag:vI,closingTag:EI,Component:this.authLinkWithAnalytics}))))},this.openIssueLink=e=>{void 0!==this.props.issueLink&&window.open(this.props.issueLink,"_blank"),this.props.handleUserClickAnalytics("errorCard.linkIcon"),
e.stopPropagation()},this.handleDelete=e=>{const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&null!=s&&n&&n(Object(Hi.l)(t),s),e.stopPropagation()}}renderIssueTypeIcon(){const{intl:e,issueTypeIconUrl:t,issueTypeName:s}=this.props,n=Fk()(s)?s:e.formatMessage(pI.issueTypeTitle,{issueTypeName:s});return i.a.createElement(je.a,{content:s||"",position:"bottom"},i.a.createElement(mI,null,i.a.createElement(Km.a,{alt:n,url:t})))}renderKey(){return i.a.createElement(fI,{onClick:()=>this.props.handleUserClickAnalytics("errorCard.issueKey")},this.props.issueKey)}renderText(){const{error:e}=this.props;switch(e){case"APPLINK_REQ_AUTH":return this.renderAuthRequiredText();case"APPLINK_MISSING":return i.a.createElement(hI,{color:"red"},this.props.intl.formatMessage(pI.remoteLinkMissingApplink));default:return i.a.createElement(hI,{color:"red"},this.props.intl.formatMessage(pI.remoteLinkGeneralError))}}renderLinkButton(){
const{isHovering:e,isFocused:t,intl:s}=this.props,n=i.a.createElement(je.a,{content:s.formatMessage(pI.remoteLinkOpenLinkTooltip),position:"bottom"},i.a.createElement(jI,null,i.a.createElement(lI.a,{label:"Open remote issue",size:"small"})));return i.a.createElement(dI.a,{show:e||t,icon:n,onClick:this.openIssueLink})}renderDeleteButton(){const{canRemove:e,onDelete:t,isHovering:s,isFocused:n,intl:a}=this.props;return e&&t?i.a.createElement(dI.a,{show:s||n,icon:i.a.createElement(je.a,{content:a.formatMessage(pI.remoteLinkDeleteLinkTooltip),position:"bottom"},i.a.createElement(td.a,{label:"Remove issue link"})),onClick:this.handleDelete}):null}render(){return i.a.createElement(bI,null,this.renderIcon(),this.renderKey(),this.renderText(),this.renderLinkButton(),this.renderDeleteButton())}}kI.displayName="RemoteIssueLinkLineCardError";var wI=Object(v.i)(kI);function SI(){return(SI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const CI=({isHovering:e,isActive:t,isFocused:s,issue:n,groupId:r,isInteractive:o,onDelete:c,canAddIssueLinks:l,projectType:u})=>{const d=Object(a.useCallback)((()=>({projectType:u,groupId:r,linkedIssueId:n.id,isRemote:n.isRemote||!1,hasError:n.hasError||!1,errorType:n.errorType||"",remoteIssueLinkError:n.remoteIssueLinkError&&n.remoteIssueLinkError.error?n.remoteIssueLinkError.error:"NONE"})),[u,r,n]),{createAnalyticsEvent:p}=Object(Li.a)(),m=Object(a.useCallback)((e=>{const t=p({action:"clicked",actionSubject:"issueView.IssueLinkLineCard"}),s=d();Object(Fa.h)(t,e,s)}),[p,d]);return i.a.createElement(R.a,{id:"IssueLinkLineCard",packageName:"jiraIssueView",attributes:d()},(()=>{const a=(e,t)=>c&&c(r,e,t);if(n.remoteIssueLinkError)return i.a.createElement(wI,{issueTypeIconUrl:n.issueTypeIconUrl,issueTypeName:n.issueTypeName,issueKey:n.issueKey,
remoteServerHostname:n.remoteServerHostname,globalId:n.globalId,isHovering:e,isFocused:s,issueLink:n.issueLink,error:n.remoteIssueLinkError.error,handleUserClickAnalytics:m,canRemove:l,onDelete:c&&a});const d=o&&!n.remoteServerHostname;return i.a.createElement(hw,SI({isHovering:e,isActive:t,isFocused:s,isInteractive:d,onDelete:c&&a,canRemove:l,projectType:u,handleUserClickAnalytics:m},n))})(),(()=>i.a.createElement(Ua.a,{onMount:e=>Object(Fa.b)(e,"issueView.IssueLinkLineCard loaded","IssueLinkLineCard",d())}))())};CI.displayName="IssueLinkLineCard";var II=Object(v.h)({removeIssueLinkHeader:{id:"issues.confirm-delete-issuelink-modal-header",defaultMessage:"Remove the link to {issueKey}?"},removeIssueLinkContent:{id:"issues.confirm-delete-issuelink-modal-text",defaultMessage:"You can add it again later if you need to."},removeIssueLinkButton:{id:"issues.conirm-delete-issue-link-confirm-btn-text",defaultMessage:"Remove"},issueLinkFailureHeader:{id:"issue.issue-links-failure-header",
defaultMessage:"We couldn't link the issue"},issueLinkFailureContent:{id:"issue.issue-links-failure-content",defaultMessage:"Wait a few moments, then give it another try."}});const TI=q.default.h3(["",";margin:0;"],Re.d.h200()),PI=q.default.div(["margin:","px 0;padding-right:1px;"],z.e),_I=q.default.div(["margin:","px 0;padding-right:1px;"],z.e),xI=q.default.label(["display:flex;align-items:center;justify-content:space-between;"]);function DI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function AI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?DI(Object(s),!0).forEach((function(t){LI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):DI(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function LI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const MI=(e={})=>e?Object.keys(e).reduce(((t,s)=>e[s].length+t),0):0,RI=Object(k.a)("removeLinkedIssue",A.a.MODAL)(ct.b);class NI extends a.Component{constructor(...e){super(...e),this.state={hasDeleteModal:!1,groupId:null,issueKey:null,globalId:void 0},this.onIssueClickNew=({id:e,issueKey:t,issueLink:s,remoteIssueLinkError:n,projectType:a=null,isRemote:i}={},r)=>{if(t){const{onIssueLinkClicked:t,linkActions:c,onAuthenticateApplink:l}=this.props,u="APPLINK_REQ_AUTH"===(null==n?void 0:n.error);if(t&&t(e,a,MI(this.props.issueLinks)),Object(Am.d)(r))if(u){var o;const e=null==n||null===(o=n.repairLink)||void 0===o?void 0:o.href;e&&l&&l(Object(Hi.i)(e))}else s&&Object(GS.a)(s,r.metaKey,c.push);(Object(Am.e)(r)||Object(Am.a)(r))&&!u&&s&&window.open(s,"_blank")
;const{createAnalyticsEvent:d}=this.props,p=d({action:"clicked",actionSubject:"card"});Object(Fa.h)(p,"issueLinkedCard",{clickedIssueId:e,linkedIssuesCount:MI(this.props.issueLinks),issueNeedsAuthentication:u,isRemote:i})}},this.onIssueClick=({id:e,issueKey:t,issueLink:s,projectType:n=null}={},a)=>{if(t){const{onIssueLinkClicked:t,linkActions:i}=this.props;t&&t(e,n,MI(this.props.issueLinks)),Object(Am.d)(a)&&s&&Object(GS.a)(s,a.metaKey,i.push)}},this.getLinkByGroupAndIssueKey=(e,t,s)=>(this.props.issueLinks&&e&&this.props.issueLinks[e]||[]).find((e=>e.linkedIssueKey===t&&e.globalId===s)),this.renderIssueLinkInlineMessage=(e,t)=>{const{intl:s,retryLinkedIssue:n,cancelLinkedIssue:a,createAnalyticsEvent:i}=this.props;return Rk(s,s.formatMessage(II.issueLinkFailureHeader),s.formatMessage(II.issueLinkFailureContent),((s,a)=>n(e,t,i({action:"succeeded",isRemote:t}),a.update({isRemote:t}))),(()=>a(e,t)))}}componentDidMount(){
const{issueLinks:e,onIssueLinkRendered:t,hasLinks:s,onMountCreatePermissionFetching:n}=this.props;if(s&&t(MI(e)),n(),this.props.issueLinks){const e=this.flattenedIssueLinks().map((e=>e.linkedIssueKey));this.props.prefetchLinkedIssues(e)}}componentDidUpdate(e){const{displayAddIssueLinks:t}=this.props,s=!e.displayAddIssueLinks&&t,n=e.displayAddIssueLinks&&!t;if(s&&Object($i.c)().markTimeToFinishTask({key:Ir.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT}),n&&Object($i.c)().markTimeToFinishTask({key:Ir.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),this.props.issueLinks&&!Ta()(e.issueLinks,this.props.issueLinks)){const e=this.flattenedIssueLinks().map((e=>e.linkedIssueKey));this.props.prefetchLinkedIssues(e)}}onDeleteConfirm(e,t,s){const n=this.getLinkByGroupAndIssueKey(e,t,s);if(n){const e=n.id;this.props.deleteLinkedIssue({linkId:e,globalId:s});const t=this.flattenedIssueLinks().findIndex((t=>t.id===e&&t.globalId===s));this.props.onRemoveIssueLinkInitiated(t)}
this.modalClosedStateChanges()}onDeleteCancel(){this.modalClosedStateChanges()}onDeleteAction(e,t,s){this.setState({groupId:e,issueKey:t,globalId:s,hasDeleteModal:!0});const{createAnalyticsEvent:n}=this.props,a=this.getLinkByGroupAndIssueKey(e,t,s),i=n({action:"clicked",actionSubject:"button"});Object(Fa.h)(i,"linkedIssueCardDeleteButton",{issueLinkToDeleteId:$S()(a,["linkedIssue","id"]),isRemote:!EE()(s)})}getRemovalConfirmationText(e){const{intl:{formatMessage:t}}=this.props;return{confirmationHeader:t(II.removeIssueLinkHeader,{issueKey:e}),confirmationContent:t(II.removeIssueLinkContent)}}modalClosedStateChanges(){this.setState({groupId:null,issueKey:null,hasDeleteModal:!1,globalId:void 0})}flattenedIssueLinks(){const{issueLinks:e}=this.props;return e?Object.keys(e).reduce(((t,s)=>[...t,...e[s]]),[]):[]}renderDeleteConfirmationModal(){
const{intl:{formatMessage:e}}=this.props,{groupId:t,issueKey:s,globalId:n}=this.state,a=this.getRemovalConfirmationText(s),{confirmationHeader:r,confirmationContent:o}=a;return i.a.createElement("div",null,i.a.createElement(RI,{appearance:"warning",headerMessage:r,contentMessage:o,onConfirm:()=>this.onDeleteConfirm(t,s,n),onCancel:()=>this.onDeleteCancel(),externalId:"issue.issueLinks.delete",confirmActionText:e(II.removeIssueLinkButton)}),i.a.createElement(b.a,null))}renderLineCardGroup(e,t){const{projectType:s}=this.props;return i.a.createElement(Dm.a,{items:e,groupId:t,isInteractive:this.props.isIssueViewComplete,onClick:this.onIssueClickNew},((e,n,a,r)=>i.a.createElement(CI,{isHovering:e,isActive:n,isFocused:a,issue:r,groupId:t,isInteractive:this.props.isIssueViewComplete,onDelete:(e,t,s)=>this.onDeleteAction(e,Object(Hi.l)(t),s),canAddIssueLinks:this.props.canAddIssueLinks,projectType:s})))}renderGroup(e,t){const s=t.map((e=>AI(AI({},e.linkedIssue),{},{
projectType:e.linkedIssue.projectType||null,isLoading:e.isLoading||!1,hasError:e.hasError,errorInlineMessage:e.hasError?this.renderIssueLinkInlineMessage(e.id,!!e.isRemote):void 0,id:e.globalId||e.linkedIssue.id,isRemote:e.isRemote,globalId:e.isRemote?e.globalId:void 0,remoteServerHostname:e.isRemote?e.remoteServerHostname:void 0,remoteIssueLinkError:e.isRemote?e.remoteIssueLinkError:void 0})));return i.a.createElement(PI,{key:e},i.a.createElement(TI,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.issue-links-view.relationship-heading"},e),this.renderLineCardGroup(s,e))}renderHeading(){const{hasLinks:e,canAddIssueLinks:t,onIssueLinkAddClick:s}=this.props;return i.a.createElement(Da.c,null,i.a.createElement(xI,{htmlFor:"issue-link-search"},i.a.createElement(Da.e,null,i.a.createElement(v.c,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"}))),i.a.createElement(Da.d,null,t&&e&&i.a.createElement(oI,{onClick:s})))}renderExistingLinks(){
const{issueLinks:e}=this.props;return i.a.createElement("div",null,e&&Object.keys(e).sort().map((t=>this.renderGroup(t,e[t]))))}renderAddIssueLink(){const{issueLinkTypes:e,baseUrl:t,issueKey:s,onIssueLinkAddClosed:n,issueLinks:a}=this.props;return i.a.createElement(_I,null,i.a.createElement("div",null,i.a.createElement(nI,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:a})))}render(){const{issueLinks:e,hasLinks:t,displayAddIssueLinks:s}=this.props,n=t&&!EE()(e),a=this.state.hasDeleteModal;return i.a.createElement(M.a,null,n||s?this.renderHeading():null,n?this.renderExistingLinks():null,s?this.renderAddIssueLink():null,a?this.renderDeleteConfirmationModal():null)}}NI.displayName="IssueLinksView",NI.displayName="IssueLinksView",NI.defaultProps={issueLinks:null,issueLinkTypes:[],isIssueViewComplete:!1,onIssueLinkClicked:c.a,onIssueLinkRendered:c.a,onIssueLinkAddClick:c.a,onIssueLinkAddClosed:c.a};var FI=Object(qt.a)([v.i,Object(f.a)({deleteLinkedIssue:{action:"deleted"},
onAuthenticateApplink:{action:"authenticate"}}),Object(k.b)("linkedIssue"),Object(as.a)((e=>({onIssueLinkClicked:(t,s,n)=>e("linked-issue-clicked",{targetIssueId:t,targetProjectType:Object(In.i)(...NS.e)(s),linkedIssuesCount:n}),onIssueLinkRendered:t=>e("linked-issue-render",{linkedIssuesCount:t}),onRemoveIssueLinkInitiated:t=>e("linked-issue-removed",{indexOfDeletedLink:t})}))),FS.a,Object(r.b)((e=>({canAddIssueLinks:Object(BS.a)(e),hasLinks:Object(WS.d)(e),issueLinks:Object(WS.c)(e),issueLinkTypes:Object(BS.b)(e),baseUrl:Object(T.f)(e),issueKey:Object(T.y)(e),externalId:"issue.issue-links",displayAddIssueLinks:Object(WS.l)(e),projectType:Object(P.F)(e),isIssueViewComplete:Object(P.n)(e)})),(e=>({onAuthenticateApplink:(t,s)=>e(Object(US.a)(t,s)),deleteLinkedIssue:({linkId:t,globalId:s},n)=>{e(void 0!==s?Object(KS.b)(s,n):Object(VS.e)(t,n))},cancelLinkedIssue:(t,s)=>{e(s?Object(KS.d)(t):Object(VS.l)(t))},retryLinkedIssue:(t,s,n,a)=>{e(s?Object(KS.g)(t,n,a):Object(VS.o)(t,n,a))},
onIssueLinkAddClick:()=>e(Object(VS.a)()),onIssueLinkAddClosed:()=>e(Object(VS.b)()),onMountCreatePermissionFetching:()=>e(Object(VS.g)()),prefetchLinkedIssues:t=>e(Object(Qy.a)({issueKeys:t}))})))])(NI),UI=s("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/async.js");var VI=Object(qt.a)([Object(r.b)((e=>({isServiceDesk:Object(T.t)(e)})),{})])((({isServiceDesk:e})=>Object(ne.isJsmLinkedAlertsEnabled)()&&e?i.a.createElement(UI.b,null):null));const KI=()=>({type:"LINK_INCIDENT_CLICKED"}),WI=()=>({type:"CREATE_MAJOR_INCIDENT_CLICKED"}),BI=Object(rn.createSelector)(P.f,(e=>e.incidentManagement)),HI=Object(rn.createSelector)(BI,(e=>e.createMajorIncident)),$I=(Object(rn.createSelector)(HI,(e=>e.clickedCount)),
Object(rn.createSelector)(P.H,(e=>e.incidentManagement))),GI=Object(rn.createSelector)($I,(e=>e.showCreateMajorIncidentModal)),qI=Object(rn.createSelector)(P.f,(e=>e.incidentManagement)),zI=Object(rn.createSelector)(qI,(e=>e.createLinkedIncident)),YI=(Object(rn.createSelector)(zI,(e=>e.errorMessage)),Object(rn.createSelector)(zI,(e=>e.isInvalid)),Object(rn.createSelector)(zI,(e=>e.isLoading)),Object(rn.createSelector)(zI,(e=>e.clickedCount))),QI=Object(rn.createSelector)(P.H,(e=>e.incidentManagement)),JI=Object(rn.createSelector)(QI,(e=>e.showCreateIncidentPanel)),ZI=Object(on.e)("com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"),XI=Object(rn.createSelector)(ZI,(e=>e&&e.renderedValue));var eT=s("./src/packages/servicedesk/incident-management/issue-view/link-incident/src/async.js");const tT=Object(qt.a)([Object(r.b)((e=>({issueSummary:Object(on.g)("summary")(e),issueDescription:Object(on.g)("description")(e),impactedServices:XI(e),issueKey:Object(T.y)(e),
issueId:Object(T.x)(e),projectKey:Object(T.D)(e),projectId:Object(P.C)(e),isCreateVisible:JI(e),isCreateMajorIncidentModalVisible:GI(e),createLinkedIncidentCount:YI(e)})),(e=>({onCreateLinkedIncidentClick:()=>e(KI()),onCloseLinkedIncidentPanelClick:()=>e((()=>({type:"LINK_INCIDENT_PANEL_CLOSED"}))()),onCloseCreateMajorIncidentModal:()=>e((()=>({type:"CREATE_MAJOR_INCIDENT_MODAL_CLOSED"}))())})))])((({issueSummary:e,issueDescription:t,impactedServices:s,issueKey:n,useFieldValue:a=vl.b,issueId:r,isCreateVisible:o,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p,projectId:m,projectKey:b})=>{const[f]=a({issueKey:n,fieldKey:"servicedesk-incident-linking"}),g=(e=>e?e.map((e=>e.name)):null)(s);return f&&void 0!==r?i.a.createElement(eT.a,{issueSummary:e,issueDescription:t,impactedServiceNames:g,issueKey:n,issueId:r,projectId:m,projectKey:b,isCreateVisible:o,
isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p}):null}));var sT=Object(v.h)({title:{id:"issue.portfolio-child-issues.title",defaultMessage:"Child issues"},noValueText:{id:"issue.placeholder-for-empty-child-issues-field",defaultMessage:"There are no child issues."}}),nT=Object(qt.a)([Object(r.b)((e=>({childIssuesPanelType:"portfolioChildren",baseUrl:Object(T.f)(e),locale:Object(T.A)(e),user:Object(T.a)(e),projectId:Object(P.C)(e),projectType:Object(P.F)(e),parentKey:Object(T.y)(e),parentId:Object(T.x)(e),issues:Object(tO.a)(e),isIssueViewComplete:Object(P.n)(e),messages:sT})),(e=>({onNavigateToNewIssue:({fromIssueKey:t,toIssueKey:s})=>e(Object(Yy.c)({fromIssueKey:t,toIssueKey:s})),onChange:t=>{switch(t.type){case aO.CHILD_ISSUE_ADDED:e(qy(t.meta.childIssue))}},prefetchChildIssues:t=>e(Object(Qy.a)({issueIds:t}))
})))])(mS),aT=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),iT=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),rT=Object(v.h)({title:{id:"issue.subtasks-heading",defaultMessage:"Subtasks"},createSubtaskErrorHeader:{id:"issue.subtask-error-header",defaultMessage:"We couldn't create the subtask"},createSubtaskErrorContent:{id:"issue.subtask-error-content",defaultMessage:"Wait a few moments, then give it another try."}});function oT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oT(Object(s),!0).forEach((function(t){lT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oT(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function uT(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function dT(){return(dT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const pT=e=>{const t=e.onChange,s=Object(Ps.g)(),[n,{setFieldValue:r}]=Object(vl.b)({issueKey:s,fieldKey:"subtasks"}),o=Object(a.useCallback)((e=>{switch(e.type){case aO.CHILD_ISSUE_ADDED:r(s,"subtasks",n.concat({
id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,r]);return i.a.createElement(mS,dT({},e,{onChange:o}))};pT.displayName="ConnectedComponent";var mT=Object(r.b)((e=>({childIssuesPanelType:"classicSubtasks",parentId:Object(T.x)(e),issueTypes:Object(aT.c)(e),issues:Object(iT.d)(e),messages:rT,supportsIssueCreation:Object(iT.a)(e),quickAddClickCount:Zy(e),isIssueViewComplete:Object(P.n)(e),fetchIssueTypesStatus:Object(jc.a)(e)})),(e=>({onChange:t=>{switch(t.type){case aO.CHILD_ISSUE_ADDED:e((e=>({type:"SUBTASK_ADD_SUCCESS",payload:{subtask:e}}))(t.meta.childIssue))}},onAddChildClick:()=>e(zy()),prefetchChildIssues:t=>e(Object(Qy.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(Yy.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=uT(t,["onNavigateToNewIssueDispatchProp"]);return cT(cT(cT({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({
fromIssueKey:e,toIssueKey:t})}})}))(pT),bT=s("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),fT=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const gT=Object(v.h)({headerMessage:{id:"issue.details.web-links.delete-confirmation-modal.title",defaultMessage:"Delete the web link?"},contentMessage:{id:"issue.details.web-links.delete-confirmation-modal.content",defaultMessage:"You can add the link later again if you need to."},confirmActionText:{id:"issue.details.web-links.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"},cancelActionText:{id:"issue.details.web-links.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}});const hT=({intl:e,onDelete:t,onCancel:s})=>i.a.createElement(ct.b,{appearance:"danger",headerMessage:e.formatMessage(gT.headerMessage),contentMessage:e.formatMessage(gT.contentMessage),confirmActionText:e.formatMessage(gT.confirmActionText),
cancelActionText:e.formatMessage(gT.cancelActionText),onConfirm:t,onCancel:s});hT.displayName="DeleteModal";var yT=Object(v.i)(hT),OT=s("./node_modules/shortid/index.js"),jT=s("./node_modules/@atlaskit/icon/glyph/world.js"),vT=s.n(jT),ET=s("./src/packages/platform/ui/flags/src/services/types.js"),kT=s("./src/packages/issue/issue-view/src/views/common/delete-button/index.js"),wT=Object(v.h)({createErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-heading",defaultMessage:"We couldn't create the web link"},deleteErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.delete-error-heading",defaultMessage:"We couldn't delete the web link"},errorBody:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-body",defaultMessage:"Wait a few moments, then give it another try."},retryAction:{
id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.retry-action",defaultMessage:"Try again"},cancelAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.cancel-action",defaultMessage:"Cancel"}});const ST=e=>e.stopPropagation(),CT=({errorHeading:e,errorBody:t,onRetry:s,onCancel:n,intl:a})=>i.a.createElement("div",{onClick:ST,onKeyPress:ST},Rk(a,a.formatMessage(e),a.formatMessage(t),s,n));CT.displayName="ErrorMessage";var IT=at()([Object(is.a)("webLinks",{onRetry:"retry"}),Object(r.b)(null,((e,{webLink:t})=>({onCreateWebLinkRetry:()=>{e(Object(bT.d)(t.id))},onCreateWebLinkCancel:()=>{e(Object(bT.f)(t.id))},onDeleteWebLinkRetry:()=>{e(Object(bT.h)(t.id))},onDeleteWebLinkCancel:()=>{e(Object(bT.a)(t.id))}})),((e,t,s)=>({intl:s.intl,errorHeading:!0===s.webLink.createFailed?wT.createErrorHeading:wT.deleteErrorHeading,errorBody:wT.errorBody,onRetry:(e,n,a)=>{!0===s.webLink.createFailed?(t.onCreateWebLinkRetry(),Object(vC.a)(a,{
name:"createRetry"})):(t.onDeleteWebLinkRetry(),Object(vC.a)(a,{name:"deleteRetry"}))},onCancel:!0===s.webLink.createFailed?t.onCreateWebLinkCancel:t.onDeleteWebLinkCancel}))),v.i])(CT)
;const TT=q.default.div(["display:flex;align-items:center;"]),PT=Object(q.default)(TT)(["width:100%;height:100%;position:relative;"]),_T=q.default.div(["flex:1;overflow:hidden;align-items:center;"]),xT=q.default.div(["flex-grow:1;overflow:hidden;align-items:left;"]),DT=q.default.div(["flex-shrink:0;max-width:80%;overflow:hidden;align-items:left;"]),AT=q.default.div(["flex-grow:1;overflow:hidden;align-items:left;"]),LT=q.default.div([""," padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.isFocused&&`color: ${Re.a.B400};`),z.e),MT=q.default.div([""," padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>e.isFocused&&`color: ${Re.a.B400};`),z.e,Re.a.N200),RT=q.default.div(["display:inline-flex;flex-shrink:0;margin-left:","px;margin-right:","px;"],z.e/4,z.e/4),NT=e=>!(!e.createFailed&&!e.deleteFailed);class FT extends a.Component{constructor(...e){super(...e),this.state={validIconUrl:!1},this.onDeleteClick=e=>{
const{onDelete:t,webLink:{id:s}}=this.props;e.stopPropagation(),t(s)}}componentDidMount(){const{iconUrl:e}=this.props.webLink;if(this.props.webLink.deleteFailed){const{onDeleteWebLinkRetry:e,onDeleteWebLinkCancel:t}=this.props;this.showErrorFlag(wT.deleteErrorHeading,e,t)}if(null!=e){const t=new Image;t.onload=()=>this.setState({validIconUrl:!0}),t.onerror=()=>this.setState({validIconUrl:!1}),t.src=e}}componentDidUpdate(e){if(!e.webLink.createFailed&&this.props.webLink.createFailed){const{onCreateWebLinkRetry:e,onCreateWebLinkCancel:t}=this.props;this.showErrorFlag(wT.createErrorHeading,e,t)}}showErrorFlag(e,t,s){const{showFlag:n,dismissFlag:a}=this.props,i=Object(ET.b)(Object(OT.generate)());n(((e,t,s,n)=>({id:e,title:t,description:wT.errorBody,type:"warning",isAutoDismiss:!0,actions:[{content:wT.retryAction,onClick:s},{content:wT.cancelAction,onClick:n}]}))(i,e,(()=>{a({id:i,command:"DISMISS"}),t()}),(()=>{a({id:i,command:"DISMISS"}),s()})))}shouldRenderDeleteButton(){
const{webLink:e,canDelete:t}=this.props;return t&&!(e.isCreating||NT(e))}renderLinkIcon(){const{webLink:{iconUrl:e,linkText:t=""}}=this.props;return this.state.validIconUrl?i.a.createElement(Er.a,{src:e,size:"small",appearance:"square"}):i.a.createElement(RT,null,i.a.createElement(vT.a,{label:t}))}renderLinkTextOld(){const{webLink:e,isFocused:t}=this.props,{linkText:s,href:n}=e;return i.a.createElement(_T,null,i.a.createElement(je.a,{content:n,truncate:!0,position:"bottom"},i.a.createElement(LT,{isFocused:t},s||n)))}renderLinkText(){const{webLink:{linkText:e,href:t,summary:s},isFocused:n}=this.props,a=null==s?xT:DT,r=e===t?`${t}`:`${t} - ${String(e)}`;return i.a.createElement(a,null,i.a.createElement(je.a,{content:r,position:"bottom"},i.a.createElement(LT,{isFocused:n},e||t)))}renderLinkSummary(){const{webLink:{summary:e,href:t},isFocused:s}=this.props,n=`${t} - ${String(e)}`;return null==e||""===e?null:i.a.createElement(AT,null,i.a.createElement(je.a,{content:n,position:"bottom"
},i.a.createElement(MT,{isFocused:s},e||t)))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return i.a.createElement(kT.a,{show:e||t,onClick:this.onDeleteClick})}render(){const{webLink:e}=this.props;return Object(ne.isWebAndIssueLinkSummaryEnabled)()?i.a.createElement(PT,null,this.renderLinkIcon(),this.renderLinkText(),this.renderLinkSummary(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),NT(e)&&i.a.createElement(IT,{webLink:e})):i.a.createElement(PT,null,this.renderLinkIcon(),this.renderLinkTextOld(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),NT(e)&&i.a.createElement(IT,{webLink:e}))}}FT.displayName="WebLinkLineCard";var UT=FT;function VT(){return(VT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const KT=e=>i.a.createElement(os.a,null,(({showFlag:t,dismissFlag:s})=>i.a.createElement(UT,VT({showFlag:t,
dismissFlag:s},e))));KT.displayName="WithFlagSubscriber";var WT=at()([Object(is.a)("webLinks",{onCreateWebLinkRetry:"retry",onDeleteWebLinkRetry:"retry"}),Object(r.b)(null,((e,{webLink:t})=>({onCreateWebLinkRetry:s=>{e(Object(bT.d)(t.id)),Object(vC.a)(s,{name:"createRetry"})},onCreateWebLinkCancel:()=>{e(Object(bT.f)(t.id))},onDeleteWebLinkRetry:s=>{e(Object(bT.h)(t.id)),Object(vC.a)(s,{name:"deleteRetry"})},onDeleteWebLinkCancel:()=>{e(Object(bT.a)(t.id))}})))])(KT);const BT=q.default.div(["div[class*='item-line-card-view__Card']:focus{border-bottom-color:",";}"],Re.a.N30),HT=e=>{const[t,s]=Object(a.useState)(!1),[n,r]=Object(a.useState)(null),o=e=>{s(!0),r(e)},c=()=>{s(!1),r(null)},l=c,{canDelete:u}=e;return i.a.createElement(BT,null,i.a.createElement(Ua.a,{onMount:t=>Object(Fa.b)(t,"webLinkLineCardGroup rendered",{linkCount:e.links.length})}),i.a.createElement(Dm.a,{items:e.links,groupId:"web-links",onClick:(t,s)=>{e.onClick&&e.onClick(t,s),
s&&s.currentTarget&&s.currentTarget.blur(),(e=>{e.href&&window.open(e.href,"_blank")})(t)}},((e,t,s,n)=>(({link:e,isHovering:t,isFocused:s})=>i.a.createElement(WT,{webLink:e,isHovering:t,isFocused:s,onDelete:o,canDelete:u}))({link:n,isHovering:e,isFocused:s}))),t?i.a.createElement(yT,{onDelete:()=>{n&&e.onDelete(n),c()},onCancel:l}):null)};HT.displayName="WebLinkLineCardGroup";var $T=HT,GT=Object(qt.a)([Object(is.a)("webLinkCard",{onClick:"clicked",onDelete:"deleted"}),Object(E.a)({onClick:"visitWebLink",onDelete:"deleteWebLink"}),Object(r.b)(null,(e=>({onDelete:t=>e(Object(bT.h)(t))})))])($T);const qT=Object(v.h)({label:{id:"issue.web-links-add-label",defaultMessage:"Link to a web page"}}),zT=q.default.span(["margin-left:auto;"]),YT=({onClick:e})=>{const t=Object(xe.c)();return i.a.createElement(zT,null,i.a.createElement(jy.a,{label:t.formatMessage(qT.label),onClick:e}))};YT.displayName="AddButton";var QT=YT,JT=s("./node_modules/url-parse/index.js"),ZT=s.n(JT);const XT="null",eP=e=>{
const t=e.trim();return/^(((https?):)?\/\/)[^\s/$.?#].[^\s]*$/i.test(t)};var tP=s("./node_modules/@atlaskit/textfield/dist/es2019/components/Textfield.js");const sP=q.default.span(["color:",";font-weight:600;font-size:","px;"],Re.a.N300,1.5*z.e),nP=q.default.div(["flex:auto;"]);function aP(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const iP=e=>{let{headingText:t}=e,s=aP(e,["headingText"]);return i.a.createElement(nP,null,i.a.createElement(sP,null,t),i.a.createElement(tP.a,s))};iP.displayName="InlineField";var rP=Object(v.h)({url:{id:"issue.views.web-links.addLink.label.url",defaultMessage:"URL"},linkText:{id:"issue.views.web-links.addLink.label.linkText",
defaultMessage:"Link text"},linkTextPlaceholder:{id:"issue.views.web-links.addLink.label.linkTextPlaceholder",defaultMessage:"Add a description..."},invalidUrlMessage:{id:"issue.views.web-links.addLink.label.invalidUrlMessage",defaultMessage:"Enter a valid URL starting with http:// or https://"},errorIconLabel:{id:"issue.views.web-links.addLink.label.errorIcon",defaultMessage:"Error icon"}});const oP=q.default.div(["margin-top:","px;display:flex;"],2*z.e),cP=q.default.div(["margin-right:","px;flex:1;"],z.e),lP=q.default.div(["margin-left:","px;flex:1;"],z.e),uP=q.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],(e=>e.colour),z.e/2),dP=q.default.div(["margin-left:","px;"],z.e/2);class pP extends a.Component{constructor(...e){super(...e),this.state={isHrefFocused:!0}}render(){const{href:e,linkText:t,onHrefChange:s,intl:n,onLinkTextChange:a,isHrefValid:r}=this.props;return i.a.createElement(oP,null,i.a.createElement(cP,null,i.a.createElement(iP,{value:e,
headingText:n.formatMessage(rP.url),autoFocus:!0,placeholder:"https://www.example.com",onChange:s,onBlur:()=>{this.setState({isHrefFocused:!1})},onFocus:()=>this.setState({isHrefFocused:!0}),isInvalid:!r}),!r&&!this.state.isHrefFocused&&i.a.createElement(uP,{colour:Re.a.R400},i.a.createElement(Mm.a,{label:n.formatMessage(rP.errorIconLabel),role:"presentation"}),i.a.createElement(dP,null,n.formatMessage(rP.invalidUrlMessage)))),i.a.createElement(lP,null,i.a.createElement(iP,{value:t,headingText:n.formatMessage(rP.linkText),autoFocus:!1,placeholder:n.formatMessage(rP.linkTextPlaceholder),onChange:a})))}}pP.displayName="InlineFields";var mP=Object(v.i)(pP),bP=Object(v.h)({linkButton:{id:"issue.views.web-links.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.web-links.link.cancel-button",defaultMessage:"Cancel"}});Re.a.N10
;const fP=Object(q.default)(H.a)(["margin-left:","px !important;"],z.e),gP=q.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],z.e),hP={href:"",linkText:"",isDisabled:!0,isHrefValid:!0};class yP extends a.Component{constructor(...e){super(...e),this.state=hP,this.onChildContainerRefSet=e=>{this.childContainer=e},this.onHrefChange=e=>{const t=e.target.value;this.updateDisabledState(t),this.setState({href:t,isHrefValid:eP(t)})},this.onLinkTextChange=e=>{const t=e.target.value.slice(0,255);t!==this.state.linkText&&(this.updateDisabledState(this.state.href),this.setState({linkText:t}))},this.onSubmit=()=>{const{href:e,linkText:t}=this.state,s=e.trim(),n=(e=>{const{origin:t}=new ZT.a(e.trim(),XT),s=t===XT?"":`${t}/favicon.ico`;return Object(Hi.i)(s)})(s);this.props.onSubmit(s,EE()(t.trim())?s:t.trim(),n)},this.childContainer=void 0,this.closeAndReset=()=>{this.resetState(),this.props.onCancel()}}componentDidMount(){Object(Cr.a)(this.childContainer),
this.updateDisabledState(this.state.href)}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&(Object(Cr.a)(this.childContainer),this.focusOnInput()),this.props.linkedPagesCount>e.linkedPagesCount&&(this.resetState(),this.focusOnInput())}focusOnInput(){if(null!==this.childContainer){const e=this.childContainer.querySelector("input");null!==e&&e.focus()}}updateDisabledState(e){const t=EE()(e)||!eP(e);this.setState({isDisabled:t})}resetState(){this.setState(hP)}render(){const{intl:{formatMessage:e}}=this.props,{href:t,linkText:s,isDisabled:n,isHrefValid:a}=this.state,r=n?null:this.onSubmit;return i.a.createElement("div",{ref:this.onChildContainerRefSet},i.a.createElement(W.a,{onEscape:this.closeAndReset,onEnter:r},i.a.createElement(mP,{href:t,linkText:s,isHrefValid:a,onHrefChange:this.onHrefChange,onLinkTextChange:this.onLinkTextChange})),i.a.createElement(gP,null,i.a.createElement(fP,{appearance:"primary",onClick:this.onSubmit,isDisabled:n
},e(bP.linkButton)),i.a.createElement(fP,{appearance:"subtle",onClick:this.closeAndReset},e(bP.cancelButton))))}}yP.displayName="WebLinkCreateLinkView";var OP=Object(qt.a)([v.i,Object(is.a)("button",{onSubmit:"clicked",onCancel:"clicked"}),Object(E.a)({onSubmit:"webLinkSubmit",onCancel:"webLinkCancel"}),Object(r.b)((e=>({linkedPagesCount:Object(fT.e)(e),createLinkClickedCount:Object(fT.b)(e)})),(e=>({onCancel:()=>e(Object(bT.j)()),onSubmit:(t,s,n)=>e(Object(bT.c)(Object(Hi.i)(t),s,n))})))])(yP);const jP=Object(v.h)({heading:{id:"issue.details.web-links.heading",defaultMessage:"Web links"}});const vP=q.default.div(["margin:","px 0;padding-right:1px;"],z.e);class EP extends a.Component{renderHeading(){const{intl:e,isCreateWebLinkOpened:t,onAddButtonClicked:s,links:n,canAddWebLinks:a}=this.props,r=Boolean(n&&n.length);return t||r?i.a.createElement(Da.c,null,i.a.createElement(Da.e,null,e.formatMessage(jP.heading)),i.a.createElement(Da.d,null,a&&i.a.createElement(QT,{onClick:s}))):null}
renderLineCards(){const{links:e,canAddWebLinks:t}=this.props;return e&&e.length?i.a.createElement(vP,null,i.a.createElement(GT,{links:e,canDelete:t})):null}renderCreateLinkView(){return this.props.isCreateWebLinkOpened?i.a.createElement(OP,null):null}render(){return i.a.createElement(i.a.Fragment,null,this.renderHeading(),this.renderLineCards(),this.renderCreateLinkView())}}EP.displayName="WebLinksView";var kP=Object(qt.a)([v.i,Object(E.a)({onAddButtonClicked:"addWebLink"}),Object(r.b)((e=>({isCreateWebLinkOpened:Object(fT.c)(e),links:Object(fT.f)(e),canAddWebLinks:Object(fT.a)(e)})),(e=>({onAddButtonClicked:()=>e(Object(bT.k)())})))])(EP);class wP extends a.Component{maybeWrapInSectionWrapper(e){const{isCompactMode:t}=this.props;return e?i.a.createElement(af,{isCompactMode:t},e):e}renderEcosystemContentPanels(){const{contentPanels:e,isCompactMode:t}=this.props,s=e.map((e=>{if("FORGE_ENTITY_TYPE"===e.type){
const{name:s,appKey:n,moduleKey:a,dateAdded:r,panelInstanceId:o,extension:c}=e,l=Object(_a.g)(n,a,o,r);return i.a.createElement(Uf,{key:l,panelKey:l,name:s,appKey:n,moduleKey:a,extension:c,isCompactMode:t,externalId:"issue.ecosystem.content-panel.forge"})}return i.a.createElement(Cf,{key:e.name,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,externalId:"issue.ecosystem.content-panel"})}));return i.a.createElement(i.a.Fragment,null,s)}render(){const{isComplete:e,isCompactMode:t,issueKey:s,isEpic:n,hasIssueLinks:a,hasSubtasks:r,hasChildrenIssues:o,hasPortfolioChildIssues:c}=this.props,l=a?i.a.createElement(FI,null):null,u=r?i.a.createElement(mT,{key:s}):null,d=o?i.a.createElement(vS,{key:s}):null,p=c?i.a.createElement(nT,{key:s}):null,m=n?i.a.createElement(RS,{key:s}):null,b=e?i.a.createElement(By,null):null,f=Object(ne.getCrossJoinViaEpicTouchpointFlag)();return i.a.createElement(rf,{isCompactMode:t
},i.a.createElement(Up,null),this.maybeWrapInSectionWrapper(b),this.maybeWrapInSectionWrapper(m),this.maybeWrapInSectionWrapper(d),this.maybeWrapInSectionWrapper(p),this.maybeWrapInSectionWrapper(u),this.maybeWrapInSectionWrapper(i.a.createElement(tT,null)),this.maybeWrapInSectionWrapper(l),this.maybeWrapInSectionWrapper(Object(ne.isRelatedIssuesPanelEnabled)()?i.a.createElement(nf,null):null),this.maybeWrapInSectionWrapper("not-enrolled"!==f?i.a.createElement(SS,null):i.a.createElement(ES.a,null)),"not-enrolled"!==Object(ne.getCrossJoinViaEpicAATestFlag)()&&i.a.createElement(wS,null),this.maybeWrapInSectionWrapper(i.a.createElement(kP,null)),this.maybeWrapInSectionWrapper(this.renderEcosystemContentPanels()),this.maybeWrapInSectionWrapper(i.a.createElement(VI,null)))}}wP.displayName="ContentItems",wP.displayName="ContentItems",wP.defaultProps={isComplete:!1,isCompactMode:!1,isEpic:!1,hasIssueLinks:!1,hasSubtasks:!1,hasPortfolioChildIssues:!1,hasChildrenIssues:!1,contentPanels:[]}
;var SP=Object(qt.a)([Object(r.b)((e=>({issueKey:Object(T.y)(e),contentPanels:Object(Dn.f)(e),isComplete:Object(P.n)(e),isEpic:Object(P.q)(e),hasIssueLinks:Object(on.y)(e),hasSubtasks:Object(on.A)(e),hasPortfolioChildIssues:Object(on.z)(e),hasChildrenIssues:Object(on.x)(e)})),{})])(wP),CP=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");var IP=s("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js");const TP="HIDDEN",PP="VISIBLE";var _P=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),xP=s("./src/packages/issue/issue-view/src/selectors/tab-selector.js"),DP=s("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js");const AP=e=>Object(rn.createSelector)(on.s,(e=>e),((t,s)=>e.filter((e=>{const t=e.type,{payload:n}=e;return!!n&&("TAB"===e.type?Object(xP.b)(s,n.tabId):void 0!==n.itemId?Object(DP.b)({fieldType:t,fieldId:n.itemId,
state:s}):!(!Object(DP.a)(t)||void 0===n.fieldId)&&Object(DP.b)({fieldType:t,fieldId:n.fieldId,state:s}))}))));var LP=s("./src/packages/issue/issue-view/src/actions/context-item-actions.js"),MP=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js"),RP=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),NP=s("./node_modules/@atlaskit/icon/glyph/folder.js"),FP=s.n(NP);const UP="FIELD";var VP=s("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),KP=s("./src/packages/issue/issue-glance/src/main.js"),WP=Object(qt.a)()(KP.a);function BP(){return(BP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function HP(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a
}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const $P=(e,t)=>e.items.reduce(((e,s)=>{switch(s.type){case UP:return[...e,Object(on.m)(s.id)(t)];default:return In.h.safeErrorWithoutCustomerData("issue.views.issue-base.context.tab-glance",`Unknown tab item '${JSON.stringify(s)}'`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}}),[]).join(", "),GP=()=>i.a.createElement(FP.a,{primaryColor:Re.a.N500,label:""});GP.displayName="TabIcon";const qP=Object(Ic.a)((e=>({tabItems:e}))),zP=e=>{if(void 0!==e.shouldHideTab)return null;const{tabId:t,area:s}=e,n=HP(e,["tabId","area"]);return i.a.createElement(WP,BP({itemId:t},n))};zP.displayName="TabGlance";var YP=Object(r.b)((()=>{const e=Object(xP.c)();return(t,s)=>{const n=e(t,s.tabId);if(n){return{title:n.name,content:$P(n,t),onClickPayload:qP(n.items),Icon:GP,
showPinButton:Object(VP.a)(s.area)}}return{shouldHideTab:!0}}}),{})(zP);function QP(){return(QP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var JP=({item:e,onOpenPanel:t})=>{const{createAnalyticsEvent:s}=Object(Li.a)(),{key:n,type:r,payload:o,hasGlobalSpotlightTarget:c}=e,l=Object(a.useCallback)((e=>{Object(Fa.h)(s({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:n,contextPanelType:r});const a=e&&e.title?e.title:r;t({payload:e,title:a,type:r,key:n})}),[n,r,s,t]);if("TAB"===r)return o&&"string"==typeof o.tabId&&o.tabId?i.a.createElement(YP,{createAnalyticsEvent:s,tabId:o.tabId,onOpenPanel:l,area:"context"}):(O.a.safeErrorWithoutCustomerData("context.context-item.view","Could not find payload for Tab Item when trying to render TabGlance",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null)
;const u=Object(RP.a)()[r],d=u&&u.item;if(!d)return O.a.safeErrorWithoutCustomerData("issue",`Could not find a matching component for "${r}"`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const p=i.a.createElement(d,QP({},o,{onOpenPanel:l,area:"context",createAnalyticsEvent:s}));if(!0===c&&void 0!==(null==o?void 0:o.fieldId)){const e=`global-spotlight-target-${o.fieldId}`;return i.a.createElement(MP.a,{id:e,key:e},p)}return p};function ZP(){return(ZP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var XP=Object(r.b)(null,{onOpenPanel:e=>Object(LP.b)(e)})((e=>{const[,t]=Object(gc.b)();return i.a.createElement(M.a,{id:"context-item",packageName:"issue-view"},i.a.createElement(JP,ZP({},e,{onOpenPanel:e=>{t(e)}})))})),e_=s("./src/packages/development/summary-legacy/src/dev-panel/messages.js");function t_(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function s_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?t_(Object(s),!0).forEach((function(t){n_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function n_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const a_=(e,t,s)=>e.reduce(((e,n)=>{const{payload:a}=n;if("TAB"===n.type&&a&&a.tabId){const s=t[a.tabId];s&&e.push(s.name)}return a&&a.fieldId&&s[a.fieldId]?e.push(s[a.fieldId].title):a&&"devSummary"===a.itemId&&e.push(e_.a.label),e}),[]),i_=e=>(null==e?void 0:e.fieldId)||(null==e?void 0:e.itemId)||(null==e?void 0:e.tabId),r_=e=>{
const{pinnedFields:t,visibleSecondaryContextItems:s,layoutDescriptor:n}=e,{primaryContextItems:a,secondaryContextItems:i}=n.context,r=new Set(t),o=a.filter((({payload:e})=>!r.has(i_(e)))),c=i.filter((({payload:e})=>!r.has(i_(e)))),l=s.filter((({payload:e})=>!r.has(i_(e))));return{layoutDescriptor:s_(s_({},n),{},{context:{secondaryContextItems:c,primaryContextItems:o}}),visibleSecondaryContextItems:l}};var o_=Object(v.h)({showLessText:{id:"issue.views.issue-base.context.context-items.expander.show-less-button.show-less-text",defaultMessage:"Show less"}});const c_=Object(q.default)(Zd.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],Re.a.B400,-z.e,-z.e/2),l_=({onCollapse:e})=>{const t=Object(xe.c)();return i.a.createElement(c_,{externalId:"showmorelink.collapse",appearance:"subtle",iconBefore:i.a.createElement(Qd.a,{label:"",primaryColor:Re.a.B400,size:"large"}),
alt:t.formatMessage(o_.showLessText),shouldFitContainer:!0,onClick:(t,s)=>{e(),Object(Fa.h)(s,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container"},i.a.createElement(v.c,o_.showLessText))};l_.displayName="ShowLessButton";var u_=l_,d_=Object(v.h)({showMorePlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-plural",defaultMessage:"Show {fieldCount} more fields"},showMoreNotPlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-not-plural",defaultMessage:"Show {fieldCount} more field"},showMoreAnd:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-and",defaultMessage:"and"},showMoreAltText:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more"}})
;const p_=q.default.small(["display:block;margin-top:","px;margin-bottom:","px;text-overflow:ellipsis;overflow:hidden;color:",";font-size:","px;line-height:",";"],-z.e/2,z.e/2,Re.a.N300,1.5*z.e,z.e/6),m_=Object(q.default)(Zd.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],Re.a.B400,-z.e,-z.e/2);function b_(){return(b_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const f_=({visibleSecondaryContextItemNameList:e,fieldCount:t,onExpand:s})=>{const n=Object(xe.c)(),a=t>1?d_.showMorePlural:d_.showMoreNotPlural,r=((e,t)=>{if(!e||e.length<=0)return"";if(1===e.length)return e[0];const s=e.slice(-1)[0];return`${e.slice(0,-1).join(", ")} ${t} ${s}`})(e.map((e=>"object"==typeof e&&null!=e?n.formatMessage(e):e)),n.formatMessage(d_.showMoreAnd))
;return i.a.createElement(je.a,{content:r},i.a.createElement(m_,{externalId:"showmorelink.expand",appearance:"subtle",iconBefore:i.a.createElement(vd.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:n.formatMessage(d_.showMoreAltText),shouldFitContainer:!0,onClick:(e,t)=>{s(),Object(Fa.h)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container"},i.a.createElement(v.c,b_({},a,{values:{fieldCount:t}})),i.a.createElement(p_,null,r)))};f_.displayName="ShowMoreButton";var g_=f_;const h_=q.default.div(["margin-left:","px;margin-bottom:","px;"],-z.e,1.5*z.e);function y_(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const O_=e=>{let{isShowMoreExpanded:t,onCollapse:s}=e,n=y_(e,["isShowMoreExpanded","onCollapse"]);return i.a.createElement("div",null,i.a.createElement(h_,null,t?i.a.createElement(u_,{onCollapse:s}):i.a.createElement(g_,n)))};O_.displayName="ContextItemsExpander";var j_=O_,v_=Object(qt.a)([Object(r.b)(((e,t)=>({visibleSecondaryContextItemNameList:a_(t.visibleSecondaryContextItems,Object(xP.d)(e),Object(on.s)(e))})),{})])(j_);const E_=e=>"SLA_PANEL"!==e.type&&!!i_(e.payload),k_=q.default.div([""]),w_=({primaryContextItems:e,contextItemsMap:t})=>{let s=!1;const[,{register:n}]=Object(hr.b)(),r=Object(a.useCallback)((e=>{n("PIN_FIELD",e)}),[n]),o=e=>{const s=t[e];return void 0!==s?i.a.createElement(XP,{item:s,key:e}):null},c=e.map((e=>!s&&E_(e)&&"assignee"!==e.type?(s=!0,i.a.createElement(k_,{innerRef:r,key:e.key},o(e.key))):o(e.key)));return i.a.createElement(i.a.Fragment,null,c)};w_.displayName="PrimaryItems";var S_=w_
;const C_=q.default.div(["display:flex;flex-direction:column;padding-bottom:0;"]),I_=q.default.div(["margin-top:0px;padding-bottom:0;"]),T_=q.default.div(["padding-top:","px;box-shadow:inset 0 2px 0 0 ",";margin-left:","px;"],z.e,Re.a.N30,-z.e);function P_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function __(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P_(Object(s),!0).forEach((function(t){x_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class D_ extends a.Component{constructor(...e){
super(...e),this.state=__(__({},r_(this.props)),{},{contextItemsMap:{}}),this.onExpand=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!0),this.onUpdateLayoutDescriptor()},this.onCollapse=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!1),this.onUpdateLayoutDescriptor()}}static getDerivedStateFromProps(e){const{primaryContextItems:t,secondaryContextItems:s}=e.layoutDescriptor.context,n={};return t.concat(s).forEach((e=>{n[e.key]=e})),{contextItemsMap:n}}componentDidMount(){this.onRender(),this.onUpdateLayoutDescriptor()}componentDidUpdate(e,t){this.shouldUpdateItemVisibility(e,t)&&this.onUpdateLayoutDescriptor()}onUpdateLayoutDescriptor(){const e=r_(this.props);this.setState(e),this.onRender()}onRender(){const{primaryContextItems:e,secondaryContextItems:t}=this.props.layoutDescriptor.context,s=e.concat(t);this.props.onRendered(s)}shouldUpdateItemVisibility(e,t){
const s=this.props.secondaryContextItemVisibility===PP,n=e.layoutDescriptor.context.primaryContextItems,a=this.props.layoutDescriptor.context.primaryContextItems,i=e.pinnedFields,r=this.props.pinnedFields,o=!Ta()(t.contextItemsMap,this.state.contextItemsMap),c=!s&&n.length<a.length,l=!Ta()(i,r),u=!s&&n.length===a.length&&!Ta()(n,a),d=e.layoutDescriptor.context.secondaryContextItems,p=this.props.layoutDescriptor.context.secondaryContextItems,m=!Ta()(e.visibleSecondaryContextItems,this.props.visibleSecondaryContextItems)&&Ta()(d,p);return o||c||u||m||l}renderContextItem(e){const t=this.state.contextItemsMap[e];return void 0!==t?i.a.createElement(XP,{item:t,key:e}):null}renderPrimaryItems(){const{primaryContextItems:e}=this.state.layoutDescriptor.context;return Object(ne.isPinnedFieldsClickThroughBannerEnabled)()?i.a.createElement(i.a.Fragment,null,this.renderPinnedItems(),i.a.createElement(C_,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"
},i.a.createElement(S_,{primaryContextItems:e,contextItemsMap:this.state.contextItemsMap}))):i.a.createElement(C_,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},this.renderPinnedItems(),i.a.createElement(S_,{primaryContextItems:e,contextItemsMap:this.state.contextItemsMap}))}renderSecondaryItems(){const{secondaryContextItems:e}=this.state.layoutDescriptor.context,t=e.map((e=>this.renderContextItem(e.key)));return i.a.createElement(_P.a,null,i.a.createElement(I_,null,t))}renderPinnedItems(){const{secondaryContextItems:e,primaryContextItems:t}=this.props.layoutDescriptor.context,{pinnedFields:s}=this.props,n=[...e,...t].reduce(((e,t)=>e.set(i_(t.payload),t)),new Map),a=s.reduce(((e,t)=>{const s=n.get(t);return s&&e.push(this.renderContextItem(s.key)),e}),[]);return Object(ne.isPinnedFieldsClickThroughBannerEnabled)()&&0===a.length?i.a.createElement(bd,null):i.a.createElement(yd,null,a)}render(){
const e=this.props.secondaryContextItemVisibility!==TP,t=this.state.visibleSecondaryContextItems,s=t.length;return i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},this.renderPrimaryItems(),e?this.renderSecondaryItems():null,i.a.createElement(gr.a,{name:"SHOW_MORE"},i.a.createElement("div",null,s>0&&i.a.createElement(v_,{isShowMoreExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse,visibleSecondaryContextItems:t,fieldCount:s}))),i.a.createElement(T_,null),i.a.createElement(Ua.a,{onMount:e=>Object(Fa.b)(e,"PinnedFieldOnboarding mounted")}))}}D_.displayName="ContextItems",D_.displayName="ContextItems",D_.defaultProps={forgeExtensions:[],pinnedFields:[],onRendered:c.a};var A_=Object(qt.a)([Object(r.b)(((e,t)=>({visibleSecondaryContextItems:AP(t.layoutDescriptor.context.secondaryContextItems)(e),source:Object(T.b)(e),issueKey:Object(Su.d)(e)})),{})])(Object(Su.f)(D_));var L_=({layoutDescriptor:e,isProjectAdmin:t})=>{
const{createAnalyticsEvent:s}=Object(Li.a)(),{primaryContextItems:n,secondaryContextItems:i}=e.context,r=[...n,...i].filter((e=>"TAB"===e.type)).length>0;return Object(a.useEffect)((()=>{if(r){const e=t?"bentoTabsProjectAdminChangeboarding":"bentoTabsChangeboarding";Object(Fa.f)(s({}),`${e} viewed`,e)}}),[]),null};function M_(){return(M_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const R_=e=>{const{isCompletedLoading:t,isProjectAdmin:s,hasJsd:n}=e,a=!n;return i.a.createElement(IP.a,null,(({layoutDescriptor:n})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(A_,M_({layoutDescriptor:n},e)),t&&a&&i.a.createElement(L_,{layoutDescriptor:n,isProjectAdmin:s}))))};R_.displayName="ContextItemsWithLayoutDescriptor";var N_=Object(qt.a)([Object(as.a)((e=>({onRendered:t=>{const s=t.filter((e=>"ecosystemGlance"===e.type)).map((e=>e.payload))
;s.length>0&&e("ecosystem.glances",Object(xn.e)(s))}}))),Object(r.b)((e=>{const t=Object(T.z)(e)||{};return{secondaryContextItemVisibility:Object(An.e)(e)?PP:TP,isProjectAdmin:Object(CS.c)(e),isCompletedLoading:Object(P.n)(e),hasJsd:!!t[CP.a.JIRA_SERVICEDESK]}}),(e=>({onSecondaryContextItemsVisibilityToggle:t=>e(t?(()=>({type:"EXPAND_SHOW_MORE"}))():(()=>({type:"COLLAPSE_SHOW_MORE"}))())})))])(R_),F_=s("./node_modules/@atlaskit/icon/glyph/arrow-left.js"),U_=s.n(F_),V_=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js"),K_=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js"),W_=s("./src/packages/platform/observability/analytics-web-react/src/components/analytics-data.js");const B_="issue.views.issue-base.context.tab-panel";var H_=(e,t)=>{const s=Object(RP.a)();return e.reduce(((e,n)=>{switch(n.type){case UP:{const a=Object(ru.b)(Object(on.v)(n.id,t))
;if(!a||!Object.keys(s).includes(a))return In.h.safeErrorWithoutCustomerData(B_,`Could not find a matching component for field '${a||"(unknown type)"}' with id '${n.id}'`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e;const r=s[a].item,o=i.a.createElement(r,{key:n.id,fieldId:n.id,area:"tab-panel"});return e.push({fieldType:a,component:o}),e}default:return In.h.safeErrorWithoutCustomerData(B_,`Unknown tab item '${JSON.stringify(n)}'`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}}),[])},$_=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js")
;const G_=q.default.div(["flex-shrink:0;background:",";outline:0;min-height:40px;"],Re.a.N0),q_=q.default.div(["display:flex;align-items:center;position:relative;box-sizing:border-box;box-shadow:inset 0 ","px 0 0 ",";margin-left:","px;padding-left:","px;"," &:hover{cursor:pointer;}&:focus{box-shadow:inset 0 0 0 ","px ",";outline:0;}"],-2,Re.a.N30,-$_.b,$_.b,(({maxWidth:e})=>`max-width: ${e}px;`),2,Re.a.B100),z_=q.default.div(["height:100%;display:inline-block;width:100%;",""],(({maxWidth:e})=>`max-width: ${e}px;`)),Y_=q.default.button(["display:flex;height:28px;width:28px;border:none;border-radius:50%;background:",";color:",";align-items:center;padding-left:2px;margin-left:","px;&:hover{cursor:pointer;}"],Re.a.N30,Re.a.N60,z.e/2);var Q_=Object(v.h)({emptyStateHeader:{id:"issue.context.tab-panel.empty-state.header",defaultMessage:"No fields to show"},emptyStateMessage:{id:"issue.context.tab-panel.empty-state.message",
defaultMessage:"If you expect to see fields here, ask your Jira admin to check permissions and field configuration."},emptyStateMessageAdmin:{id:"issue.context.tab-panel.empty-state.message.admin",defaultMessage:"If you expect to see fields here, check your permission and field configuration settings."}});const J_=q.default.div(["padding:","px ","px ","px ","px;overflow:auto;height:100%;"],2*z.e,z.e,z.e,1.25*z.e);function Z_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function X_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Z_(Object(s),!0).forEach((function(t){ex(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function ex(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class tx extends a.Component{componentDidMount(){const{renderedItems:e,tabItems:t}=this.props,s=new Set(e.map((e=>e.fieldType))),n=t.map((e=>e.id)).filter((e=>!s.has(e)));this.props.onComponentMounted({renderedFieldsCount:s.size,unrenderedFieldsCount:n.length,unrenderedFieldTypes:n.join(",")})}render(){const{renderedItems:e,isProjectAdmin:t,contentWidth:s,intl:{formatMessage:n}}=this.props;return e.every((e=>null==e.component))?i.a.createElement(Bv.a,{size:"narrow",isSubtle:!0,header:n(Q_.emptyStateHeader),description:n(t?Q_.emptyStateMessageAdmin:Q_.emptyStateMessage)}):i.a.createElement(J_,null,i.a.createElement(z_,{maxWidth:s},e.map((e=>e.component))))}}tx.displayName="TabPanel";var sx=Object(qt.a)([v.i,Object(is.a)("fieldTab",{onComponentMounted:"rendered"}),Object(r.b)(((e,t)=>({onComponentMounted:(e,s)=>{Object(vC.a)(s,{name:t.panelKey,attributes:X_({
contextPanelType:t.type},e)})}})),{})])(tx),nx=Object(qt.a)([Object(W_.a)({attributes:{contextPanelType:"TAB"}}),Object(r.b)(((e,{type:t,panelKey:s,payload:{tabItems:n}})=>({renderedItems:H_(n,Object(on.s)(e)),tabItems:n,type:t,panelKey:s,isProjectAdmin:Object(CS.c)(e)})),{})])(sx);const ax=e=>{const{refs:t,layoutItemEntryMap:s}=e,[n,r]=Object(gc.b)(),o=void 0!==n,c=Object(a.useCallback)((()=>{r(void 0)}),[r]);let l=null;if(n){const e=s[n.type];l="TAB"===n.type?nx:e&&e.panel}return i.a.createElement(V_.a,{refs:t,isOpen:o},(e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(G_,{"data-test-id":"issue.views.issue-base.context.context-panel.back"},i.a.createElement(q_,{maxWidth:e.headerWidth,onClick:c,tabIndex:"0"},i.a.createElement(Y_,null,i.a.createElement(U_.a,{size:"medium",label:"Return"})),i.a.createElement(K_.c,null,n&&n.title))),l&&n?i.a.createElement(l,{contentWidth:e.contentWidth,type:n.type,panelKey:n.key,payload:n.payload}):null)))};ax.displayName="ContextPanel",
ax.displayName="ContextPanel";var ix=ax,rx=at()(Object(r.b)((e=>({isOpen:Object(Kp.b)(e),panel:Object(Kp.a)(e),layoutItemEntryMap:Object(RP.a)()})),{onHidePanel:LP.a}),Object(ls.a)())(ix),ox=s("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js");const cx=q.default.div(["",";width:100%;height:100%;overflow:auto;position:relative;padding:","px;"],(({panelWidth:e})=>`min-width: ${e}px;`),z.e);function lx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ux(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dx=(e,t)=>{const s=e.appKey!==t.appKey,n=e.moduleKey!==t.moduleKey,a=e.statusCategory!==t.statusCategory,i=e.refreshedOn!==t.refreshedOn,r=e.styles!==t.styles;return!(s||n||a||r||i)
},px=Object(a.memo)((({refreshedOn:e=0,onGlanceHideAnalytics:t=c.a,appKey:s,moduleKey:n,glance:r,styles:o,statusCategory:l})=>{const[u,d]=Object(a.useState)(window.connectHost),[,p]=Object(gc.c)(),{options:{origin:m}}=r;Object(a.useEffect)((()=>{u||(In.h.safeInfoWithoutCustomerData("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),Object(Rn.b)((e=>d(e))))}),[u]);const b=new Fn.a;return i.a.createElement(i.a.Fragment,null,i.a.createElement(G_,null,i.a.createElement(q_,{maxWidth:o.headerWidth,onClick:()=>{t(Object(xn.d)(s,n,r.status)),p(void 0)},tabIndex:"0"},i.a.createElement(Y_,null,i.a.createElement(U_.a,{size:"medium",label:"Return"})),i.a.createElement(K_.c,null,r.name))),u&&i.a.createElement(cx,{panelWidth:o.contentWidth},i.a.createElement(z_,{maxWidth:o.contentWidth},i.a.createElement(Nn.a,{key:`connect-iFrame-${m}-${l}-${e}`,connectHost:u,appKey:s,moduleKey:n,url:r.options.url,options:b.convertConnectOptions(r.options),height:"100%",width:"100%",
connectIframeProvider:b,timeoutIndicator:()=>i.a.createElement($n,{appName:r.name,appKey:s})}))))}),dx);var mx=Object(qt.a)([Object(as.a)((e=>({onGlanceHideAnalytics:t=>e("hide",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lx(Object(s),!0).forEach((function(t){ux(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))}))),Object(r.b)(((e,t)=>({glance:Object(Dn.l)(t.appKey,t.moduleKey)(e),statusCategory:Object(D.a)(e),refreshedOn:Object(P.e)(e)})),(e=>({onHideGlance:()=>{e(Object(ox.a)()),e(Object(At.e)())}})))])(px),bx=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js"),fx=s("./src/packages/forge/forge-ui-async/src/ui/issue-glance/async.js");const gx=({glance:e,extensionData:t,styles:s,source:n,isOpen:r})=>{
const[o,c]=Object(a.useState)(!1),[,l]=Object(gc.c)(),u=Object(a.useCallback)((()=>{l(void 0)}),[l]);return Object(a.useEffect)((()=>{r&&!o&&c(!0)}),[r,o]),i.a.createElement(bx.a,{attributes:{source:n},shouldFireScreenEvent:r},i.a.createElement(G_,{onClick:void 0,tabIndex:void 0},i.a.createElement(q_,{maxWidth:s.headerWidth,onClick:u,tabIndex:"0"},i.a.createElement(Y_,null,i.a.createElement(U_.a,{size:"medium",label:"Return"})),i.a.createElement(K_.c,null,e.title))),i.a.createElement(cx,{panelWidth:s.contentWidth},i.a.createElement(z_,{maxWidth:s.contentWidth},o&&i.a.createElement(fx.a,{extensionData:t,extension:e.extension,analyticsAttributes:{source:n}}))))};gx.displayName="ForgeGlancePanel",gx.displayName="ForgeGlancePanel";var hx=Object(qt.a)([Object(r.b)((e=>({extensionData:Object(Ho.h)(e),source:Object(T.b)(e)})),{onHideForgeGlance:ox.a})])(gx);class yx extends a.Component{renderGlance(e,t){const{glance:s}=this.props;switch(s.glanceType){case"CONNECT_ENTITY_TYPE":
return i.a.createElement(mx,{panelWidth:e.panelWidth,styles:e,appKey:s.appKey,moduleKey:s.moduleKey,key:`issue.ecosystem.glance.panel_${s.appKey}_${s.moduleKey}`});case"FORGE_ENTITY_TYPE":return i.a.createElement(hx,{panelWidth:e.panelWidth,styles:e,key:`issue.forge.glance.panel_${s.appKey}_${s.moduleKey}`,glance:s,isOpen:t});default:return null}}render(){const{openedGlance:e,glance:t,refs:s}=this.props,n=!!e&&e.appKey===t.appKey&&e.moduleKey===t.moduleKey;return i.a.createElement(V_.a,{refs:s,isOpen:n},(e=>this.renderGlance(e,n)))}}yx.displayName="GlanceAnimatedPanel",yx.defaultProps={openedGlance:null};var Ox=Object(as.a)((e=>({onMount:t=>e("mounted",t)})))(yx),jx=Object(v.h)({move:{id:"issue.move",defaultMessage:"Move"},clone:{id:"issue.clone",defaultMessage:"Clone"},delete:{id:"issue.delete",defaultMessage:"Delete"},print:{id:"issue.print",defaultMessage:"Print"},exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"},exportDOC:{id:"issue.export-doc",
defaultMessage:"Export Word"},switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"},switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"},newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"},swiftLink:{id:"issue.swift-link",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"},startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights"},findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"},seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"},turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"},turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"},triggerButtonLabel:{id:"issue.label-for-issue-actions-button",defaultMessage:"Actions"},configure:{id:"issue.configure",defaultMessage:"Configure"},
addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"},convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"},convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}}),vx=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js"),Ex=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js"),kx=Object(v.h)({configureTooltipAdmin:{id:"issue.details.configuration-button.configure-fields.tooltip-admin",defaultMessage:"Configure fields"},configureTooltipEndUser:{id:"issue.details.configuration-button.configure-fields.tooltip-end-user",defaultMessage:"Contact your admin to change the field order & layout"},configureTooltipAdminNoRequestType:{id:"issue.details.configuration-button.configure-fields.tooltip-admin-no-request-type",
defaultMessage:"You can\u2019t configure the layout of an issue while it doesn\u2019t have a request type."}});var wx=q.default.div(["margin:","px ","px 0 0;display:block;min-width:0;max-width:50%;[type='button']{padding:0;font-size:12px;span{margin:0;text-overflow:unset;}span[class*='Icon__IconWrapper']{width:16px;}}"],z.e/2,1.5*z.e);const Sx=Object(a.memo)((e=>{const{intl:{formatMessage:t}}=e,s=((e,t)=>{switch(e){case"show":return{tooltipText:t(kx.configureTooltipAdmin),isDisabled:!1};case"disabled_permission":return{tooltipText:t(kx.configureTooltipEndUser),isDisabled:!0};case"disabled_no_request_type":return{tooltipText:t(kx.configureTooltipAdminNoRequestType),isDisabled:!0};case"disabled_no_screen_id":return{tooltipText:"",isDisabled:!0};case"hide":default:return{isHidden:!0}}})((()=>{const e=Object(Ps.i)(),t=Object(Pu.c)(e),s=Object(Pu.b)(e),n=Object(Wa.j)(e),a=!Object(Wa.b)(e),i=Object(Ps.g)(),r=Object(Ps.l)(),[o]=Object(nu.c)(i);let c="issuetype"
;a&&n===NS.g&&null!==o&&(c=Object(vx.a)("com.atlassian.servicedesk:vp-origin",o));const l=void 0!==c?c:"issuetype",[u]=Object(vl.b)({issueKey:i,fieldKey:l}),[d]=Object(vl.b)({issueKey:i,fieldKey:"issuetype"});if(!s)return"disabled_permission";switch(n){case NS.g:if(!t)return"disabled_permission";if(a&&(null===c||null===u||void 0===u.requestType||void 0===u.requestType.id)||!a&&(!d||!d.id))return"disabled_no_request_type"}return null!=r&&0!==r||!a?"show":"disabled_no_screen_id"})(),t);if(s.isHidden)return null;const{tooltipText:n,isDisabled:a}=s,r=t(jx.configure),o=Object(Ex.a)(t);return i.a.createElement(wx,null,i.a.createElement(je.a,{position:"mouse",mousePosition:"left",content:n},i.a.createElement(H.a,{isDisabled:a,appearance:"subtle-link",iconBefore:i.a.createElement(Sd.a,{label:""}),href:o,target:"_blank",rel:"noopener noreferrer",onClick:(e,t)=>Object(Fa.h)(t,"configureButton")},r)))}))
;var Cx=Object(qt.a)([v.i])(Sx),Ix=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),Tx=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js");var Px=({issueKey:e})=>{const[t]=Object(vl.b)({issueKey:e,fieldKey:"created"});return[{value:t}]},_x=s("./src/packages/issue/fields/components/timestamp/src/index.js"),xx=s("./src/packages/platform/services/user/src/main.js");const Dx=q.default.div(["display:flex;margin-top:","px;"],z.e/2),Ax=q.default.small(["color:",";padding-top:","px;white-space:nowrap;margin-top:0;font-size:","px;line-height:",";"],Re.a.N200,z.e/4,1.5*z.e,z.e/6),Lx={whenDisplaySettingSwitchable:Object(q.css)([":hover{color:",";}"],Re.a.N500)},Mx=e=>{const[{data:t}]=Object(xx.b)(),s=t?t.timeZone:void 0,{text:n,date:a}=e;return null==a?null:i.a.createElement(Dx,null,i.a.createElement(Ax,null,n,"\xa0",i.a.createElement(_x.a,{value:a,timeZone:s,extraStyles:Lx,tooltipPosition:"right"})))}
;Mx.displayName="MetaDate";var Rx=Mx,Nx=Object(v.h)({createdLabel:{id:"created-date.read.created-label",defaultMessage:"Created"}});const Fx=({date:e})=>{const{formatMessage:t}=Object(xe.c)();return null!==e&&""!==e?i.a.createElement(ih.b,null,i.a.createElement(Rx,{date:e,text:t(Nx.createdLabel)})):null},Ux=({issueKey:e})=>{const[{value:t}]=Px({issueKey:e});return i.a.createElement(Fx,{date:t})};Ux.displayName="CreatedDateField";var Vx=Ux;var Kx=({issueKey:e})=>{const[t]=Object(vl.b)({issueKey:e,fieldKey:"resolutiondate"});return[{value:t}]},Wx=Object(v.h)({resolvedLabel:{id:"resolved-date.read.resolved-label",defaultMessage:"Resolved"}});const Bx=({date:e})=>{const{formatMessage:t}=Object(xe.c)();return null!==e&&""!==e?i.a.createElement(ih.b,null,i.a.createElement(Rx,{date:e,text:t(Wx.resolvedLabel)})):null},Hx=({issueKey:e})=>{const[{value:t}]=Kx({issueKey:e});return i.a.createElement(Bx,{date:t})};Hx.displayName="ResolvedDateField";var $x=Hx;var Gx=({issueKey:e})=>{
const[t]=Object(vl.b)({issueKey:e,fieldKey:"updated"});return[{value:t}]},qx=Object(v.h)({updatedLabel:{id:"updated-date.read.updated-label",defaultMessage:"Updated"}});const zx=({date:e})=>{const{formatMessage:t}=Object(xe.c)();return null!==e&&""!==e?i.a.createElement(ih.b,null,i.a.createElement(Rx,{date:e,text:t(qx.updatedLabel)})):null},Yx=({issueKey:e})=>{const[{value:t}]=Gx({issueKey:e});return i.a.createElement(zx,{date:t})};Yx.displayName="UpdatedDateField";var Qx=Yx;const Jx=q.default.div(["margin-top:","px;margin-right:","px;flex:1;"],z.e/2,2*z.e);var Zx=()=>{const e=Object(Ps.g)();return i.a.createElement(Jx,null,i.a.createElement(Vx,{issueKey:e}),i.a.createElement(Qx,{issueKey:e}),i.a.createElement($x,{issueKey:e}))},Xx=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),eD=s("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");function tD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tD(Object(s),!0).forEach((function(t){nD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var aD=({fieldKey:e,propName:t,isEnabled:s=(()=>!0),FieldValueSubscriber:n=vl.a})=>a=>r=>{if(!s())return i.a.createElement(a,r);const{issueKey:o}=r;return i.a.createElement(n,{issueKey:o,fieldKey:e},(e=>{const s=sD(sD({},r),{},{[t]:e});return i.a.createElement(a,s)}))},iD=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js")
;const rD=Object(rn.createSelector)(iT.a,TS,zt.k,P.q,Oy.b,BS.a,T.t,iD.a,fT.a,((e,t,s,n,a,i,r,o,c)=>{const l=t&&!s&&n;return{canCreateAttachment:a,shouldShowCreateSubtaskButton:e&&!s&&!l,shouldShowIssueInEpicButton:l,supportsChildCreation:s,canCreateIssueLink:i,isServiceDesk:r,canLinkConfluencePage:o,canAddWebLinks:c}}));var oD=s("./src/packages/servicedesk/common/src/itsm-practices/constants.js"),cD=s("./src/packages/wrm/src/wrm-module-loader/index.js"),lD=s("./src/packages/wrm/src/common-modules/calendar-locale-module.js"),uD=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),dD=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js")
;const pD=q.default.div(["display:flex;flex-direction:row;width:100%;"]),mD=Object(q.default)(iu.a)(["flex-grow:1;"]),bD=Object(q.default)(iu.a)(["width:8px;"]),fD=q.default.div(["width:32px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMngzMl9yb3VuZGVkZWRnZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IjMyeDMyX3JvdW5kZWRlZGdlIiBmaWxsPSIjRkZGRkZGIj4gICAgICAgICAgICA8cGF0aCBkPSJNMywwIEMxLjM0MzE0NTc1LDMuMDQzNTkxODhlLTE2IC0yLjAyOTA2MTI1ZS0xNiwxLjM0MzE0NTc1IDAsMyBMMCwwIEwzLDAgWiBNMjksMCBMMzIsMCBMMzIsMyBDMzIsMS4zNDMxNDU3NSAzMC42NTY4NTQyLC0zLjA0MzU5MTg4ZS0xNiAyOSwwIFogTTMyLDI5IEwzMiwzMiBMMjksMzIgQzMwLjY1Njg1NDIsMzIgMzIsMzAuNjU2ODU0MiAzMiwyOSBaIE0zLDMyIEwwLDMyIEwwLDI5IEMyLjAyOTA2MTI1ZS0xNiwzMC42NTY4NTQyIDEuMzQzMTQ1NzUsMzIgMywzMiBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==);"])
;var gD=()=>i.a.createElement(dD.a,null,i.a.createElement(iu.b,null),i.a.createElement(uD.a,{paddingTop:4,paddingBottom:9},i.a.createElement(pD,null,i.a.createElement(fD,null),i.a.createElement(bD,null),i.a.createElement(fD,null),i.a.createElement(bD,null),i.a.createElement(fD,null),i.a.createElement(mD,null)))),hD=s("./node_modules/lodash/differenceBy.js"),yD=s.n(hD),OD=s("./node_modules/@atlaskit/icon/glyph/addon.js"),jD=s.n(OD),vD=s("./src/packages/common-legacy-do-not-add-anything-new/src/analytics-v2-wrapped-components/dropdown-item.js"),ED=s("./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js");function kD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kD(Object(s),!0).forEach((function(t){SD(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function SD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const CD=3*z.e,ID=q.default.span(["padding:","px;"],z.e/2),TD=q.default.div(["display:inline-flex;"]),PD=q.default.span(["color:",";"],Re.a.B400),_D=Object(v.h)({quickAddAddonLabel:{id:"issue.quickadd.addon",defaultMessage:"Add app"},addMore:{id:"issue.quickadd.addon.add.more",defaultMessage:"Add apps"}}),xD=e=>!!e.tooltip&&!!e.iconUrl;class DD extends a.Component{constructor(...e){super(...e),this.getExtensionsToShowIconsFor=()=>this.props.availableAddons.filter(xD).slice(0,3),this.getExtensionsToShowInDropdown=()=>yD()(this.props.availableAddons,this.getExtensionsToShowIconsFor(),"moduleKey"),this.transformExtension=e=>{const t=i.a.createElement(vD.b,{
key:e.moduleKey,elemBefore:DD.getIcon(e),onClick:this.itemSelected(e)},e.name);return e.tooltip?i.a.createElement(je.a,{content:e.tooltip,key:e.moduleKey},t):t},this.createDropdownItems=e=>i.a.createElement(ei.a,null,e.map(this.transformExtension),this.props.canInstallAddons&&i.a.createElement(vD.b,{key:_D.addMore.id,elemBefore:i.a.createElement(PD,null,i.a.createElement(Zv.a,{label:this.props.intl.formatMessage(_D.addMore)})),onClick:this.props.onAddExtensionsClick,href:`${this.props.baseUrl}/plugins/servlet/upm/marketplace/featured`,target:"_new"},i.a.createElement(PD,null,this.props.intl.formatMessage(_D.addMore)))),this.itemSelected=e=>()=>{const t=Object(lf.b)(e.moduleKey,10),s="FORGE_ENTITY_TYPE"===e.type;let n=s?Object(_a.e)(e.appKey,e.moduleKey):Object(_a.c)(e.appKey,e.moduleKey);if(s){const t=`${n}-`,s=this.props.contentPanelsInIssue.find((e=>Object(_a.b)(e,t)));null!=s&&!1===e.allowMultiple&&(n=s)}
e.showByDefault||this.props.contentPanelsInIssue.includes(`${e.appKey}_${t}`)||this.props.contentPanelsInIssue.includes(n)?(this.props.onContentPanelFocusAnalytics(Object(xn.b)(e.appKey,e.moduleKey)),this.props.onSelectContentPanel(n),this.sendQuickAddClickedEvent(!1,e.appKey,e.moduleKey,s)):(this.props.onContentPanelAddAnalytics(Object(xn.b)(e.appKey,e.moduleKey)),this.props.onAddExtension(n),this.sendQuickAddClickedEvent(!0,e.appKey,e.moduleKey,s))},this.sendQuickAddClickedEvent=(e,t,s,n)=>{this.props.onQuickAddClick("ISSUE_QUICK_ADD_CLICKED",{addon_key:t,key:s},{isNewToIssue:e.toString()}),n&&Object(If.m)(this.props.source,{isNewToIssue:e})},this.transformExtensionToQuickIcon=(e,t)=>this.props.createItemView({id:`${e.appKey}_${e.moduleKey}`,label:e.tooltip||e.name,icon:DD.getIcon(e),onClick:this.itemSelected(e),itemIndex:this.props.startIndex+t}),this.renderVisibleExtensionIcons=()=>this.getExtensionsToShowIconsFor().map(((e,t)=>this.transformExtensionToQuickIcon(e,t))),
this.renderDropdownExtensions=()=>{const{intl:e,canInstallAddons:t}=this.props,s=this.getExtensionsToShowInDropdown();return s.length>0||t?i.a.createElement(Xa.a,{key:"ecosystem-actions-dropdown",boundariesElement:"scrollParent",triggerType:"button",triggerButtonProps:{spacing:"none",theme:(e,t)=>{const s=e(t);return wD(wD({},s),{},{buttonStyles:wD(wD({},s.buttonStyles),{},{margin:0})})},iconBefore:i.a.createElement(ID,null,i.a.createElement(gm.a,{size:"medium",label:""})),"aria-label":e.formatMessage(_D.quickAddAddonLabel)}},this.createDropdownItems(s)):null}}static getIcon(e){return e.iconUrl?i.a.createElement(Km.a,{title:e.name,url:e.iconUrl,width:CD,height:CD,fallback:()=>this.getFallbackIcon({name:e.name})}):this.getFallbackIcon({name:e.name})}componentDidMount(){const{availableAddons:e,contentPanelsInIssue:t,onContentPanelListLoadedAnalytics:s}=this.props;e.length>0&&s(Object(xn.c)(e,t))}render(){const e=this.renderVisibleExtensionIcons(),t=this.renderDropdownExtensions()
;return i.a.createElement(TD,null,[...e,t])}}DD.displayName="UnsafeAddonsQuickAdd",DD.defaultProps={canInstallAddons:!1,availableAddons:[],contentPanelsInIssue:[],onContentPanelListLoadedAnalytics:c.a,onContentPanelAddAnalytics:c.a,onContentPanelFocusAnalytics:c.a,onAddExtensionsClick:c.a,onQuickAddClick:c.a,onAddWebLinkClick:c.a},DD.getFallbackIcon=e=>i.a.createElement(jD.a,{size:"medium",label:e.name});const AD=(e,t,s)=>{Object(ED.a)(e,t,s)};var LD=at()(Object(as.a)((e=>({onContentPanelListLoadedAnalytics:t=>e("load",wD({},t)),onContentPanelAddAnalytics:t=>e("add",wD({},t)),onContentPanelFocusAnalytics:t=>e("focus",wD({},t))}))),Object(E.a)({onAddExtensionsClick:"quickAddDropdownMenuItem",onAddWebLinkClick:"quickAddWebLink"}),Object(r.b)((e=>({availableAddons:Object(Dn.k)(e),contentPanelsInIssue:Object(Dn.p)(e),baseUrl:Object(T.f)(e),canInstallAddons:Object(Dn.c)(e),source:Object(T.b)(e),onQuickAddClick:AD})),(e=>({onAddWebLinkClick:()=>e(Object(bT.k)())
}))),Object(ls.a)())(Object(v.i)(DD)),MD=s("./node_modules/@atlaskit/icon/glyph/link.js"),RD=s.n(MD);const ND=q.default.span(["margin-right:","px;"],z.e),FD=q.default.span(["padding:","px;margin-left:","px;margin-right:","px;"],(e=>e.compactMode?z.e/2:0),(e=>e.compactMode?0:-4),(e=>e.compactMode?0:-2)),UD=q.default.span(["display:flex;margin-right:","px;"],z.e),VD=q.default.span(["padding:","px;"],z.e/2);var KD=Object(a.memo)((e=>{const{id:t,icon:s,label:n,onClick:r,testId:o}=e.item,c=Object(a.useCallback)(((e,s)=>{Object(Fa.h)(s,"createLink",{actionItemId:t,name:"linkDropdownListItem"}),r&&r()}),[t,r]);return i.a.createElement(vD.b,{id:t,elemBefore:s,onClick:c,"data-test-id":o},n)}));function WD(){return(WD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const BD=e=>{
const[t,s]=Object(a.useState)(!1),{position:n,actions:r,tooltip:o,triggerButtonProps:c}=e,l=i.a.createElement(Pi.a,WD({spacing:"none","aria-label":o,"aria-expanded":t},c,{testId:"issue.views.issue-base.foundation.quick-add.link-button.ui.link-dropdown-button"})),u=void 0!==o?i.a.createElement(je.a,{content:o,position:"bottom",hideTooltipOnClick:!0},l):l;return i.a.createElement(Xa.a,{key:"web-link-actions-dropdown",position:n,trigger:u,onOpenChange:({isOpen:e},t)=>{s(e),Object(Fa.h)(t,"moreLinksDropdownToggled",{isOpen:e,name:"linkDropdownListButton"})}},i.a.createElement(ei.a,null,r.map((e=>i.a.createElement(KD,{key:e.id,item:e})))))};BD.displayName="DropdownListButton";var HD=BD;function $D(){return($D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function GD(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function qD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qD(Object(s),!0).forEach((function(t){YD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function YD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const QD=({compactMode:e,actions:t,tooltipLabel:s})=>{if(e){const e={iconBefore:i.a.createElement(VD,null,i.a.createElement(RD.a,{size:"medium",label:""}))};return i.a.createElement(HD,{actions:t,triggerButtonProps:e,tooltip:s})}const[{id:n,onClick:a,label:r,tooltip:o,testId:c},...l]=t,u=i.a.createElement(FD,{compactMode:e},i.a.createElement(RD.a,{size:"medium",label:""})),d=(e,t)=>{Object(Fa.h)(t,"AddLink",{name:"AddLinkButton"}),a()};return 0===l.length?i.a.createElement(je.a,{content:o,position:"bottom",key:n},i.a.createElement(H.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,testId:c},r)):i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{content:o,position:"bottom",key:n},i.a.createElement(Pi.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,testId:c,theme:(e,t)=>{const s=e(t);return zD(zD({},s),{},{buttonStyles:zD(zD({},s.buttonStyles),{},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:`2px solid ${Re.a.N40}`,margin:0})})}
},r)),i.a.createElement(HD,{actions:l,position:"bottom right",tooltip:s,triggerButtonProps:{iconBefore:i.a.createElement(VD,null,i.a.createElement(vd.a,{size:"medium",label:""})),theme:(e,t)=>{const s=e(t);return zD(zD({},s),{},{buttonStyles:zD(zD({},s.buttonStyles),{},{borderTopLeftRadius:0,borderBottomLeftRadius:0,margin:0})})}}}))},JD=e=>{let{actions:t}=e,s=GD(e,["actions"]);return 0===t.length?null:i.a.createElement(UD,null,i.a.createElement(QD,$D({actions:t},s)))};JD.displayName="LinkButtonWithWrapper";var ZD=JD;function XD(){return(XD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function eA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tA(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(s),!0).forEach((function(t){sA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class nA extends a.Component{render(){const{id:e,icon:t,onClick:s,extraAttributes:n,label:a,compactMode:r,testId:o,hasGlobalSpotlightTarget:c}=this.props,l=i.a.createElement(Pi.a,{"aria-label":a,spacing:r?"none":"default",iconBefore:i.a.createElement(FD,{compactMode:r},t),onClick:s,theme:(e,t)=>{const s=e(t);return tA(tA({},s),{},{buttonStyles:tA(tA({},s.buttonStyles),{},{margin:0})})}},!r&&a),u=i.a.createElement(MP.a,{id:`global-spotlight-target-${e}`},l);return i.a.createElement(ND,XD({},n,{"data-test-id":o}),c?u:l)}}
nA.displayName="View",nA.defaultProps={hasGlobalSpotlightTarget:!1,extraAttributes:{},label:"",compactMode:!0,testId:void 0};var aA=s("./node_modules/@atlaskit/icon/glyph/calendar.js"),iA=s.n(aA),rA=Object(v.h)({label:{id:"issue.foundation.quick-add.quick-add-items.schedule-change-button.label",defaultMessage:"Schedule change"},tooltip:{id:"issue.foundation.quick-add.quick-add-items.schedule-change-button.tooltip",defaultMessage:"Schedule change"}});const oA=({createItemView:e,onClick:t})=>{const s=Object(xe.c)();return e({id:"schedule-change",label:s.formatMessage(rA.label),tooltip:s.formatMessage(rA.tooltip),icon:i.a.createElement(iA.a,{size:"medium",label:""}),itemIndex:4,shouldRender:!0,onClick:t,testId:""})};var cA=s("./src/packages/servicedesk/change-management/schedule-change-modal/src/async.js");const lA=({isOpen:e,onClose:t})=>{const s=Object(Ps.g)();return i.a.createElement(cA.a,{issueKey:s,isOpen:e,onClose:t})};lA.displayName="ScheduleChangeModal"
;const uA=({createItemView:e})=>{const[t,s]=Object(a.useState)(!1),n=Object(a.useCallback)((()=>{s(!0)}),[]),r=Object(a.useCallback)((()=>{s(!1)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(oA,{createItemView:e,onClick:n}),i.a.createElement(lA,{isOpen:t,onClose:r}))};var dA=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),pA=s.n(dA),mA=s("./node_modules/@atlaskit/icon/glyph/child-issues.js"),bA=s.n(mA),fA=s("./node_modules/@atlaskit/icon/glyph/issues.js"),gA=s.n(fA),hA=s("./node_modules/@atlaskit/icon/glyph/notification-direct.js"),yA=s.n(hA),OA=s("./node_modules/@atlaskit/icon/glyph/page.js"),jA=s.n(OA),vA=s("./node_modules/@atlaskit/icon/glyph/subtask.js"),EA=s.n(vA),kA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg"),wA=s.n(kA),SA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg"),CA=s.n(SA),IA=Object(v.h)({
addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkAlertsLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-label",defaultMessage:"Link alerts"},linkAlertsTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-tooltip",defaultMessage:"Link alerts"},linkIncidentLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const TA=q.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],z.e/2,z.e/2),PA=q.default.img(["height:","px;width:","px;"],3*z.e,3*z.e),_A=e=>!!e&&e.alertLinking.enabled;var xA=e=>{const{formatMessage:t,canCreateAttachment:s,shouldShowCreateSubtaskButton:n,shouldShowIssueInEpicButton:a,canCreateIssueLink:r,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,incidentLinking:g,incidentEscalate:h,incidentManagement:y,onLinkIncidentClick:O,canAddWebLinks:j,onAddWebLinkClick:v,onAddIssueLinkClick:E}=e,k=[{id:"attachment",tooltip:t(IA.addAttachmentTooltip),label:t(IA.addAttachmentLabel),icon:i.a.createElement(pA.a,{size:"medium",label:""}),onClick:o,itemIndex:0,
shouldRender:!p&&s,testId:""},{id:"create-subtask",tooltip:t(IA.createSubtaskTooltip),label:t(IA.createSubtaskLabel),icon:i.a.createElement(EA.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-issue-in-epic",tooltip:t(IA.createIssueInEpicTooltip),label:t(IA.createIssueInEpicLabel),icon:i.a.createElement(bA.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:a,testId:""},{id:"create-child",tooltip:t(IA.createChildTooltip),label:t(IA.createChildLabel),icon:i.a.createElement(bA.a,{size:"medium",label:""}),onClick:u,itemIndex:1,shouldRender:d,testId:""},{id:"create-incident",tooltip:t(IA.createIncidentTooltip),label:t(IA.createIncidentLabel),icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),i.a.createElement(PA,{src:wA.a})),onClick:f,itemIndex:3,shouldRender:!!h,
testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}],w=[{id:"issue-links",tooltip:t(IA.addIssueLinkTooltip),label:t(IA.addIssueLinkLabel),icon:i.a.createElement(gA.a,{size:"medium",label:""}),onClick:E,itemIndex:2,shouldRender:r,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:t(IA.linkConfluencePageTooltip),label:t(IA.linkConfluencePageLabel),icon:i.a.createElement(jA.a,{size:"medium",label:""}),onClick:b,itemIndex:3,shouldRender:m,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:t(IA.linkIncidentTooltip),label:t(IA.linkIncidentLabel),icon:i.a.createElement(PA,{src:CA.a}),onClick:O,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"link-alerts",tooltip:t(IA.linkAlertsTooltip),
label:t(IA.linkAlertsLabel),icon:i.a.createElement(yA.a,{size:"medium",label:""}),onClick:()=>{},itemIndex:3,shouldRender:_A(y),testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-alerts"},{id:"add-web-link",tooltip:t(IA.addWebLinkTooltip),label:t(IA.addWebLinkLabel),icon:i.a.createElement(vT.a,{size:"medium",label:""}),onClick:v,itemIndex:3,shouldRender:j,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}];return{issueActions:k.filter((e=>e.shouldRender)),linkingActions:w.filter((e=>e.shouldRender))}};function DA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function AA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?DA(Object(s),!0).forEach((function(t){LA(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):DA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function LA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const MA=()=>i.a.createElement(gD,null);MA.displayName="renderSkeleton";const RA=e=>{var t;const[s,n]=Object(a.useState)(!1),{formatMessage:r}=Object(xe.c)(),{fetchConfluenceAppLinks:o,triggerButtonClickAnalytics:c,onSelectContentPanel:l,onAddExtension:u,issueKey:d,containerWidth:p,locale:m}=e,b=Object(a.useRef)(0),f=Object(a.useRef)(null),g=Object(a.useCallback)((()=>f.current?f.current.clientWidth:0),[]),h=Object(a.useCallback)((()=>(b.current<g()&&(b.current=g()),b.current)),[g]),y=Object(a.useCallback)((()=>{const e=!p||p<=h();s!==e&&n(e)}),[p,h,s]);Object(a.useMemo)((()=>{y()}),[y]),Object(a.useEffect)((()=>{o()}),[o,d]),Object(a.useEffect)((()=>{y()
}),[p,y]);const O=Object(a.useCallback)((e=>{f.current=e,y()}),[y]),j=Object(a.useCallback)(((e,t,s)=>()=>{s(),c(e,t,4)}),[c]),v=Object(a.useCallback)((e=>{const{id:t,tooltip:n,label:a,icon:r,onClick:o,itemIndex:c,testId:l,hasGlobalSpotlightTarget:u}=e;return i.a.createElement(je.a,{content:n,position:"bottom",key:t},i.a.createElement(nA,{key:t,id:t,icon:r,onClick:j(t,c,o),label:a,compactMode:s,testId:l,hasGlobalSpotlightTarget:u}))}),[j,s]),[E]=(({issueKey:e})=>Object(vl.b)({issueKey:e,fieldKey:"servicedesk-practices"}))({issueKey:d}),k=!!Object(ne.isJsmChangeVisibilityM2Enabled)()&&(null!==(t=null==E?void 0:E.some((e=>e===oD.a)))&&void 0!==t&&t),w=Object(a.useCallback)((()=>{const{issueActions:t,linkingActions:n}=xA(AA(AA({},e),{},{formatMessage:r})),a=t.map(v),o=s?IA.linkDropdownButtonCompactLabel:IA.linkDropdownButtonLabel,d=r(o),p=i.a.createElement(ZD,{key:"quick-add-web-link-button",compactMode:s,actions:n,tooltipLabel:d}),m=[k&&i.a.createElement(uA,{key:"schedule-change",
createItemView:v})].filter(Boolean),b=i.a.createElement(LD,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{l(e),c("select_contentpanel",3,4)},onAddExtension:e=>{u(e),c("add_contentpanel",3,4)},createItemView:v,startIndex:a.length});return[...a,p,...m,b]}),[v,r,u,l,e,k,s,c]);if(e.isPreview)return MA();const S=w();return i.a.createElement(M.a,{id:"jira.issuebase.quickadditems"},i.a.createElement(gr.a,{name:"QUICK_ADDS"},S.length?i.a.createElement(cD.a,{modules:[Object(lD.a)(m)]},(()=>i.a.createElement(TA,{innerRef:O},S))):i.a.createElement("div",null)))};function NA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function FA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?NA(Object(s),!0).forEach((function(t){UA(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):NA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function UA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}RA.displayName="QuickAddItems",RA.defaultProps={canCreateIssueLink:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:c.a};const VA=e=>({onAddAttachmentClick:()=>{e(Object(ws.b)())},onCreateSubtaskClick:()=>{e(Hy())},onCreateIssueInEpicClick:()=>{e($y())},onAddIssueLinkClick:()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),e(Object(VS.a)())},onChildCreateClick:()=>{e(Gy())},onLinkConfluencePageClick:()=>{e(Object(Xx.h)())},onLinkIncidentClick:()=>{e(KI())},onCreateMajorIncidentClick:()=>{e(WI())},onAddWebLinkClick:()=>{e(Object(bT.k)())}})
;var KA=at()(aD({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),aD({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),aD({fieldKey:"servicedesk-incident-management",propName:"incidentManagement",isEnabled:()=>Object(ne.isJsmLinkedAlertsEnabled)()}),Object(r.b)((e=>FA(FA({},rD(e)),{},{isPreview:Object(P.s)(e),locale:Object(T.A)(e),projectType:Object(P.F)(e),issueKey:Object(T.y)(e)})),(e=>FA(FA({},VA(e)),{},{onAddExtension:t=>{e(Object(cf.b)(t))},onSelectContentPanel:t=>{e(Object(cf.d)(t))},fetchConfluenceAppLinks:()=>{e(Object(eD.a)())}}))),Object(as.a)((e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})}))),Pa.a)(RA),WA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg"),BA=s.n(WA),HA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg"),$A=s.n(HA),GA=Object(v.h)({
addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkAlertsLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-label",defaultMessage:"Link alerts"},linkAlertsTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-tooltip",defaultMessage:"Link alerts"},linkIncidentLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const qA=q.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],z.e/2,z.e/2),zA=q.default.img(["height:","px;width:","px;"],3*z.e,3*z.e);class YA extends a.Component{constructor(...e){super(...e),this.state={shouldUseCompactButtons:!1},this.componentDidMount=()=>{this.props.fetchConfluenceAppLinks(),this.setShouldUseCompactButtons()},this.componentDidUpdate=()=>{this.setShouldUseCompactButtons()},this.setQuickAddRef=e=>{this.quickAddRef=e},this.setShouldUseCompactButtons=()=>{const e=!this.props.containerWidth||this.props.containerWidth<=this.updateAndGetQuickAddExpandedWidth();this.state.shouldUseCompactButtons!==e&&this.setState({shouldUseCompactButtons:e})},this.getQuickAddRefClientWidth=()=>this.quickAddRef?this.quickAddRef.clientWidth:0,
this.updateAndGetQuickAddExpandedWidth=()=>(this.quickAddExpandedWidth<this.getQuickAddRefClientWidth()&&(this.quickAddExpandedWidth=this.getQuickAddRefClientWidth()),this.quickAddExpandedWidth),this.quickAddExpandedWidth=0,this.quickAddRef=void 0,this.sendAnalyticsEventFunc=(e,t,s)=>()=>{s(),this.props.triggerButtonClickAnalytics(e,t,4)},this.createItemView=e=>{const{id:t,tooltip:s,label:n,icon:a,onClick:r,itemIndex:o,testId:c,hasGlobalSpotlightTarget:l}=e;return i.a.createElement(je.a,{content:s,position:"bottom",key:t},i.a.createElement(nA,{key:t,id:t,icon:a,onClick:this.sendAnalyticsEventFunc(t,o,r),label:n,compactMode:this.state.shouldUseCompactButtons,testId:c,hasGlobalSpotlightTarget:l}))},this.renderSkeleton=()=>i.a.createElement(gD,null),this.onAddIssueLinkClick=()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),this.props.onAddIssueLinkClick()},this.getQuickAddActionData=()=>{var e
;const{intl:t,canCreateAttachment:s,shouldShowCreateSubtaskButton:n,shouldShowIssueInEpicButton:a,canCreateIssueLink:r,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,incidentLinking:g,incidentEscalate:h,incidentManagement:y,onLinkIncidentClick:O,canAddWebLinks:j,onAddWebLinkClick:v,practices:E}=this.props,k=[{id:"attachment",tooltip:t.formatMessage(GA.addAttachmentTooltip),label:t.formatMessage(GA.addAttachmentLabel),icon:i.a.createElement(pA.a,{size:"medium",label:""}),onClick:o,itemIndex:0,shouldRender:!p&&s,testId:""},{id:"create-subtask",tooltip:t.formatMessage(GA.createSubtaskTooltip),label:t.formatMessage(GA.createSubtaskLabel),icon:i.a.createElement(EA.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-issue-in-epic",tooltip:t.formatMessage(GA.createIssueInEpicTooltip),
label:t.formatMessage(GA.createIssueInEpicLabel),icon:i.a.createElement(bA.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:a,testId:""},{id:"create-child",tooltip:t.formatMessage(GA.createChildTooltip),label:t.formatMessage(GA.createChildLabel),icon:i.a.createElement(bA.a,{size:"medium",label:""}),onClick:u,itemIndex:1,shouldRender:d,testId:""},{id:"create-incident",tooltip:t.formatMessage(GA.createIncidentTooltip),label:t.formatMessage(GA.createIncidentLabel),icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),i.a.createElement(zA,{src:BA.a})),onClick:f,itemIndex:3,shouldRender:!!h,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}].filter((e=>e.shouldRender)).map(this.createItemView),w=[{id:"issue-links",tooltip:t.formatMessage(GA.addIssueLinkTooltip),label:t.formatMessage(GA.addIssueLinkLabel),
icon:i.a.createElement(gA.a,{size:"medium",label:""}),onClick:this.onAddIssueLinkClick,itemIndex:2,shouldRender:r,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:t.formatMessage(GA.linkConfluencePageTooltip),label:t.formatMessage(GA.linkConfluencePageLabel),icon:i.a.createElement(jA.a,{size:"medium",label:""}),onClick:b,itemIndex:3,shouldRender:m,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:t.formatMessage(GA.linkIncidentTooltip),label:t.formatMessage(GA.linkIncidentLabel),icon:i.a.createElement(zA,{src:$A.a}),onClick:O,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"link-alerts",tooltip:t.formatMessage(GA.linkAlertsTooltip),label:t.formatMessage(GA.linkAlertsLabel),icon:i.a.createElement(yA.a,{size:"medium",label:""}),onClick:()=>{},itemIndex:3,
shouldRender:_A(y),testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-alerts"},{id:"add-web-link",tooltip:t.formatMessage(GA.addWebLinkTooltip),label:t.formatMessage(GA.addWebLinkLabel),icon:i.a.createElement(vT.a,{size:"medium",label:""}),onClick:v,itemIndex:3,shouldRender:j,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}].filter((e=>e.shouldRender)),{shouldUseCompactButtons:S}=this.state,C=S?GA.linkDropdownButtonCompactLabel:GA.linkDropdownButtonLabel,I=t.formatMessage(C),T=i.a.createElement(ZD,{key:"quick-add-web-link-button",compactMode:S,actions:w,tooltipLabel:I}),P=[!!Object(ne.isJsmChangeVisibilityM2Enabled)()&&(null!==(e=null==E?void 0:E.some((e=>e===oD.a)))&&void 0!==e&&e)&&i.a.createElement(uA,{key:"schedule-change",createItemView:this.createItemView})].filter(Boolean),_=i.a.createElement(LD,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{
this.props.onSelectContentPanel(e),this.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:e=>{this.props.onAddExtension(e),this.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:k.length});return[...k,T,...P,_]}}render(){if(this.props.isPreview)return this.renderSkeleton();const{locale:e}=this.props,t=this.getQuickAddActionData();return i.a.createElement(gr.a,{name:"QUICK_ADDS"},t.length?i.a.createElement(cD.a,{modules:[Object(lD.a)(e)]},(()=>i.a.createElement(qA,{innerRef:this.setQuickAddRef},t))):i.a.createElement("div",null))}}YA.displayName="UnsafeQuickAddItems",YA.displayName="QuickAddItems",YA.defaultProps={canCreateIssueLink:!1,canCreateSubtask:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:c.a};const QA=Object(v.i)(Object(ls.a)()(YA));var JA=at()(aD({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),aD({
fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),aD({fieldKey:"servicedesk-practices",propName:"practices"}),aD({fieldKey:"servicedesk-incident-management",propName:"incidentManagement",isEnabled:()=>Object(ne.isJsmLinkedAlertsEnabled)()}),Object(r.b)((e=>{const t=Object(iT.a)(e),s=TS(e),n=Object(zt.k)(e),a=Object(P.q)(e),i=s&&!n&&a,r=t&&!n&&!i;return{locale:Object(T.A)(e),canCreateAttachment:Object(Oy.b)(e),shouldShowCreateSubtaskButton:r,shouldShowIssueInEpicButton:i,supportsChildCreation:n,canCreateIssueLink:Object(BS.a)(e),isPreview:Object(P.s)(e),isServiceDesk:Object(T.t)(e),canLinkConfluencePage:Object(iD.a)(e),canAddWebLinks:Object(fT.a)(e),projectType:Object(P.F)(e),issueKey:Object(T.y)(e)}}),(e=>({fetchConfluenceAppLinks:()=>e(Object(eD.a)()),onAddAttachmentClick:()=>e(Object(ws.b)()),onCreateSubtaskClick:()=>e(Hy()),onCreateIssueInEpicClick:()=>e($y()),onAddIssueLinkClick:()=>e(Object(VS.a)()),onChildCreateClick:()=>e(Gy()),
onLinkConfluencePageClick:()=>e(Object(Xx.h)()),onLinkIncidentClick:()=>e(KI()),onCreateMajorIncidentClick:()=>e(WI()),onAddWebLinkClick:()=>e(Object(bT.k)()),onAddExtension:t=>e(Object(cf.b)(t)),onSelectContentPanel:t=>e(Object(cf.d)(t))}))),Object(as.a)((e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})}))),Pa.a)(QA),ZA=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),XA=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js");function eL(){return(eL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function tL(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function sL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sL(Object(s),!0).forEach((function(t){aL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const iL="QUICK_ADD_ITEMS",rL="CONTEXT_ITEMS",oL="issue.context-items",cL="META_CONTAINER",lL="CONTENT_ITEMS",uL="ACTIVITY_FEED",dL="issue.activity-feed",pL="issue.glance-panel",mL="CONFIGURE_FIELDS";class bL extends a.Component{constructor(e){super(e),this.setSidePanelContainer=e=>{e&&this.setState((t=>({refs:nL(nL({},t.refs),{},{refSidePanelContainerElement:this.props.isMobile&&this.props.isCompact?document.body:e})})))},this.setLayoutContainer=e=>{e&&this.setState((t=>({refs:nL(nL({},t.refs),{},{refLayoutContainer:e})})))},this.setPanelColumn=e=>{e&&this.setState((t=>({refs:nL(nL({},t.refs),{},{refPanelColumnElement:e})})))},this.setVisibilityContainer=e=>{e&&this.setState((t=>({refs:nL(nL({},t.refs),{},{refVisibilityContainer:e}),contextWidth:e.offsetWidth})))},this.getPassedDownRefs=()=>this.state.refs,this.shouldRenderHeaderFF=()=>this.props.shouldRenderHeader,this.renderContextItems=()=>i.a.createElement(XA.a,{key:rL},i.a.createElement(N_,{externalId:oL})),
this.renderFullSizeLayoutSideContent=()=>i.a.createElement(XA.h,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},i.a.createElement(Fp,null),Object(ne.isTemplatedBaseContextEnabled)()?i.a.createElement(Vp,{key:rL,externalId:oL}):i.a.createElement(N_,{forgeExtensions:this.props.forgeExtensions,key:rL,externalId:oL}),i.a.createElement(XA.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote"},i.a.createElement(Zx,{key:cL}),i.a.createElement(Cx,{key:mL}))),this.renderCompactHeader=()=>this.shouldRenderHeaderFF()?i.a.createElement(ZA.a,{key:"SPLIT_HEADER",elementId:"jira-issue-header"},i.a.createElement(Ix.a,{shouldShowCloseButton:this.props.shouldShowCloseButton,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,issueDeleteCallbacks:this.props.issueDeleteCallbacks,renderFeedback:this.props.renderFeedback,
viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose})):null,this.renderHeaderBreadcrumbs=()=>this.shouldRenderHeaderFF()?i.a.createElement(ZA.a,{elementId:"jira-issue-header"},i.a.createElement(Tx.a,{shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,isCompact:this.props.isCompact})):null,this.renderHeaderActions=()=>this.shouldRenderHeaderFF()?i.a.createElement(ZA.a,{elementId:"jira-issue-header-actions",customStyles:"margin-right: -7px"},i.a.createElement(ta.a,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowCloseButton:this.props.shouldShowCloseButton})):null,this.renderFullSizeLayout=()=>{const e=XA.d,t=XA.c;return i.a.createElement(Xt.a,{hasMultipleScrollingColumns:!0},i.a.createElement(e,{issueMaxWidth:this.props.issueMaxWidth,medium:6,
isLeftmost:!0},i.a.createElement(t,{isLeftmost:!0,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.left-most-column"},this.renderHeaderBreadcrumbs(),i.a.createElement(Np,null),Object(ne.isShortcutMenuEnabled)()?i.a.createElement(KA,{key:iL,externalId:"issue.quick-add"}):i.a.createElement(JA,{key:iL,externalId:"issue.quick-add"}),i.a.createElement(SP,{key:lL,isCompactMode:!1}),i.a.createElement(fc,{key:uL,externalId:dL}))),i.a.createElement(e,{medium:4,issueMaxWidth:this.props.issueMaxWidth,isRightmost:!0,scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},i.a.createElement(t,{isRightmost:!0,innerRef:this.setPanelColumn,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.right-most-column"},this.renderHeaderActions(),this.renderFullSizeLayoutSideContent())))},this.renderCompactLayoutItems=()=>[i.a.createElement(Np,{key:"FOUNDATION_CONTENT"}),i.a.createElement(KA,{key:iL,
externalId:"issue.quick-add"}),i.a.createElement(Fp,{key:"FOUNDATION_CONTEXT"}),i.a.createElement(SP,{key:lL,isCompactMode:!0}),Object(ne.isTemplatedBaseContextEnabled)()?i.a.createElement(XA.a,{key:rL},i.a.createElement(Vp,{externalId:oL})):this.renderContextItems(),i.a.createElement(XA.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote",key:"FOOTNOTE_WRAPPER_KEY"},i.a.createElement(Zx,{key:cL}),i.a.createElement(Cx,{key:mL})),i.a.createElement(fc,{key:uL,externalId:dL})],this.renderCompactLayout=()=>i.a.createElement(XA.f,{scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},i.a.createElement(XA.e,{issueMaxWidth:this.props.issueMaxWidth,innerRef:this.setPanelColumn},this.renderCompactHeader(),i.a.createElement(XA.h,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},i.a.createElement(Xt.a,{isCompact:!0},i.a.createElement(d.a,null,this.renderCompactLayoutItems()))))),this.state={contextWidth:0,refs:{
refVisibilityContainer:null,refSidePanelContainerElement:null,refPanelColumnElement:null,refLayoutContainer:null}}}shouldComponentUpdate(e,t){return this.didPropsChange(e)||this.didStateChange(t)}didStateChange(e){const t=this.state,{refs:s}=t,n=tL(t,["refs"]),{refs:a}=e,i=tL(e,["refs"]);return(!this.props.arePanelsClosed||!Ta()(n,i))&&!Ta()(this.state,e)}didPropsChange(e){return!Ta()(this.props,e)}renderConnectGlancePanels(){return this.props.glances.map((e=>i.a.createElement(Ox,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:pL,glanceType:"CONNECT_ENTITY_TYPE",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})))}renderGlancePanels(){return this.props.glances.map((e=>i.a.createElement(Ox,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:pL,refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})))}renderContextPanel(){
return i.a.createElement(rx,{key:"context-panel",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})}render(){const e=this.props.isCompact?this.renderCompactLayout():this.renderFullSizeLayout();return i.a.createElement(XA.g,{innerRef:this.setLayoutContainer,"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},e,this.renderGlancePanels(),this.renderContextPanel())}}bL.displayName="IssueLayout",bL.displayName="IssueLayout",bL.defaultProps={isCompact:!1,shouldRenderHeader:!1,openedGlance:null,forgeExtensions:[],glances:[]};const fL=e=>{const[t]=Object(gc.b)(),[s]=Object(gc.c)();return i.a.createElement(bL,eL({},e,{arePanelsClosed:void 0===t&&void 0===s,openedGlance:s}))};fL.displayName="IssueLayoutWithIssueLayoutState";var gL=Object(r.b)((e=>({glances:Object(Dn.i)(e),openedGlance:Object(Wp.a)(e),arePanelsClosed:!Object(Wp.a)(e)&&!Object(Kp.b)(e),shouldRenderHeader:Object(T.H)(e),isMobile:Object(T.s)(e)})),{})(fL)
;const hL=q.default.div(["flex-grow:1;overflow:hidden;display:flex;flex-direction:column;height:100%;"]),yL=q.default.div(["height:100%;display:flex;flex-direction:column;"]);var OL=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcuts/index.js"),jL=s("./src/packages/shortcuts-dialog/src/controllers/shortcuts-service/index.js"),vL=s("./src/packages/issue/issue-view/src/actions/external-actions.js");const EL=Object(v.h)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue"},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue"},nextActivity:{id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity"},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity"},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee"},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",
defaultMessage:"Comment on issue"},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels"},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me"},openShortcutDialog:{id:"issue.shorctus.openShortcutDialog",defaultMessage:"Open shortcut dialog"}});function kL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kL(Object(s),!0).forEach((function(t){SL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function SL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
var CL=e=>Object(a.useMemo)((()=>({a:{callback:()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0,collectors:[e=>wL(wL({},e),{},{viaShortcut:1})]});const t=Object(vL.d)(Object(vL.c)("assignee"));e(t,"assignIssue","a")},label:i.a.createElement(v.c,EL.editAssignee),priority:999},i:{callback:()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT,cancelExisting:!0});const t=Object(vL.d)(Object(vL.b)());e(t,"assignToMe","i")},label:i.a.createElement(v.c,EL.assignToMe),priority:999},l:{callback:()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0});const t=Object(vL.d)(Object(vL.c)("labels"));e(t,"editLabels","l")},label:i.a.createElement(v.c,EL.editLabels),priority:999},m:{callback:()=>{Object($i.c)().markStartOfInteraction({key:Ir.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0})
;const t=Object(vL.d)(Object(vL.a)());e(t,"commentIssue","m")},label:i.a.createElement(v.c,EL.commentOnIssue),priority:999}})),[e]);var IL=e=>Object(a.useMemo)((()=>Object(ne.isShortcutMenuEnabled)()?{".":{callback:()=>{e("triggerShortcutDialogOpen",".")},label:i.a.createElement(v.c,EL.openShortcutDialog),priority:999}}:{}),[e]);const TL=(e,t)=>{const s=e.find((e=>e.length));return s&&(s[t]||s[s.length-1])},PL=(e,t)=>{const s=e.find((e=>e.includes(t)))||[],n=s.indexOf(t);return[s,n]},_L=(e,t)=>{const s=e.findIndex((e=>e.includes(t)));return[s,e[s].indexOf(t)]};var xL=e=>{const t=Object(Ps.g)(),s=Object(Ps.k)();return Object(a.useMemo)((()=>s?{j:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=PL(e,t);return s[n+1]||t})(s,t))},label:i.a.createElement(v.c,EL.nextIssue),priority:999},k:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=PL(e,t);return s[n-1]||t})(s,t))},label:i.a.createElement(v.c,EL.previousIssue),priority:999},n:{callback:()=>{e(((e,t)=>{if(!e)return t
;const[s,n]=_L(e,t),a=e.slice(s+1);return TL(a,n)||t})(s,t))},label:i.a.createElement(v.c,EL.nextActivity),priority:999},p:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=_L(e,t),a=e.slice(0,s).reverse();return TL(a,n)||t})(s,t))},label:i.a.createElement(v.c,EL.previousActivity),priority:999}}:{}),[t,e,s])};function DL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function AL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?DL(Object(s),!0).forEach((function(t){LL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):DL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function LL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const ML=e=>{const{dispatch:t}=e,s=Object(Ps.g)(),{createAnalyticsEvent:n}=Object(Li.a)(),[,{setShortcutDialogVisibility:r}]=Object(jL.b)(),o=Object(a.useCallback)(((e,s,a)=>{setTimeout((()=>t(e)),0),Object(Fa.h)(n({}),"keyboardShortcut pressed",`${s}KeyboardShortcut`,{key:a})}),[n,t]),c=Object(a.useCallback)(((e,t)=>{requestAnimationFrame((()=>r(!0))),Object(Fa.h)(n({}),"keyboardShortcut pressed",`${e}KeyboardShortcut`,{key:t}),Object(Fa.h)(n({}),"keyboardShortcut pressed","dotDialogKeyboardShortcut",{key:t})}),[n,r]),l=Object(a.useCallback)((e=>{e!==s&&t(Object(Yy.c)({fromIssueKey:s,toIssueKey:e}))}),[t,s]),u=CL(o),d=IL(c),p=xL(l),m=Object(a.useMemo)((()=>AL(AL(AL({},u),p),d)),[p,u,d]);return i.a.createElement(OL.a,{keyMap:m})};ML.displayName="KeyboardShortcutsView";var RL=Object(a.memo)(ML),NL=Object(r.b)(null,(e=>({dispatch:e})))((e=>i.a.createElement(M.a,{id:"keyboard-shortcuts",packageName:"issue-view"},i.a.createElement(RL,e))))
;var FL=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),UL=s("./src/packages/shortcuts-dialog/src/controllers/register-shortcuts/index.js"),VL=Object(v.h)({editFieldsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.edit-fields",defaultMessage:"Edit Fields"},issueActionsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions",defaultMessage:"Issue Actions"},issueWorkflowsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-workflows",defaultMessage:"Workflow"},issueActionComment:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.comment",defaultMessage:"Comment"},issueActionLogwork:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.log-work",defaultMessage:"Log work"},issueActionAttachFiles:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.attach-files",defaultMessage:"Attach files"},
issueActionCreateSubtask:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.create-subtask",defaultMessage:"Create sub-task"},issueActionConvertSubtask:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.convert-subtask",defaultMessage:"Convert to sub-task"},issueActionMove:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.move",defaultMessage:"Move"},issueActionClone:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.clone",defaultMessage:"Clone"}});const KL=q.default.div(["display:flex;align-items:center;justify-content:space-between;"]);function WL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function BL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?WL(Object(s),!0).forEach((function(t){HL(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):WL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function HL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $L=e=>{const{label:t,issueKey:s}=e;return i.a.createElement(KL,null,i.a.createElement("span",null,t),i.a.createElement("span",null,s))};$L.displayName="ShortcutsGroupHeader";const GL=e=>{
const[t,s]=Object(a.useState)([]),{formatMessage:n}=Object(xe.c)(),{createAnalyticsEvent:r}=Object(Li.a)(),{baseUrl:o,issueId:c,issueKey:l,fieldsShortcuts:u,onIssueFieldsSelected:d,canCreateAttachment:p,shouldShowCreateSubtaskButton:m,shouldShowIssueInEpicButton:b,canCreateIssueLink:f,onAddAttachmentClick:g,onCreateSubtaskClick:h,onCreateIssueInEpicClick:y,onChildCreateClick:O,supportsChildCreation:j,isServiceDesk:v,canLinkConfluencePage:E,onLinkConfluencePageClick:k,onCreateMajorIncidentClick:w,incidentLinking:S,incidentEscalate:C,onLinkIncidentClick:I,canAddWebLinks:T,onAddWebLinkClick:P,onAddIssueLinkClick:_,onChangeWorkflow:x}=e,D=Object(a.useCallback)((async e=>{e.hasScreen?new FL.a({baseUrl:o,transitionId:e.id,issueKey:l}).onDialogSuccess((()=>{x(e,!0)})).show():(await Object(wc.d)(`/rest/api/2/issue/${l}/transitions`,{body:JSON.stringify({transition:e})}),x(e,!1))}),[o,l,x]),A=Object(a.useCallback)((async()=>{if(!l||void 0===c)return;const e={key:"issue.edit-fields",
label:n(VL.editFieldsSectionLabel),isLoaded:!0,weight:1,options:u.map((e=>BL(BL({},e),{},{action:()=>d(e,r({}))})))},t=xA({formatMessage:n,canCreateAttachment:p,shouldShowCreateSubtaskButton:m,shouldShowIssueInEpicButton:b,canCreateIssueLink:f,onAddAttachmentClick:g,onCreateSubtaskClick:h,onCreateIssueInEpicClick:y,onChildCreateClick:O,supportsChildCreation:j,isServiceDesk:v,canLinkConfluencePage:E,onLinkConfluencePageClick:k,onCreateMajorIncidentClick:w,incidentLinking:S,incidentEscalate:C,onLinkIncidentClick:I,canAddWebLinks:T,onAddWebLinkClick:P,onAddIssueLinkClick:_}),a=Object.keys(t).map((e=>t[e])).flat().map((({id:e,label:t,onClick:s})=>({value:e,label:t,action:s}))),o={key:"issue.actions",label:i.a.createElement($L,{label:n(VL.issueActionsSectionLabel),issueKey:l}),isLoaded:!0,weight:2,options:a},x=await Object(Jp.a)(`/rest/api/2/issue/${l}/transitions`),A={key:"issue.workflows",label:i.a.createElement($L,{label:n(VL.issueWorkflowsSectionLabel),issueKey:l}),isLoaded:!0,weight:3,
options:x.transitions.map((e=>({value:e.id,label:e.name,action:()=>D(e)})))};s([e,o,A])}),[l,c,n,u,p,m,b,f,g,h,y,O,j,v,E,k,w,S,C,I,T,P,_,r,d,D]);return l&&void 0!==c?i.a.createElement(UL.a,{shortcuts:t,onShortcutDialogOpen:A}):null};GL.displayName="RegisterShortcutsDialogHelper";var qL=GL;function zL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function YL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zL(Object(s),!0).forEach((function(t){QL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function QL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
var JL=Object(qt.a)([Object(r.b)((e=>YL(YL({},rD(e)),{},{fieldsShortcuts:Object(on.t)(e),baseUrl:Object(T.f)(e),issueId:Object(T.x)(e),issueKey:Object(T.y)(e)})),(e=>YL(YL({},VA(e)),{},{onChangeWorkflow:(t,s)=>{e(Object(pl.c)("status",Yl,t.to)),e(Object(pl.e)("status",t.to,{viaDialog:s}))},onIssueFieldsSelected:(t,s)=>{e(((e,t,s)=>({type:"FIELD_SHORTCUT_SELECTED",payload:{fieldKey:e,isRichTextField:t,analyticsEvent:s}}))(t.value,t.isRichTextField||!1,s))}}))),v.i])(qL),ZL=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),XL=s("./node_modules/lodash/toString.js"),eM=s.n(XL),tM=s("./src/packages/issue/smart-field-prefetch/src/context.js");const sM=Yp()(((e,t,s)=>Object(Jp.a)(((e,t,s="")=>`${t}/rest/api/3/user/assignable/search?issueKey=${e}&recommend=true&query=&sessionId=${s}`)(e,t,s)))),nM=Yp()(((e,t,s,n,a)=>{const i=`${e.baseUrl}/gateway/api/fields/v2/prefetch`;return Object(Jp.a)(i,{body:JSON.stringify({context:{product:"jira",sessionId:n,
containerId:e.projectId,objectId:e.issueId,principalId:e.accountIdloggedInUser,tenantId:e.cloudId,additionalContext:{properties:t,type:"issue",customPropertyMappings:s}},prefetchFields:a}),headers:{"Content-Type":"application/json"},method:"POST"})}),(e=>+e.issueId)),aM=Yp()(((e,t,s,n)=>Object(Jp.a)(((e,t,s="",n)=>`${t}/rest/api/1.0/labels/${n}/suggest?query=&sessionId=${s}`)(0,t,s,n))));function iM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?iM(Object(s),!0).forEach((function(t){oM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):iM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oM(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cM=e=>null!=e,lM=e=>cM(e)&&""!==e;function uM(){return(uM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const dM={assignee:sM,labels:aM},pM=Object(a.memo)((e=>{const t=(e=>{if(lM(e.projectId)&&cM(e.issueId)&&e.issueId!==Object(Hi.j)("")&&lM(e.cloudId)&&lM(e.issueKey)&&cM(e.fields))return rM(rM({},e),{},{issueId:e.issueId,projectId:e.projectId})})(e);if(void 0===t)return null;const[s,n]=Object(tM.b)(t.issueKey)(),{issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,fields:l,baseUrl:u,issueKey:d,customFieldMappings:p,createAnalyticsEvent:m}=t,b={issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,baseUrl:u};return Object(a.useEffect)((()=>{if(s&&Object.values(s).filter((e=>e)).length>0)return
;const e=Object.keys(dM||{}),t=e.filter((e=>!!l[e]&&l[e].editable));if(!((e,t,s)=>!(e.length<t.length&&(s&&O.a.safeInfoWithoutCustomerData("smart-field-prefetch.index","Prefetch request skipped for non-editable fields.",s({action:"skipped",actionSubject:"prefetch"}).update({prefetchableFields:t,permissiableFields:e})),0===e.length)))(t,e,m))return;const a=Hp.a.v4();nM(b,l,p,a,t).then((({prefetchFields:e=[]})=>{((e,t,s,n)=>{if(null==e)return;const a=e({action:"requested",actionSubject:"prefetchFields",actionSubjectId:n}),i={prefetchSessionId:n,requestedFields:t,positiveFields:s};Object(Fa.c)(a,"prefetchFields requested",n,i)})(m,t,e,a),t.forEach((t=>{if(e.includes(t)){const e=Hp.a.v4(),s=dM[t](d,u,e,i);n.setField(t,a,!0,e,s),((e,t,s,n)=>{if(null==e)return;const a="prefetched",i=e({action:a,actionSubject:"field"}),r={fieldFetchSessionId:n,prefetchSessionId:s,fieldId:t};Object(Fa.c)(i,`field ${a}`,r)})(m,t,a,e)}else n.setField(t,a,!1,null,null)}))})).catch((e=>{
O.a.safeErrorWithoutCustomerData("smart-field-prefetch.index","error while calling frs prefetch",e)}))}),[u,b,l,d,p,n,m,i,s]),null}),((e,t)=>eM()(e.issueId)===eM()(t.issueId)&&eM()(e.projectId)===eM()(t.projectId))),mM=e=>{const t=Object($p.a)(),s=Object(Ps.i)(),n=Object(Wa.g)(s),a=Object(Ps.g)(),r=Object(Mi.a)(),o=Object(lg.a)();return i.a.createElement(pM,uM({},e,{cloudId:t,projectId:n,issueKey:a,baseUrl:r,accountIdloggedInUser:o}))};mM.displayName="SmartFieldPrefetchApp";var bM=mM;function fM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fM(Object(s),!0).forEach((function(t){hM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fM(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const yM=["epic","sprint","storyPointsField","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:jsw-story-points"],OM=e=>e?yM.map((t=>{const s=Object(on.q)(t)(e);return s?{[t]:s.key}:{}})).reduce(((e,t)=>gM(gM({},e),t)),{}):{};var jM=Object(ZL.a)()(Object(r.b)(((e,t)=>({fields:Object(on.s)(e),issueId:Object(T.x)(e),customFieldMappings:OM(e),createAnalyticsEvent:t.createAnalyticsEvent})),{})(bM));function vM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function EM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vM(Object(s),!0).forEach((function(t){kM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class wM extends a.Component{constructor(...e){super(...e),this.state={isIssueContainerReady:!1},this.setIssueBodyContainerRef=e=>{e&&(this.issueBodyContainerRef=e,this.setState({isIssueContainerReady:!0}))},this.hasErrored=!1,this.issueBodyContainerRef=void 0,this.renderError=(e,t)=>{const{isComplete:s}=this.props,n=EM({},t);switch(e){case"AUTHENTICATION_ERROR":return s?i.a.createElement(Zt.c,{location:"auth-error"
},i.a.createElement(ba,null)):i.a.createElement(ba,null);case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return s?i.a.createElement(Zt.c,{location:"not-found-or-no-permission-error"},i.a.createElement(ja,null)):i.a.createElement(ja,null);case"CONNECTIVITY_ERROR":return i.a.createElement(Ca,null);case"UNKNOWN_ERROR":default:{const e=null==t?void 0:t.statusCode,a=!Object(ne.isSkip4xxReportingEnabled)()||!e||!Object(Jt.b)(e);return s&&a?i.a.createElement(Zt.a,{location:"unknown-error",failureEventAttributes:n},i.a.createElement(Ca,null)):i.a.createElement(Ca,null)}}},this.renderAttachmentPickers=()=>{const{isServiceDesk:e,isComplete:t,projectType:s}=this.props;return t?i.a.createElement(_n,{experience:"renderAttachmentPickers",analyticsSource:e?"issue-view-jsd":"issue-view-non-jsd",projectType:s,isReady:this.state.isIssueContainerReady&&!!this.issueBodyContainerRef
},e?i.a.createElement(i.a.Fragment,null,i.a.createElement(an,null),i.a.createElement(fn,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&i.a.createElement(On,{container:this.issueBodyContainerRef})):i.a.createElement("div",null,i.a.createElement(Ws,null),i.a.createElement(bn,null),this.state.isIssueContainerReady&&i.a.createElement(Sn,{container:this.issueBodyContainerRef}))):null}}componentDidMount(){const{onRefresh:e,onMount:t}=this.props;t(),y.a.addRefreshIssueListener(e),this.props.isComplete&&this.props.onLoadedIssueView(),this.handleOnError()}shouldComponentUpdate(e){const{error:t,isLoading:s}=this.props,n=s&&e.isLoading;return e.error!==t||!n}componentDidUpdate(e){const{error:t}=this.props;null!=t&&(this.hasErrored=!0),this.hasErrored||this.isCompleteStateForFirstTime(e)&&this.props.onLoadedIssueView()}componentWillUnmount(){y.a.removeRefreshIssueListener(this.props.onRefresh)}handleOnError(){const{onError:e,error:t}=this.props
;null!=t&&(O.a.safeInfoWithoutCustomerData("issue.viewed.handleOnError","There was an error during issue initialization.",{hasOnError:null!=e}),null!=e&&Object(ne.isConnectIssueModalErrorHandlerEnabled)()&&e(t))}isCompleteStateForFirstTime(e){const{isComplete:t}=this.props;return t&&!e.isComplete}renderWorklogModal(){switch(this.props.worklogModal){case"ADD_MODAL":return i.a.createElement(st,null);case"EDIT_MODAL":return i.a.createElement(Dt,null);case"DELETE_MODAL":return i.a.createElement(wt,null);case"NO_MODAL":default:return null}}renderMainContent(){const{error:e,errorMessage:t,isLoading:s,isCompact:n,issueMaxWidth:a,shouldShowCloseButton:r,onClose:o}=this.props;return null!=e?i.a.createElement(Xt.a,{isCompact:n},i.a.createElement(d.a,{medium:10},r&&i.a.createElement(ta.a,{viewModeOptions:this.props.viewModeOptions,shouldShowCloseButton:!0,onClose:o}),this.renderError(e,t))):s?i.a.createElement(es.b,{issueMaxWidth:a}):i.a.createElement(yL,{innerRef:this.setIssueBodyContainerRef
},i.a.createElement(gL,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,isStickyHeaderOffset:this.props.isStickyHeaderOffset,onClose:o,isCompact:n,issueMaxWidth:a,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:r}),this.renderWorklogModal(),this.renderAttachmentPickers(),i.a.createElement(Mn,{externalId:"issue.ecosystem"}),this.props.isComplete&&i.a.createElement(ea,null),i.a.createElement(jM,null))}render(){const{jql:e,filter:t}=u.a.parse(window.location.search),s=null!=e||null!=t;return i.a.createElement(hL,null,i.a.createElement(Ht,{isLoading:this.props.isLoading,isPreview:this.props.isPreview,isComplete:this.props.isComplete,error:this.props.error,metrics:this.props.metrics,issueKey:this.props.issueKey
}),this.props.isComplete?i.a.createElement(b.a,null):null,i.a.createElement(ks,{externalId:"issue.flags"}),i.a.createElement(NL,null),i.a.createElement(p.f,null,this.renderMainContent()),Object(ne.isShortcutMenuEnabled)()&&!s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,null),i.a.createElement(JL,null)))}}wM.displayName="Issue",wM.displayName="Issue",wM.defaultProps={projectType:null,onLoadedIssueView:c.a,onMount:c.a};t.default=Object(qt.a)([Object(f.a)({onLoadedIssueView:{action:"mounted"}}),Object(r.b)((e=>({isLoading:Object(P.r)(e),isPreview:Object(P.s)(e),isComplete:Object(P.n)(e),error:Object(P.i)(e),errorMessage:Object(P.h)(e),issueKey:Object(T.y)(e),isServiceDesk:Object(T.t)(e),projectType:Object(P.F)(e),worklogModal:Object(x.e)(e)})),(e=>({onRefresh:()=>e(Object(At.g)()),onMount:()=>{e((()=>({type:"ISSUE_VIEW_MOUNTED"}))())},onLoadedIssueView:e=>{const t={action:"viewed",attributes:{
isBoardSearchFieldChangeboardingEnabled:Object(ne.isBoardSearchFieldChangeboardingEnabled)(),isBacklogSearchFieldChangeboardingEnabled:Object(ne.isBacklogSearchFieldChangeboardingEnabled)()}};try{Object(g.a)(e,t)}catch(s){O.a.safeErrorWithoutCustomerData("issue.viewed",s,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}}}))),ts.a,(()=>e=>{var t,s;return s=t=class extends a.Component{constructor(...e){super(...e),this.MetricsContext=Object($t.c)()}render(){const{MetricsContext:t}=this;return i.a.createElement(t.Consumer,null,(t=>i.a.createElement(e,Gt({},this.props,{metrics:t}))))}},t.displayName=`WithMetricsConsumer(${e.displayName||e.name})`,s})(),Object(h.a)((e=>{const t=Object(Qt.a)(e),s=Object(Yt.b)(e),n=EM(EM(EM({},t.attributes),s),{},{issueHierarchyLevel:Object(ne.collapsedHierarchies)()?Object(zt.b)(e):Object(zt.f)(e)});return EM(EM({},t),{},{attributes:n})}))])(wM)},
"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),c=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),l=s("./src/packages/issue/issue-view/src/feature-flags.js"),u=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");class d extends n.Component{constructor(e){super(e),this.state={shouldShowKeyline:!1},this.getScrollContainer=()=>(this.scrollContainer||(this.scrollContainer=Object(c.a)(this.innerEl.current)),this.scrollContainer),this.calculateShouldShowKeyline=r()((()=>{const e=this.getScrollContainer(),t=this.innerEl.current;if(!e||!t)return
;const s=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=Math.max(s.top,0),i=e.scrollTop>0&&n.top<=a;i!==this.state.shouldShowKeyline&&this.setState({shouldShowKeyline:i})}),100),this.scrollContainer=null,this.innerEl=void 0,this.innerEl=Object(n.createRef)()}componentDidMount(){if(!Object(o.e)())if(Object(l.isStickyHeaderRefactoringEnabled)())window.requestAnimationFrame((()=>{const e=this.getScrollContainer();e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),this.calculateShouldShowKeyline()}));else{const e=this.getScrollContainer();e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),this.calculateShouldShowKeyline()}}componentWillUnmount(){if(!Object(o.e)()){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.calculateShouldShowKeyline)}}render(){return a.a.createElement(u.a,{topOffset:0,id:this.props.elementId,showKeyline:this.state.shouldShowKeyline,innerRef:this.innerEl,customStyles:this.props.customStyles
},this.props.children)}}d.displayName="WithShouldShowKeyline"},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=i.e,o=n.default.div(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;background:white;z-index:",";padding-left:","px;margin-left:-","px;padding-top:","px;top:","px;",";",";}"],i.f.card-1,r,r,1,(e=>e.topOffset+-1),(e=>e.showKeyline?`box-shadow: 0 2px ${a.a.N30}`:""),(e=>e.customStyles||""))},"./src/packages/issue/jira-settings-service/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n="LOCK_IN_NEW_ISSUE_VIEW"},
"./src/packages/issue/jira-settings-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}));var n={};s.r(n),s.d(n,"setJiraSettings",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const o=e=>({setState:t})=>{t(e)},c=Object(i.a)({name:"jiraSettings",initialState:{newIssueViewTransitionSettings:{newIssueViewTransitionLockingStatus:"DEFAULT_TO_NEW_ISSUE_VIEW",shouldDelayChangeboarding:!1},issueLinkTypes:[],subtasksConfiguration:{enabled:!0},timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}},actions:n}),l=Object(r.a)(c,{selector:e=>e.timeTrackingConfiguration}),u=Object(r.a)(c,{selector:e=>e.newIssueViewTransitionSettings||void 0}),d=(Object(r.a)(c,{selector:e=>e.subtasksConfiguration}),
Object(r.a)(c,{selector:e=>e.issueLinkTypes}),Object(r.a)(c,{selector:null})),p=()=>{const[e]=l();return[e]},m=()=>{const[e]=u();return[e]},b=()=>{const[,{setJiraSettings:e}]=d();return[null,Object(a.useMemo)((()=>({setJiraSettings:e})),[e])]}},"./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t,s)=>async n=>({clientId:t,token:await e(n?n.collectionName:void 0),baseUrl:s}),a=e=>()=>Promise.resolve(e)},"./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,collection:void 0!==e.collection&&""!==e.collection?e.collection:null,tokenIssueTimestamp:Date.now()-1e4})},
"./src/packages/issue/media-provider/src/controllers/token-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);class i{constructor(){this.status=void 0,this.promise=void 0,this.resolvePromise=void 0,this.rejectPromise=void 0,this.reset()}get(){return this.promise}resolve(e){this.resetIfSettled(),this.resolvePromise(e),this.status="resolved"}reject(){this.resetIfSettled(),this.rejectPromise(),this.status="rejected"}resetIfSettled(){"pending"!==this.status&&this.reset()}reset(){this.promise=new Promise(((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})),this.status="pending"}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>{var t,s;return s=t=class extends n.Component{constructor(e){super(e),this.viewTokenPromiseProvider=void 0,this.updateViewTokenPromise=e=>{
const{viewContext:t}=e;t&&t.areTokenPermissionsUpToDate&&t.token?this.viewTokenPromiseProvider.resolve(t.token):this.viewTokenPromiseProvider.resetIfSettled()},this.tokenProvider=async e=>{if(!e)return this.viewTokenPromiseProvider.get();const{uploadContext:t}=this.props.mediaContext;if(t)return t.token;throw new Error("Upload token not available")},this.viewTokenPromiseProvider=new i,this.updateViewTokenPromise(e.mediaContext)}UNSAFE_componentWillReceiveProps(e){this.updateViewTokenPromise(e.mediaContext)}render(){return a.a.createElement(e,r({tokenProvider:this.tokenProvider},this.props))}},t.displayName=`WithTokenProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s}},"./src/packages/issue/media-provider/src/controllers/with-media-provider/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),r=s("./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js"),o=s("./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,
configurable:!0,writable:!0}):e[t]=s,e}var d=s("./src/packages/issue/media-provider/src/controllers/token-provider/index.js");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const b=e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.setDropzoneRef=e=>{this.dropzoneRef=e},this.resolve=void 0,this.mediaProviderPromise=new Promise((e=>{this.resolve=e})),this.resolved=!1,this.dropzoneRef=null}componentDidMount(){
this.resolveMediaProviderPromise()}componentDidUpdate(){this.resolveMediaProviderPromise()}resolveMediaProviderPromise(){const{mediaContext:e,tokenProvider:t,baseUrl:s}=this.props;if(!this.resolved&&this.dropzoneRef&&e.viewContext){this.resolved=!0;const n=((e,t,s)=>{const{viewContext:n,uploadContext:a,userAuth:c}=e;if(!n)throw new TypeError("mediaContext.viewContext was null. Check that the server response has been processed.");let u={viewMediaClientConfig:{authProvider:Object(r.a)(t,n.clientId,n.serviceHost)}};return a&&(u=l(l({},u),{},{uploadParams:{collection:a.collection},uploadMediaClientConfig:{authProvider:Object(r.a)(t,a.clientId,a.serviceHost),userAuthProvider:c?Object(r.b)(l(l({},c),{},{baseUrl:a.serviceHost})):void 0,getAuthFromContext:async e=>{const t=await Object(i.b)(s,e,65536).map(o.a).toPromise();return{baseUrl:t.serviceHost,clientId:t.clientId,token:t.token||""}}}})),u})(e,t,s);this.resolve(n)}}render(){
const t=this.props,{mediaContext:s,tokenProvider:n}=t,i=m(t,["mediaContext","tokenProvider"]);return a.a.createElement("div",{ref:this.setDropzoneRef},a.a.createElement(e,p({mediaProvider:this.mediaProviderPromise},i)))}},t.displayName=`WithMediaProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s};t.a=e=>Object(d.a)(b(e))},"./src/packages/issue/opt-in-back/src/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./node_modules/react-async-component/commonjs/index.js");const a=Object(n.asyncComponent)({resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-details-opt-in-back-modal")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/opt-in-modal/index.js")).then((e=>e.default)),name:"AsyncOptInBackModal"}),i=Object(n.asyncComponent)({
resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-details-opt-in-back-onboarding")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/onboarding/index.js")).then((e=>e.default)),name:"AsyncOptInBackOnboarding"}),r=Object(n.asyncComponent)({resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-details-opt-back-in-banner")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/opt-back-in-banner/index.js")).then((e=>e.default)),name:"AsyncOptBackInBanner"})},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),s.d(n,"setTourIsActive",(function(){return o})),s.d(n,"setTourIsInactive",(function(){return c}))
;var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=()=>({setState:e})=>{e({isTourActive:!0})},c=()=>({setState:e})=>{e({isTourActive:!1})},l=Object(a.a)({name:"new-issue-view-onboarding",initialState:{isTourActive:!1},actions:n}),u=Object(i.a)(l,{selector:e=>e}),d=Object(r.a)(l)},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js");const i=()=>{const[{isTourActive:e},{setTourIsActive:t,setTourIsInactive:s}]=Object(a.b)();return[{isTourActive:e},Object(n.useMemo)((()=>({setTourIsActive:t,setTourIsInactive:s})),[t,s])]}},"./src/packages/issue/project-context-service/src/main.js":function(e,t,s){"use strict"
;s.d(t,"h",(function(){return v})),s.d(t,"f",(function(){return E})),s.d(t,"j",(function(){return k})),s.d(t,"e",(function(){return w})),s.d(t,"a",(function(){return S})),s.d(t,"b",(function(){return C})),s.d(t,"g",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"d",(function(){return P})),s.d(t,"i",(function(){return _}));var n={};s.r(n),s.d(n,"setProjectContext",(function(){return d})),s.d(n,"mergeProjectProperty",(function(){return p}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=(s("./src/packages/platform/utils/types/src/application.js"),s("./src/packages/platform/utils/types/src/edition.js"),s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),s("./node_modules/react-sweet-state/lib/esm/store/create.js")),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=(e,t)=>({setState:s})=>{s({[e]:t})},p=(e,t)=>({setState:s,getState:n})=>{const a=l(l({},n()[e]),t);s({[e]:a})},m=Object(r.a)({name:"project-context",initialState:{},actions:n}),b=Object(o.a)(m,{selector:null}),f=(e,{projectKey:t})=>e[t],g=Object(o.a)(m,{selector:f}),h=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t})
;return null==s?void 0:s.projectType}}),y=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t});return null==s?void 0:s.issueTypeHierarchy}}),O=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t});return null==s?void 0:s.projectName}});var j=s("./src/packages/issue/project-context-service/src/utils.js");const v=e=>Object(i.q)(e.split("-")[0]),E=()=>{const[,{setProjectContext:e,mergeProjectProperty:t}]=b();return[null,Object(a.useMemo)((()=>({setProjectContext:e,mergeProjectProperty:t})),[e,t])]},k=e=>{const[t]=h({projectKey:e});return t},w=e=>{const[t]=g({projectKey:e});return t},S=e=>{const[t]=g({projectKey:e});return"product_discovery"===(null==t?void 0:t.projectType)||!0===(null==t?void 0:t.isPolarisProject)},C=e=>{const[t]=g({projectKey:e});return(null==t?void 0:t.isSimplified)||!1},I=e=>{const[t]=g({projectKey:e});return null==t?void 0:t.projectId},T=(e,t=null)=>{const[s]=y({projectKey:e
}),n=null==s?void 0:s.levels,i=null==s?void 0:s.baseLevelId;return Object(a.useMemo)((()=>Object(j.b)(i,t,n)),[i,t,n])},P=e=>{const t=k(e),s=C(e);return Object(j.a)({isSimplified:s,projectType:t})},_=e=>{const[t]=O({projectKey:e});return t}},"./src/packages/issue/project-context-service/src/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js");const a=(e=null,t=null,s={})=>{if(null==t||null==e||void 0===s[t]||void 0===s[e])return null;if(t===e)return 0;let n=0,a=s[t].aboveLevelId,i=s[t].belowLevelId;for(;null!==a||null!==i;){if(n+=1,a===e)return-n;if(i===e)return n;if(a=null!==a&&s[a]?s[a].aboveLevelId:null,i=null!==i&&s[i]?s[i].belowLevelId:null,a===t||i===t)return null}return null},i="flagActions",r=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:[i],ecosystemEnabled:!0}),o=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?(()=>({
applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:[i,"cardCoverActions"],ecosystemEnabled:!0}))():r();case"business":return(()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}))();case"service_desk":return(()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}))();default:return r()}return r()}},"./src/packages/issue/project-permissions-service/src/context.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u}));var n={};s.r(n),s.d(n,"setProjectPermissions",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=(e,t)=>({setState:s})=>{s({[e]:t})},o={canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,
canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteAllWorklogs:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canDeleteOwnWorklogs:!1,canEditAllComments:!1,canEditAllWorklogs:!1,canEditIssues:!1,canEditOwnComments:!1,canEditOwnWorklogs:!1,canLinkIssues:!1,canLogWork:!1,canManageWatchers:!1,canMoveIssue:!1,canModifyReporter:!1,canScheduleIssues:!1,canUseServiceDeskAgentFeatures:!1,canBrowseUsers:!1,canViewDevTools:!1,canViewWatchers:!1,canViewVoters:!1,canCreateIssuesInClassicProjectEpic:!1,canResolveIssues:!1},c=Object(a.a)({name:"project-permissions",initialState:{},actions:n}),l=Object(i.a)(c,{selector:(e,{projectKey:t})=>e[t]||o}),u=Object(i.a)(c,{selector:null})},"./src/packages/issue/project-permissions-service/src/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"e",(function(){return l}))
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/project-permissions-service/src/context.js");const i=e=>{const[t,{setProjectPermissions:s}]=Object(a.b)({projectKey:e});return[t,Object(n.useMemo)((()=>({setProjectPermissions:s})),[s])]},r=e=>{const[t]=Object(a.b)({projectKey:e});return t.canAdministerProject},o=e=>{const t=r(e),s=(e=>{const[t]=Object(a.b)({projectKey:e});return t.canAdministerJira})(e);return t||s},c=e=>{const[t]=Object(a.b)({projectKey:e});return t.canUseServiceDeskAgentFeatures},l=()=>{const[,{setProjectPermissions:e}]=Object(a.c)();return[null,Object(n.useMemo)((()=>({setProjectPermissions:e})),[e])]}},"./src/packages/issue/smart-field-prefetch/src/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}))
;var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={assignee:null,labels:null},l={setField:(e,t,s,n,a)=>({setState:i})=>{i({[e]:{prefetchSessionId:t,prefetched:s,fieldValuePromise:a,sessionId:n}})}},u={},d=e=>(u[e]||(u[e]=(e=>Object(n.a)({name:`smart-issue-prefetch-${e}`,initialState:c,actions:l}))(e)),u[e]),p={},m=(e,{fieldId:t}={})=>e[t],b={},f=e=>(b[e]||(b[e]=Object(a.a)(d(e))),b[e]),g=(e,t)=>{if(void 0!==p[e]&&null!==p[e]){if(void 0!==p[e][t]&&null!==p[e][t])return p[e][t]
}else p[e]=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({labels:null,assignee:null},p[e]);return p[e][t]=Object(i.a)(d(e),{selector:m}),p[e][t]}},"./src/packages/issue/user-preferences-services/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function o(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={setUserPreferenceValue:(e,t)=>({setState:s,getState:n})=>{s({preferences:u(u({},n().preferences),{},{[e]:t})})},deleteUserPreferenceValue:e=>({setState:t,getState:s})=>{const n=s().preferences,{[e]:a}=n;t({preferences:o(n,[e].map(c))})},setUserPreferences:e=>({setState:t})=>{t({preferences:e})}},m=Object(i.a)({name:"user-preferences",initialState:{preferences:{}},actions:p}),b=Object(r.a)(m,{selector:(e,t)=>e.preferences[t]}),f=Object(r.a)(m,{selector:null});var g=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const h=async(e,t,s)=>Object(g.e)(`${e}/rest/api/2/mypreferences?key=${t}`,{body:s
}),y=async(e,t)=>Object(g.a)(`${e}/rest/api/2/mypreferences?key=${t}`),O=e=>{const t=Object(a.a)(),[s,{setUserPreferenceValue:i,deleteUserPreferenceValue:r}]=b(e);return[s,{setValue:Object(n.useCallback)((s=>(i(e,s),h(t,e,s))),[t,i,e]),deleteValue:Object(n.useCallback)((()=>(r(e),y(t,e))),[t,r,e])}]},j=()=>{const e=Object(a.a)(),[,t]=f();return[null,Object(n.useMemo)((()=>({setUserPreferenceValue:(s,n)=>{t.setUserPreferenceValue(s,n),h(e,s,n)},setUserPreferences:e=>{e&&0!==Object.keys(e).length&&t.setUserPreferences(e)},deleteUserPreferenceValue:s=>{t.deleteUserPreferenceValue(s),y(e,s)}})),[t,e])]}},"./src/packages/issue/workflow-transitions-services/src/context.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}))
;var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l={setState:(e={})=>({setState:t,getState:s})=>{t(o(o({},s()),e))},
setTransitionInProgress:e=>({setState:t,getState:s})=>{t({ui:o(o({},s().ui),{},{transitionInProgress:e})})}},u=Object(n.a)({name:"workflow-transitions",initialState:{data:null,loading:!1,error:null,ui:{transitionInProgress:!1}},actions:l}),d=Object(a.a)(u,{selector:e=>e}),p=Object(a.a)(u,{selector:e=>e.ui.transitionInProgress}),m=Object(a.a)(u,{selector:null}),b=Object(i.a)(u)},"./src/packages/issue/workflow-transitions-services/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/workflow-transitions-services/src/context.js");const i=()=>{const[e,{setState:t}]=Object(a.d)();return[e,t]},r=()=>{const[e]=Object(a.c)();return e},o=()=>{const[,e]=Object(a.b)();return[null,Object(n.useMemo)((()=>({setState:t=>{e.setState(t)},setTransitionInProgress:t=>{e.setTransitionInProgress(t)}})),[e])]}},
"./src/packages/issue/worklog/src/services/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),a=s("./src/packages/issue/worklog/src/services/store/index.js");const i=Object(n.a)(a.b,{selector:e=>e.isRollingUp})},"./src/packages/issue/worklog/src/services/store/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n={};s.r(n),s.d(n,"markRollingUpData",(function(){return r})),s.d(n,"unmarkRollingUpData",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const r=()=>({setState:e})=>{e({isRollingUp:!0})},o=()=>({setState:e})=>{e({isRollingUp:!1})},c=Object(a.a)({name:"worklog-time-tracking",initialState:{isRollingUp:!0},actions:n}),l=Object(i.a)(c)}}]);try{window.__jsEvalStop("async-issue-app~issue.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-issue-app~issue.75f1af35495dfed79eb2.8.js.map