try{window.performance.mark("async-upflow-iframe-plugin.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-upflow-iframe-plugin"],{"./node_modules/@atlassiansox/iframe-plugin/dist/es2019/index.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return L})),n.d(t,"e",(function(){return D}));var r=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),s=n.n(r),i=n("./node_modules/eventemitter3/index.js"),o=n.n(i);let a,c,l,u,d;function p(e,t){return{type:e,payload:t}}!function(e){e.Child="child",e.Parent="parent"}(a||(a={})),function(e){e.Handshake="handshake",e.Message="message"}(c||(c={}));class h{constructor(){s()(this,"emitter",new o.a),s()(this,"queue",[])}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}send(e,...t){this.port&&this.isReady()?this.port.postMessage(function(e,t){return p(c.Message,{type:e,
payload:t})}(e,t[0])):this.queue.push({name:e,payload:t})}dispatchQueuedMessages(){for(;this.queue.length>0;){const{name:e,payload:t}=this.queue.shift();this.send(e,...t)}}}class f extends h{constructor(e){super(),s()(this,"handshakeReceived",!1),s()(this,"onFrameLoadedEvent",(()=>{this.handshakeReceived=!1;const e=new MessageChannel;this.port=e.port1,this.port.addEventListener("message",this.onMessage),this.port.start(),this.frame.contentWindow&&this.frame.contentWindow.postMessage(p(c.Handshake),"*",[e.port2])})),s()(this,"onMessage",(e=>{const t=e.data;if(t.type===c.Handshake)return this.handshakeReceived=!0,this.dispatchQueuedMessages(),void this.emitter.emit(c.Handshake);if(t.type!==c.Message);else{const{type:e,payload:n}=t.payload;this.emitter.emit(e,n)}})),this.frame=e}connect(){this.setupFrameEventListeners()}isReady(){return this.handshakeReceived&&Boolean(this.port)}close(){this.port&&this.port.close()}setupFrameEventListeners(){
this.frame.addEventListener("load",this.onFrameLoadedEvent)}}!function(e){e.Handshake="handshake",e.Ready="ready",e.Message="message",e.AnalyticEvent="analytic-event",e.ErrorBoundary="error-boundary"}(l||(l={})),function(e){e.Error="error",e.Message="message",e.AnalyticEvent="analytic-event",e.Handshake="handshake"}(u||(u={})),function(e){e.Child="child",e.Parent="parent"}(d||(d={}));const m="__spinner_wrapper";function y(){const e=function(){const e=document.createElement("style");return document.head.appendChild(e),e}();e.sheet instanceof CSSStyleSheet&&(e.sheet.insertRule(`\n        #${m} {\n            display: flex;\n            height: 96px;\n            width: 96px;\n        }`,e.sheet.cssRules.length),
e.sheet.insertRule("\n        .__spinner_svg {\n            fill: none;\n            stroke: rgb(66, 82, 110);\n            stroke-dasharray: 270.177px;\n            stroke-dashoffset: 216.142px;\n            stroke-linecap: round;\n            stroke-width: 10px;\n            transform-origin: center center;\n            animation: 0.86s cubic-bezier(0.4, 0.15, 0.6, 0.85) 0s infinite rotation;\n        }",e.sheet.cssRules.length),e.sheet.insertRule("@keyframes velocity {\n            0% {\n                transform: rotate(50deg);\n            }\n            100% {\n                transform: rotate(230deg);\n            }\n        }",e.sheet.cssRules.length),e.sheet.insertRule("@keyframes rotation {\n            100% {\n                transform: rotate(360deg);\n            }\n        }",e.sheet.cssRules.length))}const g={focusable:"false",height:96,size:96,width:96,viewBox:"0 0 96 96"},b={cx:"48",cy:"48",r:"43"},w=e=>t=>{e.setAttribute(t[0],String(t[1]))};function v(){
const e=document.createElement("span");e.id=m,e.setAttribute("size","96");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList?t.classList.add("__spinner_svg"):t.setAttribute("class","__spinner_svg"),Object.entries(g).forEach(w(t));const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return Object.entries(b).forEach(w(n)),t.appendChild(n),e.appendChild(t),y(),e}function E(e){const t=e.modalElement||function(e){const t=document.createElement("div");return t.style.position=e.withFullscreen?"absolute":"relative",t.style.top="0",t.style.left="0",t.style.padding="0",t.style.margin="0",t.style.height="100%",t.style.width="100%",t.style.background=e.withBlanket?"rgba(7, 71, 166, 0.3)":"transparent",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex=e.modalZIndex.toString(),t}(e);let n;return e.loaderElement?(n=e.loaderElement,t.appendChild(n)):e.withLoader&&(n=v(),t.appendChild(n)),{modal:t,spinner:n
}}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let _;!function(e){e.Initialisation="initialised",e.InitialisationError="initialisationFailed",e.Handshake="handshake",e.HandshakeTimeout="handshakeTimeout",e.Ready="ready",e.ReadyTimeout="readyTimeout"}(_||(_={}));class x{constructor(e){if(s()(this,"getAnalyticsEvent",(e=>{const t={}
;return this.isInitialisationEvent(e)&&this.startTimer(),this.isTimedEvent(e)&&Object.assign(t,this.getTimestamp(e)),{context:[{source:"growthKitIframePlugin"}],payload:{eventType:"operational",action:e,actionSubject:"spaParentClient",actionSubjectId:`${this.appName}SpaParentClient`,attributes:j({appName:this.appName},t)}}})),s()(this,"getTimestamp",(e=>{const t=e===_.Handshake?"timeToHandshake":"timeToReady";if(!this.initTime)throw new Error("No initialisation time (missing initialisation event)");return{[t]:Date.now()-this.initTime}})),s()(this,"isInitialisationEvent",(e=>-1!==[_.Initialisation].indexOf(e))),s()(this,"isTimedEvent",(e=>-1!==[_.Handshake,_.Ready].indexOf(e))),s()(this,"startTimer",(()=>{this.initTime=Date.now()})),!e)throw new Error("Please pass through an appName");this.appName=e}}class I{constructor(e,t){this.methods=new Map(t),this.client=e}start(){this.client.on("__RPC_INVOKE",(e=>{const{uuid:t,name:n,args:r}=e.data;this.onMethodCall(t,n,r)})),
this.client.send("__RPC_METHODS",{methods:Array.from(this.methods.keys())})}onMethodCall(e,t,n){const r=this.methods.get(t);if(r)try{r(...n).then((t=>{this.client.send("__RPC_RESULT",{data:{uuid:e,result:t}})})).catch((()=>{this.client.send("__RPC_ERROR",{data:{uuid:e,error:"METHOD_PROMISE_REJECTED"}})}))}catch(s){this.client.send("__RPC_ERROR",{data:{uuid:e,error:"METHOD_THREW_ERROR"}})}else this.client.send("__RPC_ERROR",{data:{uuid:e,error:"NOT_IMPLEMENTED"}})}}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const S=e=>((e,t)=>t.reduce(((t,n)=>(e.forEach((e=>{const r=n?n[e]:null;t.push(r||n[e])})),t)),[]).filter(Boolean))(["source"],e),M=e=>e[e.length-1],D=e=>{const{context:t,payload:n}=e;if(!n)return null;const r=S(t),s=M(r)||"unknown",i=(e=>e.reduce(((e,t)=>{let{attributes:n}=t,r=C(t,["attributes"]);const s=R(R({},e),r);return n?R(R({},s),n):s}),{}))(t),{packageName:o,packageVersion:a}=M((e=>e.map((e=>({packageName:e.packageName,
packageVersion:e.packageVersion}))).filter((e=>e.packageName)))(t))||{},{eventType:c="ui",action:l,actionSubject:u,actionSubjectId:d,attributes:p,name:h}=n,f=R(R({packageName:o,packageVersion:a},i),p),m=n.tags||[];switch(m.push("growth"),c){case"ui":case"operational":case"track":return{eventType:c,source:s,actionSubject:u,action:l,actionSubjectId:d,attributes:f,tags:m.slice(0)};case"screen":return{eventType:c,name:h,attributes:f,source:s,tags:m.slice(0)}}return null},L=e=>t=>Promise.resolve(e).then((e=>{switch(t.eventType){case"ui":e.sendUIEvent(t);break;case"track":e.sendTrackEvent(t);break;case"operational":e.sendOperationalEvent(t);break;case"screen":e.sendScreenEvent(t)}}));class N{constructor(e=1e3,t){s()(this,"start",(()=>{this.timeoutID=window.setTimeout((()=>{this.onTimeout()}),this.delay)})),s()(this,"clear",(()=>{clearTimeout(this.timeoutID)})),this.delay=e,this.onTimeout=t}}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F{constructor(e){if(s()(this,"iframeId","__iframe_plugin_"),s()(this,"events",new o.a),s()(this,"onHandshakeTimeout",(()=>{this.emitMonitoringEvent(_.HandshakeTimeout),this.events.emit(u.Error)})),s()(this,"onReadyTimeout",(()=>{this.emitMonitoringEvent(_.ReadyTimeout),this.events.emit(u.Error)})),s()(this,"analyticCallback",(e=>{this.events.emit(u.AnalyticEvent,e)
})),s()(this,"messageCallback",(e=>{this.events.emit(u.Message,e)})),s()(this,"readyCallback",(()=>{this.timeoutReadyEvent.clear(),this.hideLoader(),this.emitMonitoringEvent(_.Ready)})),s()(this,"handshakeCallback",(()=>{this.timeoutHandshakeEvent.clear(),this.emitMonitoringEvent(_.Handshake),this.events.emit(u.Handshake)})),s()(this,"emitMonitoringEvent",(e=>{this.events.emit(u.AnalyticEvent,this.iframeEvents.getAnalyticsEvent(e))})),!e)throw new Error("Please pass through valid options");this.options=e,this.timeoutHandshakeEvent=new N(e.handshakeEventTimeoutDelayMilliSeconds,this.onHandshakeTimeout),this.timeoutReadyEvent=new N(e.readyEventTimeoutDelayMilliSeconds,this.onReadyTimeout),this.iframeEvents=new x(this.options.appName)}on(e,t){return this.events.addListener(e,t),this}off(e,t){return this.events.removeListener(e,t),this}cleanup(){this.client&&this.client.close(),this.events.removeAllListeners();const e=this.selectorEl;e&&this.modal&&e.removeChild(this.modal),
this.timeoutHandshakeEvent.clear(),this.timeoutReadyEvent.clear(),delete this.selectorEl,delete this.modal,delete this.iframeEl}registerMessageListener(){this.client&&(this.client.on(l.Message,this.messageCallback),this.client.on(l.AnalyticEvent,this.analyticCallback),this.client.on(l.Handshake,this.handshakeCallback),this.client.on(l.Ready,this.readyCallback))}constructIframe(e){if(!e)throw new Error("No dom element found");this.selectorEl=e;const{modal:t,spinner:n}=E(H(H({},this.options),{},{modalZIndex:this.options.modalZIndex||200}));this.modal=t,this.spinner=n;const r=function(e,t,n){const[r,s]=e.split("#"),i=-1===r.indexOf("?")?"?":"&";return`${r}${i}${encodeURIComponent(t)}=${encodeURIComponent(n)}${s?`#${s}`:""}`}(this.options.src,"_c","2");this.iframeEl=function(e){const t=document.createElement("iframe");return t.src=e.src,t.height="100%",t.width="100%",t.id=e.id,t.style.display=e.withLoader?"none":"block",t.style.borderWidth="0",t.style.zIndex=e.zIndex.toString(),t}({
src:String(r),zIndex:this.options.iframeZIndex||200,id:this.iframeId,withLoader:Boolean(this.options.withLoader)||Boolean(this.options.loaderElement)}),this.modal.appendChild(this.iframeEl),e.appendChild(this.modal)}hideLoader(){this.spinner&&(this.spinner.style.display="none"),this.iframeEl&&this.modal&&(this.iframeEl.style.display="block",this.modal.style.background="transparent")}postMessage(e){this.client&&this.client.send(l.Message,e)}init({containerElement:e,rpcMethods:t}){try{this.emitMonitoringEvent(_.Initialisation),this.constructIframe(e),this.initialiseTransport(),this.initialiseRpc(t),this.registerMessageListener(),this.timeoutHandshakeEvent.start(),this.timeoutReadyEvent.start()}catch(n){throw this.emitMonitoringEvent(_.InitialisationError),this.events.emit(u.Error),n}}initialiseTransport(){if(!this.iframeEl)throw new Error("initialiseTransport should be called after iframe is created");this.client=new f(this.iframeEl),this.client.connect()}initialiseRpc(e=[]){
if(!this.client)throw new Error("initialiseRpc should be called after client is instantiated");this.rpc=new I(this.client,e),this.rpc.start()}}n("./node_modules/@babel/runtime/helpers/extends.js"),n("./node_modules/react/index.js");let $;!function(e){e[e.string=0]="string",e[e.object=1]="object"}($||($={}))},"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,s="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,r||e,i),c=s?s+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),l.prototype.eventNames=function(){var e,t,n=[]
;if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=s?s+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},l.prototype.listenerCount=function(e){var t=s?s+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,r,i,o){var a=s?s+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,i),!0;case 6:return u.fn.call(u.context,t,n,r,i,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length
;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,r);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,r){var i=s?s+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||c(this,i);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==t||r&&!o[a].once||n&&o[a].context!==n)&&l.push(o[a]);l.length?this._events[i]=1===l.length?l[0]:l:c(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&c(this,t)):(this._events=new i,this._eventsCount=0),this},
l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=s,l.EventEmitter=l,e.exports=l},"./src/packages/common-legacy-do-not-add-anything-new/src/util/editions/get-product-edition/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./src/packages/platform/utils/types/src/application-key.js");const s=(e,t)=>e===r.c?t.appEditions.software:e===r.b?t.appEditions.serviceDesk:t.appEditions.core},"./src/packages/growth/up-flow/up-flow-iframe/src/main.js":function(t,n,r){"use strict"
;var s=r("./node_modules/react/index.js"),i=r("./node_modules/lodash/noop.js"),o=r.n(i),a=r("./node_modules/@atlassiansox/iframe-plugin/dist/es2019/index.js"),c=r("./node_modules/query-string/index.js"),l=r("./src/packages/common-legacy-do-not-add-anything-new/src/util/editions/get-product-edition/index.js"),u=r("./src/packages/platform/ui/jira-experience-tracker/src/ui/experience-success/main.js"),d=r("./src/packages/platform/ui/jira-experience-tracker/src/ui/experience-fail/main.js"),p=r("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),h=r("./node_modules/react-dom/index.js"),f=r.n(h),m=r("./node_modules/lodash/pick.js"),y=r.n(m),g=r("./src/packages/platform/observability/product-analytics-web-client/src/async.js"),b=r("./src/packages/platform/utils/fetch/src/utils/requests.js"),w=r("./src/packages/platform/utils/types/src/edition.js");const v=()=>Date.now();function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const j=e=>new a.b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({appName:"upFlowSpa",withFullscreen:!0,modalZIndex:3200,handshakeEventTimeoutDelayMilliSeconds:5e3,readyEventTimeoutDelayMilliSeconds:1e4},e));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}
return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x=t=>{const{src:n,subRoute:r="",onClose:s,onOpen:i,onSuccess:o,onFail:c,currentEdition:l,baseUrl:u,product:d,doc:p=document,win:h=window}=t,m=((e,t)=>{if("engaged-upgrade"===e||"engaged-billing"===e)return{withBlanket:!1,withLoader:!1,modalElement:(e=>{const t=e.createElement("div");return t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.padding="0",t.style.margin="0",t.style.height="100%",t.style.width="100%",t.style.background="transparent",t.style.display="none",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex="3200",t})(t)};return{withBlanket:!0,withLoader:!0}})(r,p),E=j(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){_(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({src:`${n}#/${r}`},m)),O=(e=>{const t=e.createElement("div");return t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.padding="0",t.style.margin="0",t.style.height="100%",t.style.width="100%",t.style.zIndex="3200",t})(p);return p.body&&p.body.appendChild(O),E.init({containerElement:O}),E.on(a.a.Message,(async t=>{if("INITIATE_SPA_CLOSE"===t.type)return o&&o(),t.editionChanged||t.reloadWindow?void h.location.reload():(E.cleanup(),f.a.unmountComponentAtNode(O),p.body&&p.body.removeChild(O),void s(t.flagType?y()(t,["flagType"]):void 0));"VIEWED_UPFLOW_TRIAL_ERROR_SCREEN"===t.type&&c&&c("VIEWED_UPFLOW_TRIAL_ERROR_SCREEN",new Error("Failed to start a trial")),"VIEWED_UPFLOW_TRIAL_STARTED_SCREEN"===t.type&&o&&o(),"START_EDITION_POLLING"===t.type&&await(async(t,n,r)=>{
const s=new Date(v()+6e5).getTime(),i=async(o,a)=>{v()>s&&a(new Error("TIMEOUT"));try{const e=await Object(b.b)(`${n}/rest/internal/latest/meta/edition`),s=Object(w.e)(e[r]);if(s!==t)return void o(s);setTimeout((()=>{i(o,a)}),3e3)}catch(e){setTimeout((()=>{i(o,a)}),3e3)}};return new Promise(((e,t)=>{i(e,t)}))})(l,u,d).then((e=>{E.postMessage({type:"FINISH_EDITION_POLLING",edition:e})})).catch((e=>{E.postMessage({type:"FINISH_EDITION_POLLING",error:e}),c&&c("START_EDITION_POLLING",e)})),"SPA_READY"===t.type&&(m.modalElement&&(m.modalElement.style.display="flex"),i&&i(t))})),E.on(a.a.AnalyticEvent,(async e=>{const t=Object(a.e)(e),n=await Object(g.a)();Object(a.c)(n.getInstance())(t)})),E};var I=r("./src/packages/growth/up-flow/up-flow-iframe/src/utils.js");const P=e=>{
const t=Object(p.c)(),[n,r]=Object(s.useState)(document.body?document.body.style.overflow:""),{targetEdition:i,product:a,flow:h,touchpointId:f,onClose:m,onOpen:y,subRoute:g,experienceTrackingEnabled:b=!1}=e,w=Object(l.a)(a,t),v=Object(c.stringify)({currentEdition:Object(I.a)(w),targetEdition:Object(I.a)(i),cloudId:t.cloudId,locale:t.locale,product:a,flow:h,touchpointId:f,canChangeEdition:t.isSiteAdmin}),E=Object(s.useRef)(null),O={currentEdition:w,targetEdition:i},j=Object(u.b)({experience:"upsell-edition",attributes:O}),k=Object(d.a)({experience:"upsell-edition",attributes:O});return Object(s.useEffect)((()=>{E.current||(E.current=x({src:`/gpa-up-flow/?${v}`,subRoute:g,onClose:m,onOpen:y,onSuccess:b?j:o.a,onFail:b?k:o.a,currentEdition:w,baseUrl:t.baseUrl,product:a}))}),[m,y,j,k,w,t.baseUrl,a,v,g,b]),Object(s.useEffect)((()=>{const{body:e}=document;return null!==e&&(r(e.style.overflow),e.style.overflow="hidden"),()=>{document.body&&(document.body.style.overflow=n)}}),[n]),null}
;P.displayName="UpFlowIFrame";n.a=P},"./src/packages/growth/up-flow/up-flow-iframe/src/utils.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("./src/packages/platform/utils/types/src/edition.js");const s=e=>e===r.a?"free":e===r.c?"standard":"premium"},"./src/packages/growth/up-flow/upflow-iframe-plugin/src/controllers/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),s=n("./node_modules/react-sweet-state/lib/esm/components/subscriber.js"),i=n("./node_modules/react-sweet-state/lib/esm/components/container.js"),o=n("./node_modules/react-sweet-state/lib/esm/components/hook.js");const a={renderUpflowModal:!1,product:"jira-software",touchpointId:"",flow:"learn-more",onClose:()=>{},targetEdition:n("./src/packages/platform/utils/types/src/edition.js").a},c=Object(r.a)({name:"upflow-modal-store",initialState:a,actions:{
mountUpflowModal:({targetEdition:e,product:t,flow:n,touchpointId:r,subRoute:s,onClose:i,onOpen:o})=>({setState:a})=>{a({targetEdition:e,product:t,flow:n,touchpointId:r,subRoute:s,onClose:i,onOpen:o,renderUpflowModal:!0})},unMountUpflowModal:()=>({setState:e})=>{e({renderUpflowModal:!1})}}}),l=(Object(s.a)(c),Object(i.a)(c),Object(o.a)(c))},"./src/packages/growth/up-flow/upflow-iframe-plugin/src/main.js":function(e,t,n){"use strict";n.r(t),n.d(t,"UpflowIframeComponent",(function(){return h}));var r=n("./node_modules/react/index.js"),s=n.n(r),i=n("./src/packages/platform/ui/error-boundary/src/main.js"),o=n("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),a=n("./src/packages/platform/ui/jira-experience-tracker/src/ui/experience-start/main.js"),c=n("./src/packages/platform/ui/jira-experience-tracker/src/ui/experience-fail/main.js"),l=n("./src/packages/platform/services/non-critical/src/index.js");const u="upsell-edition"
;var d=n("./src/packages/growth/up-flow/up-flow-iframe/src/main.js"),p=n("./src/packages/growth/up-flow/upflow-iframe-plugin/src/controllers/index.js");const h=()=>{const[{renderUpflowModal:e,targetEdition:t,product:n,flow:r,touchpointId:h,subRoute:f,onClose:m,onOpen:y},{unMountUpflowModal:g}]=Object(p.a)(),b=Object(a.b)({experience:u,experienceId:h,analyticsSource:"upflowIFrame"}),w=Object(c.a)({experience:u,attributes:{targetEdition:t}});if(!e)return null;return b(),s.a.createElement(l.c,null,s.a.createElement(i.a,{id:"upflowIframeComponent",packageName:"jiraUpflowIframePlugin",onError:w},s.a.createElement(o.a,{id:"upflowIframeComponent",packageName:"jiraUpflowIframePlugin"},s.a.createElement(d.a,{product:n,targetEdition:t,flow:r,touchpointId:h,experienceTrackingEnabled:!0,onClose:m||(()=>{g()}),subRoute:f,onOpen:y||void 0}))))};h.displayName="UpflowIframeComponent"}}]);try{window.__jsEvalStop("async-upflow-iframe-plugin.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-upflow-iframe-plugin.c9b4b2e656eac0eef5fc.8.js.map