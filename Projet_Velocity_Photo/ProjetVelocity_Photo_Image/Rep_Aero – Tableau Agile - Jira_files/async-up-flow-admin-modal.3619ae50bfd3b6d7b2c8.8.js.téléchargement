try{window.performance.mark("async-up-flow-admin-modal.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-up-flow-admin-modal"],{"./node_modules/@atlassiansox/engagekit/dist/esm/coordination/coordination-client.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var s=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(s),i=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),o=n.n(i),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(a),l=n("./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),p=n.n(d),h=n("./node_modules/@atlassiansox/engagekit/dist/esm/services/engage-targeting.js"),m=function(){function e(t,n){if(c()(this,e),p()(this,"cloudId",void 0),p()(this,"stargateUrl",void 0),!t||!n)throw new Error("Need a valid CloudId and Stargate url");this.cloudId=t,this.stargateUrl=n}return u()(e,[{key:"start",value:function(){
var e=o()(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(h.d)(this.cloudId,this.stargateUrl,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=o()(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(h.e)(this.cloudId,this.stargateUrl,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},"./node_modules/@atlassiansox/engagekit/dist/esm/coordination/coordination.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return E}))
;var s=n("./node_modules/@babel/runtime/regenerator/index.js"),r=n.n(s),i=n("./node_modules/@babel/runtime/helpers/asyncToGenerator.js"),o=n.n(i),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),c=n.n(a),l=n("./node_modules/@babel/runtime/helpers/createClass.js"),u=n.n(l),d=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),p=n.n(d),h=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),m=n.n(h),f=n("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),g=n.n(f),y=n("./node_modules/@babel/runtime/helpers/inherits.js"),b=n.n(y),w=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),v=n.n(w),j=n("./node_modules/react/index.js"),E=function(e){function t(){var e,n;c()(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=p()(this,(e=m()(t)).call.apply(e,[this].concat(i))),v()(g()(n),"state",{shouldRenderChildren:!1}),v()(g()(n),"stop",o()(r.a.mark((function e(){var t,s,i
;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,s=t.client,i=t.messageId,e.prev=1,e.next=4,s.stop(i);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Unable to stop flow message ".concat(i,". ").concat(e.t0));case 9:case"end":return e.stop()}}),e,this,[[1,6]])})))),n}return b()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=o()(r.a.mark((function e(){var t,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.client,s=t.messageId,e.prev=1,e.next=4,n.start(s);case 4:e.sent&&this.setState({shouldRenderChildren:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Unable to start flow message ".concat(s,". ").concat(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"injectStop",value:function(e){return Object(j.cloneElement)(e,{stop:this.stop})}},{key:"render",value:function(){
var e=this.props,t=e.fallback,n=e.children;return this.state.shouldRenderChildren?this.injectStop(n):t}}]),t}(j.PureComponent);v()(E,"defaultProps",{fallback:null})},"./node_modules/@atlassiansox/iframe-plugin/dist/es2019/index.js":function(e,t,n){"use strict";n.d(t,"b",(function(){return F})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return M})),n.d(t,"e",(function(){return N}));var s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),r=n.n(s),i=n("./node_modules/eventemitter3/index.js"),o=n.n(i);let a,c,l,u,d;function p(e,t){return{type:e,payload:t}}!function(e){e.Child="child",e.Parent="parent"}(a||(a={})),function(e){e.Handshake="handshake",e.Message="message"}(c||(c={}));class h{constructor(){r()(this,"emitter",new o.a),r()(this,"queue",[])}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}send(e,...t){this.port&&this.isReady()?this.port.postMessage(function(e,t){return p(c.Message,{type:e,
payload:t})}(e,t[0])):this.queue.push({name:e,payload:t})}dispatchQueuedMessages(){for(;this.queue.length>0;){const{name:e,payload:t}=this.queue.shift();this.send(e,...t)}}}class m extends h{constructor(e){super(),r()(this,"handshakeReceived",!1),r()(this,"onFrameLoadedEvent",(()=>{this.handshakeReceived=!1;const e=new MessageChannel;this.port=e.port1,this.port.addEventListener("message",this.onMessage),this.port.start(),this.frame.contentWindow&&this.frame.contentWindow.postMessage(p(c.Handshake),"*",[e.port2])})),r()(this,"onMessage",(e=>{const t=e.data;if(t.type===c.Handshake)return this.handshakeReceived=!0,this.dispatchQueuedMessages(),void this.emitter.emit(c.Handshake);if(t.type!==c.Message);else{const{type:e,payload:n}=t.payload;this.emitter.emit(e,n)}})),this.frame=e}connect(){this.setupFrameEventListeners()}isReady(){return this.handshakeReceived&&Boolean(this.port)}close(){this.port&&this.port.close()}setupFrameEventListeners(){
this.frame.addEventListener("load",this.onFrameLoadedEvent)}}!function(e){e.Handshake="handshake",e.Ready="ready",e.Message="message",e.AnalyticEvent="analytic-event",e.ErrorBoundary="error-boundary"}(l||(l={})),function(e){e.Error="error",e.Message="message",e.AnalyticEvent="analytic-event",e.Handshake="handshake"}(u||(u={})),function(e){e.Child="child",e.Parent="parent"}(d||(d={}));const f="__spinner_wrapper";function g(){const e=function(){const e=document.createElement("style");return document.head.appendChild(e),e}();e.sheet instanceof CSSStyleSheet&&(e.sheet.insertRule(`\n        #${f} {\n            display: flex;\n            height: 96px;\n            width: 96px;\n        }`,e.sheet.cssRules.length),
e.sheet.insertRule("\n        .__spinner_svg {\n            fill: none;\n            stroke: rgb(66, 82, 110);\n            stroke-dasharray: 270.177px;\n            stroke-dashoffset: 216.142px;\n            stroke-linecap: round;\n            stroke-width: 10px;\n            transform-origin: center center;\n            animation: 0.86s cubic-bezier(0.4, 0.15, 0.6, 0.85) 0s infinite rotation;\n        }",e.sheet.cssRules.length),e.sheet.insertRule("@keyframes velocity {\n            0% {\n                transform: rotate(50deg);\n            }\n            100% {\n                transform: rotate(230deg);\n            }\n        }",e.sheet.cssRules.length),e.sheet.insertRule("@keyframes rotation {\n            100% {\n                transform: rotate(360deg);\n            }\n        }",e.sheet.cssRules.length))}const y={focusable:"false",height:96,size:96,width:96,viewBox:"0 0 96 96"},b={cx:"48",cy:"48",r:"43"},w=e=>t=>{e.setAttribute(t[0],String(t[1]))};function v(){
const e=document.createElement("span");e.id=f,e.setAttribute("size","96");const t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.classList?t.classList.add("__spinner_svg"):t.setAttribute("class","__spinner_svg"),Object.entries(y).forEach(w(t));const n=document.createElementNS("http://www.w3.org/2000/svg","circle");return Object.entries(b).forEach(w(n)),t.appendChild(n),e.appendChild(t),g(),e}function j(e){const t=e.modalElement||function(e){const t=document.createElement("div");return t.style.position=e.withFullscreen?"absolute":"relative",t.style.top="0",t.style.left="0",t.style.padding="0",t.style.margin="0",t.style.height="100%",t.style.width="100%",t.style.background=e.withBlanket?"rgba(7, 71, 166, 0.3)":"transparent",t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex=e.modalZIndex.toString(),t}(e);let n;return e.loaderElement?(n=e.loaderElement,t.appendChild(n)):e.withLoader&&(n=v(),t.appendChild(n)),{modal:t,spinner:n
}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let k;!function(e){e.Initialisation="initialised",e.InitialisationError="initialisationFailed",e.Handshake="handshake",e.HandshakeTimeout="handshakeTimeout",e.Ready="ready",e.ReadyTimeout="readyTimeout"}(k||(k={}));class x{constructor(e){if(r()(this,"getAnalyticsEvent",(e=>{const t={}
;return this.isInitialisationEvent(e)&&this.startTimer(),this.isTimedEvent(e)&&Object.assign(t,this.getTimestamp(e)),{context:[{source:"growthKitIframePlugin"}],payload:{eventType:"operational",action:e,actionSubject:"spaParentClient",actionSubjectId:`${this.appName}SpaParentClient`,attributes:O({appName:this.appName},t)}}})),r()(this,"getTimestamp",(e=>{const t=e===k.Handshake?"timeToHandshake":"timeToReady";if(!this.initTime)throw new Error("No initialisation time (missing initialisation event)");return{[t]:Date.now()-this.initTime}})),r()(this,"isInitialisationEvent",(e=>-1!==[k.Initialisation].indexOf(e))),r()(this,"isTimedEvent",(e=>-1!==[k.Handshake,k.Ready].indexOf(e))),r()(this,"startTimer",(()=>{this.initTime=Date.now()})),!e)throw new Error("Please pass through an appName");this.appName=e}}class I{constructor(e,t){this.methods=new Map(t),this.client=e}start(){this.client.on("__RPC_INVOKE",(e=>{const{uuid:t,name:n,args:s}=e.data;this.onMethodCall(t,n,s)})),
this.client.send("__RPC_METHODS",{methods:Array.from(this.methods.keys())})}onMethodCall(e,t,n){const s=this.methods.get(t);if(s)try{s(...n).then((t=>{this.client.send("__RPC_RESULT",{data:{uuid:e,result:t}})})).catch((()=>{this.client.send("__RPC_ERROR",{data:{uuid:e,error:"METHOD_PROMISE_REJECTED"}})}))}catch(r){this.client.send("__RPC_ERROR",{data:{uuid:e,error:"METHOD_THREW_ERROR"}})}else this.client.send("__RPC_ERROR",{data:{uuid:e,error:"NOT_IMPLEMENTED"}})}}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const R=e=>((e,t)=>t.reduce(((t,n)=>(e.forEach((e=>{const s=n?n[e]:null;t.push(s||n[e])})),t)),[]).filter(Boolean))(["source"],e),S=e=>e[e.length-1],N=e=>{const{context:t,payload:n}=e;if(!n)return null;const s=R(t),r=S(s)||"unknown",i=(e=>e.reduce(((e,t)=>{let{attributes:n}=t,s=D(t,["attributes"]);const r=P(P({},e),s);return n?P(P({},r),n):r}),{}))(t),{packageName:o,packageVersion:a}=S((e=>e.map((e=>({packageName:e.packageName,
packageVersion:e.packageVersion}))).filter((e=>e.packageName)))(t))||{},{eventType:c="ui",action:l,actionSubject:u,actionSubjectId:d,attributes:p,name:h}=n,m=P(P({packageName:o,packageVersion:a},i),p),f=n.tags||[];switch(f.push("growth"),c){case"ui":case"operational":case"track":return{eventType:c,source:r,actionSubject:u,action:l,actionSubjectId:d,attributes:m,tags:f.slice(0)};case"screen":return{eventType:c,name:h,attributes:m,source:r,tags:f.slice(0)}}return null},M=e=>t=>Promise.resolve(e).then((e=>{switch(t.eventType){case"ui":e.sendUIEvent(t);break;case"track":e.sendTrackEvent(t);break;case"operational":e.sendOperationalEvent(t);break;case"screen":e.sendScreenEvent(t)}}));class A{constructor(e=1e3,t){r()(this,"start",(()=>{this.timeoutID=window.setTimeout((()=>{this.onTimeout()}),this.delay)})),r()(this,"clear",(()=>{clearTimeout(this.timeoutID)})),this.delay=e,this.onTimeout=t}}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class F{constructor(e){if(r()(this,"iframeId","__iframe_plugin_"),r()(this,"events",new o.a),r()(this,"onHandshakeTimeout",(()=>{this.emitMonitoringEvent(k.HandshakeTimeout),this.events.emit(u.Error)})),r()(this,"onReadyTimeout",(()=>{this.emitMonitoringEvent(k.ReadyTimeout),this.events.emit(u.Error)})),r()(this,"analyticCallback",(e=>{this.events.emit(u.AnalyticEvent,e)
})),r()(this,"messageCallback",(e=>{this.events.emit(u.Message,e)})),r()(this,"readyCallback",(()=>{this.timeoutReadyEvent.clear(),this.hideLoader(),this.emitMonitoringEvent(k.Ready)})),r()(this,"handshakeCallback",(()=>{this.timeoutHandshakeEvent.clear(),this.emitMonitoringEvent(k.Handshake),this.events.emit(u.Handshake)})),r()(this,"emitMonitoringEvent",(e=>{this.events.emit(u.AnalyticEvent,this.iframeEvents.getAnalyticsEvent(e))})),!e)throw new Error("Please pass through valid options");this.options=e,this.timeoutHandshakeEvent=new A(e.handshakeEventTimeoutDelayMilliSeconds,this.onHandshakeTimeout),this.timeoutReadyEvent=new A(e.readyEventTimeoutDelayMilliSeconds,this.onReadyTimeout),this.iframeEvents=new x(this.options.appName)}on(e,t){return this.events.addListener(e,t),this}off(e,t){return this.events.removeListener(e,t),this}cleanup(){this.client&&this.client.close(),this.events.removeAllListeners();const e=this.selectorEl;e&&this.modal&&e.removeChild(this.modal),
this.timeoutHandshakeEvent.clear(),this.timeoutReadyEvent.clear(),delete this.selectorEl,delete this.modal,delete this.iframeEl}registerMessageListener(){this.client&&(this.client.on(l.Message,this.messageCallback),this.client.on(l.AnalyticEvent,this.analyticCallback),this.client.on(l.Handshake,this.handshakeCallback),this.client.on(l.Ready,this.readyCallback))}constructIframe(e){if(!e)throw new Error("No dom element found");this.selectorEl=e;const{modal:t,spinner:n}=j(H(H({},this.options),{},{modalZIndex:this.options.modalZIndex||200}));this.modal=t,this.spinner=n;const s=function(e,t,n){const[s,r]=e.split("#"),i=-1===s.indexOf("?")?"?":"&";return`${s}${i}${encodeURIComponent(t)}=${encodeURIComponent(n)}${r?`#${r}`:""}`}(this.options.src,"_c","2");this.iframeEl=function(e){const t=document.createElement("iframe");return t.src=e.src,t.height="100%",t.width="100%",t.id=e.id,t.style.display=e.withLoader?"none":"block",t.style.borderWidth="0",t.style.zIndex=e.zIndex.toString(),t}({
src:String(s),zIndex:this.options.iframeZIndex||200,id:this.iframeId,withLoader:Boolean(this.options.withLoader)||Boolean(this.options.loaderElement)}),this.modal.appendChild(this.iframeEl),e.appendChild(this.modal)}hideLoader(){this.spinner&&(this.spinner.style.display="none"),this.iframeEl&&this.modal&&(this.iframeEl.style.display="block",this.modal.style.background="transparent")}postMessage(e){this.client&&this.client.send(l.Message,e)}init({containerElement:e,rpcMethods:t}){try{this.emitMonitoringEvent(k.Initialisation),this.constructIframe(e),this.initialiseTransport(),this.initialiseRpc(t),this.registerMessageListener(),this.timeoutHandshakeEvent.start(),this.timeoutReadyEvent.start()}catch(n){throw this.emitMonitoringEvent(k.InitialisationError),this.events.emit(u.Error),n}}initialiseTransport(){if(!this.iframeEl)throw new Error("initialiseTransport should be called after iframe is created");this.client=new m(this.iframeEl),this.client.connect()}initialiseRpc(e=[]){
if(!this.client)throw new Error("initialiseRpc should be called after client is instantiated");this.rpc=new I(this.client,e),this.rpc.start()}}n("./node_modules/@babel/runtime/helpers/extends.js"),n("./node_modules/react/index.js");let B;!function(e){e[e.string=0]="string",e[e.object=1]="object"}(B||(B={}))},"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";var s=Object.prototype.hasOwnProperty,r="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,s,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,s||e,i),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,t,n=[]
;if(0===this._eventsCount)return n;for(t in e=this._events)s.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o},l.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,s,i,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,s),!0;case 5:return u.fn.call(u.context,t,n,s,i),!0;case 6:return u.fn.call(u.context,t,n,s,i,o),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var p,h=u.length
;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,s);break;default:if(!c)for(p=1,c=new Array(d-1);p<d;p++)c[p-1]=arguments[p];u[l].fn.apply(u[l].context,c)}}return!0},l.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,s){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||s&&!o.once||n&&o.context!==n||c(this,i);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==t||s&&!o[a].once||n&&o[a].context!==n)&&l.push(o[a]);l.length?this._events[i]=1===l.length?l[0]:l:c(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&c(this,t)):(this._events=new i,this._eventsCount=0),this},
l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l},"./src/packages/common-legacy-do-not-add-anything-new/src/growth-experiments/user-in-english-locale.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const r=()=>{const e=Object(s.d)("ajs-user-locale");return!!e&&"string"==typeof e&&-1!==e.toLowerCase().indexOf("en",0)}},"./src/packages/common-legacy-do-not-add-anything-new/src/util/editions/get-product-edition/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("./src/packages/platform/utils/types/src/application-key.js");const r=(e,t)=>e===s.c?t.appEditions.software:e===s.b?t.appEditions.serviceDesk:t.appEditions.core},"./src/packages/common-legacy-do-not-add-anything-new/src/util/get-explicitly-licensed-products/index.js":function(e,t,n){"use strict"
;var s=n("./src/packages/platform/utils/types/src/application-key.js");t.a=e=>{const t=e.licensedProducts,n=[];return t[s.a]&&n.push(s.a),t[s.b]&&n.push(s.b),t[s.c]&&n.push(s.c),n}},"./src/packages/engagement/src/ui/coordination-client/index.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var s=n("./node_modules/react/index.js"),r=n.n(s),i=n("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/coordination-client.js"),o=n("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/coordination.js"),a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");class l extends i.a{constructor(e,t,n=!1){super(e,t),this.shouldUseMockClient=void 0,this.isDebugModeEnabled=void 0,this.shouldUseMockClient=(()=>"true"===Object(a.d)("ajs-is-synthetic"))()&&!n,
this.isDebugModeEnabled=(()=>Object(a.b)("ep-external-message-debug-mode",!1))()}async start(e){if(this.isDebugModeEnabled){const t=await super.start(e),n=confirm(`\ud83d\udc1e \ud835\uddd8\ud835\udde3 \ud835\uddd8\ud835\ude05\ud835\ude01\ud835\uddf2\ud835\uddff\ud835\uddfb\ud835\uddee\ud835\uddf9 \ud835\udde0\ud835\uddf2\ud835\ude00\ud835\ude00\ud835\uddee\ud835\uddf4\ud835\uddf2 \ud835\uddd7\ud835\uddf2\ud835\uddef\ud835\ude02\ud835\uddf4\ud835\uddf4\ud835\uddf2\ud835\uddff\n\nMessage ID: ${e}\nStart call server response: ${t}\n\nDo you want to display the message?`);return n||await super.stop(e),n}return!this.shouldUseMockClient&&super.start(e)}async stop(e){return!!this.shouldUseMockClient||super.stop(e)}}class u extends s.Component{constructor(...e){super(...e),this.client=null}UNSAFE_componentWillMount(){const{cloudId:e}=Object(c.c)();this.client=new l(e,"/gateway/api",this.props.shouldAllowOnSynthetic)}render(){const{messageId:e}=this.props;return r.a.createElement(o.a,{
client:this.client,messageId:e},this.props.children)}}u.displayName="CoordinationClientComponent"},"./src/packages/growth/up-flow/up-flow-admin-modal/src/index.js":function(e,t,n){"use strict";n.r(t);var s=n("./src/packages/growth/up-flow/up-flow-admin-modal/src/ui/main.js");n.d(t,"default",(function(){return s.a}));var r=n("./src/packages/growth/up-flow/up-flow-admin-modal/src/common/constants.js");n.d(t,"ENGAGED_ADMINS_PROJECT_SCREEN_TOUCH_POINT_ID",(function(){return r.e})),n.d(t,"ENGAGED_ADMINS_CLASSIC_BOARD_SCREEN_TOUCH_POINT_ID",(function(){return r.b})),n.d(t,"ENGAGED_ADMINS_NEXTGEN_BOARD_SCREEN_TOUCH_POINT_ID",(function(){return r.d})),n.d(t,"ENGAGED_ADMINS_CLASSIC_BACKLOG_SCREEN_TOUCH_POINT_ID",(function(){return r.a})),n.d(t,"ENGAGED_ADMINS_NEXTGEN_BACKLOG_SCREEN_TOUCH_POINT_ID",(function(){return r.c}))},"./src/packages/growth/up-flow/up-flow-admin-modal/src/main.js":function(e,t,n){"use strict";n.r(t)
;var s=n("./src/packages/growth/up-flow/up-flow-admin-modal/src/ui/main.js");n.d(t,"default",(function(){return s.a}))},"./src/packages/growth/up-flow/up-flow-admin-modal/src/ui/main.js":function(e,t,n){"use strict";var s=n("./node_modules/react/index.js"),r=n.n(s),i=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-explicitly-licensed-products/index.js"),o=n("./src/packages/platform/utils/types/src/application-key.js"),a=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const l="experiment",u="not-enrolled",d="control",p=e=>Object(c.a)().getVariantValue("confluence.frontend.growth.experiments.engaged.upgrade",{default:u,oneOf:[u,d,l],shouldTrackExposureEvent:e}),h=e=>Object(c.a)().getVariantValue("confluence.frontend.growth.experiments.engaged.billing",{default:u,oneOf:[u,d,l],shouldTrackExposureEvent:e})
;var m=n("./src/packages/common-legacy-do-not-add-anything-new/src/growth-experiments/user-in-english-locale.js"),f=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/editions/get-product-edition/index.js"),g=n("./src/packages/platform/utils/types/src/edition.js"),y=n("./src/packages/growth/up-flow/up-flow-common/src/types.js"),b=n("./src/packages/growth/up-flow/up-flow-iframe/src/main.js"),w=n("./src/packages/engagement/src/ui/coordination-client/index.js");var v=({cloudId:e,messageId:t,onStart:n,isEligible:r})=>{const[i,o]=Object(s.useState)(!1),a=Object(s.useMemo)((()=>new w.a(e,"/gateway/api")),[e]);Object(s.useEffect)((()=>{(async()=>{if(i||!r)return;let e=!1;try{e=await a.start(t)}catch(s){return}if(e){if(await n())return void o(!0);try{await a.stop(t)}catch(s){}}})()}),[a,r,t,n,i]);return[{started:i},{stop:async(e=!1)=>{if(e||i)try{await a.stop(t)}catch(n){}}}]},j=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js")
;const E=({onCloseModal:e,touchpointId:t,UpFlowIFrame:n=b.a})=>{const i=Object(m.a)(),c=Object(a.c)(),{cloudId:l}=c,u=Object(f.a)(o.c,c),d=Object(s.useMemo)((()=>(e=>{const t=Object(j.b)(`engagedUpgrade_${e}`);return{getDismissedCount:()=>{const e=t.get("dismissedCount");return e?parseInt(e,10):0},setDismissedCount:e=>t.set("dismissedCount",e),getLastDismissedDate:()=>{const e=t.get("lastDismissedDate");return e?parseInt(e,10):0},setLastDismissedDate:()=>t.set("lastDismissedDate",Date.now())}})(l)),[l]),h=((e=0,t=0)=>{const n=Date.now();return!(e>=3||0!==e&&!(1===e?n-t>1728e5:2===e&&n-t>6048e5))})(d.getDismissedCount(),d.getLastDismissedDate()),w=d.getDismissedCount()>=3,E=u===g.a&&h&&!w&&i,[{started:O},{stop:_}]=v({isEligible:E,onStart:()=>{(()=>{p(!0)})();const e=p(!1);return Promise.resolve("experiment"===e)},cloudId:l,messageId:"upflow-jira-upgrade-for-admins"});if(!O)return null;return r.a.createElement(n,{product:o.c,targetEdition:g.c,flow:y.f,touchpointId:t,onClose:()=>{
const t=d.getDismissedCount();d.setDismissedCount(t+1),d.setLastDismissedDate(),_(),e()},subRoute:"engaged-upgrade"})};E.displayName="UpflowEngagedAdminExperimentModal";var O=E;const _=e=>{const t=Object(j.b)(`engagedBilling_${e}`);return{getDisplaysNextAt:()=>{const e=t.get("displaysNextAt");return e?((e,t=0)=>{const n=parseInt(e,10);return Number.isNaN(n)?t:n})(e,10):0},setDisplaysNextAt:e=>t.set("displaysNextAt",e),getHasPaymentMethod:()=>"true"===t.get("hasPaymentMethod"),setHasPaymentMethod:()=>t.set("hasPaymentMethod","true"),isBillingApiCacheForControlStale:()=>{const e=t.get("billingApiForControlNextCalledAt");if(!e)return!0;const n=parseInt(e,10);return!!Number.isNaN(n)||n<(new Date).getTime()},setBillingApiForControlNextCalledAt:()=>{const e=(new Date).getTime()+1728e5;t.set("billingApiForControlNextCalledAt",e)}}},k=async(e,t,n)=>{const s="control"===e;if(s&&!t.isBillingApiCacheForControlStale())return t.getHasPaymentMethod();return await(async e=>{
const t=`/gateway/api/billing-ux/cloud/${e}/billing/billing-details`;try{const e=await fetch(t);return(await e.json()).paymentMethod}catch(n){return"PAYMENT_METHOD"}})(n)?(t.setHasPaymentMethod(),!0):(s&&t.setBillingApiForControlNextCalledAt(),!1)},x=({onCloseModal:e,touchpointId:t,UpFlowIFrame:n=b.a})=>{const i=Object(a.c)(),{cloudId:c}=i,l=Object(m.a)(),u=Object(f.a)(o.c,i),d=u===g.c||u===g.b,p=Object(s.useMemo)((()=>_(i.cloudId)),[i.cloudId]),w=p.getDisplaysNextAt()<(new Date).getTime(),j=p.getHasPaymentMethod(),E=h(!1),O=l&&w&&d&&!j&&"not-enrolled"!==E,x=Object(s.useCallback)((async()=>!0!==await k(E,p,c)&&((()=>{h(!0)})(),"experiment"===E)),[c,E,p]),[{started:I},{stop:C}]=v({isEligible:O,onStart:x,cloudId:c,messageId:"upflow-jira-billing-for-admins"});if(!I)return null;return r.a.createElement(n,{product:o.c,targetEdition:g.c,flow:y.f,touchpointId:t,onClose:()=>{C(),e()},subRoute:"engaged-billing",onOpen:({displaysNextAt:e})=>{p.setDisplaysNextAt(e)}})}
;x.displayName="UpflowEngagedBillingExperimentModal";var I=x;t.a=({touchpointId:e})=>{const[t,n]=Object(s.useState)(!0),l=Object(s.useCallback)((()=>{n(!1)}),[]),[u,d]=Object(s.useState)(!1),p=Object(a.c)(),{isSiteAdmin:h}=p;Object(s.useEffect)((()=>{const e=(()=>Object(c.a)().getBooleanValue("growth.experiments.engaged.upgrade.rollout.status",{default:!1,shouldTrackExposureEvent:!0}))();d(e)}),[]);const m=Object(i.a)(p),f=1===m.length&&m[0]===o.c;if(!(u&&h&&f&&t))return null;return r.a.createElement(r.a.Fragment,null,["upflow-jira-upgrade-for-admins","upflow-jira-billing-for-admins"].map((t=>{const n=(e=>"upflow-jira-upgrade-for-admins"===e?O:"upflow-jira-billing-for-admins"===e?I:null)(t);return n?r.a.createElement(n,{key:t,onCloseModal:l,touchpointId:e}):null})))}},"./src/packages/growth/up-flow/up-flow-common/src/types.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return o
})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"g",(function(){return l}));const s="experiment",r="confluence.frontend.growth.experiments.request.upgrade",i="learn-more",o="upgrade",a="request-learn-more",c="request-upgrade",l={[i]:"freeLearnMore",[o]:"freeTryNow",[a]:"freeLearnMore",[c]:"requestTrial"}},"./src/packages/growth/up-flow/up-flow-iframe/src/main.js":function(t,n,s){"use strict"
;var r=s("./node_modules/react/index.js"),i=s("./node_modules/lodash/noop.js"),o=s.n(i),a=s("./node_modules/@atlassiansox/iframe-plugin/dist/es2019/index.js"),c=s("./node_modules/query-string/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/editions/get-product-edition/index.js"),u=s("./src/packages/platform/ui/jira-experience-tracker/src/ui/experience-success/main.js"),d=s("./src/packages/platform/ui/jira-experience-tracker/src/ui/experience-fail/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),h=s("./node_modules/react-dom/index.js"),m=s.n(h),f=s("./node_modules/lodash/pick.js"),g=s.n(f),y=s("./src/packages/platform/observability/product-analytics-web-client/src/async.js"),b=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),w=s("./src/packages/platform/utils/types/src/edition.js");const v=()=>Date.now();function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){
var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=e=>new a.b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({appName:"upFlowSpa",withFullscreen:!0,modalZIndex:3200,handshakeEventTimeoutDelayMilliSeconds:5e3,readyEventTimeoutDelayMilliSeconds:1e4},e));function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}
return n}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const x=t=>{const{src:n,subRoute:s="",onClose:r,onOpen:i,onSuccess:o,onFail:c,currentEdition:l,baseUrl:u,product:d,doc:p=document,win:h=window}=t,f=((e,t)=>{if("engaged-upgrade"===e||"engaged-billing"===e)return{withBlanket:!1,withLoader:!1,modalElement:(e=>{const t=e.createElement("div");return t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.padding="0",t.style.margin="0",t.style.height="100%",t.style.width="100%",t.style.background="transparent",t.style.display="none",t.style.justifyContent="center",t.style.alignItems="center",t.style.zIndex="3200",t})(t)};return{withBlanket:!0,withLoader:!0}})(s,p),j=O(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){k(e,t,n[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({src:`${n}#/${s}`},f)),E=(e=>{const t=e.createElement("div");return t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.padding="0",t.style.margin="0",t.style.height="100%",t.style.width="100%",t.style.zIndex="3200",t})(p);return p.body&&p.body.appendChild(E),j.init({containerElement:E}),j.on(a.a.Message,(async t=>{if("INITIATE_SPA_CLOSE"===t.type)return o&&o(),t.editionChanged||t.reloadWindow?void h.location.reload():(j.cleanup(),m.a.unmountComponentAtNode(E),p.body&&p.body.removeChild(E),void r(t.flagType?g()(t,["flagType"]):void 0));"VIEWED_UPFLOW_TRIAL_ERROR_SCREEN"===t.type&&c&&c("VIEWED_UPFLOW_TRIAL_ERROR_SCREEN",new Error("Failed to start a trial")),"VIEWED_UPFLOW_TRIAL_STARTED_SCREEN"===t.type&&o&&o(),"START_EDITION_POLLING"===t.type&&await(async(t,n,s)=>{
const r=new Date(v()+6e5).getTime(),i=async(o,a)=>{v()>r&&a(new Error("TIMEOUT"));try{const e=await Object(b.b)(`${n}/rest/internal/latest/meta/edition`),r=Object(w.e)(e[s]);if(r!==t)return void o(r);setTimeout((()=>{i(o,a)}),3e3)}catch(e){setTimeout((()=>{i(o,a)}),3e3)}};return new Promise(((e,t)=>{i(e,t)}))})(l,u,d).then((e=>{j.postMessage({type:"FINISH_EDITION_POLLING",edition:e})})).catch((e=>{j.postMessage({type:"FINISH_EDITION_POLLING",error:e}),c&&c("START_EDITION_POLLING",e)})),"SPA_READY"===t.type&&(f.modalElement&&(f.modalElement.style.display="flex"),i&&i(t))})),j.on(a.a.AnalyticEvent,(async e=>{const t=Object(a.e)(e),n=await Object(y.a)();Object(a.c)(n.getInstance())(t)})),j};var I=s("./src/packages/growth/up-flow/up-flow-iframe/src/utils.js");const C=e=>{
const t=Object(p.c)(),[n,s]=Object(r.useState)(document.body?document.body.style.overflow:""),{targetEdition:i,product:a,flow:h,touchpointId:m,onClose:f,onOpen:g,subRoute:y,experienceTrackingEnabled:b=!1}=e,w=Object(l.a)(a,t),v=Object(c.stringify)({currentEdition:Object(I.a)(w),targetEdition:Object(I.a)(i),cloudId:t.cloudId,locale:t.locale,product:a,flow:h,touchpointId:m,canChangeEdition:t.isSiteAdmin}),j=Object(r.useRef)(null),E={currentEdition:w,targetEdition:i},O=Object(u.b)({experience:"upsell-edition",attributes:E}),_=Object(d.a)({experience:"upsell-edition",attributes:E});return Object(r.useEffect)((()=>{j.current||(j.current=x({src:`/gpa-up-flow/?${v}`,subRoute:y,onClose:f,onOpen:g,onSuccess:b?O:o.a,onFail:b?_:o.a,currentEdition:w,baseUrl:t.baseUrl,product:a}))}),[f,g,O,_,w,t.baseUrl,a,v,y,b]),Object(r.useEffect)((()=>{const{body:e}=document;return null!==e&&(s(e.style.overflow),e.style.overflow="hidden"),()=>{document.body&&(document.body.style.overflow=n)}}),[n]),null}
;C.displayName="UpFlowIFrame";n.a=C},"./src/packages/growth/up-flow/up-flow-iframe/src/utils.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("./src/packages/platform/utils/types/src/edition.js");const r=e=>e===s.a?"free":e===s.c?"standard":"premium"}}]);try{window.__jsEvalStop("async-up-flow-admin-modal.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-up-flow-admin-modal.48e466b79657a6a87964.8.js.map